<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 3 Model training | Multifunctional peptide engineering</title>
  <meta name="description" content="Section 3 Model training | Multifunctional peptide engineering" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 3 Model training | Multifunctional peptide engineering" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 3 Model training | Multifunctional peptide engineering" />
  
  
  

<meta name="author" content="Renee Ti Chou and Henry T. Hsueh" />


<meta name="date" content="2023-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="id_02_variable_reduction.html"/>
<link rel="next" href="id_04_model_validation_and_interpretation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.24/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<!-- https://stackoverflow.com/questions/45360998/code-folding-in-bookdown -->
<script type="text/javascript" src="js/transition.js"></script>
<script type="text/javascript" src="js/dropdown.js"></script>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><i>Multifunctional peptide engineering</i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html"><i class="fa fa-check"></i><b>1</b> Melanin binding pilot peptide array</a>
<ul>
<li class="chapter" data-level="1.1" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#generating-ml-input"><i class="fa fa-check"></i><b>1.2</b> Generating ML input</a></li>
<li class="chapter" data-level="1.3" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#training-initial-rf-model"><i class="fa fa-check"></i><b>1.3</b> Training initial RF model</a></li>
<li class="chapter" data-level="1.4" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#melanin-binding-variable-importance"><i class="fa fa-check"></i><b>1.4</b> Melanin binding variable importance</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html"><i class="fa fa-check"></i><b>2</b> Variable reduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#methods"><i class="fa fa-check"></i><b>2.1</b> Methods</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#regression"><i class="fa fa-check"></i><b>2.1.1</b> Regression</a></li>
<li class="chapter" data-level="2.1.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#classification"><i class="fa fa-check"></i><b>2.1.2</b> Classification</a>
<ul>
<li class="chapter" data-level="2.1.2.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#extension-to-multi-class-classification"><i class="fa fa-check"></i><b>2.1.2.1</b> Extension to multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#ml-input-generating-function"><i class="fa fa-check"></i><b>2.2</b> ML input generating function</a></li>
<li class="chapter" data-level="2.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#aic-functions"><i class="fa fa-check"></i><b>2.3</b> AIC functions</a></li>
<li class="chapter" data-level="2.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#melanin-binding-regression"><i class="fa fa-check"></i><b>2.4</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-1"><i class="fa fa-check"></i><b>2.4.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.4.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance"><i class="fa fa-check"></i><b>2.4.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.4.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction"><i class="fa fa-check"></i><b>2.4.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.4.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits"><i class="fa fa-check"></i><b>2.4.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#cell-penetration-classification"><i class="fa fa-check"></i><b>2.5</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-2"><i class="fa fa-check"></i><b>2.5.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.5.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance-1"><i class="fa fa-check"></i><b>2.5.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.5.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction-1"><i class="fa fa-check"></i><b>2.5.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.5.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits-1"><i class="fa fa-check"></i><b>2.5.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#toxicity-classification"><i class="fa fa-check"></i><b>2.6</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-3"><i class="fa fa-check"></i><b>2.6.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.6.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance-2"><i class="fa fa-check"></i><b>2.6.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.6.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction-2"><i class="fa fa-check"></i><b>2.6.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.6.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits-2"><i class="fa fa-check"></i><b>2.6.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#plotting"><i class="fa fa-check"></i><b>2.7</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="id_03_model_training.html"><a href="id_03_model_training.html"><i class="fa fa-check"></i><b>3</b> Model training</a>
<ul>
<li class="chapter" data-level="3.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#general-codefunctions"><i class="fa fa-check"></i><b>3.2</b> General code/functions</a></li>
<li class="chapter" data-level="3.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#melanin-binding-regression-1"><i class="fa fa-check"></i><b>3.3</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training"><i class="fa fa-check"></i><b>3.3.1</b> Model training</a></li>
<li class="chapter" data-level="3.3.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation"><i class="fa fa-check"></i><b>3.3.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.3.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set"><i class="fa fa-check"></i><b>3.3.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.3.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation"><i class="fa fa-check"></i><b>3.3.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.3.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection"><i class="fa fa-check"></i><b>3.3.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.3.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1"><i class="fa fa-check"></i><b>3.3.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.3.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2"><i class="fa fa-check"></i><b>3.3.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.3.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3"><i class="fa fa-check"></i><b>3.3.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.3.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4"><i class="fa fa-check"></i><b>3.3.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.3.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5"><i class="fa fa-check"></i><b>3.3.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.3.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6"><i class="fa fa-check"></i><b>3.3.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.3.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7"><i class="fa fa-check"></i><b>3.3.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.3.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8"><i class="fa fa-check"></i><b>3.3.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.3.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9"><i class="fa fa-check"></i><b>3.3.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.3.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10"><i class="fa fa-check"></i><b>3.3.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.3.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation"><i class="fa fa-check"></i><b>3.3.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.3.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection"><i class="fa fa-check"></i><b>3.3.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.3.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl"><i class="fa fa-check"></i><b>3.3.8</b> Final reduced SL</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cell-penetration-classification-1"><i class="fa fa-check"></i><b>3.4</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training-1"><i class="fa fa-check"></i><b>3.4.1</b> Model training</a></li>
<li class="chapter" data-level="3.4.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation-1"><i class="fa fa-check"></i><b>3.4.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.4.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set-1"><i class="fa fa-check"></i><b>3.4.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.4.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation-1"><i class="fa fa-check"></i><b>3.4.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.4.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection-1"><i class="fa fa-check"></i><b>3.4.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.4.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1-1"><i class="fa fa-check"></i><b>3.4.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.4.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2-1"><i class="fa fa-check"></i><b>3.4.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.4.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3-1"><i class="fa fa-check"></i><b>3.4.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.4.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4-1"><i class="fa fa-check"></i><b>3.4.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.4.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5-1"><i class="fa fa-check"></i><b>3.4.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.4.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6-1"><i class="fa fa-check"></i><b>3.4.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.4.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7-1"><i class="fa fa-check"></i><b>3.4.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.4.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8-1"><i class="fa fa-check"></i><b>3.4.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.4.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9-1"><i class="fa fa-check"></i><b>3.4.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.4.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10-1"><i class="fa fa-check"></i><b>3.4.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.4.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation-1"><i class="fa fa-check"></i><b>3.4.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.4.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection-1"><i class="fa fa-check"></i><b>3.4.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.4.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl-1"><i class="fa fa-check"></i><b>3.4.8</b> Final reduced SL</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#toxicity-classification-1"><i class="fa fa-check"></i><b>3.5</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training-2"><i class="fa fa-check"></i><b>3.5.1</b> Model training</a></li>
<li class="chapter" data-level="3.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation-2"><i class="fa fa-check"></i><b>3.5.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set-2"><i class="fa fa-check"></i><b>3.5.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation-2"><i class="fa fa-check"></i><b>3.5.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection-2"><i class="fa fa-check"></i><b>3.5.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.5.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1-2"><i class="fa fa-check"></i><b>3.5.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.5.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2-2"><i class="fa fa-check"></i><b>3.5.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.5.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3-2"><i class="fa fa-check"></i><b>3.5.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.5.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4-2"><i class="fa fa-check"></i><b>3.5.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.5.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5-2"><i class="fa fa-check"></i><b>3.5.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.5.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6-2"><i class="fa fa-check"></i><b>3.5.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.5.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7-2"><i class="fa fa-check"></i><b>3.5.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.5.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8-2"><i class="fa fa-check"></i><b>3.5.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.5.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9-2"><i class="fa fa-check"></i><b>3.5.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.5.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10-2"><i class="fa fa-check"></i><b>3.5.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation-2"><i class="fa fa-check"></i><b>3.5.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection-2"><i class="fa fa-check"></i><b>3.5.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl-2"><i class="fa fa-check"></i><b>3.5.8</b> Final reduced SL</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html"><i class="fa fa-check"></i><b>4</b> Model validation and interpretation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#model-validation"><i class="fa fa-check"></i><b>4.1</b> Model validation</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melaning-binding"><i class="fa fa-check"></i><b>4.1.1</b> Melaning binding</a></li>
<li class="chapter" data-level="4.1.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding-and-cell-penetration"><i class="fa fa-check"></i><b>4.1.2</b> Melanin binding and cell-penetration</a></li>
<li class="chapter" data-level="4.1.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-induced-cells"><i class="fa fa-check"></i><b>4.1.3</b> Melanin-induced cells</a></li>
<li class="chapter" data-level="4.1.4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#non-melanin-induced-cells"><i class="fa fa-check"></i><b>4.1.4</b> Non-melanin induced cells</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#overall-model-interpretation"><i class="fa fa-check"></i><b>4.2</b> Overall model interpretation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding-regression-2"><i class="fa fa-check"></i><b>4.2.1</b> Melanin binding (regression)</a></li>
<li class="chapter" data-level="4.2.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#cell-penetration-classification-2"><i class="fa fa-check"></i><b>4.2.2</b> Cell-penetration (classification)</a></li>
<li class="chapter" data-level="4.2.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#toxicity-classification-2"><i class="fa fa-check"></i><b>4.2.3</b> Toxicity (classification)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#multifunctional-peptide-selection"><i class="fa fa-check"></i><b>4.3</b> Multifunctional peptide selection</a></li>
<li class="chapter" data-level="4.4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#explanation-of-hr97-predictions"><i class="fa fa-check"></i><b>4.4</b> Explanation of HR97 predictions</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding"><i class="fa fa-check"></i><b>4.4.1</b> Melanin binding</a></li>
<li class="chapter" data-level="4.4.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#cell-penetration"><i class="fa fa-check"></i><b>4.4.2</b> Cell-penetration</a></li>
<li class="chapter" data-level="4.4.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#toxicity"><i class="fa fa-check"></i><b>4.4.3</b> Toxicity</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#peptide-design-space-visualization"><i class="fa fa-check"></i><b>4.5</b> Peptide design space visualization</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html"><i class="fa fa-check"></i><b>5</b> Adversarial computational control</a>
<ul>
<li class="chapter" data-level="5.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#general-codefunctions-1"><i class="fa fa-check"></i><b>5.1</b> General code/functions</a></li>
<li class="chapter" data-level="5.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#melanin-binding-regression-3"><i class="fa fa-check"></i><b>5.2</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-3"><i class="fa fa-check"></i><b>5.2.1</b> Model training</a></li>
<li class="chapter" data-level="5.2.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-3"><i class="fa fa-check"></i><b>5.2.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.2.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-3"><i class="fa fa-check"></i><b>5.2.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.2.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-3"><i class="fa fa-check"></i><b>5.2.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.2.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-3"><i class="fa fa-check"></i><b>5.2.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.2.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-3"><i class="fa fa-check"></i><b>5.2.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.2.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-3"><i class="fa fa-check"></i><b>5.2.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.2.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-3"><i class="fa fa-check"></i><b>5.2.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.2.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-3"><i class="fa fa-check"></i><b>5.2.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.2.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-3"><i class="fa fa-check"></i><b>5.2.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.2.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-3"><i class="fa fa-check"></i><b>5.2.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.2.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-3"><i class="fa fa-check"></i><b>5.2.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.2.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-3"><i class="fa fa-check"></i><b>5.2.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.2.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-3"><i class="fa fa-check"></i><b>5.2.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.2.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-3"><i class="fa fa-check"></i><b>5.2.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cell-penetration-classification-3"><i class="fa fa-check"></i><b>5.3</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-4"><i class="fa fa-check"></i><b>5.3.1</b> Model training</a></li>
<li class="chapter" data-level="5.3.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-4"><i class="fa fa-check"></i><b>5.3.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.3.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-4"><i class="fa fa-check"></i><b>5.3.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.3.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-4"><i class="fa fa-check"></i><b>5.3.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.3.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-4"><i class="fa fa-check"></i><b>5.3.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.3.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-4"><i class="fa fa-check"></i><b>5.3.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.3.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-4"><i class="fa fa-check"></i><b>5.3.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.3.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-4"><i class="fa fa-check"></i><b>5.3.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.3.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-4"><i class="fa fa-check"></i><b>5.3.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.3.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-4"><i class="fa fa-check"></i><b>5.3.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.3.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-4"><i class="fa fa-check"></i><b>5.3.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.3.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-4"><i class="fa fa-check"></i><b>5.3.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.3.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-4"><i class="fa fa-check"></i><b>5.3.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.3.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-4"><i class="fa fa-check"></i><b>5.3.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.3.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-4"><i class="fa fa-check"></i><b>5.3.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#toxicity-classification-3"><i class="fa fa-check"></i><b>5.4</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-5"><i class="fa fa-check"></i><b>5.4.1</b> Model training</a></li>
<li class="chapter" data-level="5.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-5"><i class="fa fa-check"></i><b>5.4.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-5"><i class="fa fa-check"></i><b>5.4.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-5"><i class="fa fa-check"></i><b>5.4.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.4.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-5"><i class="fa fa-check"></i><b>5.4.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.4.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-5"><i class="fa fa-check"></i><b>5.4.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.4.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-5"><i class="fa fa-check"></i><b>5.4.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.4.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-5"><i class="fa fa-check"></i><b>5.4.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.4.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-5"><i class="fa fa-check"></i><b>5.4.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.4.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-5"><i class="fa fa-check"></i><b>5.4.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.4.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-5"><i class="fa fa-check"></i><b>5.4.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.4.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-5"><i class="fa fa-check"></i><b>5.4.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.4.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-5"><i class="fa fa-check"></i><b>5.4.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.4.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-5"><i class="fa fa-check"></i><b>5.4.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-5"><i class="fa fa-check"></i><b>5.4.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#overall-model-interpretation-1"><i class="fa fa-check"></i><b>5.5</b> Overall model interpretation</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#melanin-binding-regression-4"><i class="fa fa-check"></i><b>5.5.1</b> Melanin binding (regression)</a></li>
<li class="chapter" data-level="5.5.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cell-penetration-classification-4"><i class="fa fa-check"></i><b>5.5.2</b> Cell-penetration (classification)</a></li>
<li class="chapter" data-level="5.5.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#toxicity-classification-4"><i class="fa fa-check"></i><b>5.5.3</b> Toxicity (classification)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html"><i class="fa fa-check"></i><b>6</b> Small data set demo</a>
<ul>
<li class="chapter" data-level="6.1" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#setup"><i class="fa fa-check"></i><b>6.1</b> Setup</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#load-libraries"><i class="fa fa-check"></i><b>6.1.1</b> Load libraries</a></li>
<li class="chapter" data-level="6.1.2" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#aic-functions-1"><i class="fa fa-check"></i><b>6.1.2</b> AIC functions</a></li>
<li class="chapter" data-level="6.1.3" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#model-parameters"><i class="fa fa-check"></i><b>6.1.3</b> Model parameters</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#variable-reduction-3"><i class="fa fa-check"></i><b>6.2</b> Variable reduction</a></li>
<li class="chapter" data-level="6.3" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#model-training-6"><i class="fa fa-check"></i><b>6.3</b> Model training</a></li>
<li class="chapter" data-level="6.4" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#run-pipeline"><i class="fa fa-check"></i><b>6.4</b> Run pipeline</a></li>
<li class="chapter" data-level="6.5" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#session-info"><i class="fa fa-check"></i><b>6.5</b> Session info</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multifunctional peptide engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="id_03_model_training" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Section 3</span> Model training<a href="id_03_model_training.html#id_03_model_training" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb33"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb33-1"><a href="id_03_model_training.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(h2o)</span>
<span id="cb33-2"><a href="id_03_model_training.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MLmetrics)</span>
<span id="cb33-3"><a href="id_03_model_training.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mltools)</span>
<span id="cb33-4"><a href="id_03_model_training.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb33-5"><a href="id_03_model_training.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(enrichvs)</span>
<span id="cb33-6"><a href="id_03_model_training.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlist)</span>
<span id="cb33-7"><a href="id_03_model_training.html#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb33-8"><a href="id_03_model_training.html#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(digest)</span>
<span id="cb33-9"><a href="id_03_model_training.html#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb33-10"><a href="id_03_model_training.html#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span></code></pre></div>
<div id="overview-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Overview<a href="id_03_model_training.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="figures/nested_cross_validation.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="general-codefunctions" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> General code/functions<a href="id_03_model_training.html#general-codefunctions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb34-1"><a href="id_03_model_training.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># h2o.init(nthreads=-1, max_mem_size=&#39;100G&#39;, port=54321)</span></span>
<span id="cb34-2"><a href="id_03_model_training.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.init</span>(<span class="at">nthreads =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb34-3"><a href="id_03_model_training.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.removeAll</span>()</span>
<span id="cb34-4"><a href="id_03_model_training.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 1</span></span>
<span id="cb34-5"><a href="id_03_model_training.html#cb34-5" aria-hidden="true" tabindex="-1"></a>deeplearning_params_1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb34-6"><a href="id_03_model_training.html#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb34-7"><a href="id_03_model_training.html#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb34-8"><a href="id_03_model_training.html#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb34-9"><a href="id_03_model_training.html#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>)),</span>
<span id="cb34-10"><a href="id_03_model_training.html#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>), <span class="fu">c</span>(<span class="fl">0.3</span>), <span class="fu">c</span>(<span class="fl">0.4</span>), <span class="fu">c</span>(<span class="fl">0.5</span>)),</span>
<span id="cb34-11"><a href="id_03_model_training.html#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb34-12"><a href="id_03_model_training.html#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb34-13"><a href="id_03_model_training.html#cb34-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-14"><a href="id_03_model_training.html#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 2</span></span>
<span id="cb34-15"><a href="id_03_model_training.html#cb34-15" aria-hidden="true" tabindex="-1"></a>deeplearning_params_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb34-16"><a href="id_03_model_training.html#cb34-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb34-17"><a href="id_03_model_training.html#cb34-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb34-18"><a href="id_03_model_training.html#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb34-19"><a href="id_03_model_training.html#cb34-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb34-20"><a href="id_03_model_training.html#cb34-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(</span>
<span id="cb34-21"><a href="id_03_model_training.html#cb34-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>), <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.3</span>),</span>
<span id="cb34-22"><a href="id_03_model_training.html#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>), <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)</span>
<span id="cb34-23"><a href="id_03_model_training.html#cb34-23" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb34-24"><a href="id_03_model_training.html#cb34-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb34-25"><a href="id_03_model_training.html#cb34-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb34-26"><a href="id_03_model_training.html#cb34-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-27"><a href="id_03_model_training.html#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 3</span></span>
<span id="cb34-28"><a href="id_03_model_training.html#cb34-28" aria-hidden="true" tabindex="-1"></a>deeplearning_params_3 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb34-29"><a href="id_03_model_training.html#cb34-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb34-30"><a href="id_03_model_training.html#cb34-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb34-31"><a href="id_03_model_training.html#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb34-32"><a href="id_03_model_training.html#cb34-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">200</span>, <span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb34-33"><a href="id_03_model_training.html#cb34-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(</span>
<span id="cb34-34"><a href="id_03_model_training.html#cb34-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>),</span>
<span id="cb34-35"><a href="id_03_model_training.html#cb34-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>), <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span>),</span>
<span id="cb34-36"><a href="id_03_model_training.html#cb34-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>)</span>
<span id="cb34-37"><a href="id_03_model_training.html#cb34-37" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb34-38"><a href="id_03_model_training.html#cb34-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb34-39"><a href="id_03_model_training.html#cb34-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb34-40"><a href="id_03_model_training.html#cb34-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-41"><a href="id_03_model_training.html#cb34-41" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM</span></span>
<span id="cb34-42"><a href="id_03_model_training.html#cb34-42" aria-hidden="true" tabindex="-1"></a>gbm_params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb34-43"><a href="id_03_model_training.html#cb34-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.7</span>, <span class="fl">1.0</span>),</span>
<span id="cb34-44"><a href="id_03_model_training.html#cb34-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate_per_tree =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.7</span>, <span class="fl">1.0</span>),</span>
<span id="cb34-45"><a href="id_03_model_training.html#cb34-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb34-46"><a href="id_03_model_training.html#cb34-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>),</span>
<span id="cb34-47"><a href="id_03_model_training.html#cb34-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_rows =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">100</span>),</span>
<span id="cb34-48"><a href="id_03_model_training.html#cb34-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_split_improvement =</span> <span class="fu">c</span>(<span class="fl">1e-4</span>, <span class="fl">1e-5</span>),</span>
<span id="cb34-49"><a href="id_03_model_training.html#cb34-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb34-50"><a href="id_03_model_training.html#cb34-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1.0</span>)</span>
<span id="cb34-51"><a href="id_03_model_training.html#cb34-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-52"><a href="id_03_model_training.html#cb34-52" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost</span></span>
<span id="cb34-53"><a href="id_03_model_training.html#cb34-53" aria-hidden="true" tabindex="-1"></a>xgboost_params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb34-54"><a href="id_03_model_training.html#cb34-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">booster =</span> <span class="fu">c</span>(<span class="st">&quot;gbtree&quot;</span>, <span class="st">&quot;dart&quot;</span>),</span>
<span id="cb34-55"><a href="id_03_model_training.html#cb34-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb34-56"><a href="id_03_model_training.html#cb34-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate_per_tree =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1.0</span>),</span>
<span id="cb34-57"><a href="id_03_model_training.html#cb34-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>),</span>
<span id="cb34-58"><a href="id_03_model_training.html#cb34-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_rows =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1.0</span>, <span class="fl">3.0</span>, <span class="fl">5.0</span>, <span class="fl">10.0</span>, <span class="fl">15.0</span>, <span class="fl">20.0</span>),</span>
<span id="cb34-59"><a href="id_03_model_training.html#cb34-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb34-60"><a href="id_03_model_training.html#cb34-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">reg_alpha =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>),</span>
<span id="cb34-61"><a href="id_03_model_training.html#cb34-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">reg_lambda =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="dv">1</span>),</span>
<span id="cb34-62"><a href="id_03_model_training.html#cb34-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>)</span>
<span id="cb34-63"><a href="id_03_model_training.html#cb34-63" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb35-1"><a href="id_03_model_training.html#cb35-1" aria-hidden="true" tabindex="-1"></a>balanced_accuracy <span class="ot">&lt;-</span> <span class="cf">function</span>(y_pred, y_true) {</span>
<span id="cb35-2"><a href="id_03_model_training.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="fu">Sensitivity</span>(y_pred, y_true), <span class="fu">Specificity</span>(y_pred, y_true)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb35-3"><a href="id_03_model_training.html#cb35-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-4"><a href="id_03_model_training.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="id_03_model_training.html#cb35-5" aria-hidden="true" tabindex="-1"></a>sem <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="fu">sd</span>(x, na.rm) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">length</span>(<span class="fu">na.omit</span>(x)))</span>
<span id="cb35-6"><a href="id_03_model_training.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="id_03_model_training.html#cb35-7" aria-hidden="true" tabindex="-1"></a>statistical_testing <span class="ot">&lt;-</span> <span class="cf">function</span>(data, metric_vec, decreasing_vec, <span class="at">p_value_threshold =</span> <span class="fl">0.05</span>, <span class="at">num_entries =</span> <span class="dv">10</span>,</span>
<span id="cb35-8"><a href="id_03_model_training.html#cb35-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">output_path =</span> <span class="cn">NULL</span>) {</span>
<span id="cb35-9"><a href="id_03_model_training.html#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(metric_vec)) {</span>
<span id="cb35-10"><a href="id_03_model_training.html#cb35-10" aria-hidden="true" tabindex="-1"></a>    metric <span class="ot">&lt;-</span> metric_vec[i]</span>
<span id="cb35-11"><a href="id_03_model_training.html#cb35-11" aria-hidden="true" tabindex="-1"></a>    ranked_models <span class="ot">&lt;-</span> <span class="fu">rownames</span>(data[<span class="fu">order</span>(data[, <span class="fu">paste</span>(metric, <span class="st">&quot;mean&quot;</span>)], <span class="at">decreasing =</span> decreasing_vec[i]), ])</span>
<span id="cb35-12"><a href="id_03_model_training.html#cb35-12" aria-hidden="true" tabindex="-1"></a>    pval <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb35-13"><a href="id_03_model_training.html#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(ranked_models)) {</span>
<span id="cb35-14"><a href="id_03_model_training.html#cb35-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">sum</span>(<span class="fu">is.na</span>(data[ranked_models[j], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]))) {</span>
<span id="cb35-15"><a href="id_03_model_training.html#cb35-15" aria-hidden="true" tabindex="-1"></a>        pval <span class="ot">&lt;-</span> <span class="fu">c</span>(pval, <span class="cn">NA</span>)</span>
<span id="cb35-16"><a href="id_03_model_training.html#cb35-16" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb35-17"><a href="id_03_model_training.html#cb35-17" aria-hidden="true" tabindex="-1"></a>        pval <span class="ot">&lt;-</span> <span class="fu">c</span>(pval, <span class="fu">wilcox.test</span>(<span class="fu">as.numeric</span>(data[ranked_models[<span class="dv">1</span>], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]),</span>
<span id="cb35-18"><a href="id_03_model_training.html#cb35-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">as.numeric</span>(data[ranked_models[j], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]),</span>
<span id="cb35-19"><a href="id_03_model_training.html#cb35-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">exact =</span> <span class="cn">FALSE</span></span>
<span id="cb35-20"><a href="id_03_model_training.html#cb35-20" aria-hidden="true" tabindex="-1"></a>        )<span class="sc">$</span>p.value)</span>
<span id="cb35-21"><a href="id_03_model_training.html#cb35-21" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb35-22"><a href="id_03_model_training.html#cb35-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-23"><a href="id_03_model_training.html#cb35-23" aria-hidden="true" tabindex="-1"></a>    adj_pval <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">p.adjust</span>(pval, <span class="at">method =</span> <span class="st">&quot;BH&quot;</span>, <span class="at">n =</span> <span class="fu">length</span>(pval)))</span>
<span id="cb35-24"><a href="id_03_model_training.html#cb35-24" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(adj_pval)</span>
<span id="cb35-25"><a href="id_03_model_training.html#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> ranked_models</span>
<span id="cb35-26"><a href="id_03_model_training.html#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">paste</span>(metric, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>)</span>
<span id="cb35-27"><a href="id_03_model_training.html#cb35-27" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">merge</span>(data, df, <span class="at">by =</span> <span class="st">&quot;row.names&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-28"><a href="id_03_model_training.html#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(data) <span class="ot">&lt;-</span> data<span class="sc">$</span>Row.names</span>
<span id="cb35-29"><a href="id_03_model_training.html#cb35-29" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>Row.names <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb35-30"><a href="id_03_model_training.html#cb35-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-31"><a href="id_03_model_training.html#cb35-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(metric_vec)) {</span>
<span id="cb35-32"><a href="id_03_model_training.html#cb35-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (decreasing_vec[i]) {</span>
<span id="cb35-33"><a href="id_03_model_training.html#cb35-33" aria-hidden="true" tabindex="-1"></a>      data[<span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;rank&quot;</span>)] <span class="ot">&lt;-</span> <span class="fu">rank</span>(<span class="sc">-</span>data[, <span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;mean&quot;</span>)], <span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb35-34"><a href="id_03_model_training.html#cb35-34" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb35-35"><a href="id_03_model_training.html#cb35-35" aria-hidden="true" tabindex="-1"></a>      data[<span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;rank&quot;</span>)] <span class="ot">&lt;-</span> <span class="fu">rank</span>(data[, <span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;mean&quot;</span>)], <span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb35-36"><a href="id_03_model_training.html#cb35-36" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-37"><a href="id_03_model_training.html#cb35-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-38"><a href="id_03_model_training.html#cb35-38" aria-hidden="true" tabindex="-1"></a>  data[<span class="st">&quot;Rank sum&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[(<span class="fu">ncol</span>(data) <span class="sc">-</span> <span class="fu">length</span>(metric_vec) <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">ncol</span>(data)])</span>
<span id="cb35-39"><a href="id_03_model_training.html#cb35-39" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[<span class="fu">order</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Rank sum</span><span class="st">`</span>), ]</span>
<span id="cb35-40"><a href="id_03_model_training.html#cb35-40" aria-hidden="true" tabindex="-1"></a>  competitive <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[<span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>)] <span class="sc">&lt;</span> p_value_threshold) <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb35-41"><a href="id_03_model_training.html#cb35-41" aria-hidden="true" tabindex="-1"></a>  competitive[<span class="fu">is.na</span>(competitive)] <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb35-42"><a href="id_03_model_training.html#cb35-42" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[competitive, ]</span>
<span id="cb35-43"><a href="id_03_model_training.html#cb35-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(output_path)) {</span>
<span id="cb35-44"><a href="id_03_model_training.html#cb35-44" aria-hidden="true" tabindex="-1"></a>    data[<span class="fu">c</span>(</span>
<span id="cb35-45"><a href="id_03_model_training.html#cb35-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>), <span class="fu">paste</span>(metric_vec, <span class="st">&quot;rank&quot;</span>), <span class="st">&quot;Rank sum&quot;</span>,</span>
<span id="cb35-46"><a href="id_03_model_training.html#cb35-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">melt</span>(<span class="fu">sapply</span>(metric_vec, <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;s.e.m.&quot;</span>))))<span class="sc">$</span>value</span>
<span id="cb35-47"><a href="id_03_model_training.html#cb35-47" aria-hidden="true" tabindex="-1"></a>    )] <span class="sc">%&gt;%</span></span>
<span id="cb35-48"><a href="id_03_model_training.html#cb35-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-49"><a href="id_03_model_training.html#cb35-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write.csv</span>(., <span class="at">file =</span> output_path)</span>
<span id="cb35-50"><a href="id_03_model_training.html#cb35-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-51"><a href="id_03_model_training.html#cb35-51" aria-hidden="true" tabindex="-1"></a>  data[<span class="fu">c</span>(<span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>), <span class="fu">paste</span>(metric_vec, <span class="st">&quot;rank&quot;</span>), <span class="st">&quot;Rank sum&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb35-52"><a href="id_03_model_training.html#cb35-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-53"><a href="id_03_model_training.html#cb35-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> num_entries), <span class="at">escape =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-54"><a href="id_03_model_training.html#cb35-54" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="melanin-binding-regression-1" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Melanin binding (regression)<a href="id_03_model_training.html#melanin-binding-regression-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="model-training" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Model training<a href="id_03_model_training.html#model-training" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb36-1"><a href="id_03_model_training.html#cb36-1" aria-hidden="true" tabindex="-1"></a>train_mb_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb36-2"><a href="id_03_model_training.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb36-3"><a href="id_03_model_training.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;log_intensity&quot;</span></span>
<span id="cb36-4"><a href="id_03_model_training.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb36-5"><a href="id_03_model_training.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>log_intensity)</span>
<span id="cb36-6"><a href="id_03_model_training.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb36-7"><a href="id_03_model_training.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb36-8"><a href="id_03_model_training.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb36-9"><a href="id_03_model_training.html#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-10"><a href="id_03_model_training.html#cb36-10" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb36-11"><a href="id_03_model_training.html#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-12"><a href="id_03_model_training.html#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb36-13"><a href="id_03_model_training.html#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-14"><a href="id_03_model_training.html#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb36-15"><a href="id_03_model_training.html#cb36-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb36-16"><a href="id_03_model_training.html#cb36-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb36-17"><a href="id_03_model_training.html#cb36-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb36-18"><a href="id_03_model_training.html#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb36-19"><a href="id_03_model_training.html#cb36-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-20"><a href="id_03_model_training.html#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb36-21"><a href="id_03_model_training.html#cb36-21" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-22"><a href="id_03_model_training.html#cb36-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-23"><a href="id_03_model_training.html#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 2</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-24"><a href="id_03_model_training.html#cb36-24" aria-hidden="true" tabindex="-1"></a>  deeplearning_2 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb36-25"><a href="id_03_model_training.html#cb36-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-26"><a href="id_03_model_training.html#cb36-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_2,</span>
<span id="cb36-27"><a href="id_03_model_training.html#cb36-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-28"><a href="id_03_model_training.html#cb36-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb36-29"><a href="id_03_model_training.html#cb36-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb36-30"><a href="id_03_model_training.html#cb36-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb36-31"><a href="id_03_model_training.html#cb36-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb36-32"><a href="id_03_model_training.html#cb36-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb36-33"><a href="id_03_model_training.html#cb36-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-34"><a href="id_03_model_training.html#cb36-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_2<span class="sc">@</span>model_ids) {</span>
<span id="cb36-35"><a href="id_03_model_training.html#cb36-35" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-36"><a href="id_03_model_training.html#cb36-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-37"><a href="id_03_model_training.html#cb36-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 3</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-38"><a href="id_03_model_training.html#cb36-38" aria-hidden="true" tabindex="-1"></a>  deeplearning_3 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb36-39"><a href="id_03_model_training.html#cb36-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-40"><a href="id_03_model_training.html#cb36-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_3,</span>
<span id="cb36-41"><a href="id_03_model_training.html#cb36-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-42"><a href="id_03_model_training.html#cb36-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb36-43"><a href="id_03_model_training.html#cb36-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb36-44"><a href="id_03_model_training.html#cb36-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb36-45"><a href="id_03_model_training.html#cb36-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb36-46"><a href="id_03_model_training.html#cb36-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb36-47"><a href="id_03_model_training.html#cb36-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-48"><a href="id_03_model_training.html#cb36-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_3<span class="sc">@</span>model_ids) {</span>
<span id="cb36-49"><a href="id_03_model_training.html#cb36-49" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-50"><a href="id_03_model_training.html#cb36-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-51"><a href="id_03_model_training.html#cb36-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-52"><a href="id_03_model_training.html#cb36-52" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb36-53"><a href="id_03_model_training.html#cb36-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-54"><a href="id_03_model_training.html#cb36-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb36-55"><a href="id_03_model_training.html#cb36-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">300</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb36-56"><a href="id_03_model_training.html#cb36-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb36-57"><a href="id_03_model_training.html#cb36-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-58"><a href="id_03_model_training.html#cb36-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb36-59"><a href="id_03_model_training.html#cb36-59" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-60"><a href="id_03_model_training.html#cb36-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-61"><a href="id_03_model_training.html#cb36-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-62"><a href="id_03_model_training.html#cb36-62" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb36-63"><a href="id_03_model_training.html#cb36-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-64"><a href="id_03_model_training.html#cb36-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-65"><a href="id_03_model_training.html#cb36-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb36-66"><a href="id_03_model_training.html#cb36-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-67"><a href="id_03_model_training.html#cb36-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-68"><a href="id_03_model_training.html#cb36-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-69"><a href="id_03_model_training.html#cb36-69" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb36-70"><a href="id_03_model_training.html#cb36-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-71"><a href="id_03_model_training.html#cb36-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-72"><a href="id_03_model_training.html#cb36-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb36-73"><a href="id_03_model_training.html#cb36-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-74"><a href="id_03_model_training.html#cb36-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-75"><a href="id_03_model_training.html#cb36-75" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-76"><a href="id_03_model_training.html#cb36-76" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb36-77"><a href="id_03_model_training.html#cb36-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-78"><a href="id_03_model_training.html#cb36-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-79"><a href="id_03_model_training.html#cb36-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb36-80"><a href="id_03_model_training.html#cb36-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-81"><a href="id_03_model_training.html#cb36-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-82"><a href="id_03_model_training.html#cb36-82" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-83"><a href="id_03_model_training.html#cb36-83" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb36-84"><a href="id_03_model_training.html#cb36-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-85"><a href="id_03_model_training.html#cb36-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-86"><a href="id_03_model_training.html#cb36-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb36-87"><a href="id_03_model_training.html#cb36-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-88"><a href="id_03_model_training.html#cb36-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-89"><a href="id_03_model_training.html#cb36-89" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-90"><a href="id_03_model_training.html#cb36-90" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb36-91"><a href="id_03_model_training.html#cb36-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-92"><a href="id_03_model_training.html#cb36-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-93"><a href="id_03_model_training.html#cb36-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb36-94"><a href="id_03_model_training.html#cb36-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-95"><a href="id_03_model_training.html#cb36-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-96"><a href="id_03_model_training.html#cb36-96" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-97"><a href="id_03_model_training.html#cb36-97" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb36-98"><a href="id_03_model_training.html#cb36-98" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-99"><a href="id_03_model_training.html#cb36-99" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-100"><a href="id_03_model_training.html#cb36-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-101"><a href="id_03_model_training.html#cb36-101" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb36-102"><a href="id_03_model_training.html#cb36-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-103"><a href="id_03_model_training.html#cb36-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb36-104"><a href="id_03_model_training.html#cb36-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">300</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb36-105"><a href="id_03_model_training.html#cb36-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb36-106"><a href="id_03_model_training.html#cb36-106" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-107"><a href="id_03_model_training.html#cb36-107" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb36-108"><a href="id_03_model_training.html#cb36-108" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-109"><a href="id_03_model_training.html#cb36-109" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-110"><a href="id_03_model_training.html#cb36-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-111"><a href="id_03_model_training.html#cb36-111" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb36-112"><a href="id_03_model_training.html#cb36-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-113"><a href="id_03_model_training.html#cb36-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-114"><a href="id_03_model_training.html#cb36-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-115"><a href="id_03_model_training.html#cb36-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb36-116"><a href="id_03_model_training.html#cb36-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-117"><a href="id_03_model_training.html#cb36-117" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-118"><a href="id_03_model_training.html#cb36-118" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb36-119"><a href="id_03_model_training.html#cb36-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-120"><a href="id_03_model_training.html#cb36-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-121"><a href="id_03_model_training.html#cb36-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-122"><a href="id_03_model_training.html#cb36-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb36-123"><a href="id_03_model_training.html#cb36-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-124"><a href="id_03_model_training.html#cb36-124" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-125"><a href="id_03_model_training.html#cb36-125" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb36-126"><a href="id_03_model_training.html#cb36-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-127"><a href="id_03_model_training.html#cb36-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb36-128"><a href="id_03_model_training.html#cb36-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb36-129"><a href="id_03_model_training.html#cb36-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb36-130"><a href="id_03_model_training.html#cb36-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-131"><a href="id_03_model_training.html#cb36-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-132"><a href="id_03_model_training.html#cb36-132" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb36-133"><a href="id_03_model_training.html#cb36-133" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-134"><a href="id_03_model_training.html#cb36-134" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-135"><a href="id_03_model_training.html#cb36-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GLM</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-136"><a href="id_03_model_training.html#cb36-136" aria-hidden="true" tabindex="-1"></a>  glm <span class="ot">&lt;-</span> <span class="fu">h2o.glm</span>(</span>
<span id="cb36-137"><a href="id_03_model_training.html#cb36-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GLM&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-138"><a href="id_03_model_training.html#cb36-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">alpha =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb36-139"><a href="id_03_model_training.html#cb36-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-140"><a href="id_03_model_training.html#cb36-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-141"><a href="id_03_model_training.html#cb36-141" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;GLM&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-142"><a href="id_03_model_training.html#cb36-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-143"><a href="id_03_model_training.html#cb36-143" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb36-144"><a href="id_03_model_training.html#cb36-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-145"><a href="id_03_model_training.html#cb36-145" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb36-146"><a href="id_03_model_training.html#cb36-146" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb36-147"><a href="id_03_model_training.html#cb36-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-148"><a href="id_03_model_training.html#cb36-148" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-149"><a href="id_03_model_training.html#cb36-149" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-150"><a href="id_03_model_training.html#cb36-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-151"><a href="id_03_model_training.html#cb36-151" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb36-152"><a href="id_03_model_training.html#cb36-152" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb36-153"><a href="id_03_model_training.html#cb36-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb36-154"><a href="id_03_model_training.html#cb36-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb36-155"><a href="id_03_model_training.html#cb36-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb36-156"><a href="id_03_model_training.html#cb36-156" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-157"><a href="id_03_model_training.html#cb36-157" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-158"><a href="id_03_model_training.html#cb36-158" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb36-159"><a href="id_03_model_training.html#cb36-159" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb36-160"><a href="id_03_model_training.html#cb36-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb36-161"><a href="id_03_model_training.html#cb36-161" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb36-162"><a href="id_03_model_training.html#cb36-162" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb36-163"><a href="id_03_model_training.html#cb36-163" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_2<span class="sc">@</span>model_ids),</span>
<span id="cb36-164"><a href="id_03_model_training.html#cb36-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_3<span class="sc">@</span>model_ids),</span>
<span id="cb36-165"><a href="id_03_model_training.html#cb36-165" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb36-166"><a href="id_03_model_training.html#cb36-166" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb36-167"><a href="id_03_model_training.html#cb36-167" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;GLM&quot;</span>,</span>
<span id="cb36-168"><a href="id_03_model_training.html#cb36-168" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb36-169"><a href="id_03_model_training.html#cb36-169" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb36-170"><a href="id_03_model_training.html#cb36-170" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-171"><a href="id_03_model_training.html#cb36-171" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb36-172"><a href="id_03_model_training.html#cb36-172" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-173"><a href="id_03_model_training.html#cb36-173" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb36-174"><a href="id_03_model_training.html#cb36-174" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb36-175"><a href="id_03_model_training.html#cb36-175" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-176"><a href="id_03_model_training.html#cb36-176" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb36-177"><a href="id_03_model_training.html#cb36-177" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb36-178"><a href="id_03_model_training.html#cb36-178" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb36-179"><a href="id_03_model_training.html#cb36-179" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb36-180"><a href="id_03_model_training.html#cb36-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb36-181"><a href="id_03_model_training.html#cb36-181" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb36-182"><a href="id_03_model_training.html#cb36-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb36-183"><a href="id_03_model_training.html#cb36-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb36-184"><a href="id_03_model_training.html#cb36-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb36-185"><a href="id_03_model_training.html#cb36-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb36-186"><a href="id_03_model_training.html#cb36-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb36-187"><a href="id_03_model_training.html#cb36-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-188"><a href="id_03_model_training.html#cb36-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-189"><a href="id_03_model_training.html#cb36-189" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-190"><a href="id_03_model_training.html#cb36-190" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-191"><a href="id_03_model_training.html#cb36-191" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb36-192"><a href="id_03_model_training.html#cb36-192" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-193"><a href="id_03_model_training.html#cb36-193" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-194"><a href="id_03_model_training.html#cb36-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb36-195"><a href="id_03_model_training.html#cb36-195" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-196"><a href="id_03_model_training.html#cb36-196" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb36-197"><a href="id_03_model_training.html#cb36-197" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb36-198"><a href="id_03_model_training.html#cb36-198" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb36-199"><a href="id_03_model_training.html#cb36-199" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb36-200"><a href="id_03_model_training.html#cb36-200" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb36-201"><a href="id_03_model_training.html#cb36-201" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb36-202"><a href="id_03_model_training.html#cb36-202" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb36-203"><a href="id_03_model_training.html#cb36-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb36-204"><a href="id_03_model_training.html#cb36-204" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb36-205"><a href="id_03_model_training.html#cb36-205" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb36-206"><a href="id_03_model_training.html#cb36-206" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb36-207"><a href="id_03_model_training.html#cb36-207" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb36-208"><a href="id_03_model_training.html#cb36-208" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb36-209"><a href="id_03_model_training.html#cb36-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb36-210"><a href="id_03_model_training.html#cb36-210" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-211"><a href="id_03_model_training.html#cb36-211" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb36-212"><a href="id_03_model_training.html#cb36-212" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb36-213"><a href="id_03_model_training.html#cb36-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb36-214"><a href="id_03_model_training.html#cb36-214" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-215"><a href="id_03_model_training.html#cb36-215" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb36-216"><a href="id_03_model_training.html#cb36-216" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb36-217"><a href="id_03_model_training.html#cb36-217" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb36-218"><a href="id_03_model_training.html#cb36-218" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb36-219"><a href="id_03_model_training.html#cb36-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb36-220"><a href="id_03_model_training.html#cb36-220" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb36-221"><a href="id_03_model_training.html#cb36-221" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb36-222"><a href="id_03_model_training.html#cb36-222" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb36-223"><a href="id_03_model_training.html#cb36-223" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb36-224"><a href="id_03_model_training.html#cb36-224" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb36-225"><a href="id_03_model_training.html#cb36-225" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb36-226"><a href="id_03_model_training.html#cb36-226" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-227"><a href="id_03_model_training.html#cb36-227" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-228"><a href="id_03_model_training.html#cb36-228" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-229"><a href="id_03_model_training.html#cb36-229" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-230"><a href="id_03_model_training.html#cb36-230" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb36-231"><a href="id_03_model_training.html#cb36-231" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-232"><a href="id_03_model_training.html#cb36-232" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-233"><a href="id_03_model_training.html#cb36-233" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb36-234"><a href="id_03_model_training.html#cb36-234" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb36-235"><a href="id_03_model_training.html#cb36-235" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-236"><a href="id_03_model_training.html#cb36-236" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb36-237"><a href="id_03_model_training.html#cb36-237" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb36-238"><a href="id_03_model_training.html#cb36-238" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb36-239"><a href="id_03_model_training.html#cb36-239" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb36-240"><a href="id_03_model_training.html#cb36-240" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb36-241"><a href="id_03_model_training.html#cb36-241" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb36-242"><a href="id_03_model_training.html#cb36-242" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_2<span class="sc">@</span>model_ids),</span>
<span id="cb36-243"><a href="id_03_model_training.html#cb36-243" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_3<span class="sc">@</span>model_ids)</span>
<span id="cb36-244"><a href="id_03_model_training.html#cb36-244" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-245"><a href="id_03_model_training.html#cb36-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb36-246"><a href="id_03_model_training.html#cb36-246" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb36-247"><a href="id_03_model_training.html#cb36-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb36-248"><a href="id_03_model_training.html#cb36-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb36-249"><a href="id_03_model_training.html#cb36-249" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb36-250"><a href="id_03_model_training.html#cb36-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb36-251"><a href="id_03_model_training.html#cb36-251" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb36-252"><a href="id_03_model_training.html#cb36-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-253"><a href="id_03_model_training.html#cb36-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-254"><a href="id_03_model_training.html#cb36-254" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-255"><a href="id_03_model_training.html#cb36-255" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-256"><a href="id_03_model_training.html#cb36-256" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb36-257"><a href="id_03_model_training.html#cb36-257" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-258"><a href="id_03_model_training.html#cb36-258" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-259"><a href="id_03_model_training.html#cb36-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb36-260"><a href="id_03_model_training.html#cb36-260" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-261"><a href="id_03_model_training.html#cb36-261" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb36-262"><a href="id_03_model_training.html#cb36-262" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb36-263"><a href="id_03_model_training.html#cb36-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb36-264"><a href="id_03_model_training.html#cb36-264" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb36-265"><a href="id_03_model_training.html#cb36-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb36-266"><a href="id_03_model_training.html#cb36-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb36-267"><a href="id_03_model_training.html#cb36-267" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb36-268"><a href="id_03_model_training.html#cb36-268" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb36-269"><a href="id_03_model_training.html#cb36-269" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb36-270"><a href="id_03_model_training.html#cb36-270" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-271"><a href="id_03_model_training.html#cb36-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-272"><a href="id_03_model_training.html#cb36-272" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-273"><a href="id_03_model_training.html#cb36-273" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-274"><a href="id_03_model_training.html#cb36-274" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb36-275"><a href="id_03_model_training.html#cb36-275" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-276"><a href="id_03_model_training.html#cb36-276" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-277"><a href="id_03_model_training.html#cb36-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb36-278"><a href="id_03_model_training.html#cb36-278" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-279"><a href="id_03_model_training.html#cb36-279" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb36-280"><a href="id_03_model_training.html#cb36-280" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb36-281"><a href="id_03_model_training.html#cb36-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb36-282"><a href="id_03_model_training.html#cb36-282" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb36-283"><a href="id_03_model_training.html#cb36-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb36-284"><a href="id_03_model_training.html#cb36-284" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb36-285"><a href="id_03_model_training.html#cb36-285" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb36-286"><a href="id_03_model_training.html#cb36-286" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb36-287"><a href="id_03_model_training.html#cb36-287" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb36-288"><a href="id_03_model_training.html#cb36-288" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-289"><a href="id_03_model_training.html#cb36-289" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-290"><a href="id_03_model_training.html#cb36-290" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-291"><a href="id_03_model_training.html#cb36-291" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-292"><a href="id_03_model_training.html#cb36-292" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb36-293"><a href="id_03_model_training.html#cb36-293" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-294"><a href="id_03_model_training.html#cb36-294" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb36-295"><a href="id_03_model_training.html#cb36-295" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb36-296"><a href="id_03_model_training.html#cb36-296" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-297"><a href="id_03_model_training.html#cb36-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb36-298"><a href="id_03_model_training.html#cb36-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb36-299"><a href="id_03_model_training.html#cb36-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb36-300"><a href="id_03_model_training.html#cb36-300" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Inner cross-validation<a href="id_03_model_training.html#inner-cross-validation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb37-1"><a href="id_03_model_training.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits.RData&quot;</span>)</span>
<span id="cb37-2"><a href="id_03_model_training.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb37-3"><a href="id_03_model_training.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb37-4"><a href="id_03_model_training.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb37-5"><a href="id_03_model_training.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding/&quot;</span>, prefix)</span>
<span id="cb37-6"><a href="id_03_model_training.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb37-7"><a href="id_03_model_training.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_mb_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb37-8"><a href="id_03_model_training.html#cb37-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="training-on-whole-data-set" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Training on whole data set<a href="id_03_model_training.html#training-on-whole-data-set" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb38-1"><a href="id_03_model_training.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits.RData&quot;</span>)</span>
<span id="cb38-2"><a href="id_03_model_training.html#cb38-2" aria-hidden="true" tabindex="-1"></a>prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb38-3"><a href="id_03_model_training.html#cb38-3" aria-hidden="true" tabindex="-1"></a>exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding/&quot;</span>, prefix)</span>
<span id="cb38-4"><a href="id_03_model_training.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb38-5"><a href="id_03_model_training.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">train_mb_models</span>(<span class="at">train_set =</span> mb_data, <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb39-1"><a href="id_03_model_training.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb39-2"><a href="id_03_model_training.html#cb39-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-3"><a href="id_03_model_training.html#cb39-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-4"><a href="id_03_model_training.html#cb39-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-5"><a href="id_03_model_training.html#cb39-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-6"><a href="id_03_model_training.html#cb39-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-7"><a href="id_03_model_training.html#cb39-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-8"><a href="id_03_model_training.html#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>) {</span>
<span id="cb39-9"><a href="id_03_model_training.html#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">11</span>) {</span>
<span id="cb39-10"><a href="id_03_model_training.html#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Whole data set</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb39-11"><a href="id_03_model_training.html#cb39-11" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb39-12"><a href="id_03_model_training.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb39-13"><a href="id_03_model_training.html#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb39-14"><a href="id_03_model_training.html#cb39-14" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb39-15"><a href="id_03_model_training.html#cb39-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-16"><a href="id_03_model_training.html#cb39-16" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding/&quot;</span>, prefix)</span>
<span id="cb39-17"><a href="id_03_model_training.html#cb39-17" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb39-18"><a href="id_03_model_training.html#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb39-19"><a href="id_03_model_training.html#cb39-19" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb39-20"><a href="id_03_model_training.html#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb39-21"><a href="id_03_model_training.html#cb39-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb39-22"><a href="id_03_model_training.html#cb39-22" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb39-23"><a href="id_03_model_training.html#cb39-23" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb39-24"><a href="id_03_model_training.html#cb39-24" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb39-25"><a href="id_03_model_training.html#cb39-25" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb39-26"><a href="id_03_model_training.html#cb39-26" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb39-27"><a href="id_03_model_training.html#cb39-27" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb39-28"><a href="id_03_model_training.html#cb39-28" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb39-29"><a href="id_03_model_training.html#cb39-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb39-30"><a href="id_03_model_training.html#cb39-30" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb39-31"><a href="id_03_model_training.html#cb39-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb39-32"><a href="id_03_model_training.html#cb39-32" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb39-33"><a href="id_03_model_training.html#cb39-33" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb39-34"><a href="id_03_model_training.html#cb39-34" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb39-35"><a href="id_03_model_training.html#cb39-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb39-36"><a href="id_03_model_training.html#cb39-36" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb39-37"><a href="id_03_model_training.html#cb39-37" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb39-38"><a href="id_03_model_training.html#cb39-38" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb39-39"><a href="id_03_model_training.html#cb39-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb39-40"><a href="id_03_model_training.html#cb39-40" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb39-41"><a href="id_03_model_training.html#cb39-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb39-42"><a href="id_03_model_training.html#cb39-42" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb39-43"><a href="id_03_model_training.html#cb39-43" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb39-44"><a href="id_03_model_training.html#cb39-44" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb39-45"><a href="id_03_model_training.html#cb39-45" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb39-46"><a href="id_03_model_training.html#cb39-46" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb39-47"><a href="id_03_model_training.html#cb39-47" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-48"><a href="id_03_model_training.html#cb39-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-49"><a href="id_03_model_training.html#cb39-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-50"><a href="id_03_model_training.html#cb39-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb39-51"><a href="id_03_model_training.html#cb39-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb39-52"><a href="id_03_model_training.html#cb39-52" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb39-53"><a href="id_03_model_training.html#cb39-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb39-54"><a href="id_03_model_training.html#cb39-54" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb39-55"><a href="id_03_model_training.html#cb39-55" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb39-56"><a href="id_03_model_training.html#cb39-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb39-57"><a href="id_03_model_training.html#cb39-57" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb39-58"><a href="id_03_model_training.html#cb39-58" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb39-59"><a href="id_03_model_training.html#cb39-59" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb39-60"><a href="id_03_model_training.html#cb39-60" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb39-61"><a href="id_03_model_training.html#cb39-61" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb39-62"><a href="id_03_model_training.html#cb39-62" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb39-63"><a href="id_03_model_training.html#cb39-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb39-64"><a href="id_03_model_training.html#cb39-64" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb39-65"><a href="id_03_model_training.html#cb39-65" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb39-66"><a href="id_03_model_training.html#cb39-66" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb39-67"><a href="id_03_model_training.html#cb39-67" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb39-68"><a href="id_03_model_training.html#cb39-68" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb39-69"><a href="id_03_model_training.html#cb39-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb39-70"><a href="id_03_model_training.html#cb39-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb39-71"><a href="id_03_model_training.html#cb39-71" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb39-72"><a href="id_03_model_training.html#cb39-72" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb39-73"><a href="id_03_model_training.html#cb39-73" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb39-74"><a href="id_03_model_training.html#cb39-74" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb39-75"><a href="id_03_model_training.html#cb39-75" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb39-76"><a href="id_03_model_training.html#cb39-76" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb39-77"><a href="id_03_model_training.html#cb39-77" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-78"><a href="id_03_model_training.html#cb39-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-79"><a href="id_03_model_training.html#cb39-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-80"><a href="id_03_model_training.html#cb39-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb39-81"><a href="id_03_model_training.html#cb39-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb39-82"><a href="id_03_model_training.html#cb39-82" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb39-83"><a href="id_03_model_training.html#cb39-83" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb39-84"><a href="id_03_model_training.html#cb39-84" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb39-85"><a href="id_03_model_training.html#cb39-85" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb39-86"><a href="id_03_model_training.html#cb39-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb39-87"><a href="id_03_model_training.html#cb39-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb39-88"><a href="id_03_model_training.html#cb39-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb39-89"><a href="id_03_model_training.html#cb39-89" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb39-90"><a href="id_03_model_training.html#cb39-90" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb39-91"><a href="id_03_model_training.html#cb39-91" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb39-92"><a href="id_03_model_training.html#cb39-92" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb39-93"><a href="id_03_model_training.html#cb39-93" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb39-94"><a href="id_03_model_training.html#cb39-94" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb39-95"><a href="id_03_model_training.html#cb39-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb39-96"><a href="id_03_model_training.html#cb39-96" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb39-97"><a href="id_03_model_training.html#cb39-97" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb39-98"><a href="id_03_model_training.html#cb39-98" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb39-99"><a href="id_03_model_training.html#cb39-99" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb39-100"><a href="id_03_model_training.html#cb39-100" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb39-101"><a href="id_03_model_training.html#cb39-101" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb39-102"><a href="id_03_model_training.html#cb39-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb39-103"><a href="id_03_model_training.html#cb39-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb39-104"><a href="id_03_model_training.html#cb39-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb39-105"><a href="id_03_model_training.html#cb39-105" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb39-106"><a href="id_03_model_training.html#cb39-106" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb39-107"><a href="id_03_model_training.html#cb39-107" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb39-108"><a href="id_03_model_training.html#cb39-108" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb39-109"><a href="id_03_model_training.html#cb39-109" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb39-110"><a href="id_03_model_training.html#cb39-110" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb39-111"><a href="id_03_model_training.html#cb39-111" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-112"><a href="id_03_model_training.html#cb39-112" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-113"><a href="id_03_model_training.html#cb39-113" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-114"><a href="id_03_model_training.html#cb39-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb39-115"><a href="id_03_model_training.html#cb39-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-116"><a href="id_03_model_training.html#cb39-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-117"><a href="id_03_model_training.html#cb39-117" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb39-118"><a href="id_03_model_training.html#cb39-118" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb39-119"><a href="id_03_model_training.html#cb39-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-120"><a href="id_03_model_training.html#cb39-120" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb39-121"><a href="id_03_model_training.html#cb39-121" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb39-122"><a href="id_03_model_training.html#cb39-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-123"><a href="id_03_model_training.html#cb39-123" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb39-124"><a href="id_03_model_training.html#cb39-124" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb39-125"><a href="id_03_model_training.html#cb39-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-126"><a href="id_03_model_training.html#cb39-126" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/melanin_binding/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb39-127"><a href="id_03_model_training.html#cb39-127" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/melanin_binding/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb39-128"><a href="id_03_model_training.html#cb39-128" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/melanin_binding/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb39-129"><a href="id_03_model_training.html#cb39-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-130"><a href="id_03_model_training.html#cb39-130" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Model evaluation<a href="id_03_model_training.html#model-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb40-1"><a href="id_03_model_training.html#cb40-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb40-2"><a href="id_03_model_training.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits.RData&quot;</span>)</span>
<span id="cb40-3"><a href="id_03_model_training.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb40-4"><a href="id_03_model_training.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-5"><a href="id_03_model_training.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb40-6"><a href="id_03_model_training.html#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb40-7"><a href="id_03_model_training.html#cb40-7" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb40-8"><a href="id_03_model_training.html#cb40-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb40-9"><a href="id_03_model_training.html#cb40-9" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb40-10"><a href="id_03_model_training.html#cb40-10" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb40-11"><a href="id_03_model_training.html#cb40-11" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb40-12"><a href="id_03_model_training.html#cb40-12" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb40-13"><a href="id_03_model_training.html#cb40-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb40-14"><a href="id_03_model_training.html#cb40-14" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb40-15"><a href="id_03_model_training.html#cb40-15" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb40-16"><a href="id_03_model_training.html#cb40-16" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb40-17"><a href="id_03_model_training.html#cb40-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb40-18"><a href="id_03_model_training.html#cb40-18" aria-hidden="true" tabindex="-1"></a>    mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-19"><a href="id_03_model_training.html#cb40-19" aria-hidden="true" tabindex="-1"></a>    rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-20"><a href="id_03_model_training.html#cb40-20" aria-hidden="true" tabindex="-1"></a>    R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-21"><a href="id_03_model_training.html#cb40-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb40-22"><a href="id_03_model_training.html#cb40-22" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;log_intensity&quot;</span>]</span>
<span id="cb40-23"><a href="id_03_model_training.html#cb40-23" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb40-24"><a href="id_03_model_training.html#cb40-24" aria-hidden="true" tabindex="-1"></a>      mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-25"><a href="id_03_model_training.html#cb40-25" aria-hidden="true" tabindex="-1"></a>      rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-26"><a href="id_03_model_training.html#cb40-26" aria-hidden="true" tabindex="-1"></a>      R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-27"><a href="id_03_model_training.html#cb40-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb40-28"><a href="id_03_model_training.html#cb40-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Re-scale to 0-100</span></span>
<span id="cb40-29"><a href="id_03_model_training.html#cb40-29" aria-hidden="true" tabindex="-1"></a>    mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb40-30"><a href="id_03_model_training.html#cb40-30" aria-hidden="true" tabindex="-1"></a>    rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb40-31"><a href="id_03_model_training.html#cb40-31" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb40-32"><a href="id_03_model_training.html#cb40-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(mae, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(mae),</span>
<span id="cb40-33"><a href="id_03_model_training.html#cb40-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(rmse, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(rmse),</span>
<span id="cb40-34"><a href="id_03_model_training.html#cb40-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(R2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(R2),</span>
<span id="cb40-35"><a href="id_03_model_training.html#cb40-35" aria-hidden="true" tabindex="-1"></a>      mae, rmse, R2</span>
<span id="cb40-36"><a href="id_03_model_training.html#cb40-36" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb40-37"><a href="id_03_model_training.html#cb40-37" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb40-38"><a href="id_03_model_training.html#cb40-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb40-39"><a href="id_03_model_training.html#cb40-39" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb40-40"><a href="id_03_model_training.html#cb40-40" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb40-41"><a href="id_03_model_training.html#cb40-41" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb40-42"><a href="id_03_model_training.html#cb40-42" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb40-43"><a href="id_03_model_training.html#cb40-43" aria-hidden="true" tabindex="-1"></a>        mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-44"><a href="id_03_model_training.html#cb40-44" aria-hidden="true" tabindex="-1"></a>        rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-45"><a href="id_03_model_training.html#cb40-45" aria-hidden="true" tabindex="-1"></a>        R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb40-46"><a href="id_03_model_training.html#cb40-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb40-47"><a href="id_03_model_training.html#cb40-47" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;log_intensity&quot;</span>]</span>
<span id="cb40-48"><a href="id_03_model_training.html#cb40-48" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb40-49"><a href="id_03_model_training.html#cb40-49" aria-hidden="true" tabindex="-1"></a>          mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-50"><a href="id_03_model_training.html#cb40-50" aria-hidden="true" tabindex="-1"></a>          rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-51"><a href="id_03_model_training.html#cb40-51" aria-hidden="true" tabindex="-1"></a>          R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb40-52"><a href="id_03_model_training.html#cb40-52" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb40-53"><a href="id_03_model_training.html#cb40-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Re-scale to 0-100</span></span>
<span id="cb40-54"><a href="id_03_model_training.html#cb40-54" aria-hidden="true" tabindex="-1"></a>        mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb40-55"><a href="id_03_model_training.html#cb40-55" aria-hidden="true" tabindex="-1"></a>        rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb40-56"><a href="id_03_model_training.html#cb40-56" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb40-57"><a href="id_03_model_training.html#cb40-57" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(mae, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(mae),</span>
<span id="cb40-58"><a href="id_03_model_training.html#cb40-58" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(rmse, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(rmse),</span>
<span id="cb40-59"><a href="id_03_model_training.html#cb40-59" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(R2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(R2),</span>
<span id="cb40-60"><a href="id_03_model_training.html#cb40-60" aria-hidden="true" tabindex="-1"></a>          mae, rmse, R2</span>
<span id="cb40-61"><a href="id_03_model_training.html#cb40-61" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb40-62"><a href="id_03_model_training.html#cb40-62" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb40-63"><a href="id_03_model_training.html#cb40-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb40-64"><a href="id_03_model_training.html#cb40-64" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-65"><a href="id_03_model_training.html#cb40-65" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb40-66"><a href="id_03_model_training.html#cb40-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb40-67"><a href="id_03_model_training.html#cb40-67" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Norm. MAE mean&quot;</span>, <span class="st">&quot;Norm. MAE s.e.m.&quot;</span>, <span class="st">&quot;Norm. RMSE mean&quot;</span>, <span class="st">&quot;Norm. RMSE s.e.m.&quot;</span>,</span>
<span id="cb40-68"><a href="id_03_model_training.html#cb40-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;R^2 mean&quot;</span>, <span class="st">&quot;R^2 s.e.m.&quot;</span>,</span>
<span id="cb40-69"><a href="id_03_model_training.html#cb40-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Norm. MAE CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;Norm. RMSE CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;R^2 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb40-70"><a href="id_03_model_training.html#cb40-70" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-71"><a href="id_03_model_training.html#cb40-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb40-72"><a href="id_03_model_training.html#cb40-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb40-73"><a href="id_03_model_training.html#cb40-73" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb40-74"><a href="id_03_model_training.html#cb40-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb40-75"><a href="id_03_model_training.html#cb40-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-76"><a href="id_03_model_training.html#cb40-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb40-77"><a href="id_03_model_training.html#cb40-77" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection" class="section level3 hasAnchor" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> Inner loop model selection<a href="id_03_model_training.html#inner-loop-model-selection" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb41-1"><a href="id_03_model_training.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb.RData&quot;</span>)</span>
<span id="cb41-2"><a href="id_03_model_training.html#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="id_03_model_training.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb41-4"><a href="id_03_model_training.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb41-5"><a href="id_03_model_training.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb41-6"><a href="id_03_model_training.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb41-7"><a href="id_03_model_training.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb41-8"><a href="id_03_model_training.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb41-9"><a href="id_03_model_training.html#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb41-10"><a href="id_03_model_training.html#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb41-11"><a href="id_03_model_training.html#cb41-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb41-12"><a href="id_03_model_training.html#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb41-13"><a href="id_03_model_training.html#cb41-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb41-14"><a href="id_03_model_training.html#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb41-15"><a href="id_03_model_training.html#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb41-16"><a href="id_03_model_training.html#cb41-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb41-17"><a href="id_03_model_training.html#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb41-18"><a href="id_03_model_training.html#cb41-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb41-19"><a href="id_03_model_training.html#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb41-20"><a href="id_03_model_training.html#cb41-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb41-21"><a href="id_03_model_training.html#cb41-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb41-22"><a href="id_03_model_training.html#cb41-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb41-23"><a href="id_03_model_training.html#cb41-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb41-24"><a href="id_03_model_training.html#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb41-25"><a href="id_03_model_training.html#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb41-26"><a href="id_03_model_training.html#cb41-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb41-27"><a href="id_03_model_training.html#cb41-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb41-28"><a href="id_03_model_training.html#cb41-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb41-29"><a href="id_03_model_training.html#cb41-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb41-30"><a href="id_03_model_training.html#cb41-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb41-31"><a href="id_03_model_training.html#cb41-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb41-32"><a href="id_03_model_training.html#cb41-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GLM</span></span>
<span id="cb41-33"><a href="id_03_model_training.html#cb41-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb41-34"><a href="id_03_model_training.html#cb41-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb41-35"><a href="id_03_model_training.html#cb41-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb41-36"><a href="id_03_model_training.html#cb41-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb41-37"><a href="id_03_model_training.html#cb41-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb41-38"><a href="id_03_model_training.html#cb41-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb41-39"><a href="id_03_model_training.html#cb41-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb41-40"><a href="id_03_model_training.html#cb41-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb41-41"><a href="id_03_model_training.html#cb41-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb41-42"><a href="id_03_model_training.html#cb41-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb41-43"><a href="id_03_model_training.html#cb41-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb41-44"><a href="id_03_model_training.html#cb41-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb41-45"><a href="id_03_model_training.html#cb41-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb41-46"><a href="id_03_model_training.html#cb41-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb41-47"><a href="id_03_model_training.html#cb41-47" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb41-48"><a href="id_03_model_training.html#cb41-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-49"><a href="id_03_model_training.html#cb41-49" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb41-50"><a href="id_03_model_training.html#cb41-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb41-51"><a href="id_03_model_training.html#cb41-51" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1" class="section level4 hasAnchor" number="3.3.5.1">
<h4><span class="header-section-number">3.3.5.1</span> CV 1<a href="id_03_model_training.html#cv-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-e32b8881c26211bd3aba" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e32b8881c26211bd3aba">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 203"],[0.1871,null],[null,0.0106],[null,0.0404],[6,1],[1,86],[1,91],[8,178]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2" class="section level4 hasAnchor" number="3.3.5.2">
<h4><span class="header-section-number">3.3.5.2</span> CV 2<a href="id_03_model_training.html#cv-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-d984755e23efa82c99cd" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d984755e23efa82c99cd">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner neural network","Neural network grid model 207","Neural network grid model 4","Neural network grid model 145","Neural network grid model 156","Neural network grid model 45","Neural network grid model 200","Neural network grid model 178","Neural network grid model 116","Neural network grid model 114","Neural network grid model 36","Neural network grid model 29","Neural network grid model 61","Neural network grid model 49","Neural network grid model 126","Neural network grid model 138","Neural network grid model 122","Neural network grid model 155","Neural network grid model 210","Neural network grid model 14","Neural network grid model 50","Neural network grid model 93","Neural network grid model 146","Neural network grid model 171","Neural network grid model 174","Neural network grid model 137","Neural network grid model 159","Neural network grid model 203","Neural network grid model 213","Neural network grid model 124","Neural network grid model 102","Neural network grid model 170","Neural network grid model 90","Neural network grid model 127","Neural network grid model 187","Neural network grid model 148","Neural network grid model 147","Neural network grid model 139","Neural network grid model 222","Neural network grid model 118","Neural network grid model 60","Neural network grid model 76","Neural network grid model 100","Neural network grid model 162","Neural network grid model 136","Neural network grid model 196","Neural network grid model 157","Neural network grid model 177","Neural network grid model 216"],[0.5227,0.311,0.2178,0.0801,0.1091,0.0682,0.3471,0.4298,0.0801,0.1456,0.0682,0.0578,0.2472,0.0801,0.0936,0.1912,0.2773,0.0578,0.1671,0.0578,0.1263,0.0936,0.8501,0.2178,0.1912,0.1263,0.3471,0.2773,null,0.8501,0.3471,0.1671,0.1671,0.0578,0.1456,0.6795,0.1263,0.0936,0.2773,0.2773,0.0578,0.0682,0.1263,0.0936,0.0682,0.2773,0.311,0.0936,0.1091,0.311],[null,0.6776,0.3119,0.3119,0.3119,0.2512,0.3858,0.3476,0.3858,0.2512,0.1617,0.2512,0.3858,0.3858,0.2512,0.2252,0.2029,0.2252,0.2809,0.2252,0.2252,0.2809,0.1804,0.2512,0.1804,0.2252,0.1804,0.1617,0.144,0.2252,0.1617,0.1292,0.114,0.1292,0.1292,0.1804,0.114,0.1028,0.1617,0.1028,0.114,0.114,0.144,0.114,0.1292,0.1028,0.068,0.068,0.068,0.068],[null,0.6232,0.3491,0.4298,0.4298,0.3159,0.3491,0.3491,0.4298,0.2854,0.2575,0.2854,0.3159,0.3491,0.2575,0.2342,0.2575,0.2575,0.2575,0.3491,0.212,0.2854,0.2342,0.212,0.1914,0.2575,0.1738,0.1914,0.212,0.212,0.1738,0.1914,0.1545,0.1378,0.1378,0.2854,0.1545,0.1378,0.1378,0.1378,0.1545,0.1067,0.1914,0.1067,0.1914,0.1212,0.0811,0.0811,0.0609,0.07],[6,17,14,33,31,32,11,3,39,24,42,44,20,54,37,28,27,51,22,58,26,30,2,16,21,43,12,7,1,4,8,19,18,49,34,5,38,52,9,29,86,36,25,45,65,10,13,64,47,35],[1,3,18,13,21,24,36,48,33,50,45,44,58,42,61,67,72,63,91,77,101,98,112,117,131,122,155,159,164,165,171,175,181,170,188,204,189,186,207,206,178,213,218,226,231,267,275,262,281,303],[1,3,20,15,21,25,41,49,34,51,42,44,59,45,61,67,75,68,93,77,100,99,115,119,131,127,156,161,168,169,174,177,182,166,188,206,189,185,208,204,179,214,221,227,236,268,279,263,282,305],[8,23,52,61,73,81,88,100,106,125,129,132,137,141,159,162,174,182,206,212,227,227,229,252,283,292,323,327,333,338,353,371,381,385,410,415,416,423,424,439,443,463,464,498,532,545,567,589,610,643]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3" class="section level4 hasAnchor" number="3.3.5.3">
<h4><span class="header-section-number">3.3.5.3</span> CV 3<a href="id_03_model_training.html#cv-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-5b697ad4b9fb302f865a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5b697ad4b9fb302f865a">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 45","Neural network grid model 182","Neural network grid model 93","Neural network grid model 116","Neural network grid model 200","Neural network grid model 203","Neural network grid model 207","Neural network grid model 126","Neural network grid model 213","Neural network grid model 137","Neural network grid model 155","Neural network grid model 159","Neural network grid model 222","Neural network grid model 174"],[0.1423,0.2746,0.0773,0.3452,0.1423,0.3452,0.3847,0.1231,0.1059,null,0.1638,0.1874,0.3452,0.0773,0.1059],[null,0.2132,0.0938,0.081,0.0699,0.108,0.108,0.1242,0.1242,0.0938,0.0699,0.0522,0.0522,0.081,0.0699],[null,0.3452,0.2461,0.1946,0.1744,0.2197,0.1946,0.2461,0.1946,0.1744,0.1547,0.1744,0.1212,0.1547,0.1367],[4,10,22,2,16,5,3,13,15,1,18,9,8,24,14],[1,9,17,33,29,40,43,41,63,73,67,71,93,123,139],[1,10,18,36,29,44,48,47,64,79,69,75,97,124,146],[6,29,57,71,74,89,94,101,142,153,154,155,198,271,299]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4" class="section level4 hasAnchor" number="3.3.5.4">
<h4><span class="header-section-number">3.3.5.4</span> CV 4<a href="id_03_model_training.html#cv-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-5de38d979c555fe798f2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5de38d979c555fe798f2">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 45","Super learner neural network","Neural network grid model 4","Neural network grid model 35","Neural network grid model 154","Neural network grid model 93","Neural network grid model 36","Neural network grid model 24","Neural network grid model 182","Neural network grid model 116","Neural network grid model 29","Neural network grid model 90","Neural network grid model 49","Neural network grid model 50","Neural network grid model 159","Neural network grid model 38","Neural network grid model 126","Neural network grid model 134","Neural network grid model 200","Neural network grid model 61","Neural network grid model 207","Neural network grid model 187","Neural network grid model 155","Neural network grid model 102","Neural network grid model 138","Neural network grid model 213","Neural network grid model 123","Neural network grid model 148","Neural network grid model 203","Neural network grid model 76","Neural network grid model 14","Neural network grid model 174","Neural network grid model 137","Neural network grid model 139","Neural network grid model 180","Neural network grid model 113","Neural network grid model 222","Neural network grid model 136","Neural network grid model 214","Neural network grid model 169","Neural network grid model 124","Neural network grid model 196"],[0.2447,0.4753,0.1077,0.1439,0.0791,0.2156,null,0.0791,0.0791,0.2156,0.1247,0.2156,0.1247,0.2156,0.1077,0.2156,0.0925,0.0925,0.3476,0.3476,0.0675,0.0791,0.6776,0.1247,0.3114,0.057,0.624,0.057,0.0675,0.5732,0.0791,0.1439,0.3476,0.057,0.624,0.1247,0.1077,0.1439,0.4304,0.2156,0.0925,0.057,0.0791],[null,0.2817,0.3868,0.3868,0.428,0.428,0.3136,0.3491,0.3136,0.3491,0.3491,0.3136,0.2817,0.1765,0.2226,0.2508,0.1584,0.2226,0.1584,0.199,0.1765,0.1765,0.2226,0.1765,0.199,0.1239,0.1584,0.1403,0.1765,0.1584,0.1584,0.1095,0.1403,0.1239,0.1239,0.1239,0.0961,0.0961,0.0648,0.0648,0.0648,0.0648,0.0744],[null,0.2571,0.431,0.5205,0.4747,0.4747,0.3506,0.315,0.315,0.315,0.3506,0.315,0.2571,0.2321,0.2571,0.2846,0.2321,0.2846,0.2086,0.2571,0.2086,0.2321,0.2571,0.2571,0.1771,0.193,0.2086,0.193,0.2086,0.2321,0.2086,0.193,0.1614,0.1614,0.1309,0.193,0.1168,0.1168,0.1309,0.1043,0.146,0.1309,0.1771],[6,5,24,20,33,22,1,23,27,19,17,14,15,13,29,12,21,28,9,10,41,31,3,37,8,35,4,52,32,2,26,16,30,59,11,187,76,36,7,18,60,53,103],[1,12,3,6,4,10,21,14,13,19,20,23,26,31,35,47,54,57,74,75,65,72,95,81,99,111,125,101,112,129,142,149,145,136,193,132,195,215,275,280,288,305,283],[1,12,3,6,4,11,22,14,13,19,21,24,26,32,36,50,55,62,73,79,64,75,97,83,103,111,128,105,116,136,144,151,150,140,194,139,196,222,278,282,293,309,289],[8,29,30,32,41,43,44,51,53,57,58,61,67,76,100,109,130,147,156,164,170,178,195,201,210,257,257,258,260,267,312,316,325,335,398,458,467,473,560,580,641,667,675]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5" class="section level4 hasAnchor" number="3.3.5.5">
<h4><span class="header-section-number">3.3.5.5</span> CV 5<a href="id_03_model_training.html#cv-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-e65fb827d9f11d41f0c2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e65fb827d9f11d41f0c2">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner neural network","Neural network grid model 126","Neural network grid model 45","Neural network grid model 90","Neural network grid model 64","Neural network grid model 154","Neural network grid model 182","Neural network grid model 122","Neural network grid model 116","Neural network grid model 134","Neural network grid model 207","Neural network grid model 6","Neural network grid model 93","Neural network grid model 29","Neural network grid model 155","Neural network grid model 159","Neural network grid model 200","Neural network grid model 139","Neural network grid model 49","Neural network grid model 38","Neural network grid model 24","Neural network grid model 174","Neural network grid model 50","Neural network grid model 102","Neural network grid model 160","Neural network grid model 213","Neural network grid model 203","Neural network grid model 210","Neural network grid model 146","Neural network grid model 148","Neural network grid model 171","Neural network grid model 170","Neural network grid model 76","Neural network grid model 113","Neural network grid model 211","Neural network grid model 26","Neural network grid model 124","Neural network grid model 187","Neural network grid model 136","Neural network grid model 216"],[null,0.3127,0.3127,0.2175,0.1915,0.1258,0.1258,0.1258,0.3496,0.1453,0.2465,0.4316,0.0573,0.911,0.4316,0.6258,0.5242,0.4316,0.7936,0.2175,0.0679,0.0798,0.3496,0.1258,0.1258,0.574,0.4767,0.9698,0.0798,0.2175,0.1453,0.2175,0.0933,0.0933,0.0933,0.1088,0.1088,0.2465,0.1915,0.2785,0.0933],[null,0.2738,0.3079,0.2423,0.1885,0.1678,0.2141,0.1678,0.1483,0.2141,0.1678,0.1483,0.1678,0.1321,0.1161,0.1321,0.1885,0.1019,0.1483,0.1161,0.1019,0.1483,0.1483,0.1019,0.1678,0.1161,0.0905,0.0702,0.1019,0.0905,0.0905,0.0799,0.0905,0.1019,0.0702,0.0799,0.0702,0.0618,0.0702,0.0702,0.0539],[null,0.3452,0.3452,0.3088,0.3088,0.3088,0.2451,0.2451,0.2451,0.219,0.219,0.1949,0.3088,0.219,0.219,0.1729,0.1949,0.1729,0.1729,0.1729,0.1562,0.1949,0.1729,0.1729,0.1949,0.1949,0.1729,0.1264,0.14,0.1562,0.14,0.1264,0.14,0.1729,0.1,0.1,0.1,0.0885,0.1264,0.0885,0.0885],[1,17,20,14,15,36,30,25,12,28,11,10,39,3,13,5,9,6,8,21,33,51,16,29,19,4,7,2,56,23,22,26,32,27,34,42,108,24,18,40,55],[1,3,4,9,12,5,8,13,23,16,29,31,17,36,32,40,37,42,57,56,51,43,63,59,71,79,93,103,78,109,115,131,130,143,180,182,175,232,237,261,259],[1,3,4,8,12,5,9,13,23,16,29,31,17,38,33,40,39,43,68,58,52,44,69,61,78,85,95,104,81,111,117,135,139,146,179,186,180,234,239,265,259],[3,23,28,31,39,46,47,51,58,60,69,72,73,77,78,85,85,91,133,135,136,138,148,149,168,168,195,209,215,243,254,292,301,316,393,410,463,490,494,566,573]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6" class="section level4 hasAnchor" number="3.3.5.6">
<h4><span class="header-section-number">3.3.5.6</span> CV 6<a href="id_03_model_training.html#cv-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-c789a33ae4da1e928d6c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c789a33ae4da1e928d6c">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner neural network","Neural network grid model 49","Neural network grid model 36","Neural network grid model 45","Neural network grid model 116","Neural network grid model 64","Neural network grid model 182","Neural network grid model 35","Neural network grid model 4","Neural network grid model 145","Neural network grid model 174","Neural network grid model 146","Neural network grid model 50","Neural network grid model 61","Neural network grid model 16","Neural network grid model 155","Neural network grid model 159","Neural network grid model 160","Neural network grid model 93","Neural network grid model 129","Neural network grid model 38","Neural network grid model 134","Neural network grid model 213","Neural network grid model 90","Neural network grid model 171","Neural network grid model 200","Neural network grid model 126","Neural network grid model 207","Neural network grid model 14","Neural network grid model 137","Neural network grid model 170","Neural network grid model 203","Neural network grid model 113","Neural network grid model 26","Neural network grid model 222","Neural network grid model 124","Neural network grid model 76","Neural network grid model 148","Neural network grid model 136","Neural network grid model 187","Neural network grid model 214","Neural network grid model 102","Neural network grid model 211","Neural network grid model 119","Neural network grid model 162","Neural network grid model 196","Neural network grid model 216","Neural network grid model 166"],[0.6795,0.1907,0.2785,0.0797,0.0929,0.0929,0.068,0.1447,0.0577,0.1077,0.0797,0.3491,0.3491,0.389,0.0929,0.1077,0.476,0.4316,0.3491,0.9097,0.0577,0.1077,0.0929,0.7924,0.1907,0.068,0.6795,0.0797,0.068,0.0797,0.6267,0.068,null,0.1447,0.1253,0.1907,0.476,0.1077,0.0929,0.2175,0.3491,0.2465,0.2465,0.0929,0.3491,0.0797,0.1077,0.1077,0.068],[null,0.4298,0.2375,0.4298,0.4298,0.4298,0.3521,0.3521,0.4298,0.3186,0.4733,0.4298,0.261,0.3186,0.3521,0.3521,0.3521,0.2375,0.3521,0.261,0.2147,0.261,0.3186,0.2875,0.261,0.261,0.3186,0.261,0.3186,0.2875,0.261,0.2375,0.2147,0.261,0.2375,0.1829,0.1504,0.1976,0.2147,0.1348,0.1686,0.1829,0.261,0.1348,0.1348,0.1829,0.1181,0.0911,0.1181],[null,0.3852,0.3114,0.3114,0.2805,0.3114,0.3462,0.3114,0.3462,0.3462,0.2805,0.2805,0.2805,0.2805,0.2805,0.2805,0.2283,0.2283,0.2283,0.2042,0.2805,0.3114,0.2541,0.2541,0.2805,0.2283,0.2283,0.2541,0.2805,0.2805,0.2042,0.1827,0.2283,0.2541,0.2805,0.2042,0.2042,0.1644,0.1827,0.2042,0.1137,0.1827,0.2283,0.151,0.141,0.1644,0.151,0.151,0.141],[4,20,9,18,27,26,39,29,48,35,43,23,7,11,32,25,13,10,14,2,65,30,41,3,19,17,6,36,64,40,5,33,1,37,34,15,16,21,52,8,24,22,28,42,12,123,38,45,244],[1,4,9,10,6,11,8,14,7,13,16,28,36,35,25,33,40,45,46,55,29,49,44,63,59,61,65,56,43,57,75,71,88,73,103,134,142,140,152,182,193,192,195,226,251,236,292,311,323],[1,4,12,9,7,10,8,15,6,13,16,28,38,35,26,34,40,47,48,57,31,49,44,64,60,61,68,56,43,59,79,72,90,74,109,136,143,141,155,188,195,206,210,229,251,243,293,313,329],[6,28,30,37,40,47,55,58,61,61,75,79,81,81,83,92,93,102,108,114,125,128,129,130,138,139,139,148,150,156,159,176,179,184,246,285,301,302,359,378,412,420,433,497,514,602,623,669,896]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7" class="section level4 hasAnchor" number="3.3.5.7">
<h4><span class="header-section-number">3.3.5.7</span> CV 7<a href="id_03_model_training.html#cv-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-356ce00f7050a5667ac7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-356ce00f7050a5667ac7">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 116","Super learner neural network","Neural network grid model 182","Neural network grid model 45","Neural network grid model 16","Neural network grid model 200","Neural network grid model 146","Neural network grid model 155","Neural network grid model 123","Neural network grid model 93","Neural network grid model 129","Neural network grid model 50","Neural network grid model 203","Neural network grid model 207","Neural network grid model 38","Neural network grid model 137","Neural network grid model 102","Neural network grid model 126"],[0.3451,0.1638,0.0655,0.1877,0.1638,0.0655,0.3082,0.0907,0.2139,0.1638,0.3082,0.0655,0.0655,null,0.2429,0.0655,0.0554,0.106,0.1231],[null,0.1079,0.1412,0.1412,0.1623,0.1412,0.0711,0.0816,0.0711,0.1079,0.0816,0.0816,0.0711,0.0711,0.0946,0.0711,0.0711,0.0711,0.0617],[null,0.2132,0.1871,0.1252,0.2416,0.1099,0.1252,0.0974,0.1099,0.1099,0.0855,0.1099,0.0974,0.0573,0.0573,0.0855,0.0573,0.0573,0.0573],[4,10,22,7,16,23,3,11,8,17,5,51,33,1,13,32,20,18,19],[1,10,4,12,9,17,32,40,46,42,54,33,52,69,67,66,74,89,88],[1,10,4,12,9,16,32,40,46,44,55,33,51,70,67,65,74,84,89],[6,30,30,31,34,56,67,91,100,103,114,117,136,140,147,163,168,191,196]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8" class="section level4 hasAnchor" number="3.3.5.8">
<h4><span class="header-section-number">3.3.5.8</span> CV 8<a href="id_03_model_training.html#cv-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-e3b8cfa7780596812e39" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e3b8cfa7780596812e39">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner neural network","Neural network grid model 182","Neural network grid model 116","Neural network grid model 178","Neural network grid model 36","Neural network grid model 29","Neural network grid model 49","Neural network grid model 102","Neural network grid model 129","Neural network grid model 146","Neural network grid model 155","Neural network grid model 16","Neural network grid model 171","Neural network grid model 45","Neural network grid model 126","Neural network grid model 213","Neural network grid model 123","Neural network grid model 207","Neural network grid model 93","Neural network grid model 137","Neural network grid model 200","Neural network grid model 24","Neural network grid model 14","Neural network grid model 203","Neural network grid model 113","Neural network grid model 160","Neural network grid model 187","Neural network grid model 174","Neural network grid model 76","Neural network grid model 136","Neural network grid model 139","Neural network grid model 211"],[0.2142,0.0913,0.164,0.1238,0.0661,0.0779,0.2745,0.1425,0.1425,0.0913,0.4732,0.1425,0.0913,0.1066,0.0661,0.164,0.8501,0.2745,0.1238,0.2142,0.3085,0.3085,0.0661,0.1066,null,0.1425,0.0661,0.2432,0.0779,0.1425,0.1425,0.3855,0.0661],[null,0.2758,0.2451,0.1926,0.3092,0.2758,0.3092,0.2451,0.2171,0.1471,0.3092,0.2451,0.2171,0.3455,0.2171,0.2171,0.2758,0.2171,0.1684,0.1926,0.112,0.1471,0.1684,0.057,0.1471,0.1684,0.2171,0.1471,0.0842,0.112,0.0732,0.0973,0.0732],[null,0.1918,0.2745,0.1918,0.4274,0.3085,0.2745,0.1918,0.2745,0.2437,0.2171,0.2437,0.1692,0.2171,0.2437,0.2437,0.2437,0.2171,0.1478,0.1918,0.2171,0.1918,0.1918,0.1108,0.3085,0.1692,0.1284,0.0827,0.0827,0.0559,0.0634,0.0957,0.0827],[6,23,16,19,29,34,7,14,17,15,3,11,28,24,31,21,2,10,20,4,5,9,30,12,1,25,32,8,26,18,27,13,38],[1,3,7,9,5,4,18,16,13,23,30,29,24,25,26,33,43,40,41,50,52,53,44,66,75,65,83,105,119,130,153,159,232],[1,3,7,8,5,4,18,15,16,24,30,29,23,27,26,31,44,42,41,51,53,52,45,66,79,71,86,107,126,136,157,167,234],[8,29,30,36,39,42,43,45,46,62,63,69,75,76,83,85,89,92,102,105,110,114,119,144,155,161,201,220,271,284,337,339,504]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9" class="section level4 hasAnchor" number="3.3.5.9">
<h4><span class="header-section-number">3.3.5.9</span> CV 9<a href="id_03_model_training.html#cv-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-e8dc2ac1298bdd321075" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e8dc2ac1298bdd321075">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 16","Neural network grid model 178","Neural network grid model 36","Super learner neural network","Neural network grid model 29","Neural network grid model 126","Neural network grid model 146","Neural network grid model 182","Neural network grid model 102","Neural network grid model 171","Neural network grid model 207","Neural network grid model 93","Neural network grid model 24","Neural network grid model 90","Neural network grid model 49","Neural network grid model 76","Neural network grid model 122","Neural network grid model 200","Neural network grid model 134","Neural network grid model 174","Neural network grid model 203","Neural network grid model 213","Neural network grid model 123","Neural network grid model 113","Neural network grid model 159","Neural network grid model 201","Neural network grid model 155","Neural network grid model 124","Neural network grid model 187","Neural network grid model 139","Neural network grid model 136"],[0.1057,0.0554,0.0554,0.1057,0.142,0.0554,0.0907,0.3088,0.0554,0.2748,0.1634,0.142,0.3855,0.0907,0.0554,0.0554,0.123,0.0554,0.6232,0.0554,0.3088,null,0.4732,0.0773,0.0554,0.2432,0.0655,0.1057,0.0773,0.1634,0.3458,0.0655],[null,0.3885,0.4727,0.3885,0.3885,0.3885,0.3151,0.2827,0.4292,0.2238,0.2827,0.3151,0.2238,0.2524,0.1987,0.3151,0.2827,0.2827,0.2827,0.2238,0.2238,0.1172,0.1987,0.1755,0.2238,0.1755,0.2238,0.2238,0.1755,0.1987,0.1342,0.1022],[null,0.3458,0.3847,0.3458,0.3847,0.2518,0.2782,0.2518,0.3458,0.3102,0.2518,0.2254,0.2782,0.2518,0.3102,0.2254,0.2782,0.2782,0.2518,0.2782,0.2254,0.2018,0.1797,0.1797,0.2254,0.1797,0.1596,0.2254,0.1797,0.1251,0.1251,0.1251],[9,18,15,19,23,26,11,6,51,4,12,17,3,31,16,27,10,32,5,29,36,1,2,44,55,8,108,48,7,13,20,57],[1,3,5,6,8,18,27,31,10,33,30,35,42,29,39,40,50,41,54,43,49,79,84,67,68,94,46,77,100,115,134,255],[1,3,5,7,8,19,28,33,10,36,31,35,42,30,41,39,50,40,54,43,52,81,91,68,71,98,46,80,102,124,136,267],[11,24,25,32,39,63,66,70,71,73,73,87,87,90,96,106,110,113,113,115,137,161,177,179,194,200,200,205,209,252,290,579]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10" class="section level4 hasAnchor" number="3.3.5.10">
<h4><span class="header-section-number">3.3.5.10</span> CV 10<a href="id_03_model_training.html#cv-10" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-aeb0c45b15d6597ef1d1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-aeb0c45b15d6597ef1d1">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 93","Neural network grid model 134","Neural network grid model 200","Neural network grid model 145","Neural network grid model 29","Neural network grid model 146","Neural network grid model 171","Neural network grid model 203","Neural network grid model 159","Neural network grid model 207","Neural network grid model 126","Neural network grid model 138","Neural network grid model 122","Neural network grid model 174","Neural network grid model 113","Neural network grid model 123","Neural network grid model 139","Neural network grid model 201","Neural network grid model 137","Neural network grid model 213","Neural network grid model 187","Neural network grid model 124","Neural network grid model 198","Neural network grid model 119","Neural network grid model 211"],[0.0323,0.5205,0.1417,0.2745,0.0553,0.1226,0.3851,0.0771,null,0.3851,0.0904,0.2429,0.0904,0.0654,0.3851,0.1055,0.1226,0.0654,0.0553,0.1417,0.1873,0.3088,0.0771,0.0654,0.0654,0.1055],[null,0.3082,0.2445,0.3447,0.2445,0.2445,0.2445,0.2445,0.219,0.2445,0.2445,0.1722,0.1722,0.1946,0.1722,0.219,0.1722,0.1722,0.1722,0.1547,0.1722,0.1547,0.1374,0.1547,0.1221,0.1374],[null,0.3847,0.3451,0.2761,0.3085,0.1702,0.1702,0.1924,0.1924,0.2761,0.2761,0.1308,0.1308,0.2459,0.1924,0.1702,0.1497,0.1497,0.1702,0.1308,0.1144,0.0999,0.0876,0.1308,0.0999,0.0999],[9,2,13,5,21,14,3,15,1,8,16,11,43,41,4,18,12,17,59,19,6,7,24,82,54,25],[1,22,19,24,18,23,41,36,42,44,47,54,46,55,74,79,84,86,71,96,111,129,138,114,175,201],[1,23,19,25,18,22,41,39,51,48,49,53,43,56,74,84,85,87,70,96,114,128,137,115,173,204],[11,47,51,54,57,59,85,90,94,100,112,118,132,152,152,181,181,190,200,211,231,264,299,311,402,430]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation" class="section level3 hasAnchor" number="3.3.6">
<h3><span class="header-section-number">3.3.6</span> Final evaluation<a href="id_03_model_training.html#final-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb42-1"><a href="id_03_model_training.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits.RData&quot;</span>)</span>
<span id="cb42-2"><a href="id_03_model_training.html#cb42-2" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/melanin_binding&quot;</span></span>
<span id="cb42-3"><a href="id_03_model_training.html#cb42-3" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb42-4"><a href="id_03_model_training.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb42-5"><a href="id_03_model_training.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb42-6"><a href="id_03_model_training.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb42-7"><a href="id_03_model_training.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span></span>
<span id="cb42-8"><a href="id_03_model_training.html#cb42-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-9"><a href="id_03_model_training.html#cb42-9" aria-hidden="true" tabindex="-1"></a>mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb42-10"><a href="id_03_model_training.html#cb42-10" aria-hidden="true" tabindex="-1"></a>rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb42-11"><a href="id_03_model_training.html#cb42-11" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb42-12"><a href="id_03_model_training.html#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb42-13"><a href="id_03_model_training.html#cb42-13" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb42-14"><a href="id_03_model_training.html#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb42-15"><a href="id_03_model_training.html#cb42-15" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb42-16"><a href="id_03_model_training.html#cb42-16" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb42-17"><a href="id_03_model_training.html#cb42-17" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb42-18"><a href="id_03_model_training.html#cb42-18" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb42-19"><a href="id_03_model_training.html#cb42-19" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb42-20"><a href="id_03_model_training.html#cb42-20" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb42-21"><a href="id_03_model_training.html#cb42-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb42-22"><a href="id_03_model_training.html#cb42-22" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb42-23"><a href="id_03_model_training.html#cb42-23" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb42-24"><a href="id_03_model_training.html#cb42-24" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb42-25"><a href="id_03_model_training.html#cb42-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb42-26"><a href="id_03_model_training.html#cb42-26" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb42-27"><a href="id_03_model_training.html#cb42-27" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb42-28"><a href="id_03_model_training.html#cb42-28" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb42-29"><a href="id_03_model_training.html#cb42-29" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb42-30"><a href="id_03_model_training.html#cb42-30" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb42-31"><a href="id_03_model_training.html#cb42-31" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb42-32"><a href="id_03_model_training.html#cb42-32" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb42-33"><a href="id_03_model_training.html#cb42-33" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb42-34"><a href="id_03_model_training.html#cb42-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb42-35"><a href="id_03_model_training.html#cb42-35" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb42-36"><a href="id_03_model_training.html#cb42-36" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb42-37"><a href="id_03_model_training.html#cb42-37" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb42-38"><a href="id_03_model_training.html#cb42-38" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb42-39"><a href="id_03_model_training.html#cb42-39" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb42-40"><a href="id_03_model_training.html#cb42-40" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb42-41"><a href="id_03_model_training.html#cb42-41" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb42-42"><a href="id_03_model_training.html#cb42-42" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb42-43"><a href="id_03_model_training.html#cb42-43" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb42-44"><a href="id_03_model_training.html#cb42-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb42-45"><a href="id_03_model_training.html#cb42-45" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb42-46"><a href="id_03_model_training.html#cb42-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-47"><a href="id_03_model_training.html#cb42-47" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>log_intensity))</span>
<span id="cb42-48"><a href="id_03_model_training.html#cb42-48" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>log_intensity</span>
<span id="cb42-49"><a href="id_03_model_training.html#cb42-49" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="dv">1</span>]</span>
<span id="cb42-50"><a href="id_03_model_training.html#cb42-50" aria-hidden="true" tabindex="-1"></a>  mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb42-51"><a href="id_03_model_training.html#cb42-51" aria-hidden="true" tabindex="-1"></a>  rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb42-52"><a href="id_03_model_training.html#cb42-52" aria-hidden="true" tabindex="-1"></a>  R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb42-53"><a href="id_03_model_training.html#cb42-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-54"><a href="id_03_model_training.html#cb42-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-55"><a href="id_03_model_training.html#cb42-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-scale to 0-100</span></span>
<span id="cb42-56"><a href="id_03_model_training.html#cb42-56" aria-hidden="true" tabindex="-1"></a>mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb42-57"><a href="id_03_model_training.html#cb42-57" aria-hidden="true" tabindex="-1"></a>rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb42-58"><a href="id_03_model_training.html#cb42-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-59"><a href="id_03_model_training.html#cb42-59" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.removeAll</span>()</span>
<span id="cb42-60"><a href="id_03_model_training.html#cb42-60" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mae, rmse, R2, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_mb.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb43-1"><a href="id_03_model_training.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_mb.RData&quot;</span>)</span>
<span id="cb43-2"><a href="id_03_model_training.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb43-3"><a href="id_03_model_training.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Norm. MAE&quot;</span>, <span class="st">&quot;Norm. RMSE&quot;</span>, <span class="st">&quot;R&lt;sup&gt;2&lt;/sup&gt;&quot;</span>),</span>
<span id="cb43-4"><a href="id_03_model_training.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean  s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb43-5"><a href="id_03_model_training.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(mae), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(mae), <span class="dv">3</span>)),</span>
<span id="cb43-6"><a href="id_03_model_training.html#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(rmse), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(rmse), <span class="dv">3</span>)),</span>
<span id="cb43-7"><a href="id_03_model_training.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(R2), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(R2), <span class="dv">3</span>))</span>
<span id="cb43-8"><a href="id_03_model_training.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb43-9"><a href="id_03_model_training.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb43-10"><a href="id_03_model_training.html#cb43-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb43-11"><a href="id_03_model_training.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-51883790bb830521755a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-51883790bb830521755a">{"x":{"filter":"none","vertical":false,"data":[["Norm. MAE","Norm. RMSE","R<sup>2<\/sup>"],["16.812  0.166","22.782  0.222","0.543  0.007"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean  s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="final-model-selection" class="section level3 hasAnchor" number="3.3.7">
<h3><span class="header-section-number">3.3.7</span> Final model selection<a href="id_03_model_training.html#final-model-selection" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb44-1"><a href="id_03_model_training.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb.RData&quot;</span>)</span>
<span id="cb44-2"><a href="id_03_model_training.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="id_03_model_training.html#cb44-3" aria-hidden="true" tabindex="-1"></a>holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/melanin_binding/whole_data_set/cv_holdout_predictions.csv&quot;</span>)</span>
<span id="cb44-4"><a href="id_03_model_training.html#cb44-4" aria-hidden="true" tabindex="-1"></a>fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb44-5"><a href="id_03_model_training.html#cb44-5" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb44-6"><a href="id_03_model_training.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Deep learning grid models</span></span>
<span id="cb44-7"><a href="id_03_model_training.html#cb44-7" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb44-8"><a href="id_03_model_training.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb44-9"><a href="id_03_model_training.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb44-10"><a href="id_03_model_training.html#cb44-10" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-11"><a href="id_03_model_training.html#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM grid models</span></span>
<span id="cb44-12"><a href="id_03_model_training.html#cb44-12" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb44-13"><a href="id_03_model_training.html#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb44-14"><a href="id_03_model_training.html#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb44-15"><a href="id_03_model_training.html#cb44-15" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-16"><a href="id_03_model_training.html#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM default models</span></span>
<span id="cb44-17"><a href="id_03_model_training.html#cb44-17" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb44-18"><a href="id_03_model_training.html#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb44-19"><a href="id_03_model_training.html#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb44-20"><a href="id_03_model_training.html#cb44-20" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-21"><a href="id_03_model_training.html#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost grid models</span></span>
<span id="cb44-22"><a href="id_03_model_training.html#cb44-22" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb44-23"><a href="id_03_model_training.html#cb44-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb44-24"><a href="id_03_model_training.html#cb44-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb44-25"><a href="id_03_model_training.html#cb44-25" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-26"><a href="id_03_model_training.html#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost default models</span></span>
<span id="cb44-27"><a href="id_03_model_training.html#cb44-27" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb44-28"><a href="id_03_model_training.html#cb44-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb44-29"><a href="id_03_model_training.html#cb44-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb44-30"><a href="id_03_model_training.html#cb44-30" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb44-31"><a href="id_03_model_training.html#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="co"># GLM</span></span>
<span id="cb44-32"><a href="id_03_model_training.html#cb44-32" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb44-33"><a href="id_03_model_training.html#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="co"># DRF</span></span>
<span id="cb44-34"><a href="id_03_model_training.html#cb44-34" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb44-35"><a href="id_03_model_training.html#cb44-35" aria-hidden="true" tabindex="-1"></a><span class="co"># XRT</span></span>
<span id="cb44-36"><a href="id_03_model_training.html#cb44-36" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb44-37"><a href="id_03_model_training.html#cb44-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner all</span></span>
<span id="cb44-38"><a href="id_03_model_training.html#cb44-38" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb44-39"><a href="id_03_model_training.html#cb44-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner final</span></span>
<span id="cb44-40"><a href="id_03_model_training.html#cb44-40" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb44-41"><a href="id_03_model_training.html#cb44-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner deep learning</span></span>
<span id="cb44-42"><a href="id_03_model_training.html#cb44-42" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb44-43"><a href="id_03_model_training.html#cb44-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner GBM</span></span>
<span id="cb44-44"><a href="id_03_model_training.html#cb44-44" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb44-45"><a href="id_03_model_training.html#cb44-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner XGBoost</span></span>
<span id="cb44-46"><a href="id_03_model_training.html#cb44-46" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb44-47"><a href="id_03_model_training.html#cb44-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-48"><a href="id_03_model_training.html#cb44-48" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb44-49"><a href="id_03_model_training.html#cb44-49" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">&quot;./other_data/melanin_binding/whole_data_set/cv_res.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb45-1"><a href="id_03_model_training.html#cb45-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/melanin_binding/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb45-2"><a href="id_03_model_training.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">statistical_testing</span>(data, <span class="at">metric_vec =</span> <span class="fu">c</span>(<span class="st">&quot;Norm. MAE&quot;</span>, <span class="st">&quot;Norm. RMSE&quot;</span>, <span class="st">&quot;R^2&quot;</span>), <span class="at">decreasing_vec =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span></code></pre></div>
<div id="htmlwidget-e27133e8f70f443ae305" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e27133e8f70f443ae305">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner neural network","Neural network grid model 154","Neural network grid model 45","Neural network grid model 210","Neural network grid model 201","Neural network grid model 203","Neural network grid model 146","Neural network grid model 145","Neural network grid model 182","Neural network grid model 155","Neural network grid model 174","Neural network grid model 90","Neural network grid model 93","Neural network grid model 213","Neural network grid model 29","Neural network grid model 200","Neural network grid model 139","Neural network grid model 159","Neural network grid model 178","Neural network grid model 123","Neural network grid model 176","Neural network grid model 102","Neural network grid model 129","Neural network grid model 207","Neural network grid model 187","Neural network grid model 126","Neural network grid model 196","Neural network grid model 76","Neural network grid model 116","Neural network grid model 124"],[0.4742,0.1875,0.1235,0.0775,0.0775,0.1428,0.8501,0.5714,0.1235,0.3462,0.2137,0.1235,0.0658,0.1638,null,0.1875,0.5217,0.2137,0.3092,0.0911,0.1638,0.1235,0.1638,0.0658,0.1638,0.1428,0.0557,0.0557,0.0658,0.0658,0.1638],[null,0.3455,0.3455,0.3092,0.3092,0.3455,0.3092,0.249,0.2236,0.3092,0.2236,0.249,0.2045,0.2776,0.2236,0.2236,0.2236,0.2236,0.2236,0.1675,0.2236,0.2236,0.249,0.2236,0.1675,0.1379,0.1517,0.1249,0.0632,0.0719,0.0719],[null,0.3855,0.3466,0.2801,0.4278,0.3466,0.3119,0.2801,0.2801,0.2801,0.2111,0.2801,0.2801,0.2801,0.1914,0.1741,0.2556,0.2308,0.2308,0.1914,0.2308,0.2556,0.2556,0.1569,0.2308,0.1569,0.1266,0.1266,0.1011,0.1011,0.0891],[5,13,16,18,32,25,2,4,26,6,8,12,21,11,1,15,3,9,17,19,23,27,10,33,14,7,22,44,29,28,20],[1,3,5,10,4,8,25,28,20,35,38,45,70,76,99,95,111,122,116,143,163,161,176,171,220,246,296,309,374,518,547],[1,3,5,10,4,8,28,32,20,37,39,49,76,82,101,96,120,127,125,145,166,175,185,176,223,247,297,312,374,523,552],[7,19,26,38,40,41,55,64,66,78,85,106,167,169,201,206,234,258,258,307,352,363,371,380,457,500,615,665,777,1069,1119]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb46"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb46-1"><a href="id_03_model_training.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># statistical_testing(data, metric_vec=c(&#39;Norm. MAE&#39;, &#39;Norm. RMSE&#39;, &#39;R^2&#39;), decreasing_vec=c(FALSE, FALSE, TRUE),</span></span>
<span id="cb46-2"><a href="id_03_model_training.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                     output_path=&#39;./other_data/melanin_binding/whole_data_set/cv_res_statistical_testing.csv&#39;)</span></span></code></pre></div>
</div>
<div id="final-reduced-sl" class="section level3 hasAnchor" number="3.3.8">
<h3><span class="header-section-number">3.3.8</span> Final reduced SL<a href="id_03_model_training.html#final-reduced-sl" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb47-1"><a href="id_03_model_training.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.init</span>(<span class="at">nthreads =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb47-2"><a href="id_03_model_training.html#cb47-2" aria-hidden="true" tabindex="-1"></a>model_path <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/melanin_binding/whole_data_set/superlearner_iter_3&quot;</span></span>
<span id="cb47-3"><a href="id_03_model_training.html#cb47-3" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(model_path)</span>
<span id="cb47-4"><a href="id_03_model_training.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb.RData&quot;</span>)</span>
<span id="cb47-5"><a href="id_03_model_training.html#cb47-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/melanin_binding/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb47-6"><a href="id_03_model_training.html#cb47-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(model<span class="sc">@</span>model<span class="sc">$</span>metalearner_model<span class="sc">@</span>model<span class="sc">$</span>coefficients_table)[<span class="fu">c</span>(<span class="st">&quot;names&quot;</span>, <span class="st">&quot;standardized_coefficients&quot;</span>)][<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb47-7"><a href="id_03_model_training.html#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="id_03_model_training.html#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)) {</span>
<span id="cb47-9"><a href="id_03_model_training.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> df<span class="sc">$</span>names[i]</span>
<span id="cb47-10"><a href="id_03_model_training.html#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;DeepLearning_model&quot;</span>)) {</span>
<span id="cb47-11"><a href="id_03_model_training.html#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dl_grid)) {</span>
<span id="cb47-12"><a href="id_03_model_training.html#cb47-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> dl_grid[[j]]) <span class="cf">break</span></span>
<span id="cb47-13"><a href="id_03_model_training.html#cb47-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb47-14"><a href="id_03_model_training.html#cb47-14" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, j)</span>
<span id="cb47-15"><a href="id_03_model_training.html#cb47-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;GBM_model&quot;</span>)) {</span>
<span id="cb47-16"><a href="id_03_model_training.html#cb47-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(gbm_grid)) {</span>
<span id="cb47-17"><a href="id_03_model_training.html#cb47-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> gbm_grid[[j]]) <span class="cf">break</span></span>
<span id="cb47-18"><a href="id_03_model_training.html#cb47-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb47-19"><a href="id_03_model_training.html#cb47-19" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, j)</span>
<span id="cb47-20"><a href="id_03_model_training.html#cb47-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;XGBoost_model&quot;</span>)) {</span>
<span id="cb47-21"><a href="id_03_model_training.html#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(xgboost_grid)) {</span>
<span id="cb47-22"><a href="id_03_model_training.html#cb47-22" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> xgboost_grid[[j]]) <span class="cf">break</span></span>
<span id="cb47-23"><a href="id_03_model_training.html#cb47-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb47-24"><a href="id_03_model_training.html#cb47-24" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, j)</span>
<span id="cb47-25"><a href="id_03_model_training.html#cb47-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb47-26"><a href="id_03_model_training.html#cb47-26" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">strsplit</span>(name, <span class="st">&quot;_&quot;</span>)[[<span class="dv">1</span>]], <span class="at">collapse =</span> <span class="st">&quot; model &quot;</span>)</span>
<span id="cb47-27"><a href="id_03_model_training.html#cb47-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb47-28"><a href="id_03_model_training.html#cb47-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-29"><a href="id_03_model_training.html#cb47-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-30"><a href="id_03_model_training.html#cb47-30" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> df<span class="sc">$</span>names</span>
<span id="cb47-31"><a href="id_03_model_training.html#cb47-31" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df, data[<span class="st">&quot;R^2 mean&quot;</span>], <span class="at">by =</span> <span class="st">&quot;row.names&quot;</span>)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb47-32"><a href="id_03_model_training.html#cb47-32" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>standardized_coefficients <span class="sc">&gt;</span> <span class="dv">0</span>, ]</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb48-1"><a href="id_03_model_training.html#cb48-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(names, standardized_coefficients), <span class="at">y =</span> standardized_coefficients, <span class="at">fill =</span> <span class="st">`</span><span class="at">R^2 mean</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="id_03_model_training.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb48-3"><a href="id_03_model_training.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>, <span class="at">n.breaks =</span> <span class="dv">4</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.30</span>, <span class="fl">0.60</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb48-4"><a href="id_03_model_training.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, <span class="st">`</span><span class="at">R^2 mean</span><span class="st">`</span>)), <span class="at">nudge_y =</span> <span class="sc">-</span><span class="fl">0.002</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-5"><a href="id_03_model_training.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, standardized_coefficients)), <span class="at">nudge_y =</span> <span class="fl">0.0025</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb48-6"><a href="id_03_model_training.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb48-7"><a href="id_03_model_training.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(df<span class="sc">$</span>standardized_coefficients) <span class="sc">+</span> <span class="fl">0.005</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="id_03_model_training.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb48-9"><a href="id_03_model_training.html#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-10"><a href="id_03_model_training.html#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-11"><a href="id_03_model_training.html#cb48-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-12"><a href="id_03_model_training.html#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-13"><a href="id_03_model_training.html#cb48-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-14"><a href="id_03_model_training.html#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb48-15"><a href="id_03_model_training.html#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb48-16"><a href="id_03_model_training.html#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb48-17"><a href="id_03_model_training.html#cb48-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="st">&quot;pt&quot;</span>),</span>
<span id="cb48-18"><a href="id_03_model_training.html#cb48-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb48-19"><a href="id_03_model_training.html#cb48-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb48-20"><a href="id_03_model_training.html#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb48-21"><a href="id_03_model_training.html#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb48-22"><a href="id_03_model_training.html#cb48-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb48-23"><a href="id_03_model_training.html#cb48-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.5</span>)</span>
<span id="cb48-24"><a href="id_03_model_training.html#cb48-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb48-25"><a href="id_03_model_training.html#cb48-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="fu">expression</span>(<span class="fu">italic</span>(<span class="st">&quot;R&quot;</span><span class="sc">^</span><span class="dv">2</span>)))) <span class="sc">+</span></span>
<span id="cb48-26"><a href="id_03_model_training.html#cb48-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-27"><a href="id_03_model_training.html#cb48-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Coefficient&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-28"><a href="id_03_model_training.html#cb48-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Melanin binding&quot;</span>)</span></code></pre></div>
<p><img src="figures/Fig%202%20mb%20super%20learner.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="cell-penetration-classification-1" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Cell-penetration (classification)<a href="id_03_model_training.html#cell-penetration-classification-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="model-training-1" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Model training<a href="id_03_model_training.html#model-training-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb49-1"><a href="id_03_model_training.html#cb49-1" aria-hidden="true" tabindex="-1"></a>train_cpp_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb49-2"><a href="id_03_model_training.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb49-3"><a href="id_03_model_training.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  tmp[<span class="st">&quot;category&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tmp[<span class="st">&quot;category&quot;</span>])</span>
<span id="cb49-4"><a href="id_03_model_training.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;category&quot;</span></span>
<span id="cb49-5"><a href="id_03_model_training.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb49-6"><a href="id_03_model_training.html#cb49-6" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>category)</span>
<span id="cb49-7"><a href="id_03_model_training.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  samp_factors <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">mean</span>(<span class="fu">table</span>(train_set<span class="sc">$</span>category)) <span class="sc">/</span> <span class="fu">table</span>(train_set<span class="sc">$</span>category))</span>
<span id="cb49-8"><a href="id_03_model_training.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb49-9"><a href="id_03_model_training.html#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb49-10"><a href="id_03_model_training.html#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb49-11"><a href="id_03_model_training.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-12"><a href="id_03_model_training.html#cb49-12" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb49-13"><a href="id_03_model_training.html#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-14"><a href="id_03_model_training.html#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb49-15"><a href="id_03_model_training.html#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-16"><a href="id_03_model_training.html#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb49-17"><a href="id_03_model_training.html#cb49-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb49-18"><a href="id_03_model_training.html#cb49-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb49-19"><a href="id_03_model_training.html#cb49-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-20"><a href="id_03_model_training.html#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb49-21"><a href="id_03_model_training.html#cb49-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-22"><a href="id_03_model_training.html#cb49-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb49-23"><a href="id_03_model_training.html#cb49-23" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-24"><a href="id_03_model_training.html#cb49-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-25"><a href="id_03_model_training.html#cb49-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-26"><a href="id_03_model_training.html#cb49-26" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb49-27"><a href="id_03_model_training.html#cb49-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-28"><a href="id_03_model_training.html#cb49-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb49-29"><a href="id_03_model_training.html#cb49-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-30"><a href="id_03_model_training.html#cb49-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb49-31"><a href="id_03_model_training.html#cb49-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb49-32"><a href="id_03_model_training.html#cb49-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-33"><a href="id_03_model_training.html#cb49-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb49-34"><a href="id_03_model_training.html#cb49-34" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-35"><a href="id_03_model_training.html#cb49-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-36"><a href="id_03_model_training.html#cb49-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-37"><a href="id_03_model_training.html#cb49-37" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb49-38"><a href="id_03_model_training.html#cb49-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-39"><a href="id_03_model_training.html#cb49-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-40"><a href="id_03_model_training.html#cb49-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-41"><a href="id_03_model_training.html#cb49-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb49-42"><a href="id_03_model_training.html#cb49-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-43"><a href="id_03_model_training.html#cb49-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-44"><a href="id_03_model_training.html#cb49-44" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-45"><a href="id_03_model_training.html#cb49-45" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb49-46"><a href="id_03_model_training.html#cb49-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-47"><a href="id_03_model_training.html#cb49-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-48"><a href="id_03_model_training.html#cb49-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-49"><a href="id_03_model_training.html#cb49-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb49-50"><a href="id_03_model_training.html#cb49-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-51"><a href="id_03_model_training.html#cb49-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-52"><a href="id_03_model_training.html#cb49-52" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-53"><a href="id_03_model_training.html#cb49-53" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb49-54"><a href="id_03_model_training.html#cb49-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-55"><a href="id_03_model_training.html#cb49-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-56"><a href="id_03_model_training.html#cb49-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-57"><a href="id_03_model_training.html#cb49-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb49-58"><a href="id_03_model_training.html#cb49-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-59"><a href="id_03_model_training.html#cb49-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-60"><a href="id_03_model_training.html#cb49-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-61"><a href="id_03_model_training.html#cb49-61" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb49-62"><a href="id_03_model_training.html#cb49-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-63"><a href="id_03_model_training.html#cb49-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-64"><a href="id_03_model_training.html#cb49-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-65"><a href="id_03_model_training.html#cb49-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb49-66"><a href="id_03_model_training.html#cb49-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-67"><a href="id_03_model_training.html#cb49-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-68"><a href="id_03_model_training.html#cb49-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-69"><a href="id_03_model_training.html#cb49-69" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb49-70"><a href="id_03_model_training.html#cb49-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-71"><a href="id_03_model_training.html#cb49-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-72"><a href="id_03_model_training.html#cb49-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-73"><a href="id_03_model_training.html#cb49-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb49-74"><a href="id_03_model_training.html#cb49-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-75"><a href="id_03_model_training.html#cb49-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-76"><a href="id_03_model_training.html#cb49-76" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-77"><a href="id_03_model_training.html#cb49-77" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb49-78"><a href="id_03_model_training.html#cb49-78" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-79"><a href="id_03_model_training.html#cb49-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-80"><a href="id_03_model_training.html#cb49-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-81"><a href="id_03_model_training.html#cb49-81" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb49-82"><a href="id_03_model_training.html#cb49-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-83"><a href="id_03_model_training.html#cb49-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb49-84"><a href="id_03_model_training.html#cb49-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb49-85"><a href="id_03_model_training.html#cb49-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb49-86"><a href="id_03_model_training.html#cb49-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-87"><a href="id_03_model_training.html#cb49-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb49-88"><a href="id_03_model_training.html#cb49-88" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-89"><a href="id_03_model_training.html#cb49-89" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-90"><a href="id_03_model_training.html#cb49-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-91"><a href="id_03_model_training.html#cb49-91" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb49-92"><a href="id_03_model_training.html#cb49-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-93"><a href="id_03_model_training.html#cb49-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-94"><a href="id_03_model_training.html#cb49-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-95"><a href="id_03_model_training.html#cb49-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb49-96"><a href="id_03_model_training.html#cb49-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-97"><a href="id_03_model_training.html#cb49-97" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-98"><a href="id_03_model_training.html#cb49-98" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb49-99"><a href="id_03_model_training.html#cb49-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-100"><a href="id_03_model_training.html#cb49-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-101"><a href="id_03_model_training.html#cb49-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-102"><a href="id_03_model_training.html#cb49-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb49-103"><a href="id_03_model_training.html#cb49-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-104"><a href="id_03_model_training.html#cb49-104" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-105"><a href="id_03_model_training.html#cb49-105" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb49-106"><a href="id_03_model_training.html#cb49-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-107"><a href="id_03_model_training.html#cb49-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb49-108"><a href="id_03_model_training.html#cb49-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb49-109"><a href="id_03_model_training.html#cb49-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb49-110"><a href="id_03_model_training.html#cb49-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-111"><a href="id_03_model_training.html#cb49-111" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-112"><a href="id_03_model_training.html#cb49-112" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb49-113"><a href="id_03_model_training.html#cb49-113" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-114"><a href="id_03_model_training.html#cb49-114" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-115"><a href="id_03_model_training.html#cb49-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-116"><a href="id_03_model_training.html#cb49-116" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb49-117"><a href="id_03_model_training.html#cb49-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-118"><a href="id_03_model_training.html#cb49-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb49-119"><a href="id_03_model_training.html#cb49-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb49-120"><a href="id_03_model_training.html#cb49-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-121"><a href="id_03_model_training.html#cb49-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-122"><a href="id_03_model_training.html#cb49-122" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-123"><a href="id_03_model_training.html#cb49-123" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-124"><a href="id_03_model_training.html#cb49-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-125"><a href="id_03_model_training.html#cb49-125" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb49-126"><a href="id_03_model_training.html#cb49-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb49-127"><a href="id_03_model_training.html#cb49-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb49-128"><a href="id_03_model_training.html#cb49-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb49-129"><a href="id_03_model_training.html#cb49-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb49-130"><a href="id_03_model_training.html#cb49-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb49-131"><a href="id_03_model_training.html#cb49-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-132"><a href="id_03_model_training.html#cb49-132" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-133"><a href="id_03_model_training.html#cb49-133" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb49-134"><a href="id_03_model_training.html#cb49-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb49-135"><a href="id_03_model_training.html#cb49-135" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb49-136"><a href="id_03_model_training.html#cb49-136" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb49-137"><a href="id_03_model_training.html#cb49-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb49-138"><a href="id_03_model_training.html#cb49-138" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb49-139"><a href="id_03_model_training.html#cb49-139" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb49-140"><a href="id_03_model_training.html#cb49-140" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb49-141"><a href="id_03_model_training.html#cb49-141" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb49-142"><a href="id_03_model_training.html#cb49-142" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-143"><a href="id_03_model_training.html#cb49-143" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb49-144"><a href="id_03_model_training.html#cb49-144" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-145"><a href="id_03_model_training.html#cb49-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb49-146"><a href="id_03_model_training.html#cb49-146" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb49-147"><a href="id_03_model_training.html#cb49-147" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-148"><a href="id_03_model_training.html#cb49-148" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb49-149"><a href="id_03_model_training.html#cb49-149" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb49-150"><a href="id_03_model_training.html#cb49-150" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb49-151"><a href="id_03_model_training.html#cb49-151" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb49-152"><a href="id_03_model_training.html#cb49-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb49-153"><a href="id_03_model_training.html#cb49-153" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb49-154"><a href="id_03_model_training.html#cb49-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb49-155"><a href="id_03_model_training.html#cb49-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb49-156"><a href="id_03_model_training.html#cb49-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb49-157"><a href="id_03_model_training.html#cb49-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb49-158"><a href="id_03_model_training.html#cb49-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb49-159"><a href="id_03_model_training.html#cb49-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-160"><a href="id_03_model_training.html#cb49-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb49-161"><a href="id_03_model_training.html#cb49-161" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-162"><a href="id_03_model_training.html#cb49-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb49-163"><a href="id_03_model_training.html#cb49-163" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-164"><a href="id_03_model_training.html#cb49-164" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-165"><a href="id_03_model_training.html#cb49-165" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-166"><a href="id_03_model_training.html#cb49-166" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb49-167"><a href="id_03_model_training.html#cb49-167" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-168"><a href="id_03_model_training.html#cb49-168" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-169"><a href="id_03_model_training.html#cb49-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb49-170"><a href="id_03_model_training.html#cb49-170" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-171"><a href="id_03_model_training.html#cb49-171" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb49-172"><a href="id_03_model_training.html#cb49-172" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb49-173"><a href="id_03_model_training.html#cb49-173" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb49-174"><a href="id_03_model_training.html#cb49-174" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb49-175"><a href="id_03_model_training.html#cb49-175" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb49-176"><a href="id_03_model_training.html#cb49-176" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb49-177"><a href="id_03_model_training.html#cb49-177" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb49-178"><a href="id_03_model_training.html#cb49-178" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb49-179"><a href="id_03_model_training.html#cb49-179" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb49-180"><a href="id_03_model_training.html#cb49-180" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb49-181"><a href="id_03_model_training.html#cb49-181" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb49-182"><a href="id_03_model_training.html#cb49-182" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb49-183"><a href="id_03_model_training.html#cb49-183" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb49-184"><a href="id_03_model_training.html#cb49-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb49-185"><a href="id_03_model_training.html#cb49-185" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-186"><a href="id_03_model_training.html#cb49-186" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb49-187"><a href="id_03_model_training.html#cb49-187" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb49-188"><a href="id_03_model_training.html#cb49-188" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb49-189"><a href="id_03_model_training.html#cb49-189" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-190"><a href="id_03_model_training.html#cb49-190" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb49-191"><a href="id_03_model_training.html#cb49-191" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb49-192"><a href="id_03_model_training.html#cb49-192" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb49-193"><a href="id_03_model_training.html#cb49-193" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb49-194"><a href="id_03_model_training.html#cb49-194" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb49-195"><a href="id_03_model_training.html#cb49-195" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb49-196"><a href="id_03_model_training.html#cb49-196" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb49-197"><a href="id_03_model_training.html#cb49-197" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb49-198"><a href="id_03_model_training.html#cb49-198" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb49-199"><a href="id_03_model_training.html#cb49-199" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb49-200"><a href="id_03_model_training.html#cb49-200" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb49-201"><a href="id_03_model_training.html#cb49-201" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-202"><a href="id_03_model_training.html#cb49-202" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb49-203"><a href="id_03_model_training.html#cb49-203" aria-hidden="true" tabindex="-1"></a>        <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-204"><a href="id_03_model_training.html#cb49-204" aria-hidden="true" tabindex="-1"></a>        <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb49-205"><a href="id_03_model_training.html#cb49-205" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb49-206"><a href="id_03_model_training.html#cb49-206" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-207"><a href="id_03_model_training.html#cb49-207" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-208"><a href="id_03_model_training.html#cb49-208" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb49-209"><a href="id_03_model_training.html#cb49-209" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-210"><a href="id_03_model_training.html#cb49-210" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-211"><a href="id_03_model_training.html#cb49-211" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb49-212"><a href="id_03_model_training.html#cb49-212" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb49-213"><a href="id_03_model_training.html#cb49-213" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-214"><a href="id_03_model_training.html#cb49-214" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb49-215"><a href="id_03_model_training.html#cb49-215" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb49-216"><a href="id_03_model_training.html#cb49-216" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb49-217"><a href="id_03_model_training.html#cb49-217" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb49-218"><a href="id_03_model_training.html#cb49-218" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> deeplearning_1<span class="sc">@</span>model_ids</span>
<span id="cb49-219"><a href="id_03_model_training.html#cb49-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb49-220"><a href="id_03_model_training.html#cb49-220" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb49-221"><a href="id_03_model_training.html#cb49-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb49-222"><a href="id_03_model_training.html#cb49-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb49-223"><a href="id_03_model_training.html#cb49-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb49-224"><a href="id_03_model_training.html#cb49-224" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb49-225"><a href="id_03_model_training.html#cb49-225" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb49-226"><a href="id_03_model_training.html#cb49-226" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-227"><a href="id_03_model_training.html#cb49-227" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb49-228"><a href="id_03_model_training.html#cb49-228" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-229"><a href="id_03_model_training.html#cb49-229" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb49-230"><a href="id_03_model_training.html#cb49-230" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-231"><a href="id_03_model_training.html#cb49-231" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-232"><a href="id_03_model_training.html#cb49-232" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-233"><a href="id_03_model_training.html#cb49-233" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb49-234"><a href="id_03_model_training.html#cb49-234" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-235"><a href="id_03_model_training.html#cb49-235" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-236"><a href="id_03_model_training.html#cb49-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb49-237"><a href="id_03_model_training.html#cb49-237" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-238"><a href="id_03_model_training.html#cb49-238" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb49-239"><a href="id_03_model_training.html#cb49-239" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb49-240"><a href="id_03_model_training.html#cb49-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb49-241"><a href="id_03_model_training.html#cb49-241" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb49-242"><a href="id_03_model_training.html#cb49-242" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb49-243"><a href="id_03_model_training.html#cb49-243" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb49-244"><a href="id_03_model_training.html#cb49-244" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb49-245"><a href="id_03_model_training.html#cb49-245" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb49-246"><a href="id_03_model_training.html#cb49-246" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb49-247"><a href="id_03_model_training.html#cb49-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-248"><a href="id_03_model_training.html#cb49-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb49-249"><a href="id_03_model_training.html#cb49-249" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-250"><a href="id_03_model_training.html#cb49-250" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb49-251"><a href="id_03_model_training.html#cb49-251" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-252"><a href="id_03_model_training.html#cb49-252" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-253"><a href="id_03_model_training.html#cb49-253" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-254"><a href="id_03_model_training.html#cb49-254" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb49-255"><a href="id_03_model_training.html#cb49-255" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-256"><a href="id_03_model_training.html#cb49-256" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-257"><a href="id_03_model_training.html#cb49-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb49-258"><a href="id_03_model_training.html#cb49-258" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-259"><a href="id_03_model_training.html#cb49-259" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb49-260"><a href="id_03_model_training.html#cb49-260" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb49-261"><a href="id_03_model_training.html#cb49-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb49-262"><a href="id_03_model_training.html#cb49-262" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb49-263"><a href="id_03_model_training.html#cb49-263" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb49-264"><a href="id_03_model_training.html#cb49-264" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb49-265"><a href="id_03_model_training.html#cb49-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb49-266"><a href="id_03_model_training.html#cb49-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb49-267"><a href="id_03_model_training.html#cb49-267" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb49-268"><a href="id_03_model_training.html#cb49-268" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-269"><a href="id_03_model_training.html#cb49-269" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb49-270"><a href="id_03_model_training.html#cb49-270" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-271"><a href="id_03_model_training.html#cb49-271" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb49-272"><a href="id_03_model_training.html#cb49-272" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-273"><a href="id_03_model_training.html#cb49-273" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-274"><a href="id_03_model_training.html#cb49-274" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-275"><a href="id_03_model_training.html#cb49-275" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb49-276"><a href="id_03_model_training.html#cb49-276" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-277"><a href="id_03_model_training.html#cb49-277" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb49-278"><a href="id_03_model_training.html#cb49-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb49-279"><a href="id_03_model_training.html#cb49-279" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-280"><a href="id_03_model_training.html#cb49-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb49-281"><a href="id_03_model_training.html#cb49-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb49-282"><a href="id_03_model_training.html#cb49-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb49-283"><a href="id_03_model_training.html#cb49-283" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation-1" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Inner cross-validation<a href="id_03_model_training.html#inner-cross-validation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb50-1"><a href="id_03_model_training.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits.RData&quot;</span>)</span>
<span id="cb50-2"><a href="id_03_model_training.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb50-3"><a href="id_03_model_training.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb50-4"><a href="id_03_model_training.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb50-5"><a href="id_03_model_training.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration/&quot;</span>, prefix)</span>
<span id="cb50-6"><a href="id_03_model_training.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb50-7"><a href="id_03_model_training.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_cpp_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb50-8"><a href="id_03_model_training.html#cb50-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="training-on-whole-data-set-1" class="section level3 hasAnchor" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Training on whole data set<a href="id_03_model_training.html#training-on-whole-data-set-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb51-1"><a href="id_03_model_training.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits.RData&quot;</span>)</span>
<span id="cb51-2"><a href="id_03_model_training.html#cb51-2" aria-hidden="true" tabindex="-1"></a>prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb51-3"><a href="id_03_model_training.html#cb51-3" aria-hidden="true" tabindex="-1"></a>exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration/&quot;</span>, prefix)</span>
<span id="cb51-4"><a href="id_03_model_training.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb51-5"><a href="id_03_model_training.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">train_cpp_models</span>(<span class="at">train_set =</span> cpp_data, <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb52-1"><a href="id_03_model_training.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb52-2"><a href="id_03_model_training.html#cb52-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-3"><a href="id_03_model_training.html#cb52-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-4"><a href="id_03_model_training.html#cb52-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-5"><a href="id_03_model_training.html#cb52-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-6"><a href="id_03_model_training.html#cb52-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-7"><a href="id_03_model_training.html#cb52-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-8"><a href="id_03_model_training.html#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>) {</span>
<span id="cb52-9"><a href="id_03_model_training.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">11</span>) {</span>
<span id="cb52-10"><a href="id_03_model_training.html#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Whole data set</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb52-11"><a href="id_03_model_training.html#cb52-11" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb52-12"><a href="id_03_model_training.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb52-13"><a href="id_03_model_training.html#cb52-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb52-14"><a href="id_03_model_training.html#cb52-14" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb52-15"><a href="id_03_model_training.html#cb52-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-16"><a href="id_03_model_training.html#cb52-16" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration/&quot;</span>, prefix)</span>
<span id="cb52-17"><a href="id_03_model_training.html#cb52-17" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb52-18"><a href="id_03_model_training.html#cb52-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb52-19"><a href="id_03_model_training.html#cb52-19" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb52-20"><a href="id_03_model_training.html#cb52-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb52-21"><a href="id_03_model_training.html#cb52-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb52-22"><a href="id_03_model_training.html#cb52-22" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb52-23"><a href="id_03_model_training.html#cb52-23" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb52-24"><a href="id_03_model_training.html#cb52-24" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb52-25"><a href="id_03_model_training.html#cb52-25" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb52-26"><a href="id_03_model_training.html#cb52-26" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb52-27"><a href="id_03_model_training.html#cb52-27" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb52-28"><a href="id_03_model_training.html#cb52-28" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb52-29"><a href="id_03_model_training.html#cb52-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb52-30"><a href="id_03_model_training.html#cb52-30" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb52-31"><a href="id_03_model_training.html#cb52-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb52-32"><a href="id_03_model_training.html#cb52-32" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb52-33"><a href="id_03_model_training.html#cb52-33" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb52-34"><a href="id_03_model_training.html#cb52-34" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb52-35"><a href="id_03_model_training.html#cb52-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb52-36"><a href="id_03_model_training.html#cb52-36" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb52-37"><a href="id_03_model_training.html#cb52-37" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb52-38"><a href="id_03_model_training.html#cb52-38" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb52-39"><a href="id_03_model_training.html#cb52-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb52-40"><a href="id_03_model_training.html#cb52-40" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb52-41"><a href="id_03_model_training.html#cb52-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb52-42"><a href="id_03_model_training.html#cb52-42" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb52-43"><a href="id_03_model_training.html#cb52-43" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb52-44"><a href="id_03_model_training.html#cb52-44" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb52-45"><a href="id_03_model_training.html#cb52-45" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb52-46"><a href="id_03_model_training.html#cb52-46" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb52-47"><a href="id_03_model_training.html#cb52-47" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb52-48"><a href="id_03_model_training.html#cb52-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-49"><a href="id_03_model_training.html#cb52-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-50"><a href="id_03_model_training.html#cb52-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb52-51"><a href="id_03_model_training.html#cb52-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb52-52"><a href="id_03_model_training.html#cb52-52" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb52-53"><a href="id_03_model_training.html#cb52-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb52-54"><a href="id_03_model_training.html#cb52-54" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb52-55"><a href="id_03_model_training.html#cb52-55" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb52-56"><a href="id_03_model_training.html#cb52-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb52-57"><a href="id_03_model_training.html#cb52-57" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb52-58"><a href="id_03_model_training.html#cb52-58" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb52-59"><a href="id_03_model_training.html#cb52-59" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb52-60"><a href="id_03_model_training.html#cb52-60" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb52-61"><a href="id_03_model_training.html#cb52-61" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb52-62"><a href="id_03_model_training.html#cb52-62" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb52-63"><a href="id_03_model_training.html#cb52-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb52-64"><a href="id_03_model_training.html#cb52-64" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb52-65"><a href="id_03_model_training.html#cb52-65" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb52-66"><a href="id_03_model_training.html#cb52-66" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb52-67"><a href="id_03_model_training.html#cb52-67" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb52-68"><a href="id_03_model_training.html#cb52-68" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb52-69"><a href="id_03_model_training.html#cb52-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb52-70"><a href="id_03_model_training.html#cb52-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb52-71"><a href="id_03_model_training.html#cb52-71" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb52-72"><a href="id_03_model_training.html#cb52-72" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb52-73"><a href="id_03_model_training.html#cb52-73" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb52-74"><a href="id_03_model_training.html#cb52-74" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb52-75"><a href="id_03_model_training.html#cb52-75" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb52-76"><a href="id_03_model_training.html#cb52-76" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb52-77"><a href="id_03_model_training.html#cb52-77" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb52-78"><a href="id_03_model_training.html#cb52-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-79"><a href="id_03_model_training.html#cb52-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-80"><a href="id_03_model_training.html#cb52-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb52-81"><a href="id_03_model_training.html#cb52-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb52-82"><a href="id_03_model_training.html#cb52-82" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb52-83"><a href="id_03_model_training.html#cb52-83" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb52-84"><a href="id_03_model_training.html#cb52-84" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb52-85"><a href="id_03_model_training.html#cb52-85" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb52-86"><a href="id_03_model_training.html#cb52-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb52-87"><a href="id_03_model_training.html#cb52-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb52-88"><a href="id_03_model_training.html#cb52-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb52-89"><a href="id_03_model_training.html#cb52-89" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb52-90"><a href="id_03_model_training.html#cb52-90" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb52-91"><a href="id_03_model_training.html#cb52-91" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb52-92"><a href="id_03_model_training.html#cb52-92" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb52-93"><a href="id_03_model_training.html#cb52-93" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb52-94"><a href="id_03_model_training.html#cb52-94" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb52-95"><a href="id_03_model_training.html#cb52-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb52-96"><a href="id_03_model_training.html#cb52-96" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb52-97"><a href="id_03_model_training.html#cb52-97" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb52-98"><a href="id_03_model_training.html#cb52-98" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb52-99"><a href="id_03_model_training.html#cb52-99" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb52-100"><a href="id_03_model_training.html#cb52-100" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb52-101"><a href="id_03_model_training.html#cb52-101" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb52-102"><a href="id_03_model_training.html#cb52-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb52-103"><a href="id_03_model_training.html#cb52-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb52-104"><a href="id_03_model_training.html#cb52-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb52-105"><a href="id_03_model_training.html#cb52-105" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb52-106"><a href="id_03_model_training.html#cb52-106" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb52-107"><a href="id_03_model_training.html#cb52-107" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb52-108"><a href="id_03_model_training.html#cb52-108" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb52-109"><a href="id_03_model_training.html#cb52-109" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb52-110"><a href="id_03_model_training.html#cb52-110" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb52-111"><a href="id_03_model_training.html#cb52-111" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb52-112"><a href="id_03_model_training.html#cb52-112" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-113"><a href="id_03_model_training.html#cb52-113" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-114"><a href="id_03_model_training.html#cb52-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb52-115"><a href="id_03_model_training.html#cb52-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-116"><a href="id_03_model_training.html#cb52-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-117"><a href="id_03_model_training.html#cb52-117" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb52-118"><a href="id_03_model_training.html#cb52-118" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb52-119"><a href="id_03_model_training.html#cb52-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-120"><a href="id_03_model_training.html#cb52-120" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb52-121"><a href="id_03_model_training.html#cb52-121" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb52-122"><a href="id_03_model_training.html#cb52-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-123"><a href="id_03_model_training.html#cb52-123" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb52-124"><a href="id_03_model_training.html#cb52-124" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb52-125"><a href="id_03_model_training.html#cb52-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-126"><a href="id_03_model_training.html#cb52-126" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/cell_penetration/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb52-127"><a href="id_03_model_training.html#cb52-127" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/cell_penetration/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb52-128"><a href="id_03_model_training.html#cb52-128" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/cell_penetration/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb52-129"><a href="id_03_model_training.html#cb52-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-130"><a href="id_03_model_training.html#cb52-130" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation-1" class="section level3 hasAnchor" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Model evaluation<a href="id_03_model_training.html#model-evaluation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb53-1"><a href="id_03_model_training.html#cb53-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb53-2"><a href="id_03_model_training.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb53-3"><a href="id_03_model_training.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-4"><a href="id_03_model_training.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb53-5"><a href="id_03_model_training.html#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb53-6"><a href="id_03_model_training.html#cb53-6" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb53-7"><a href="id_03_model_training.html#cb53-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb53-8"><a href="id_03_model_training.html#cb53-8" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb53-9"><a href="id_03_model_training.html#cb53-9" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb53-10"><a href="id_03_model_training.html#cb53-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb53-11"><a href="id_03_model_training.html#cb53-11" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb53-12"><a href="id_03_model_training.html#cb53-12" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb53-13"><a href="id_03_model_training.html#cb53-13" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb53-14"><a href="id_03_model_training.html#cb53-14" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb53-15"><a href="id_03_model_training.html#cb53-15" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb53-16"><a href="id_03_model_training.html#cb53-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb53-17"><a href="id_03_model_training.html#cb53-17" aria-hidden="true" tabindex="-1"></a>    logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-18"><a href="id_03_model_training.html#cb53-18" aria-hidden="true" tabindex="-1"></a>    MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-19"><a href="id_03_model_training.html#cb53-19" aria-hidden="true" tabindex="-1"></a>    F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-20"><a href="id_03_model_training.html#cb53-20" aria-hidden="true" tabindex="-1"></a>    acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-21"><a href="id_03_model_training.html#cb53-21" aria-hidden="true" tabindex="-1"></a>    EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-22"><a href="id_03_model_training.html#cb53-22" aria-hidden="true" tabindex="-1"></a>    BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-23"><a href="id_03_model_training.html#cb53-23" aria-hidden="true" tabindex="-1"></a>    threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb53-24"><a href="id_03_model_training.html#cb53-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb53-25"><a href="id_03_model_training.html#cb53-25" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>], <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb53-26"><a href="id_03_model_training.html#cb53-26" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb53-27"><a href="id_03_model_training.html#cb53-27" aria-hidden="true" tabindex="-1"></a>      y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb53-28"><a href="id_03_model_training.html#cb53-28" aria-hidden="true" tabindex="-1"></a>      logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-29"><a href="id_03_model_training.html#cb53-29" aria-hidden="true" tabindex="-1"></a>      MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb53-30"><a href="id_03_model_training.html#cb53-30" aria-hidden="true" tabindex="-1"></a>      F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-31"><a href="id_03_model_training.html#cb53-31" aria-hidden="true" tabindex="-1"></a>      acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-32"><a href="id_03_model_training.html#cb53-32" aria-hidden="true" tabindex="-1"></a>      EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb53-33"><a href="id_03_model_training.html#cb53-33" aria-hidden="true" tabindex="-1"></a>      BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb53-34"><a href="id_03_model_training.html#cb53-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb53-35"><a href="id_03_model_training.html#cb53-35" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb53-36"><a href="id_03_model_training.html#cb53-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb53-37"><a href="id_03_model_training.html#cb53-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb53-38"><a href="id_03_model_training.html#cb53-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb53-39"><a href="id_03_model_training.html#cb53-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb53-40"><a href="id_03_model_training.html#cb53-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb53-41"><a href="id_03_model_training.html#cb53-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb53-42"><a href="id_03_model_training.html#cb53-42" aria-hidden="true" tabindex="-1"></a>      logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb53-43"><a href="id_03_model_training.html#cb53-43" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb53-44"><a href="id_03_model_training.html#cb53-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb53-45"><a href="id_03_model_training.html#cb53-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb53-46"><a href="id_03_model_training.html#cb53-46" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb53-47"><a href="id_03_model_training.html#cb53-47" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb53-48"><a href="id_03_model_training.html#cb53-48" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb53-49"><a href="id_03_model_training.html#cb53-49" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb53-50"><a href="id_03_model_training.html#cb53-50" aria-hidden="true" tabindex="-1"></a>        logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-51"><a href="id_03_model_training.html#cb53-51" aria-hidden="true" tabindex="-1"></a>        MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-52"><a href="id_03_model_training.html#cb53-52" aria-hidden="true" tabindex="-1"></a>        F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-53"><a href="id_03_model_training.html#cb53-53" aria-hidden="true" tabindex="-1"></a>        acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-54"><a href="id_03_model_training.html#cb53-54" aria-hidden="true" tabindex="-1"></a>        EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-55"><a href="id_03_model_training.html#cb53-55" aria-hidden="true" tabindex="-1"></a>        BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb53-56"><a href="id_03_model_training.html#cb53-56" aria-hidden="true" tabindex="-1"></a>        threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb53-57"><a href="id_03_model_training.html#cb53-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb53-58"><a href="id_03_model_training.html#cb53-58" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>], <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb53-59"><a href="id_03_model_training.html#cb53-59" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb53-60"><a href="id_03_model_training.html#cb53-60" aria-hidden="true" tabindex="-1"></a>          y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb53-61"><a href="id_03_model_training.html#cb53-61" aria-hidden="true" tabindex="-1"></a>          logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-62"><a href="id_03_model_training.html#cb53-62" aria-hidden="true" tabindex="-1"></a>          MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb53-63"><a href="id_03_model_training.html#cb53-63" aria-hidden="true" tabindex="-1"></a>          F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-64"><a href="id_03_model_training.html#cb53-64" aria-hidden="true" tabindex="-1"></a>          acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb53-65"><a href="id_03_model_training.html#cb53-65" aria-hidden="true" tabindex="-1"></a>          EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb53-66"><a href="id_03_model_training.html#cb53-66" aria-hidden="true" tabindex="-1"></a>          BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb53-67"><a href="id_03_model_training.html#cb53-67" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb53-68"><a href="id_03_model_training.html#cb53-68" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb53-69"><a href="id_03_model_training.html#cb53-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb53-70"><a href="id_03_model_training.html#cb53-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb53-71"><a href="id_03_model_training.html#cb53-71" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb53-72"><a href="id_03_model_training.html#cb53-72" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb53-73"><a href="id_03_model_training.html#cb53-73" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb53-74"><a href="id_03_model_training.html#cb53-74" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb53-75"><a href="id_03_model_training.html#cb53-75" aria-hidden="true" tabindex="-1"></a>          logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb53-76"><a href="id_03_model_training.html#cb53-76" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb53-77"><a href="id_03_model_training.html#cb53-77" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb53-78"><a href="id_03_model_training.html#cb53-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb53-79"><a href="id_03_model_training.html#cb53-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-80"><a href="id_03_model_training.html#cb53-80" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb53-81"><a href="id_03_model_training.html#cb53-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb53-82"><a href="id_03_model_training.html#cb53-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Log loss mean&quot;</span>, <span class="st">&quot;Log loss s.e.m.&quot;</span>, <span class="st">&quot;MCC mean&quot;</span>, <span class="st">&quot;MCC s.e.m.&quot;</span>, <span class="st">&quot;F_1 mean&quot;</span>, <span class="st">&quot;F_1 s.e.m.&quot;</span>,</span>
<span id="cb53-83"><a href="id_03_model_training.html#cb53-83" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Balanced accuracy mean&quot;</span>, <span class="st">&quot;Balanced accuracy s.e.m.&quot;</span>, <span class="st">&quot;EF mean&quot;</span>, <span class="st">&quot;EF s.e.m.&quot;</span>, <span class="st">&quot;BEDROC mean&quot;</span>, <span class="st">&quot;BEDROC s.e.m.&quot;</span>,</span>
<span id="cb53-84"><a href="id_03_model_training.html#cb53-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Log loss CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;MCC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;F_1 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb53-85"><a href="id_03_model_training.html#cb53-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Balanced accuracy CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;EF CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;BEDROC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb53-86"><a href="id_03_model_training.html#cb53-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-87"><a href="id_03_model_training.html#cb53-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb53-88"><a href="id_03_model_training.html#cb53-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb53-89"><a href="id_03_model_training.html#cb53-89" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb53-90"><a href="id_03_model_training.html#cb53-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb53-91"><a href="id_03_model_training.html#cb53-91" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-92"><a href="id_03_model_training.html#cb53-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb53-93"><a href="id_03_model_training.html#cb53-93" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection-1" class="section level3 hasAnchor" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Inner loop model selection<a href="id_03_model_training.html#inner-loop-model-selection-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb54-1"><a href="id_03_model_training.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp.RData&quot;</span>)</span>
<span id="cb54-2"><a href="id_03_model_training.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="id_03_model_training.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb54-4"><a href="id_03_model_training.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb54-5"><a href="id_03_model_training.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb54-6"><a href="id_03_model_training.html#cb54-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb54-7"><a href="id_03_model_training.html#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb54-8"><a href="id_03_model_training.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb54-9"><a href="id_03_model_training.html#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb54-10"><a href="id_03_model_training.html#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb54-11"><a href="id_03_model_training.html#cb54-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb54-12"><a href="id_03_model_training.html#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb54-13"><a href="id_03_model_training.html#cb54-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb54-14"><a href="id_03_model_training.html#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb54-15"><a href="id_03_model_training.html#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb54-16"><a href="id_03_model_training.html#cb54-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb54-17"><a href="id_03_model_training.html#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb54-18"><a href="id_03_model_training.html#cb54-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb54-19"><a href="id_03_model_training.html#cb54-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb54-20"><a href="id_03_model_training.html#cb54-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb54-21"><a href="id_03_model_training.html#cb54-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb54-22"><a href="id_03_model_training.html#cb54-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb54-23"><a href="id_03_model_training.html#cb54-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb54-24"><a href="id_03_model_training.html#cb54-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb54-25"><a href="id_03_model_training.html#cb54-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb54-26"><a href="id_03_model_training.html#cb54-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb54-27"><a href="id_03_model_training.html#cb54-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb54-28"><a href="id_03_model_training.html#cb54-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb54-29"><a href="id_03_model_training.html#cb54-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb54-30"><a href="id_03_model_training.html#cb54-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb54-31"><a href="id_03_model_training.html#cb54-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb54-32"><a href="id_03_model_training.html#cb54-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb54-33"><a href="id_03_model_training.html#cb54-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb54-34"><a href="id_03_model_training.html#cb54-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb54-35"><a href="id_03_model_training.html#cb54-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb54-36"><a href="id_03_model_training.html#cb54-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb54-37"><a href="id_03_model_training.html#cb54-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb54-38"><a href="id_03_model_training.html#cb54-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb54-39"><a href="id_03_model_training.html#cb54-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb54-40"><a href="id_03_model_training.html#cb54-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb54-41"><a href="id_03_model_training.html#cb54-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb54-42"><a href="id_03_model_training.html#cb54-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb54-43"><a href="id_03_model_training.html#cb54-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb54-44"><a href="id_03_model_training.html#cb54-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb54-45"><a href="id_03_model_training.html#cb54-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb54-46"><a href="id_03_model_training.html#cb54-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-47"><a href="id_03_model_training.html#cb54-47" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb54-48"><a href="id_03_model_training.html#cb54-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb54-49"><a href="id_03_model_training.html#cb54-49" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1-1" class="section level4 hasAnchor" number="3.4.5.1">
<h4><span class="header-section-number">3.4.5.1</span> CV 1<a href="id_03_model_training.html#cv-1-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-8d837744db676d991104" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8d837744db676d991104">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 30","Neural network grid model 3","GBM grid model 84","GBM grid model 50","GBM grid model 6","Super learner final","GBM grid model 61","GBM grid model 92","Super learner all models","GBM grid model 47","GBM grid model 59","GBM grid model 73","GBM model 5","GBM grid model 64","GBM grid model 13","GBM grid model 41","GBM grid model 26","GBM grid model 27","GBM grid model 93","GBM grid model 71","GBM grid model 17","Neural network grid model 22","XGBoost grid model 46","GBM grid model 53","GBM grid model 46","GBM grid model 82","Neural network grid model 9","Super learner XGBoost","Neural network grid model 63","GBM grid model 72","GBM grid model 66","GBM grid model 80","GBM grid model 65","GBM grid model 74","GBM grid model 1","GBM grid model 43","GBM grid model 94","GBM grid model 12","Neural network grid model 74","XGBoost grid model 23","Neural network grid model 31","Neural network grid model 87","Neural network grid model 16","GBM grid model 23","Super learner GBM","XGBoost grid model 11","XGBoost grid model 42","GBM grid model 55","XGBoost grid model 13","GBM grid model 15","XGBoost grid model 20","Neural network grid model 20","Neural network grid model 28","Super learner neural network","XGBoost grid model 16","XGBoost model 3","GBM model 1","GBM grid model 49","GBM grid model 38","XGBoost grid model 60","XGBoost grid model 15","GBM grid model 21","GBM grid model 45","XGBoost grid model 95","GBM grid model 11","GBM grid model 31","GBM grid model 20","GBM grid model 78","Neural network grid model 8","GBM grid model 2","Neural network grid model 81","GBM grid model 18","Neural network grid model 55","GBM grid model 4","GBM grid model 67","XGBoost grid model 4","XGBoost grid model 59","GBM grid model 24","XGBoost grid model 82","GBM model 2","GBM model 4","GBM grid model 90","XGBoost grid model 78","XGBoost grid model 81","GBM grid model 10","GBM grid model 8","GBM grid model 87","Neural network grid model 34","XGBoost grid model 21","GBM grid model 7","GBM grid model 3","Neural network grid model 29","XGBoost grid model 33","GBM grid model 28","XGBoost grid model 86","Neural network grid model 7","Neural network grid model 43","GBM grid model 63","Neural network grid model 79","GBM grid model 79","XGBoost grid model 89","XGBoost grid model 25","GBM grid model 57","Neural network grid model 21","Neural network grid model 64","GBM grid model 34","GBM grid model 70","XGBoost grid model 36","XGBoost grid model 27","GBM grid model 83","Neural network grid model 24","Neural network grid model 10","XGBoost grid model 91","XGBoost grid model 24","XGBoost grid model 98","XGBoost model 1","XGBoost grid model 34","XGBoost grid model 73","XGBoost grid model 55","GBM grid model 33","GBM grid model 76","GBM grid model 25","GBM grid model 69","XGBoost grid model 3","GBM grid model 89","XGBoost grid model 41","GBM grid model 91","Neural network grid model 25","GBM grid model 88","GBM grid model 54","XGBoost grid model 77","Neural network grid model 62","Neural network grid model 11","XGBoost grid model 92","Neural network grid model 98","GBM grid model 37","GBM grid model 97","XGBoost grid model 2","Neural network grid model 18","XGBoost grid model 18","XGBoost grid model 67","GBM grid model 48","GBM grid model 9","Neural network grid model 100","XGBoost grid model 14","GBM grid model 96","GBM grid model 60","Neural network grid model 96","GBM grid model 40","Neural network grid model 73","XGBoost grid model 45","GBM grid model 14","Neural network grid model 67","XRT model","GBM grid model 58","GBM grid model 44","Neural network grid model 84","GBM grid model 85","XGBoost grid model 70","GBM grid model 75","GBM grid model 81","GBM grid model 42","GBM grid model 35","XGBoost grid model 79","XGBoost grid model 19","GBM grid model 19","Neural network grid model 4","XGBoost grid model 28","Neural network grid model 47","XGBoost grid model 22","Neural network grid model 72","GBM grid model 100","XGBoost grid model 71","XGBoost grid model 17","XGBoost grid model 6","Neural network grid model 19","Neural network grid model 52","GBM model 3","Neural network grid model 58","Neural network grid model 14","Neural network grid model 70","GBM grid model 51","GBM grid model 77","GBM grid model 86","GBM grid model 22","XGBoost grid model 49","GBM grid model 16","GBM grid model 95","Neural network grid model 61","XGBoost grid model 44","GBM grid model 62","GBM grid model 39","XGBoost grid model 48","GBM grid model 99","GBM grid model 29","Neural network grid model 66","XGBoost grid model 12","XGBoost grid model 69","Neural network grid model 75","Neural network grid model 41","XGBoost grid model 9","Neural network grid model 45","XGBoost grid model 8","XGBoost grid model 88","Neural network grid model 56","Neural network grid model 57","GBM grid model 5","Neural network grid model 94","Neural network grid model 33","XGBoost grid model 50","DRF model","GBM grid model 32","XGBoost model 2","XGBoost grid model 80","XGBoost grid model 97","GBM grid model 68","XGBoost grid model 68","Neural network grid model 12","Neural network grid model 86","Neural network grid model 90","XGBoost grid model 51","GBM grid model 36","XGBoost grid model 1","Neural network grid model 95","XGBoost grid model 53","XGBoost grid model 52","XGBoost grid model 38","Neural network grid model 92","Neural network grid model 91","Neural network grid model 93","Neural network grid model 15","XGBoost grid model 63","XGBoost grid model 58","Neural network grid model 39","Neural network grid model 36","XGBoost grid model 94","Neural network grid model 44","Neural network grid model 88","GBM grid model 52","Neural network grid model 69","XGBoost grid model 61","Neural network grid model 60","XGBoost grid model 87","Neural network grid model 65","XGBoost grid model 85","XGBoost grid model 93","XGBoost grid model 66","Neural network grid model 76","Neural network grid model 82","Neural network grid model 6","XGBoost grid model 39","XGBoost grid model 30","Neural network grid model 27","Neural network grid model 51","XGBoost grid model 35","Neural network grid model 85","Neural network grid model 46","XGBoost grid model 5","XGBoost grid model 37","XGBoost grid model 47","XGBoost grid model 64","XGBoost grid model 74","Neural network grid model 71","Neural network grid model 26","XGBoost grid model 76","Neural network grid model 13","Neural network grid model 97","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[0.9156,0.6633,0.7068,0.6333,0.6333,0.4253,0.7068,0.6633,0.4253,0.6633,0.7068,0.4812,null,0.6333,0.9156,0.3027,0.7068,0.451,0.6333,0.6031,0.7554,0.5102,0.4006,0.7554,0.451,0.4006,0.4006,0.2572,0.7554,0.4006,0.3603,0.6633,0.9698,0.4812,0.3316,0.4253,0.8068,0.451,0.3846,0.6633,0.3603,0.451,0.0922,0.9698,0.3603,0.3846,0.4812,0.3316,0.451,0.5102,0.274,0.2352,0.4006,0.274,0.1218,0.4812,0.6333,0.9156,0.9156,0.3316,0.0584,0.6333,0.6333,0.1377,0.6633,0.6333,0.3603,0.4253,0.3846,0.451,0.2572,0.5102,0.2149,0.8068,0.6333,0.6031,0.274,0.5102,0.1126,0.4253,0.4006,0.6633,0.1218,0.3316,0.5102,0.5102,0.7068,0.4006,0.5601,0.6633,0.451,0.5102,0.0746,0.6333,0.2572,0.2572,0.4253,0.4006,0.0684,0.4253,0.3846,0.4253,0.4812,0.5102,0.6633,0.6333,0.4812,0.1126,0.3846,0.8068,0.3603,0.274,0.3027,0.3316,0.1377,0.3846,0.1011,0.2352,0.274,0.4006,0.4006,0.5601,0.6633,0.274,0.3603,0.2149,0.3846,0.1567,0.4006,0.5102,0.0834,0.4253,0.0834,0.6031,0.6031,0.4253,0.4812,0.6031,0.2149,0.1377,0.1218,0.3846,0.6333,0.274,0.6031,0.2352,0.274,0.2149,0.3846,0.451,0.3846,0.4812,0.274,0.3846,0.4006,0.1733,0.2352,0.3603,0.2149,0.3027,0.4006,0.4006,0.4006,0.1733,0.198,0.7068,0.3027,0.4006,0.3027,0.0746,0.6633,0.2352,0.274,0.2149,0.2572,0.1733,0.2352,0.4253,0.2149,0.0922,0.3316,0.451,0.451,0.4253,0.3603,0.1567,0.5102,0.3316,0.451,0.2352,0.451,0.3603,0.0746,0.198,0.3316,0.2572,0.1377,0.1377,0.7554,0.1011,0.451,0.4812,0.0922,0.4812,0.2572,0.274,0.1218,0.2149,0.1126,0.1126,0.6633,0.5102,0.4253,0.1567,0.0746,0.4006,0.5102,0.1218,0.0684,0.1733,0.1218,0.274,0.1733,0.1011,0.274,0.3846,0.1218,0.0834,0.2572,0.0746,0.2149,0.2572,0.0922,0.1011,0.2352,0.1733,0.1011,0.198,0.2352,0.4812,0.0922,0.198,0.2149,0.3027,0.1733,0.1218,0.0746,0.0834,0.1011,0.1011,0.1126,0.1126,0.1218,0.1567,0.1567,0.3027,0.1733,0.0922,0.1011,0.0922,0.0746,0.1126,0.0834,0.1218,0.0834,0.1377,0.0684,0.0032,0.0032,0.0032,0.0032,0.0032],[0.7578,null,0.894,0.7067,0.7067,0.9729,0.7821,0.6677,1,0.6221,0.9729,0.6871,0.7067,0.8093,0.5111,0.9729,0.7067,0.5815,0.6456,0.5815,0.6221,0.7821,0.5345,0.6221,0.5815,0.5073,0.5684,0.7578,0.3914,0.5179,0.5111,0.4501,0.5073,0.5013,0.6069,0.5111,0.5179,0.5111,0.5111,0.5495,0.4501,0.4394,0.6871,0.5345,0.6677,0.5495,0.5684,0.4752,0.4189,0.4394,0.6871,0.5073,0.4394,0.4617,0.5345,0.4851,0.5345,0.5111,0.5111,0.5345,0.5111,0.5013,0.5815,0.6221,0.5073,0.5179,0.5073,0.5179,0.4394,0.6221,0.5179,0.5111,0.5111,0.4617,0.5111,0.4851,0.7578,0.6456,0.5179,0.4394,0.5684,0.6677,0.5073,0.4752,0.4189,0.6871,0.5815,0.5073,0.5179,0.4394,0.4394,0.4752,0.4851,0.5073,0.4394,0.4126,0.4356,0.5495,0.4501,0.4617,0.4617,0.4394,0.4394,0.5815,0.4394,0.5495,0.5179,0.4394,0.4851,0.4394,0.4356,0.4394,0.5815,0.4752,0.5179,0.4394,0.4394,0.3792,0.5073,0.3792,0.3792,0.4356,0.5013,0.4394,0.4394,0.4189,0.4501,0.5013,0.4851,0.4851,0.4126,0.3887,0.4394,0.3914,0.3792,0.5179,0.5013,0.4394,0.5684,0.4752,0.5495,0.3792,0.363,0.3792,0.3887,0.4394,0.5495,0.4617,0.6221,0.3792,0.4189,0.3792,0.4189,0.4851,0.4394,0.4851,0.4752,0.3914,0.3914,0.3792,0.3792,0.3792,0.363,0.3887,0.4189,0.3792,0.4394,0.4356,0.3792,0.4394,0.3163,0.3792,0.363,0.4394,0.3914,0.5073,0.3792,0.3792,0.4501,0.3792,0.3588,0.4501,0.3444,0.4189,0.4617,0.4394,0.4501,0.3792,0.267,0.4394,0.3887,0.3254,0.3792,0.3914,0.3548,0.3254,0.3887,0.3887,0.2913,0.3163,0.3792,0.2809,0.4394,0.3792,0.4394,0.3548,0.3163,0.3792,0.3444,0.3914,0.3792,0.3792,0.267,0.3914,0.3792,0.3163,0.4394,0.3118,0.3792,0.3792,0.4394,0.3548,0.363,0.3588,0.363,0.3792,0.3792,0.3792,0.2913,0.3163,0.3792,0.3792,0.3914,0.3792,0.3163,0.3792,0.3163,0.3254,0.267,0.267,0.267,0.3163,0.3548,0.267,0.3588,0.3163,0.267,0.2445,0.267,0.267,0.3163,0.2445,0.267,0.363,0.267,0.3254,0.267,0.3163,0.267,0.1756,0.267,0.267,0.3588,0.1756,0.267,0.1756,0.1756,0.004,0.004,0.004,0.004,0.004],[0.992,null,1,0.5387,0.8282,0.992,0.6641,0.731,0.992,0.8282,0.8868,0.5833,0.5985,0.8282,0.6641,1,0.5387,0.731,0.5833,0.508,0.6817,0.9706,0.5833,0.5985,0.5728,0.5387,0.7558,0.7835,0.4254,0.5387,0.5249,0.5387,0.5387,0.5249,0.8282,0.4394,0.6399,0.5833,0.7086,0.5249,0.508,0.4523,0.8113,0.4523,0.6817,0.731,0.6201,0.4552,0.6201,0.5387,0.8282,0.5985,0.4895,0.4895,0.6201,0.4394,0.4254,0.5387,0.5387,0.4523,0.508,0.4552,0.4552,0.6399,0.4254,0.4005,0.4254,0.4895,0.4523,0.4895,0.5387,0.5833,0.5599,0.4189,0.5728,0.6399,0.6817,0.5833,0.4189,0.4107,0.4031,0.6399,0.4895,0.5833,0.3841,0.7558,0.5985,0.5728,0.5249,0.4254,0.4126,0.5833,0.5387,0.4895,0.5728,0.4895,0.4031,0.6817,0.4031,0.4394,0.5387,0.5599,0.4031,0.4552,0.5728,0.5387,0.5387,0.4254,0.5387,0.4107,0.4126,0.4552,0.4552,0.4031,0.5985,0.4031,0.4394,0.4031,0.4394,0.4394,0.4394,0.4126,0.4254,0.4126,0.6817,0.4005,0.3841,0.508,0.4254,0.4254,0.4254,0.4031,0.5249,0.4394,0.4126,0.4895,0.4394,0.4394,0.4254,0.4394,0.5387,0.4107,0.3841,0.4189,0.4189,0.4254,0.5985,0.5387,0.5728,0.3841,0.4552,0.4031,0.4254,0.4394,0.4552,0.4552,0.4523,0.396,0.396,0.4254,0.4031,0.4254,0.4005,0.4031,0.5387,0.4107,0.4031,0.4797,0.4394,0.4552,0.4031,0.4189,0.3841,0.4254,0.5387,0.5728,0.4126,0.4005,0.4189,0.3841,0.4031,0.4523,0.4005,0.3841,0.4189,0.5599,0.4031,0.4254,0.4005,0.4107,0.4005,0.3841,0.4031,0.396,0.396,0.4031,0.3841,0.3841,0.4031,0.4031,0.4031,0.396,0.3841,0.3841,0.4394,0.4005,0.3841,0.3841,0.3841,0.4394,0.396,0.3841,0.3841,0.4005,0.4126,0.396,0.4126,0.3841,0.396,0.3841,0.3841,0.3841,0.3841,0.3841,0.4031,0.3841,0.4031,0.4107,0.3841,0.3841,0.4254,0.3841,0.3841,0.4005,0.4005,0.396,0.3841,0.4031,0.3841,0.3841,0.3841,0.3841,0.4031,0.3841,0.4107,0.3841,0.3841,0.3841,0.3841,0.3841,0.3841,0.3841,0.3841,0.4394,0.3841,0.4005,0.3841,0.3841,0.3377,0.3225,0.3841,0.3733,0.4005,0.3841,0.3841,0.2536,0.3841,null,null,null,null,null],[0.7479,null,0.7237,0.6053,0.6521,0.8555,0.5881,0.5395,0.8015,0.6975,0.8555,0.5881,0.6053,0.7479,0.5395,1,0.5673,0.5673,0.5395,0.5582,0.5673,0.6975,0.5881,0.5395,0.4703,0.4989,0.5582,0.6975,0.4093,0.5673,0.4843,0.51,0.51,0.51,0.6975,0.4843,0.4989,0.5582,0.51,0.6521,0.4093,0.4703,0.678,0.5284,0.6053,0.5395,0.5284,0.4093,0.4093,0.4703,0.6053,0.5673,0.3988,0.4703,0.5284,0.3811,0.51,0.51,0.51,0.51,0.51,0.4093,0.51,0.51,0.4573,0.4989,0.4703,0.51,0.4435,0.51,0.4703,0.51,0.5582,0.4284,0.5395,0.4703,0.5673,0.5284,0.51,0.4093,0.4703,0.4703,0.4989,0.4843,0.4284,0.6306,0.6053,0.51,0.5673,0.4284,0.4216,0.4703,0.4989,0.4703,0.4703,0.4435,0.3811,0.5395,0.4435,0.4284,0.4703,0.4703,0.4093,0.4703,0.51,0.51,0.5673,0.4216,0.4573,0.4284,0.4435,0.4093,0.4573,0.3988,0.6521,0.3811,0.4093,0.4573,0.4093,0.3811,0.3811,0.4216,0.4843,0.4216,0.4573,0.3988,0.4435,0.51,0.4573,0.4703,0.3988,0.3641,0.4989,0.3792,0.3641,0.3988,0.4284,0.3811,0.5673,0.4843,0.51,0.4093,0.3488,0.3988,0.3792,0.3811,0.4703,0.4703,0.51,0.3488,0.3811,0.3811,0.4216,0.3988,0.3811,0.3811,0.4843,0.3488,0.3488,0.4093,0.3792,0.3641,0.3969,0.3969,0.3488,0.3792,0.3488,0.4216,0.3988,0.4284,0.3488,0.4093,0.3488,0.4093,0.3488,0.5395,0.3969,0.3488,0.3988,0.4284,0.3641,0.3811,0.3488,0.3811,0.4284,0.4093,0.3811,0.3988,0.3488,0.3488,0.3811,0.3488,0.3811,0.3792,0.3784,0.3641,0.3784,0.3784,0.3488,0.3488,0.3784,0.3488,0.3488,0.3488,0.4093,0.3488,0.3488,0.3969,0.3488,0.4703,0.3792,0.3641,0.3488,0.3641,0.3488,0.3488,0.3488,0.3488,0.3488,0.3641,0.3641,0.3488,0.3488,0.3488,0.3471,0.3488,0.3488,0.3792,0.3488,0.3488,0.3792,0.3488,0.3811,0.3811,0.3488,0.3488,0.3488,0.3488,0.2616,0.3471,0.3488,0.3488,0.3488,0.3287,0.3488,0.3379,0.3077,0.2373,0.3077,0.3488,0.3488,0.2373,0.3077,0.3488,0.2616,0.3488,0.3077,0.3077,0.2373,0.1782,0.2616,0.2373,0.3488,0.2365,0.2574,0.2365,0.2365,0.0113,0.0113,0.0113,0.0113,0.0113],[14,50,21,15,12,52,2,17,65,11,85,46,1,24,7,112,32,42,4,59,16,127,118,25,82,117,100,144,26,68,76,40,13,58,203,105,9,35,108,31,75,20,213,10,132,109,62,73,39,193,162,168,101,140,241,95,84,18,19,167,240,27,47,220,37,22,114,64,66,33,133,43,185,3,60,63,229,293,269,69,94,41,223,125,44,103,29,107,48,6,124,146,255,51,188,270,130,72,256,102,98,186,79,113,93,36,99,243,137,5,77,187,225,177,224,104,235,199,176,55.5,55.5,38,30,145,119,138,150,181,86,61,237,57,253,23,34,115,90,45,273,197,254,111,53,136,28,170,123,155,106,142,151,80,172,242,71,148,175,120,226,110,122,83,88,215,141,54,173,179,131,267,8,201,212,239,154,159,180,91,184,268,116,70,81,97,189,210,92,128,87,149,78,164,231,216,135,209,156,157,121,257,152,96,245,49,192,198,169,211,202,234,165,67,74,143,233,129,134,232,264,228,158,147,204,287,126,89,153,214,139,222,174,251,206,275,221,160,244,200,161,182,163,230,178,194,205,171,190,272,262,208,217,166,236,246,183,259,250,207,218,195,191,196,283,247,238,274,258,313,313,313,313,313],[9,1,10,11,13,4,21,17,6,25,3,18,39,26,37,5,33,32,46,22,41,14,19,47,34,27,31,15,65,48,45,60,68,51,7,40,66,63,42,61,50,92,16,73,35,43,62,64,78,29,24,36,53,49,12,57,59,80.5,80.5,44,23,87,82,30,75,93,72,74,95,107,79,88,58,100,85,89,38,20,28,91,101,99,54,86,105,90,119,115,98,128,83,84,52,116,69,56,121,114,55,120,108,76,117,125,130,127,104,67,109,144,137,131,70,94,71,132,77,102,112,152.5,152.5,145,148,113,129,106,118,123,147,149,96,151,124,162,171,138,140,157,97,110,103,143,165,139,167,126,155,133,146,150,134,169,142,122,177,156,160,166,136,174,164,182,181,141,163,184,173,158,189,135,222,159,161,154,172,178,191,202,187,183,219,211,203,209,175,170,207,199,223,193,220,196,176,180,206,192,208,205,238,197,204,236,179,235,190,215,213,194,217,185,201,237,242,216,186,229,224,221,198,230,225,231,214,212,246,256,241,240,259,239,245,210,233,218,234,249,243,244,250,252,258,227,253,257,251,261,269,248,255,274,267,286,270,263,282,266,272,280,278,284,290,293,271,288,285,294,295,313,313,313,313,313],[9,1,11,15,13,4,20,23,7,27,3,17,33,35,39,6,30,26,36,42,45,10,21,58,37,22,31,19,41,47,49,61,62,68,8,53,85,65,40,105,55,67,14,96,44,60,82,56,73,16,57,28,51,34,12,75,78,93.5,93.5,48,18,71,92,25,111,87,63,101,59,81,46,100,52,123,106,84,43,24,29,95,72,122,50,90,129,97,121,70,125,128,115,86,38,132,99,32,64,110,54,116,109,79,119,103,102,154,145,69,91,158,113,66,107,114,108,112,77,104,83,137.5,137.5,157,182,120,126,139,135,98,133,159,89,162,74,198,149,146,151,188,88,117,76,160,167,136,204,142,141,144,177,127,153,169,140,118,187,155,143,168,130,161,176,175,196,156,173,221,124,165,166,131,219,163,152,148,164,179,147,195,172,134,181,224,235,215,193,192,228,205,207,213,229,209,185,201,222,180,194,200,217,150,218,212,174,253,197,171,183,190,184,202,227,260,243,233,211,245,244,191,178,189,234,246,231,186,257,271,247,216,236,203,237,226,232,210,223,251,206,230,262,250,255,241,252,248,249,269,272,238,256,277,267,288,254,258,289,273,265,281,280,293,290,295,261,276,286,283,287,311,312,313,314,315],[10,1,12,14,17,4,23,16,7,28,3,22,36,29,37,5,45,40,57,25,47,15,13,52,30,24,32,18,65,38,43,54,78,46,6,35,77,81,56,49,68,71,9,74,42,41,50,66,73,26,21,33,61,53,11,51,58,95.5,95.5,39,19,116,80,27,88,109,63,76,97,102,70,103,44,114,91,106,34,20,31,105,94,100,48,75,99,87,111,90,113,130,72,83,55,110,59,60,108,132,64,92,118,93,121,101,117,129,98,69,122,154,134,79,62,84,67,126,86,82,119,150.5,150.5,157,144,128,133,124,107,112,149,153,104,165,85,155,185,141,159,152,89,123,115,137,166,140,161,127,147,135,143,160,146,171,145,125,177,156,142,169,138,186,170,194,182,136,174,193,189,158,180,139,232,162,163,148,201,178,183,215,164,131,203,217,204,210,176,167,219,216,233,195,225,188,175,172,207,190,213,209,199,173,205,237,184,247,206,202,222,192,198,181,211,243,250,229,191,226,230,196,200,197,231,235,214,179,244,263,249,224,264,234,245,218,238,208,236,255,223,242,251,246,256,241,257,261,258,266,272,254,240,262,277,290,273,269,288,253,265,287,284,289,294,296,271,280,291,270,293,313,313,313,313,313],[42,53,54,55,55,64,66,73,85,91,94,103,109,114,120,128,140,140,143,148,149,166,171,182,183,190,194,196,197,201,213,215,221,223,224,233,237,244,246,246,248,250,252,253,253,253,256,259,263,264,264,265,266,276,276,278,279,287.5,288.5,298,300,301,301,302,311,311,312,315,317,323,328,334,339,340,342,342,344,357,357,360,361,362,375,376,377,377,380,382,384,392,394,399,400,409,415,418,423,428,429,430,433,434,436,442,442,446,446,448,459,461,461,463,464,469,470,474,475,487,490,496,496,497,504,506,507,507,510,514,515,522,526,535,536,538,539,540,540,542,547,547,548,551,551,551,560,565,566,567,572,579,584,589,599,607,612,615,620,623,630,631,632,634,647,648,651,652,659,660,666,672,681,685,688,689,691,694,701,703,707,716,719,722,723,731,733,739,746,748,750,750,752,757,767,769,770,771,771,771,775,777,779,781,782,784,785,786,787,787,801,802,804,807,809,821,821,829,832,840,840,844,848,859,863,864,873,879,890,894,898,898,901,905,909,911,914,915,916,916,924,930,932,939,940,960,963,967,1003,1012,1013,1021,1028,1030,1033,1036,1042,1051,1052,1055,1060,1061,1065,1080,1086,1091,1100,1121,1133,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2-1" class="section level4 hasAnchor" number="3.4.5.2">
<h4><span class="header-section-number">3.4.5.2</span> CV 2<a href="id_03_model_training.html#cv-2-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-92ce262903c2e66f2118" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-92ce262903c2e66f2118">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 98","Neural network grid model 72","Neural network grid model 63","XGBoost grid model 23","GBM grid model 53","GBM grid model 8","GBM grid model 41","Neural network grid model 62","GBM grid model 98","GBM grid model 15","GBM grid model 74","GBM grid model 24","GBM grid model 35","GBM grid model 65","Neural network grid model 74","GBM grid model 20","Neural network grid model 38","GBM grid model 82","Neural network grid model 22","Neural network grid model 75","GBM grid model 80","Neural network grid model 87","GBM grid model 46","Neural network grid model 31","GBM grid model 89","GBM grid model 72","GBM grid model 87","Neural network grid model 65","Super learner final","GBM grid model 94","GBM grid model 50","Super learner all models","XGBoost grid model 14","GBM model 5","GBM grid model 92","GBM grid model 25","GBM grid model 55","GBM grid model 59","GBM grid model 79","GBM grid model 10","GBM grid model 7","GBM grid model 26","Neural network grid model 26","Neural network grid model 67","Neural network grid model 73","Neural network grid model 43","Neural network grid model 24","GBM model 3","Super learner GBM","XGBoost grid model 8","GBM grid model 60","GBM grid model 77","XGBoost grid model 44","Neural network grid model 90","XGBoost grid model 42","XGBoost grid model 92","Neural network grid model 91","GBM grid model 4","GBM grid model 57","Neural network grid model 8","GBM grid model 85","GBM grid model 13","GBM grid model 67","Neural network grid model 34","GBM grid model 18","GBM grid model 1","GBM grid model 21","Neural network grid model 96","GBM grid model 69","GBM grid model 34","GBM grid model 61","XGBoost grid model 21","GBM grid model 51","Neural network grid model 27","GBM grid model 95","GBM grid model 66","Neural network grid model 100","XGBoost grid model 88","XGBoost grid model 68","GBM grid model 23","Neural network grid model 20","GBM grid model 33","GBM grid model 76","XGBoost grid model 28","GBM grid model 78","DRF model","XGBoost grid model 80","GBM grid model 17","Neural network grid model 9","GBM grid model 97","GBM grid model 83","GBM grid model 49","GBM model 2","GBM grid model 38","GBM grid model 64","GBM grid model 96","GBM grid model 31","XGBoost grid model 53","Neural network grid model 94","XGBoost grid model 20","XGBoost grid model 60","GBM grid model 19","XGBoost grid model 36","GBM grid model 47","XGBoost grid model 41","XGBoost grid model 13","XGBoost model 3","Neural network grid model 28","XGBoost grid model 9","GBM grid model 6","XGBoost grid model 16","Neural network grid model 6","GBM grid model 54","Neural network grid model 45","GBM grid model 14","XGBoost grid model 17","XGBoost grid model 95","XGBoost grid model 81","GBM grid model 22","GBM grid model 63","Neural network grid model 51","GBM grid model 30","Neural network grid model 64","GBM grid model 45","XGBoost grid model 50","GBM model 4","GBM grid model 28","GBM grid model 93","Neural network grid model 25","XGBoost grid model 71","Neural network grid model 79","Neural network grid model 7","GBM grid model 12","Neural network grid model 57","Neural network grid model 3","GBM grid model 62","Neural network grid model 33","XGBoost grid model 78","GBM grid model 90","XGBoost grid model 86","XGBoost model 1","Neural network grid model 55","XRT model","XGBoost grid model 89","GBM grid model 42","GBM grid model 36","Neural network grid model 52","XGBoost grid model 18","GBM grid model 32","Neural network grid model 66","GBM grid model 11","GBM grid model 99","Neural network grid model 21","XGBoost grid model 3","Neural network grid model 19","XGBoost grid model 11","GBM grid model 48","XGBoost grid model 58","GBM grid model 100","GBM grid model 5","XGBoost grid model 52","GBM grid model 52","GBM grid model 58","GBM grid model 81","Neural network grid model 70","Neural network grid model 84","GBM grid model 88","XGBoost grid model 37","Neural network grid model 15","Neural network grid model 14","GBM grid model 27","GBM grid model 37","GBM grid model 9","GBM grid model 2","GBM model 1","Neural network grid model 88","XGBoost grid model 25","Neural network grid model 77","GBM grid model 44","GBM grid model 86","GBM grid model 71","Neural network grid model 41","GBM grid model 70","Neural network grid model 97","XGBoost grid model 55","XGBoost grid model 1","XGBoost grid model 24","XGBoost grid model 85","GBM grid model 40","GBM grid model 84","GBM grid model 73","Neural network grid model 93","XGBoost model 2","Neural network grid model 92","GBM grid model 29","GBM grid model 68","Neural network grid model 10","XGBoost grid model 74","XGBoost grid model 15","GBM grid model 16","XGBoost grid model 19","XGBoost grid model 87","GBM grid model 91","Neural network grid model 47","XGBoost grid model 6","XGBoost grid model 27","Neural network grid model 61","GBM grid model 3","Neural network grid model 29","XGBoost grid model 47","Neural network grid model 76","XGBoost grid model 30","GBM grid model 43","Neural network grid model 78","Neural network grid model 4","GBM grid model 56","Neural network grid model 81","Neural network grid model 83","Neural network grid model 49","XGBoost grid model 35","Neural network grid model 58","XGBoost grid model 39","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[null,0.9729,0.6818,0.7261,0.8228,0.5922,0.8228,0.558,0.3608,0.5922,0.9729,0.4755,0.4272,0.5922,1,0.3608,0.3951,0.8611,0.8228,0.8611,0.781,0.8611,0.3608,0.8611,0.4755,0.4567,0.4755,0.6818,0.2371,0.558,0.6333,0.2371,0.4755,0.8611,0.7261,0.5221,0.781,0.8611,0.33,0.4272,0.7261,0.6818,0.3608,0.1693,0.4272,0.8228,0.6333,0.4755,0.1058,0.5922,0.6333,0.558,0.0632,0.1912,0.2663,0.4755,0.4755,0.8611,0.4567,0.4755,0.8228,0.7261,0.5221,0.4567,0.6333,0.9185,0.558,0.2963,0.6333,0.4755,0.6818,0.558,0.5922,0.1504,0.3951,0.4567,0.33,0.4755,0.1912,0.8611,0.4567,0.4567,0.4567,0.1314,0.4755,0.2963,0.0945,0.558,0.2963,0.8228,0.558,0.5922,0.2963,0.558,0.3951,0.1693,0.6333,0.0728,0.5922,0.0817,0.0728,0.4272,0.0564,0.2371,0.0945,0.4567,0.4272,0.3608,0.5922,0.4755,0.4272,0.0817,0.2663,0.1184,0.4755,0.1912,0.0632,0.4567,0.2663,0.1504,0.7261,0.8228,0.4272,0.5922,0.2151,0.3608,0.3608,0.7261,0.1184,0.1058,0.2151,0.1314,0.33,0.2663,0.2371,0.1912,0.1504,0.1058,0.5922,0.1693,0.2151,0.0945,0.1058,0.2371,0.2371,0.1184,0.2151,0.1058,0.558,0.33,0.4755,0.1693,0.2663,0.4272,0.1314,0.4755,0.2151,0.0632,0.1314,0.0817,0.2371,0.1058,0.6333,0.3951,0.3951,0.2963,0.2371,0.0564,0.2371,0.0728,0.4272,0.1693,0.3951,0.4755,0.0817,0.1314,0.1184,0.1184,0.1058,0.3951,0.4755,0.0632,0.3608,0.1184,0.0632,0.0564,0.1314,0.0945,0.4567,0.5221,0.33,0.0817,0.2963,0.0632,0.1504,0.0817,0.1058,0.0632,0.1693,0.1693,0.1184,0.1314,0.1058,0.4567,0.1184,0.1504,0.1314,0.0817,0.2151,0.0564,0.0564,0.0564,0.1314,0.1314,0.1184,0.0817,0.1912,0.0945,0.0728,0.0728,0.0728,0.0632,0.0032,0.0032,0.0032,0.0032,0.0032],[0.6819,0.4425,0.5124,0.6292,0.3489,0.7912,0.385,0.5341,0.6292,0.385,0.2289,null,0.4425,0.2232,0.368,0.4026,0.7075,0.2584,0.2478,0.3148,0.1624,0.2478,0.2706,0.2584,0.4026,0.3489,0.2584,0.3148,0.2478,0.2706,0.2417,0.2478,0.2584,0.196,0.2232,0.2128,0.3329,0.2058,0.2289,0.2417,0.3148,0.2128,0.6292,0.385,0.2289,0.3148,0.2128,0.2584,0.2478,0.2289,0.1896,0.1659,0.423,0.2478,0.1795,0.1479,0.2706,0.1745,0.196,0.1745,0.1795,0.1273,0.1238,0.2289,0.196,0.196,0.1795,0.2478,0.1624,0.196,0.1659,0.1745,0.2058,0.2706,0.3008,0.1659,0.196,0.1552,0.196,0.1896,0.2232,0.2128,0.2128,0.1624,0.1795,0.3008,0.2478,0.1479,0.3489,0.1745,0.2058,0.1659,0.2058,0.1659,0.1365,0.1365,0.1624,0.196,0.2289,0.3008,0.1423,0.2128,0.1659,0.1238,0.1423,0.1349,0.1273,0.2128,0.1896,0.1335,0.1624,0.2706,0.1745,0.2289,0.1479,0.1795,0.1365,0.1197,0.1273,0.1552,0.1159,0.1273,0.1156,0.1114,0.1365,0.1795,0.1114,0.1349,0.1335,0.2128,0.1659,0.1659,0.1795,0.1795,0.1335,0.1349,0.1238,0.1212,0.1423,0.1423,0.1212,0.1552,0.1335,0.1114,0.1159,0.1273,0.3008,0.1238,0.1238,0.1795,0.1349,0.1114,0.1114,0.1273,0.1114,0.1075,0.1114,0.1552,0.1159,0.1552,0.1365,0.1365,0.1197,0.1114,0.2478,0.1896,0.1365,0.1212,0.2478,0.1212,0.1114,0.1114,0.1212,0.1197,0.1156,0.1552,0.1212,0.1159,0.1114,0.1349,0.1114,0.2417,0.1423,0.1423,0.1795,0.1197,0.1349,0.1659,0.1075,0.0806,0.1069,0.1659,0.1349,0.1075,0.1069,0.1114,0.1349,0.1075,0.1349,0.065,0.1156,0.1212,0.1212,0.1114,0.1197,0.1197,0.1156,0.0757,0.0806,0.1624,0.1238,0.1075,0.065,0.1075,0.1365,0.1075,0.1003,0.0626,0.1075,0.0956,0.1114,0.065,0.004,0.004,0.004,0.004,0.004],[0.777,0.5295,0.7261,0.4847,0.4639,0.9244,0.2588,0.6244,0.6012,0.4238,0.3247,null,0.6498,0.271,0.5295,0.6734,0.6734,0.4639,0.4238,0.4055,0.2139,0.4055,0.4452,0.2588,0.4639,0.5761,0.2341,0.3731,0.3247,0.2244,0.2827,0.3247,0.2827,0.2058,0.271,0.2139,0.271,0.2368,0.2827,0.3893,0.2588,0.3576,0.777,0.3893,0.2981,0.3576,0.2058,0.2368,0.2244,0.3247,0.2244,0.2368,0.5518,0.3893,0.2058,0.1728,0.2981,0.1937,0.2139,0.2058,0.2014,0.1728,0.2058,0.2494,0.1937,0.2588,0.2341,0.3731,0.1673,0.2014,0.1901,0.1728,0.183,0.2827,0.3893,0.2588,0.2368,0.1937,0.1728,0.2014,0.271,0.2368,0.2368,0.2368,0.2058,0.2058,0.2494,0.1728,0.4847,0.2014,0.1901,0.1728,0.1728,0.1728,0.2139,0.1673,0.1673,0.2368,0.3122,0.2827,0.2014,0.2494,0.1673,0.1728,0.183,0.1728,0.1673,0.3247,0.2368,0.1937,0.183,0.4055,0.1673,0.2981,0.1728,0.2139,0.1728,0.1673,0.2244,0.2368,0.1937,0.1673,0.2139,0.1673,0.1728,0.2341,0.1673,0.1901,0.183,0.2341,0.1728,0.18,0.1901,0.3122,0.2368,0.1901,0.2244,0.1901,0.1673,0.1728,0.1673,0.2341,0.1673,0.1673,0.1673,0.1728,0.4055,0.1673,0.1673,0.2058,0.1673,0.1673,0.183,0.1673,0.18,0.1673,0.1673,0.1728,0.1673,0.2588,0.1728,0.1728,0.1673,0.1673,0.4238,0.3731,0.1728,0.1673,0.5518,0.183,0.1673,0.1673,0.1673,0.1673,0.1673,0.2494,0.1673,0.1673,0.183,0.1673,0.1673,0.271,0.1728,0.2058,0.1937,0.183,0.1728,0.183,0.1673,0.1673,0.1673,0.2139,0.18,0.1673,0.1673,0.1673,0.18,0.1673,0.1728,0.1108,0.1728,0.1673,0.1673,0.183,0.1673,0.1673,0.1728,0.1523,0.1673,0.1937,0.1673,0.1673,0.1523,0.1673,0.2014,0.1673,0.1673,0.1673,0.1673,0.1523,0.1728,0.1523,null,null,null,null,null],[0.5781,0.4013,0.4202,0.5781,0.317,0.6774,0.3307,0.485,0.5781,0.3644,0.2745,null,0.4013,0.2067,0.3644,0.4643,0.5781,0.2465,0.2515,0.2382,0.1941,0.2382,0.3307,0.2622,0.4013,0.3477,0.2515,0.2889,0.2515,0.3019,0.2889,0.2515,0.3019,0.2014,0.2067,0.2014,0.3307,0.2465,0.2622,0.2515,0.317,0.2067,0.6252,0.4202,0.2014,0.317,0.2067,0.3307,0.2515,0.2515,0.1941,0.1808,0.4013,0.2515,0.2014,0.1587,0.2067,0.1659,0.1941,0.1941,0.2067,0.1368,0.1368,0.2119,0.1884,0.2119,0.1368,0.2745,0.1808,0.2119,0.173,0.2119,0.2465,0.2745,0.2622,0.1436,0.2014,0.1587,0.2465,0.2067,0.2465,0.2067,0.2067,0.1884,0.226,0.3477,0.2745,0.1808,0.2622,0.1941,0.1808,0.1884,0.2119,0.1884,0.173,0.1659,0.1659,0.2382,0.2515,0.3307,0.173,0.2382,0.173,0.1293,0.1587,0.1467,0.1368,0.1808,0.1941,0.1467,0.2067,0.2745,0.1659,0.2119,0.1354,0.2119,0.1884,0.135,0.1587,0.2119,0.1231,0.1354,0.1231,0.1354,0.1354,0.1884,0.1225,0.1467,0.1368,0.2515,0.1368,0.2119,0.2014,0.1368,0.1368,0.1354,0.1293,0.1368,0.1587,0.1368,0.1354,0.1354,0.1436,0.1231,0.1231,0.1354,0.3019,0.1231,0.1231,0.1808,0.1368,0.1231,0.1225,0.1368,0.1368,0.1189,0.1231,0.1587,0.1354,0.2119,0.1587,0.1436,0.1354,0.1231,0.2014,0.1941,0.1467,0.135,0.2515,0.1467,0.1225,0.1189,0.1354,0.1231,0.135,0.1587,0.1354,0.1354,0.1368,0.1587,0.1231,0.2465,0.1467,0.1467,0.173,0.1225,0.1467,0.173,0.0985,0.0985,0.1088,0.2014,0.1368,0.1225,0.1069,0.1161,0.1368,0.1225,0.1354,0.0773,0.1293,0.1225,0.1368,0.1088,0.1368,0.1231,0.1354,0.0863,0.0863,0.1659,0.1354,0.0985,0.0773,0.1225,0.1354,0.1161,0.0863,0.0841,0.1189,0.0773,0.1189,0.0773,0.0113,0.0113,0.0113,0.0113,0.0113],[1,2,12,17,9,48,10,59,74,22,6,111,104,26,19,99,127,25,42,41,15,4,83,5,68,52,90,79,110,33,20,115,45,3,13,35,23,7,106,66,34,27,148,175,117,107,56,69,144,37,28,43,220,150,94,30,113,16,73,80,8,24,14,96,76,21,29,143,31,50,39,58,72,197,102,64,134,53,164,158,114,87,88,201,55,292,149,46,109,18,57,32,93,38,47,112,40,186,130,207,218,86,227,85,145,89,135,139,70,54,84,198,120,168,61,209,221,92,116,119,60,11,105,51,192,91,100,36,155,223,216,258,103,167,151,124,142,242,65,194,126,217,286,133,118,153,196,179,44,170,67,125,140,71,156,49,122,235,146,171,129,169,62,97,141,147,123,213,166,231,75,108,98,78,159,247,212,160,137,101,82,252,95,246,183,204,177,187,77,63,81,206,136,185,128,154,233,208,191,121,162,174,163,132,189,138,176,165,172,236,279,205,152,199,229,157,181,190,222,195,225,203,313,313,313,313,313],[8,12,13,10,14,3,18,5,4,23,35,1,6,31,32,11,2,43,29,30,49,47,24,48,34,42,21,25,19.5,40,51,19.5,44,58,62,54,57,65,33,46,53,64,22,16,28,41,59,52,38,73,80,67,15,37,55,79,61,84,70,72,103,93,108,66,77,97,109,63,98,99,96,94,104,50,100,107,78,102,69,68,90,86.5,86.5,56,115,27,74,123,95,139,119,135,116,136,144,118,133,89,113,82,81,129,83,147,112,125,117,127,145,148,131,101,134,122,156,114,106,142,151,155,173,186,161,176,128,164,158,184,140,120,124,110,168,132,154,178,153,130,182,137,159,138,121,165,181,174,166,157,206,170,204,189,193,202,185,205,195,152,180,196,188,192,220,207,201,194,208,172,200,175,222,213,217,226,197,179,183,209,221,223,239,162,231,177,191,203,212,199,236,246,247,219,229,218,233,232,198,214,224,254,241,235,244,256,234,253,237,251,248,230,228,249,264,255,238,272,273,274,268,289,280,294,313,313,313,313,313],[9,13,10,12,14,4,18,3,6,33,34,1,5,36,40,11,2,31,26,28,38,37,20,52,19,29,25,35,21.5,58,53,21.5,50,60,57,49,62,66,30,46,65,61,23,16,44,32,51,59,42,80,70,86,15,41,67,95,47,112,77,64,91,96,73,79,83,102,72,56,116,89,109,104,85,45,71,78,54,115,68,84,69,98.5,98.5,74,105,48,90,110,97,124,130,132,142,136,131,118,147,107,92,87,82,120,88,113,122,148,128,101,137,145,172,93,138,106,162,114,103,156,135,141,179,192,144,190,133,166,164,176,139,129,127,108,161,159,123,143,167,134,195,154,171,119,121,181,191,177,150,157,208,165,205,188,160,213,163,223,186,153,193,158,206,175,216,207,174,178,194,173,180,198,220,215,226,231,214,152,187,182,197,230,224,212,234,170,209,183,199,204,245,248,244,201,239,211,242,229,221,222,227,254,236,238,243,247,240,257,251,250,252,232,203,237,272,253,255,270,264,268,278,285,276,290,311,312,313,314,315],[8,11,12,10,14,2,18,6,3,21,30,1,5,27,35,13,4,39,43,41,42,56,22,47,33,36,25,24,19.5,40,49,19.5,38,61,54,57,53,60,31,44,51,59,23,15,34,48,63,50,37,71,84,67,17,46,58,78,69,81,75,82,98,92,113,68,74,100,115,64,85,96,91,97,93,62,90,116,101,99,70,65,102,106.5,106.5,52,110,28,88,124,105,134,122,131,95,139,135,109,138,79,127,89,87,136,80,143,111,130,114,128,145,154,118,120,137,133,152,94,108,151,147,144,148,182,163,161,126,162,164,191,153,117,123,121,166,142,177,167,156,112,179,140,172,170,119,176,169,160,155,174,216,173,208,188,197,206,190,218,196,159,181,186,189,183,223,211,212,213,210,178,198,141,230,219,214,227,194,187,185,217,221,222,234,158,225,193,203,200,205,204,243,246,249,199,226,220,232,228,192,209,233,250,240,239,238,253,237,254,241,242,251,229,224,252,265,259,248,273,279,272,269,289,281,296,313,313,313,313,313],[26,38,47,49,51,57,64,73,87,99,105,114,120,120,126,134,135,138,140,140,144,144,149,152,154,159,161,163,170.5,171,173,175.5,177,182,186,195,195,198,200,202,203,211,216,222,223,228,229,230,261,261,262,263,267,274,274,282,290,293,295,298,300,305,308,309,310,320,325,326,330,334,335,353,354,354,363,365,367,369,371,375,375,378.5,379.5,383,385,395,401,403,406,415,428,430,446,449,457,457,458,461,462,465,468,471,478,488,490,492,494,495,497,501,505,512,529,529,531,531,538,541,549,559,560,571,573,578,579,583,586,587,587,589,590,597,598,600,605,612,618,618,621,625,628,644,647,655,659,664,667,667,674,678,684,690,690,692,694,695,699,699,700,711,712,719,721,722,728,732,735,736,744,745,747,755,755,762,764,765,767,768,776,776,779,784,785,786,786,790,793,794,801,803,821,825,830,834,835,843,844,853,875,879,879,886,888,888,900,902,905,908,923,927,934,943,953,966,970,972,997,1004,1037,1058,1062,1083,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3-1" class="section level4 hasAnchor" number="3.4.5.3">
<h4><span class="header-section-number">3.4.5.3</span> CV 3<a href="id_03_model_training.html#cv-3-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-00b7cb19dbb4dd4329ac" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-00b7cb19dbb4dd4329ac">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 72","GBM grid model 74","GBM grid model 66","GBM grid model 95","GBM grid model 15","XRT model","Neural network grid model 74","GBM grid model 8","Neural network grid model 31","GBM grid model 64","GBM grid model 72","GBM grid model 53","GBM grid model 65","Neural network grid model 43","GBM grid model 52","GBM grid model 25","Neural network grid model 87","GBM grid model 26","Neural network grid model 98","GBM grid model 17","GBM grid model 71","GBM grid model 92","Neural network grid model 34","GBM grid model 82","GBM grid model 67","GBM grid model 94","Neural network grid model 64","Neural network grid model 8","GBM grid model 45","GBM grid model 19","Neural network grid model 22","GBM grid model 58","DRF model","GBM grid model 20","GBM grid model 59","Neural network grid model 36","GBM grid model 96","XGBoost grid model 41","GBM grid model 14","GBM grid model 89","Super learner GBM","XGBoost grid model 28","Neural network grid model 21","Neural network grid model 3","GBM grid model 32","GBM grid model 46","Neural network grid model 73","GBM grid model 22","GBM grid model 35","GBM grid model 80","GBM model 3","Neural network grid model 75","XGBoost grid model 23","GBM model 1","GBM grid model 79","Neural network grid model 62","Neural network grid model 24","Neural network grid model 84","GBM grid model 57","XGBoost grid model 44","GBM grid model 83","Neural network grid model 92","GBM model 2","Neural network grid model 28","XGBoost grid model 22","Super learner XGBoost","GBM grid model 91","GBM grid model 33","GBM grid model 76","GBM grid model 97","GBM grid model 1","GBM grid model 99","Neural network grid model 63","Neural network grid model 57","XGBoost grid model 13","Super learner final","XGBoost grid model 42","Neural network grid model 38","GBM grid model 6","Neural network grid model 61","Super learner all models","Neural network grid model 47","Neural network grid model 25","XGBoost model 1","GBM grid model 54","GBM grid model 70","GBM grid model 16","XGBoost grid model 20","XGBoost grid model 33","GBM model 4","Neural network grid model 19","Neural network grid model 77","XGBoost grid model 34","GBM grid model 51","GBM grid model 48","GBM grid model 50","XGBoost grid model 88","GBM grid model 55","Neural network grid model 82","XGBoost model 3","GBM grid model 41","XGBoost grid model 77","GBM grid model 38","GBM grid model 28","GBM grid model 49","GBM grid model 10","GBM grid model 31","GBM grid model 29","Neural network grid model 96","Neural network grid model 65","Neural network grid model 49","XGBoost grid model 8","XGBoost model 2","Neural network grid model 100","Neural network grid model 9","GBM grid model 47","GBM grid model 36","Neural network grid model 6","XGBoost grid model 95","Neural network grid model 66","GBM grid model 4","GBM grid model 3","GBM grid model 78","XGBoost grid model 89","GBM grid model 98","XGBoost grid model 17","GBM grid model 88","GBM grid model 9","GBM grid model 13","GBM grid model 84","GBM grid model 60","GBM grid model 30","Neural network grid model 33","Neural network grid model 7","Super learner neural network","GBM grid model 40","XGBoost grid model 36","XGBoost grid model 21","GBM model 5","Neural network grid model 94","XGBoost grid model 63","GBM grid model 44","Neural network grid model 55","Neural network grid model 81","Neural network grid model 79","GBM grid model 18","GBM grid model 23","Neural network grid model 51","XGBoost grid model 92","GBM grid model 93","GBM grid model 34","Neural network grid model 14","XGBoost grid model 86","XGBoost grid model 14","GBM grid model 24","XGBoost grid model 75","XGBoost grid model 49","GBM grid model 7","GBM grid model 81","GBM grid model 62","GBM grid model 85","GBM grid model 100","Neural network grid model 78","GBM grid model 37","XGBoost grid model 15","Neural network grid model 91","GBM grid model 68","GBM grid model 77","GBM grid model 69","GBM grid model 39","Neural network grid model 15","Neural network grid model 71","Neural network grid model 70","XGBoost grid model 2","GBM grid model 90","Neural network grid model 90","XGBoost grid model 45","GBM grid model 86","XGBoost grid model 18","XGBoost grid model 3","GBM grid model 42","GBM grid model 73","XGBoost grid model 46","Neural network grid model 52","GBM grid model 2","XGBoost grid model 11","Neural network grid model 45","XGBoost grid model 70","GBM grid model 11","Neural network grid model 67","XGBoost grid model 74","XGBoost grid model 39","XGBoost grid model 68","XGBoost grid model 24","XGBoost grid model 81","Neural network grid model 20","XGBoost grid model 82","GBM grid model 75","GBM grid model 12","Neural network grid model 53","XGBoost grid model 59","XGBoost grid model 73","GBM grid model 43","GBM grid model 56","XGBoost grid model 9","Neural network grid model 80","GBM grid model 27","GBM grid model 21","Neural network grid model 12","Neural network grid model 93","Neural network grid model 56","XGBoost grid model 37","XGBoost grid model 94","Neural network grid model 29","XGBoost grid model 7","XGBoost grid model 1","GBM grid model 87","XGBoost grid model 80","XGBoost grid model 71","XGBoost grid model 97","XGBoost grid model 52","GBM grid model 63","Neural network grid model 11","Neural network grid model 88","XGBoost grid model 60","GBM grid model 61","XGBoost grid model 53","XGBoost grid model 50","Neural network grid model 27","Neural network grid model 83","XGBoost grid model 16","XGBoost grid model 48","XGBoost grid model 98","XGBoost grid model 91","Neural network grid model 60","XGBoost grid model 25","XGBoost grid model 27","XGBoost grid model 51","GBM grid model 5","XGBoost grid model 79","XGBoost grid model 76","XGBoost grid model 4","XGBoost grid model 58","XGBoost grid model 6","Neural network grid model 58","XGBoost grid model 85","Neural network grid model 16","XGBoost grid model 61","XGBoost grid model 55","Neural network grid model 10","Neural network grid model 97","XGBoost grid model 19","XGBoost grid model 5","XGBoost grid model 38","XGBoost grid model 87","Neural network grid model 76","XGBoost grid model 30","Neural network grid model 68","Neural network grid model 17","Neural network grid model 26","Neural network grid model 54","XGBoost grid model 47","XGBoost grid model 64","XGBoost grid model 12","XGBoost grid model 35","XGBoost grid model 66","Neural network grid model 42","XGBoost grid model 69","XGBoost grid model 93","Neural network grid model 85","Neural network grid model 13","Neural network grid model 86","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[null,0.9761,0.9335,0.8539,0.9335,1,0.6567,0.8199,0.8868,0.63,0.9761,0.8868,0.9335,0.63,0.6839,0.6567,0.7822,0.9761,0.7384,0.8539,0.7384,0.7084,0.63,0.7084,0.6567,0.9335,0.4484,0.6839,0.8868,0.7084,0.5219,0.63,0.7384,0.7384,0.8199,0.5219,0.7084,0.4484,0.8539,1,0.414,0.3659,0.4899,0.63,0.6839,0.8199,0.3267,0.7384,0.5219,0.9761,0.6839,0.2472,0.8199,0.7084,0.8539,0.4899,0.4484,0.598,0.7384,0.598,0.7084,0.4484,0.7084,0.598,0.1463,0.3267,0.5637,0.6839,0.6839,0.8199,0.7084,0.5637,0.3659,0.414,0.7384,0.5637,0.8539,0.5219,0.7822,0.4899,0.5637,0.5219,0.3267,0.8199,0.7084,0.7084,0.598,0.6567,0.1144,0.6567,0.3865,0.5219,0.1042,0.6567,0.7384,0.7822,0.8868,0.8199,0.4899,0.6839,0.9761,0.2472,0.8868,0.6839,0.8539,0.6567,0.7822,0.7384,0.3865,0.414,0.2472,0.8868,0.6839,0.4484,0.5637,0.8539,0.5219,0.414,0.2472,0.2997,0.5637,0.598,0.7084,0.3865,0.6567,0.3865,0.7084,0.6839,0.8868,0.9335,0.6567,0.8539,0.414,0.1144,0.2263,0.63,0.1347,0.8539,0.9761,0.2116,0.1641,0.414,0.1641,0.3865,0.2116,0.7384,0.4484,0.2263,0.7384,0.7384,0.6567,0.2116,0.2116,0.8868,0.8868,0.0863,0.2997,0.7822,0.63,0.598,0.7822,0.598,0.1463,0.598,0.277,0.2997,0.5219,0.6567,0.8199,0.3267,0.3865,0.1144,0.414,0.5637,0.8199,0.1144,0.1841,0.6839,0.3659,0.3865,0.6839,0.8539,0.1641,0.277,0.7084,0.63,0.414,0.1463,0.6567,0.2263,0.2997,0.3267,0.6839,0.4484,0.4899,0.414,0.2263,0.63,0.8868,0.1463,0.2015,0.2472,0.7822,0.63,0.598,0.2997,0.7084,0.4484,0.1641,0.2997,0.1841,0.1841,0.3865,0.2116,0.2116,0.2116,0.3865,0.5219,0.277,0.3865,0.63,0.598,0.0863,0.2997,0.2015,0.6567,0.3267,0.2015,0.1144,0.2015,0.3659,0.0741,0.2472,0.2263,0.2263,0.277,0.2997,0.2472,0.3865,0.0741,0.1641,0.4899,0.1841,0.5219,0.3267,0.2263,0.1463,0.2015,0.2263,0.1841,0.0622,0.414,0.2472,0.277,0.3865,0.0863,0.3267,0.1463,0.1347,0.2015,0.2116,0.2997,0.2116,0.2015,0.2263,0.2116,0.0508,0.2263,0.2116,0.1144,0.0508,0.1463,0.0029,0.0029,0.0029,0.0029,0.0029],[null,0.9366,1,0.9366,0.9366,0.8763,0.9642,0.8988,0.8112,0.8763,0.7122,0.8988,0.9178,0.7709,1,0.7122,0.6316,0.7329,0.6045,0.6564,0.8339,0.8112,0.8339,0.9178,0.8763,0.7476,0.8763,0.6564,0.7122,0.7938,0.6564,0.7938,0.8112,0.7709,0.7122,0.6191,0.5752,0.8988,0.5922,0.6491,0.7476,0.8596,0.7329,0.5752,0.6564,0.9855,0.9178,0.6564,0.8596,0.5746,1,0.6661,0.8763,0.5922,0.6045,0.5746,0.6491,0.6661,0.5746,0.7122,0.6316,0.6316,0.6661,0.5746,0.9855,0.6661,0.6564,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5752,0.5746,0.5746,0.6191,0.6564,0.6491,0.5746,0.5746,0.6491,0.5746,0.5752,0.6316,0.7476,0.5746,1,1,0.5746,0.5746,0.6661,0.9366,0.5746,0.5752,0.6045,0.6661,0.6661,0.7329,0.6316,0.6316,0.8112,0.5746,0.5752,0.5746,0.5746,0.5746,0.5746,0.5752,0.5746,0.6045,0.7476,0.6661,0.5746,0.7709,0.7476,0.5746,0.5746,0.5746,0.5752,0.5746,0.5746,0.6191,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.7476,0.6045,0.6564,0.5746,0.5746,0.5746,0.5746,0.6316,0.6564,0.5746,0.6191,0.6045,0.9178,0.5746,0.5746,0.5746,0.5752,0.8339,0.5746,0.5746,0.5746,0.6191,0.5752,0.6491,0.7938,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.6191,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5922,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.7122,0.5746,0.5922,0.5746,0.5746,0.5746,0.5746,0.5746,0.5752,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.6045,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.3675,0.5746,0.5746,0.5746,0.5746,0.5746,0.5584,0.5746,0.4377,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5746,0.5158,0.5746,0.5746,0.5746,0.5289,0.5584,0.5746,0.5746,0.5584,0.2287,0.5584,0.4377,0.5746,0.392,0.3144,0.004,0.004,0.004,0.004,0.004],[0.9919,1,0.9426,1,0.9919,0.6131,0.7166,0.825,0.9208,null,0.9208,0.9674,0.8451,0.7166,0.7314,0.7166,0.5329,0.7797,0.5329,0.5302,0.7166,0.8451,0.7543,0.9014,0.9208,0.6787,0.7314,0.5417,0.5438,0.9674,0.6131,0.797,0.5959,0.5329,0.7314,0.5302,0.6787,0.6787,0.5302,0.5782,0.8451,0.6787,0.7543,0.5417,0.6131,0.5959,0.7166,0.5959,0.9426,0.6352,0.7314,0.5959,0.5302,0.7314,0.5302,0.5302,0.5417,0.5534,0.5329,0.5959,0.5302,0.7166,0.6352,0.5782,0.9208,0.7314,0.5534,0.5329,0.5329,0.5329,0.5438,0.5329,0.5302,0.7166,0.5302,0.5438,0.5161,0.5329,0.5959,0.5329,0.5438,0.5959,0.5124,0.5329,0.5953,0.5417,0.5417,0.8451,0.797,0.5959,0.5438,0.7067,0.5959,0.5161,0.5124,0.5329,0.6131,0.7166,0.5953,0.5959,0.5534,0.797,0.5124,0.5124,0.5124,0.5124,0.5124,0.5329,0.5302,0.5161,0.5124,0.5329,0.6787,0.5161,0.5959,0.797,0.5124,0.5124,0.5329,0.5953,0.5953,0.6608,0.5161,0.5302,0.5124,0.5329,0.5417,0.5161,0.5329,0.6131,0.6352,0.5329,0.5161,0.5534,0.5417,0.5161,0.5302,0.7543,0.5329,0.5438,0.5161,0.797,0.5534,0.5161,0.5161,0.5124,0.5329,0.5124,0.5124,0.5124,0.5302,0.5534,0.5161,0.5438,0.5161,0.5161,0.5438,0.5438,0.5124,0.5161,0.5124,0.5161,0.5124,0.5124,0.5124,0.5161,0.5124,0.5417,0.5161,0.5124,0.5124,0.5534,0.5124,0.5124,0.5161,0.5124,0.5161,0.5161,0.5161,0.5124,0.5953,0.5302,0.5161,0.5161,0.5161,0.5124,0.5161,0.5124,0.6608,0.5124,0.5124,0.5124,0.5124,0.5161,0.5124,0.5161,0.5302,0.5438,0.5161,0.5124,0.5124,0.5124,0.5329,0.5124,0.5124,0.5124,0.5161,0.5124,0.5124,0.5302,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5161,0.5161,0.5124,0.5124,0.5959,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5161,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5161,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,0.5124,null,null,null,null,null],[null,0.8258,1,0.9049,0.9335,0.8884,0.8884,0.9335,0.8258,0.8488,0.6985,0.9147,1,0.8779,0.9147,0.7433,0.6746,0.6746,0.6985,0.6746,0.7673,0.7822,0.9147,0.9147,0.8884,0.8025,0.9147,0.6746,0.7673,0.9147,0.7584,0.8884,0.7822,0.7315,0.7433,0.6924,0.6985,0.9049,0.6746,0.7584,0.8488,0.9792,0.7584,0.7315,0.6985,0.9049,0.9049,0.7822,0.9792,0.6746,0.958,0.6746,0.7673,0.7673,0.6746,0.6723,0.7103,0.7822,0.6746,0.8884,0.6985,0.7822,0.7433,0.6746,0.9792,0.8488,0.6746,0.6723,0.6723,0.6723,0.6746,0.6746,0.6723,0.6746,0.6723,0.6746,0.6746,0.6985,0.6746,0.7103,0.6746,0.7103,0.6723,0.6723,0.6985,0.7673,0.6746,0.958,1,0.6746,0.6924,0.8025,0.9335,0.6723,0.7103,0.6985,0.6924,0.8025,0.7584,0.7584,0.6723,0.9049,0.6723,0.6746,0.6723,0.6723,0.6723,0.6746,0.6746,0.6746,0.6746,0.7433,0.7103,0.6723,0.7584,0.8884,0.6723,0.6723,0.6746,0.7315,0.6746,0.6746,0.6746,0.6746,0.6723,0.7673,0.6723,0.6723,0.6746,0.7433,0.6985,0.6746,0.6746,0.6723,0.6746,0.6723,0.7822,0.7433,0.6723,0.6746,0.6723,0.9147,0.6746,0.6746,0.6723,0.6723,0.8025,0.6723,0.6723,0.6652,0.6746,0.6723,0.6924,0.7673,0.6723,0.7433,0.6746,0.6746,0.6746,0.6723,0.6723,0.6723,0.6723,0.6746,0.6723,0.6723,0.6746,0.6723,0.6723,0.6746,0.6723,0.7673,0.6723,0.6723,0.6723,0.6723,0.6723,0.6746,0.7103,0.6723,0.6746,0.6723,0.6924,0.6723,0.6723,0.6723,0.6746,0.6746,0.7103,0.6723,0.6723,0.6723,0.6746,0.6723,0.6723,0.6723,0.7315,0.6723,0.6723,0.6746,0.6723,0.6723,0.6723,0.6723,0.6723,0.6163,0.6723,0.6723,0.6723,0.6746,0.6723,0.6163,0.6746,0.6723,0.6723,0.6723,0.6163,0.6723,0.6746,0.6723,0.6723,0.6746,0.6163,0.5118,0.6723,0.6163,0.6723,0.6723,0.6723,0.6723,0.6723,0.6723,0.6723,0.6723,0.3687,0.6723,0.6723,0.6723,0.6723,0.6723,0.5795,0.6723,0.5129,0.6163,0.6723,0.6723,0.6723,0.6723,0.6163,0.5129,0.6723,0.6723,0.5129,0.6723,0.6287,0.6163,0.6723,0.5795,0.542,0.6287,0.6723,0.5129,0.5795,0.6723,0.6723,0.5795,0.2737,0.5795,0.5129,0.5584,0.4454,0.4454,0.0115,0.0115,0.0115,0.0115,0.0115],[1,5,17,27,22,9,23,13,8,77,21,30,16,62,79,57,6,4,31,11,42,60,91,112,103,24,136,28,15,52,113,78,174,36,41,66,56,148,14,7,146,184,144,120,67,33,176,53,167,3,80,132,54,58,37,97,131,108,25,175,43,192,99,70,259,182,116,81.5,81.5,19,45,123,147,150,47,119,38,95,55,96,128,160,211,64,35,94,87,168,269,93,166,170,252,100,50,26,44,39,122,84,18,249,10,72,12,65,34,92,171,159,210,40,89,139,127,85,126,149,236,173,68,130,48,142,63,164,106,90,32,29,121,46,153,242,178,98,239,104,2,200,223,157,258,169,235,101,163,183,61,69,73,221,199,76,20,275,179,51,117,115,49,109,216,114,194,177,133,111,74,151,172,267,161,138,83,245,260,102,206,158,137,75,256,234,71,86,140,254,118,230,209,202,124,155,129,165,261,125,59,244,250,215,110,135,107,224,88,134,241,213,238,232,180,219,208,186,296,143,195,181,141,145,263,203,222,105,193,237,257,233,156,270,243,207,188,212,185,191,162,253,231,152,247,154,225,189,248,204,198,226,246,190,196,187,197,251,205,255,240,201,274,214,217,229,218,228,287,220,227,268,294,273,313,313,313,313,313],[1,5,2,4,6,11,9,13,19,3,20,24,27,15,8,18,36,40,33,42,30,28,21,14,17,41,10,46,47,37,22,39,7,51,54,52,62,23,70,79,25,12,29,45,53,65,26,63,31,96,50,49,61,75,76,64,56,60,87,34,94,44,68,81,16,43,59,82.5,82.5,98,101,74,69,67,86,71.5,97,93,90,91,71.5,73,55,95,113,89,84,66,35,99,78,80,48,88,112,128,126,119,105,115,149,58,146.5,121,146.5,131,142,124,103,102,77,138,116,117,106,145,110,125,85,108,150,127,153,114,152,109,139,136,155,161,129,163,137,107,120,141,92,144,175,122,104,148,123,143,111,154,133,151,171,177,166,140,134,179,200,118,157,191,164,178,192,185,135,186,156,159,180,189,195,181,174,130,167,188,193,162,132,197,168,182,196,212,158,172,220,211,208,160,205,184,187,176,209,202,204,203,173,217,245,170,183,201,231,226,232,194,246,235,207,214,213,199,225,210,215,227,190,234,224,236,244,257,218,233,223,268,238,222,216,228,256,219,221,241,255,242,253,248,270,230,243,274,240,276,263,269,260,266,267,258,251,275,272,282,277,261,280,265,271,284,262,285,287,289,293,295,279,297,302,292,294,300,313,313,313,313,313],[3,5,2,4,6,14,9,10,20,1,19,21,26,12,11,15,32,38,31,34,35,30,17,13,16,50,7,40,58,41,28,39,8,51,60,47,43,23,65,59,33,22,24,29,62,71,18,73,27,64,76,37,81,72,78,46,45,57,91,53,66,36,70,77,25,55,80,74.5,74.5,102,87,63,42,56,112,82.5,107,90,113,84,82.5,54,44,99,114,94,121,89,52,92,68,93,61,109,128,143,125,148,120,127,123,85,140.5,133,140.5,130,139,118,88,101,98,155,146,103,110,111,126,79,96,105,132,119,160,136,144,137,124,152,162,154,142,151,108,86,115,149,116,138,193,104,135,106,67,117,100,168,150,95,182,165,203,122,157,173,188,129,147,200,183,161,213,175,145,187,169,159,179,176,205,170,153,166,171,172,207,134,163,196,164,192,178,215,156,158,216,225,194,184,218,167,174,197,220,208,224,190,177,206,238,214,201,199,232,222,247,209,246,219,189,198,204,212,210,191,211,223,185,241,233,227,258,234,195,221,231,267,239,235,228,229,264,226,250,249,248,255,256,261,254,244,251,276,253,281,245,266,237,259,273,260,272,274,270,278,280,268,271,262,277,282,263,287,285,286,295,292,275,296,302,290,289,300,311,312,313,314,315],[1,4,3,5,7,14,9,15,19,2,27,21,30,13,6,17,33,48,35,45,38,31,20,12,16,44,11,52,47,42,22,39,8,59,60,50,55,23,69,82,24,10,32,41,57,71,25,58,28,93,51,46,72,64,79,65,54,63,90,36,100,34,78,87,18,40,66,88.5,88.5,108,95,68,73,67,102,74.5,106,76,98,85,74.5,70,49,103,112,99,86,56,26,107,81,61,43,109,122,117,125,121,84,111,153,53,154.5,126,154.5,130,142,124,104,105,83,135,119,114,131,145,127,136,77,110,151,129,144,113,147,97,140,132,164,170,134,168,137,101,123,149,91,157,175,128,94,150,116,139,133,163,141,159,174,184,161,120,115,182,205,96,143,188,166,192,196,185,158,173,146,171,177,193,199,176,181,118,183,189,208,152,138,200,160,180,207,223,156,167,225,213,204,148,214,179,191,187,210,201,209,211,165,232,248,172,169,195,238,228,237,202,250,244,197,212,190,203,231,229,215,220,186,242,224,236,251,261,226,245,227,267,241,219,217,230,252,221,222,249,259,243,258,253,275,234,246,276,247,278,260,272,254,271,268,265,240,277,280,285,281,257,283,263,262,286,266,287,288,289,293,295,270,300,303,294,290,299,313,313,313,313,313],[6,19,24,40,41,48,50,51,66,83,87,96,99,102,104,107,107,130,130,132,145,149,149,151,152,159,164,166,167,172,185,195,197,197,215,215,216,217,218,227,228,228,229,235,239,240,245,247,253,256,257,264,268,269,270,272,286,288,293,298,303,306,315,315,318,320,321,327,327,327,328,328,331,340,347,347.5,348,354,356,356,356.5,357,359,361,374,376,378,379,382,391,393,404,404,406,412,414,420,427,431,437,443,445,451.5,452,453.5,456,457,458,466,467,468,468,470,473,474,486,489,489,494,496,501,505,505,505,506,507,509,510,513,514,526,528,535,536,536,537,538,543,545,554,556,561,564,568,579,586,587,588,588,595,603,603,605,610,613,618,626,630,630,646,650,654,654,660,665,666,669,669,673,678,680,681,682,687,691,693,693,695,698,712,718,725,726,731,732,735,746,746,755,760,761,762,763,766,766,769,776,780,790,800,803,810,811,811,823,829,830,832,834,837,845,846,846,849,849,856,857,860,876,880,894,897,902,902,903,907,911,913,918,920,928,936,936,946,950,952,952,953,961,961,971,978,987,989,993,996,999,1000,1006,1009,1009,1016,1018,1032,1035,1037,1039,1045,1050,1053,1065,1073,1077,1093,1099,1110,1111,1113,1134,1144,1167,1172,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4-1" class="section level4 hasAnchor" number="3.4.5.4">
<h4><span class="header-section-number">3.4.5.4</span> CV 4<a href="id_03_model_training.html#cv-4-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-5f83a93ec2b6d5c5215a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5f83a93ec2b6d5c5215a">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 1","GBM grid model 80","GBM grid model 67","GBM grid model 82","GBM grid model 92","GBM grid model 24","GBM grid model 72","GBM grid model 53","GBM grid model 64","GBM grid model 83","Neural network grid model 64","GBM grid model 46","GBM grid model 17","Neural network grid model 28","GBM grid model 20","Neural network grid model 70","GBM grid model 58","Super learner final","Super learner all models","Neural network grid model 3","XGBoost grid model 14","Neural network grid model 75","GBM grid model 30","XGBoost grid model 88","GBM grid model 97","GBM grid model 60","GBM grid model 35","GBM grid model 98","GBM grid model 74","Neural network grid model 25","Neural network grid model 9","GBM grid model 22","XGBoost grid model 23","Super learner neural network","GBM grid model 15","GBM grid model 96","GBM grid model 23","GBM grid model 51","Neural network grid model 88","GBM grid model 71","GBM grid model 41","Neural network grid model 43","GBM grid model 38","GBM grid model 89","Neural network grid model 22","Neural network grid model 6","GBM grid model 45","GBM grid model 59","Neural network grid model 72","XGBoost grid model 21","Neural network grid model 21","Neural network grid model 87","GBM grid model 69","Neural network grid model 96","XGBoost grid model 2","GBM grid model 95","Neural network grid model 65","Neural network grid model 93","GBM grid model 25","Super learner GBM","XGBoost grid model 16","Neural network grid model 67","GBM grid model 49","Neural network grid model 73","XGBoost grid model 91","Neural network grid model 19","XRT model","GBM grid model 18","GBM grid model 94","GBM grid model 14","Super learner XGBoost","DRF model","GBM grid model 8","GBM grid model 66","Neural network grid model 60","GBM grid model 31","GBM grid model 79","GBM grid model 78","XGBoost grid model 34","GBM grid model 91","GBM grid model 50","GBM grid model 77","GBM grid model 34","Neural network grid model 62","GBM grid model 26","GBM grid model 48","XGBoost grid model 44","GBM model 1","GBM grid model 4","XGBoost grid model 20","Neural network grid model 92","Neural network grid model 91","GBM grid model 47","Neural network grid model 77","Neural network grid model 61","Neural network grid model 8","XGBoost grid model 68","GBM grid model 13","GBM grid model 57","Neural network grid model 29","XGBoost grid model 13","Neural network grid model 31","GBM grid model 54","Neural network grid model 41","XGBoost grid model 42","GBM grid model 87","XGBoost grid model 92","GBM model 5","Neural network grid model 15","GBM grid model 11","Neural network grid model 24","Neural network grid model 97","GBM grid model 7","GBM grid model 75","GBM grid model 86","GBM model 4","Neural network grid model 98","XGBoost grid model 9","GBM grid model 84","GBM grid model 21","GBM grid model 62","Neural network grid model 16","Neural network grid model 84","GBM grid model 9","Neural network grid model 40","GBM grid model 65","GBM grid model 73","XGBoost grid model 89","XGBoost grid model 71","GBM model 3","Neural network grid model 74","XGBoost grid model 8","XGBoost grid model 75","Neural network grid model 52","GBM grid model 70","Neural network grid model 20","GBM grid model 33","GBM grid model 76","Neural network grid model 46","GBM grid model 10","Neural network grid model 71","Neural network grid model 55","Neural network grid model 51","Neural network grid model 34","Neural network grid model 63","XGBoost grid model 36","Neural network grid model 59","XGBoost grid model 73","GBM grid model 100","XGBoost grid model 82","GBM grid model 99","GBM grid model 61","GBM model 2","GBM grid model 39","Neural network grid model 35","XGBoost grid model 80","XGBoost grid model 22","GBM grid model 63","XGBoost grid model 58","XGBoost grid model 78","GBM grid model 42","GBM grid model 19","XGBoost grid model 51","GBM grid model 36","GBM grid model 81","Neural network grid model 83","GBM grid model 52","XGBoost grid model 11","GBM grid model 55","XGBoost grid model 60","Neural network grid model 54","GBM grid model 88","XGBoost grid model 33","XGBoost grid model 63","Neural network grid model 33","GBM grid model 29","XGBoost grid model 41","GBM grid model 12","Neural network grid model 23","GBM grid model 32","GBM grid model 85","Neural network grid model 4","Neural network grid model 47","XGBoost grid model 46","XGBoost grid model 81","Neural network grid model 44","XGBoost grid model 18","XGBoost grid model 70","GBM grid model 2","XGBoost grid model 38","Neural network grid model 94","XGBoost grid model 4","Neural network grid model 18","XGBoost grid model 77","XGBoost grid model 15","Neural network grid model 10","Neural network grid model 45","XGBoost grid model 25","XGBoost model 1","GBM grid model 28","Neural network grid model 66","XGBoost model 3","GBM grid model 93","Neural network grid model 27","GBM grid model 16","GBM grid model 56","XGBoost grid model 24","XGBoost grid model 7","XGBoost grid model 17","GBM grid model 90","Neural network grid model 100","XGBoost grid model 52","GBM grid model 43","Neural network grid model 78","Neural network grid model 38","Neural network grid model 68","Neural network grid model 26","GBM grid model 6","Neural network grid model 95","Neural network grid model 80","GBM grid model 27","GBM grid model 3","GBM grid model 44","Neural network grid model 49","Neural network grid model 17","GBM grid model 37","Neural network grid model 86","XGBoost grid model 95","Neural network grid model 12","Neural network grid model 30","Neural network grid model 90","Neural network grid model 36","Neural network grid model 82","Neural network grid model 99","XGBoost grid model 27","XGBoost grid model 45","Neural network grid model 89","Neural network grid model 14","GBM grid model 40","Neural network grid model 37","Neural network grid model 57","XGBoost grid model 6","XGBoost grid model 48","XGBoost model 2","XGBoost grid model 66","XGBoost grid model 28","XGBoost grid model 53","XGBoost grid model 55","XGBoost grid model 98","Neural network grid model 85","Neural network grid model 50","Neural network grid model 32","XGBoost grid model 5","XGBoost grid model 79","Neural network grid model 81","XGBoost grid model 12","Neural network grid model 7","XGBoost grid model 94","Neural network grid model 76","XGBoost grid model 67","XGBoost grid model 86","GBM grid model 5","XGBoost grid model 49","GBM grid model 68","Neural network grid model 58","XGBoost grid model 19","XGBoost grid model 97","Neural network grid model 11","XGBoost grid model 84","XGBoost grid model 50","XGBoost grid model 1","XGBoost grid model 3","Neural network grid model 13","Neural network grid model 69","XGBoost grid model 61","XGBoost grid model 54","XGBoost grid model 87","XGBoost grid model 30","XGBoost grid model 69","XGBoost grid model 64","Neural network grid model 2","XGBoost grid model 59","XGBoost grid model 47","XGBoost grid model 85","Neural network grid model 56","XGBoost grid model 93","XGBoost grid model 37","XGBoost grid model 76","Neural network grid model 42","Neural network grid model 79","XGBoost grid model 39","XGBoost grid model 35","XGBoost grid model 74","Neural network grid model 1","Neural network grid model 53","Neural network grid model 39","Neural network grid model 5","Neural network grid model 48","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[null,0.9729,0.9244,0.8928,0.9244,0.7602,0.9244,0.8258,0.8928,0.9244,0.7659,0.8258,0.7999,0.7999,0.7999,0.7999,0.8928,0.6293,0.6293,0.7348,0.7796,0.6989,0.9729,0.8258,0.9729,0.9244,0.8258,0.8598,0.8598,0.8258,0.8258,0.4953,0.8928,0.4411,0.9729,0.7659,0.7999,0.9244,0.5816,0.8598,0.8598,0.6989,0.8598,0.7796,0.7602,0.7602,0.9244,0.7796,0.8598,0.8258,0.7602,0.7796,0.7602,0.7659,0.449,0.7602,0.5816,0.7659,0.8928,0.449,0.4423,0.5816,0.8598,0.483,0.4423,0.6989,0.8258,0.8928,0.7796,0.7999,0.4411,0.8598,0.7659,0.7999,0.7602,0.7796,0.7348,0.7659,0.3939,0.5816,0.7659,0.7999,0.7796,0.7796,0.7659,0.6989,0.449,0.7659,0.7659,0.4953,0.7348,0.5816,0.7602,0.7602,0.8598,0.9244,0.7796,0.9244,0.7999,0.5392,0.7659,0.7999,0.7659,0.483,0.7348,0.8598,0.8928,0.9244,0.7348,0.7999,1,0.483,0.7796,0.4953,0.7999,0.7796,0.8258,0.6989,0.8258,0.8258,0.7602,0.449,0.8928,0.483,0.3211,0.8928,0.7999,0.5392,0.4411,0.7796,0.6989,0.3211,0.3211,0.4411,0.7659,0.8258,0.6989,0.6989,0.449,0.7796,0.3211,0.5816,0.7348,0.7602,0.7796,0.3211,0.4183,0.3536,0.7659,0.3211,0.7348,0.7999,0.8928,0.449,0.483,0.449,0.2096,0.6989,0.3193,0.2141,0.6748,0.8258,0.3536,0.4953,0.7659,0.4953,0.449,0.7602,0.7659,0.4423,0.4423,0.6748,0.2141,0.3536,0.6293,0.6989,0.4411,0.7659,0.3211,0.6989,0.7796,0.4953,0.4953,0.2141,0.6748,0.4423,0.4423,0.3211,0.7348,0.3939,0.449,0.4953,0.2894,0.2579,0.2378,0.4953,0.7796,0.4423,0.7602,0.6748,0.483,0.6989,0.7659,0.3211,0.6989,0.6293,0.4953,0.2894,0.2141,0.7999,0.6293,0.7659,0.6748,0.4423,0.4953,0.449,0.5816,0.7348,0.3211,0.449,0.7348,0.4183,0.6748,0.3211,0.5392,0.5392,0.2096,0.4423,0.449,0.4423,0.5392,0.4953,0.4423,0.4183,0.483,0.3939,0.4183,0.4953,0.6748,0.4411,0.4423,0.6293,0.2141,0.7796,0.2894,0.4953,0.4423,0.4183,0.2579,0.3211,0.4183,0.3939,0.4953,0.3211,0.5392,0.2894,0.3193,0.3536,0.4411,0.2141,0.4183,0.2814,0.449,0.449,0.4423,0.3211,0.2141,0.3211,0.1204,0.2141,0.483,0.449,0.4411,0.3211,0.2579,0.1204,0.3211,0.3211,0.3211,0.2894,0.3193,0.3193,0.2378,0.4423,0.4411,0.2579,0.2894,0.3211,0.4183,0.2894,0.2378,0.2814,0.3211,0.2141,0.2814,0.3536,0.2141,0.2814,0.0034,0.0034,0.0034,0.0034,0.0034],[0.8723,0.7457,0.9244,0.9518,0.5969,null,0.7705,0.7457,0.7038,0.5798,0.8174,0.7038,0.647,0.7261,0.6666,1,0.7705,0.9244,0.9244,1,0.5798,1,0.5547,0.5798,0.5496,0.5969,0.6166,0.647,0.5798,1,0.8723,0.5798,0.7038,0.8174,0.5798,0.647,0.5798,0.5547,0.6818,0.5798,0.5798,0.5969,0.5788,0.5788,0.7979,0.5798,0.5798,0.5798,0.5969,0.5496,0.7457,0.6166,0.647,0.6666,0.5798,0.5798,0.647,0.7261,0.5711,0.5798,0.5798,0.7457,0.5549,0.5798,0.6166,0.647,0.7261,0.6818,0.5798,0.5798,0.6818,0.5798,0.5711,0.5798,0.647,0.5549,0.5798,0.5798,0.6818,0.5798,0.647,0.5798,0.5798,0.5798,0.5496,0.5798,0.6818,0.5798,0.5798,0.5969,0.6412,0.5798,0.5496,0.5798,0.6666,0.5549,0.5798,0.5798,0.5798,0.6666,0.5798,0.5798,0.5496,0.5798,0.5549,0.5496,0.5547,0.5496,0.647,0.5788,0.5496,0.5798,0.5798,0.5798,0.5798,0.5547,0.5798,0.5711,0.5496,0.5798,0.5788,0.8174,0.6166,0.5547,0.5798,0.5549,0.5496,0.5798,0.5496,0.5549,0.5798,0.5496,0.5798,0.5798,0.5496,0.5798,0.5496,0.5496,0.5496,0.5496,0.5798,0.5798,0.5798,0.5711,0.5496,0.6412,0.5798,0.5549,0.5496,0.5798,0.5496,0.5788,0.5496,0.5496,0.5798,0.5496,0.5496,0.5496,0.647,0.6818,0.5496,0.5798,0.5798,0.5496,0.5496,0.5798,0.5798,0.5496,0.5496,0.5798,0.8174,0.5496,0.5549,0.5496,0.5496,0.5547,0.5496,0.5496,0.5788,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5798,0.5798,0.5496,0.5547,0.5496,0.5496,0.5798,0.5798,0.5496,0.5798,0.5496,0.5798,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5798,0.5496,0.5496,0.5496,0.5549,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5711,0.5496,0.5496,0.5496,0.5496,0.5496,0.5547,0.5798,0.5496,0.5496,0.5496,0.5788,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5788,0.5496,0.5549,0.5251,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.4232,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.5496,0.4232,0.3871,0.5496,0.5496,0.5496,0.5496,0.5496,0.5138,0.4232,0.5251,0.5496,0.5496,0.5251,0.5496,0.5496,0.3991,0.5496,0.4232,0.5496,0.5496,0.5138,0.5251,0.4232,0.5496,0.5496,0.5496,0.5496,0.5496,0.004,0.004,0.004,0.004,0.004],[null,0.9396,0.8316,0.8428,0.8675,0.9674,0.8316,0.8539,0.8539,0.8113,0.8428,0.9147,0.7644,0.8675,0.992,0.9147,0.8675,0.8539,0.8539,0.8675,0.8675,0.8428,0.7137,0.7999,0.7137,0.7256,0.7137,0.8428,0.7137,1,0.8428,0.8926,0.7644,1,0.7137,0.9396,0.7256,0.7137,0.8926,0.7256,0.782,0.7256,0.7256,0.7137,0.7137,0.8316,0.8113,0.7137,0.7137,0.7256,0.8539,0.7137,0.7256,0.8113,0.8316,0.7644,0.7999,0.7644,0.7137,0.8113,0.755,0.8675,0.7256,0.7137,0.7644,0.992,0.8539,0.7644,0.7137,0.7137,0.7644,0.7256,0.7137,0.7137,0.7137,0.7137,0.7137,0.8428,0.8428,0.782,0.7256,0.7137,0.7137,0.7137,0.7137,0.7137,0.7999,0.7256,0.7137,0.8113,0.7999,0.7137,0.7137,0.8539,0.7256,0.7137,0.7256,0.7999,0.7137,0.7137,0.7137,0.7256,0.7137,0.782,0.7137,0.7137,0.7137,0.7137,0.7256,0.7137,0.7137,0.7137,0.7137,0.7256,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.782,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7644,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7256,0.8113,0.7137,0.7137,0.782,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.9147,0.7137,0.7137,0.7256,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.8113,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.6737,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.7137,0.6837,0.7137,0.7137,0.7137,0.7137,0.7137,null,null,null,null,null],[0.8723,0.7457,0.976,0.8969,0.6271,null,0.8147,0.699,0.7457,0.5761,0.8147,0.699,0.5843,0.6818,0.5609,1,0.768,0.9214,0.9214,1,0.5843,0.9488,0.5592,0.5761,0.5325,0.5609,0.6076,0.6423,0.5761,0.8969,0.768,0.5843,0.699,0.768,0.5761,0.6423,0.5638,0.5352,0.6818,0.5467,0.5609,0.6271,0.5467,0.5843,0.7926,0.5843,0.5364,0.5638,0.699,0.5325,0.699,0.6818,0.6076,0.6038,0.5638,0.5638,0.6423,0.6423,0.5592,0.5592,0.5592,0.7457,0.5364,0.6076,0.6076,0.6818,0.6423,0.6818,0.5352,0.5467,0.7237,0.5467,0.5325,0.5592,0.6076,0.5467,0.5325,0.5843,0.5843,0.5638,0.6076,0.5592,0.5609,0.5609,0.5467,0.6038,0.6818,0.5761,0.5843,0.6038,0.6271,0.5609,0.5325,0.5638,0.6271,0.5592,0.5638,0.5467,0.5352,0.7926,0.6076,0.5592,0.5325,0.5843,0.5467,0.5325,0.5325,0.5325,0.6818,0.5325,0.5325,0.5592,0.5638,0.5609,0.5467,0.5325,0.5352,0.5352,0.5325,0.5467,0.5364,0.7237,0.6076,0.5325,0.5592,0.5467,0.5325,0.5609,0.5325,0.5325,0.6076,0.5325,0.5364,0.5761,0.5325,0.5467,0.5325,0.5325,0.5325,0.5325,0.5592,0.5592,0.6076,0.5467,0.5325,0.5761,0.6038,0.5364,0.5325,0.5609,0.5325,0.5325,0.5325,0.5325,0.5638,0.5325,0.5325,0.5325,0.5638,0.6818,0.5325,0.5467,0.5609,0.5325,0.5325,0.6076,0.5592,0.5325,0.5325,0.6423,0.8147,0.5325,0.5467,0.5325,0.5325,0.5352,0.5325,0.5325,0.5364,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5592,0.5364,0.5325,0.5325,0.5325,0.5325,0.5592,0.5609,0.5325,0.5352,0.5325,0.5592,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5638,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5467,0.5325,0.5325,0.5364,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5467,0.5325,0.5325,0.5325,0.5325,0.5325,0.5352,0.5325,0.5325,0.5325,0.5325,0.5325,0.5467,0.5325,0.5592,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5352,0.5325,0.5325,0.5325,0.4492,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.5325,0.4148,0.3668,0.5325,0.5592,0.5325,0.5325,0.5325,0.4148,0.4885,0.5325,0.5364,0.5364,0.5138,0.5325,0.5325,0.4148,0.5325,0.4666,0.5325,0.5325,0.5325,0.4666,0.4492,0.5325,0.5325,0.5325,0.5325,0.5325,0.0112,0.0112,0.0112,0.0112,0.0112],[1,5,4,6,9,58,11,18,24,12,81,33,55,89,80,106,19,117,126,146,72,109,7,52,8,15,27,36,13,115,94,135,44,169,10,97,35,17,168,40,29,150,20,46,127,154,2,34,23,53,151,74,63,137,141,69,185,133,14,139,147,166,31,157,190,131,247,26,70,38,179,178,61,30,173,39,123,48,209,136,21,43,56,85,42,105,159,112,62,155,149,161,84,128,75,45,110,3,28,205,76,51,73,231,93,25,57,16,140,41,32,192,22,181,78,91,60,92,47,50,71,224,88,132,270,37,68,124,215,86,197,207,294,206,64,98,101.5,101.5,210,77,295,194,130,125,87,228,283,249,83,239,108,49,67,162,246,158,264,100,236,284,113,65,184,165,90,196,167,103,82,199,287,122,272,254,183,104,164,79,289,99,54,182,156,222,119,241,227,263,111,174,216,148,277,274,261,238,129,198,138,120,250,142,66,233,114,134,172,235,240,59,176,116,118,218,256,221,180,96,296,195,95,175,121,288,262,152,267,248,230,265,186,213,242,275,163,187,258,214,107,260,225,153,255,144,212,191,170,189,279,251,280,273,160,244,171,202,285,220,252,282,200,217,145,177,211,201,268,276,271,253,193,143,269,257,203,292,237,188,204,223,291,286,232,208,259,229,234,219,290,281,243,226,245,293,266,278,298,297,313,313,313,313,313],[2,4,9,14,17,1,20,18,19,28,7,24,23,11,16,8,35,5.5,5.5,3,27,15,52,32,50,54,51,45,59,25,30,21,44,12,68,33,53,55,13,58,57,22,60,72,34,29,71,64,77,62,37,65,61,43,46,73,31,49,88,42,38,39,80,36,26,56,10,83,79,84,41,40,92,103,48,90,69,91,47,67,102,101,93,94,117,85,66,82,100,70,86,75,107,99,111,126,95,125,116,78,106,124,105,63,104,131,122,140,96,129,143,81,138,89,115,113,130,118,136,141,139,87,146,110,76,153,147,127,98,144,112,109,74,114,158,156,154.5,154.5,120,161,97,134,148,150,163,128,108,119,169,133,159,189,181,149,132,151,123,188,135,121,182,199,160,167,190,173,168,191,207,152,137,196,142,145,186,198,185,215,157,219,223,180,194,166,206,172,170,162,218,192,176,205,165,171,164,174,208,184,201,222,179,209,240,193,226,217,202,187,177,249,212,234,232,200,175,204,220,245,178,210,247,225,244,183,197,233,216,203,224,195,237,227,214,221,242,236,211,230,268,213,229,260,235,264,243,250,262,254,228,241,231,238,278,246,275,269,248,263,256,239,265,267,287,277,272,271,251,259,252,258,280,297,257,266,285,253,274,292,289,282,255,261,283,290,273,288,286,294,270,281,291,301,296,279,293,299,295,300,313,313,313,313,313],[1,4,13,7,19,2,14,23,22,30,5,29,24,11,12,6,51,8.5,8.5,3,35,21,61,49,74,52,37,48,55,16,26,15,72,10,64,44,68,76,17,42,80,25,89,45,27,28,96,84,57,79,33,38,70,34,41,60,20,32,85,50,43,31,100,39,36,40,18,103,67,81,47,53,73,82,56,124,54,118,46,75,125,101,110,93,102,69,63,83,108,71,65,58,86,66,88,95,106,155,146,59,129,104,136,62,130,147,121,128,87,127,99,78,138,94,141,137,120,132,143,119,117,90,115,135,77,164,148,134,91,152,131,109,97,107,159,142,144.5,144.5,105,162,92,133,166,157,154,112,98,116,167,111,176,182,177,151,113,163,114,169,126,123,170,191,161,172,198,160,185,201,196,188,140,181,149,158,165,207,178,216,122,200,230,192,190,194,215,153,187,156,210,199,184,211,171,139,173,174,209,197,226,208,168,212,229,150,217,227,232,175,206,242,202,235,225,183,244,179,228,237,189,224,247,204,236,223,186,241,195,214,193,239,219,221,213,180,251,231,205,246,270,218,240,263,203,264,243,258,253,254,222,267,220,233,268,248,278,260,234,257,250,252,272,255,287,279,259,273,245,238,249,262,282,300,266,265,285,256,274,292,283,280,271,261,281,289,275,286,284,290,276,269,288,301,295,294,296,297,299,303,311,312,313,314,315],[2,4,5,8,13,1,19,15,18,29,11,26,21,16,20,10,28,6.5,6.5,3,27,17,43,31,37,50,60,46,54,25,32,23,40,14,64,34,53,61,12,71,52,22,55,63,38,24,68,56,89,59,33,79,65,49,35,66,36,58,87,44,48,41,67,47,30,57,9,82,80,102,39,45,95,108,51,77,90,85,42,75,107,110,97,88,101,103,74,86,94,70,72,84,106,92,124,133,93,123,119,69,100,137,104,62,91,116,121,138,99,129,156,83,141,81,112,109,140,113,130,149,132,73,139,114,78,150,143,122,105,147,96,115,76,120,171,159,160.5,160.5,136,172,98,125,144,158,188,131,111,118,186,127,169,193,190,164,135,154,126,177,145,117,187,213,165,170,198,152,168,194,205,151,128,197,134,148,173,199,182,209,155,208,223,176,195,153,202,180,163,166,210,184,174,191,146,178,167,181,221,189,203,220,175,211,244,206,228,217,192,201,179,253,214,225,237,212,142,218,196,247,162,200,249,235,242,157,215,236,185,204,230,183,245,232,224,219,241,243,227,216,266,222,226,255,240,263,238,250,264,258,233,207,239,229,275,252,274,269,234,261,246,231,268,267,288,278,272,271,254,248,259,260,280,298,256,265,282,257,276,290,286,281,251,262,283,292,273,287,289,295,270,284,293,300,297,279,294,302,291,296,313,313,313,313,313],[6,17,31,35,58,62,64,74,83,99,104,112,123,127,128,130,133,137.5,146.5,155,161,162,163,164,169,171,175,175,181,181,182,194,200,205,206,208,209,209,210,211,218,219,224,226,226,235,237,238,246,253,254,256,259,263,263,268,272,272,274,275,276,277,278,279,282,284,284,294,296,305,306,316,321,323,328,330,336,342,344,353,355,355,356,360,362,362,362,363,364,366,372,378,383,385,398,399,404,406,409,411,411,416,418,418,418,419,421,422,422,426,430,434,439,445,446,450,450,455,456,459,459,474,488,491,501,504,506,507,509,529,536,540,541,547,552,555,561,561,571,572,582,586,588,590,592,599,600,602,605,610,612,613,615,626,626,626,627,634,642,645,652,668,670,674,676,681,688,689,690,690,692,696,697,705,707,708,709,719,723,726,730,730,735,735,742,746,747,747,749,749,750,755,759,762,765,767,767,768,768,770,772,774,779,782,785,795,798,798,802,803,804,810,812,813,817,822,824,825,825,829,838,839,843,851,860,862,863,869,877,882,887,893,893,895,897,897,901,906,911,913,920,931,933,935,936,949,949,955,962,966,970,973,981,990,998,1000,1001,1001,1004,1004,1005,1006,1007,1011,1014,1016,1018,1021,1031,1033,1035,1038,1048,1053,1055,1058,1061,1062,1062,1066,1068,1070,1079,1079,1080,1090,1093,1098,1106,1115,1115,1128,1133,1145,1149,1176,1183,1196,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5-1" class="section level4 hasAnchor" number="3.4.5.5">
<h4><span class="header-section-number">3.4.5.5</span> CV 5<a href="id_03_model_training.html#cv-5-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ecd7989a4dd133ae11b9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ecd7989a4dd133ae11b9">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 45","GBM grid model 38","GBM grid model 59","GBM grid model 8","GBM grid model 31","GBM grid model 80","XGBoost grid model 23","GBM grid model 67","GBM grid model 92","GBM grid model 49","GBM grid model 34","GBM grid model 15","GBM grid model 87","GBM grid model 97","GBM model 5","GBM grid model 90","GBM grid model 53","GBM grid model 13","GBM model 1","GBM model 3","GBM grid model 74","GBM grid model 69","GBM grid model 65","GBM grid model 51","GBM grid model 84","GBM grid model 95","GBM grid model 78","GBM grid model 60","GBM grid model 26","XGBoost grid model 92","GBM grid model 24","Neural network grid model 22","GBM grid model 17","GBM grid model 9","GBM grid model 41","GBM grid model 46","GBM grid model 85","XGBoost grid model 41","Neural network grid model 88","XGBoost model 3","GBM grid model 35","GBM grid model 16","GBM grid model 57","GBM grid model 72","GBM grid model 50","Super learner XGBoost","Super learner GBM","GBM grid model 82","GBM grid model 43","GBM grid model 30","Super learner final","Super learner all models","Neural network grid model 31","XGBoost grid model 68","GBM grid model 4","XRT model","Neural network grid model 67","Neural network grid model 72","GBM grid model 58","XGBoost grid model 88","Neural network grid model 87","GBM grid model 66","GBM grid model 62","Neural network grid model 28","XGBoost grid model 16","GBM grid model 25","XGBoost grid model 42","XGBoost grid model 48","GBM grid model 98","GBM grid model 88","XGBoost model 1","Neural network grid model 38","XGBoost grid model 21","GBM grid model 14","GBM grid model 18","GBM grid model 40","Neural network grid model 75","XGBoost grid model 91","Neural network grid model 63","GBM grid model 47","GBM grid model 1","XGBoost grid model 59","Neural network grid model 14","XGBoost grid model 54","Super learner neural network","GBM grid model 73","GBM grid model 54","GBM grid model 83","XGBoost grid model 46","GBM grid model 79","Neural network grid model 24","Neural network grid model 34","Neural network grid model 9","XGBoost grid model 63","XGBoost grid model 14","GBM grid model 75","GBM model 4","Neural network grid model 74","Neural network grid model 71","Neural network grid model 21","Neural network grid model 10","GBM grid model 23","Neural network grid model 81","GBM grid model 70","Neural network grid model 8","XGBoost grid model 4","Neural network grid model 65","Neural network grid model 43","GBM grid model 64","GBM grid model 94","GBM grid model 61","GBM grid model 93","XGBoost grid model 50","GBM grid model 96","GBM grid model 2","Neural network grid model 100","XGBoost model 2","XGBoost grid model 20","GBM grid model 12","GBM grid model 89","XGBoost grid model 24","Neural network grid model 6","GBM grid model 42","GBM grid model 7","Neural network grid model 91","GBM grid model 55","GBM grid model 28","GBM grid model 71","GBM grid model 86","XGBoost grid model 1","Neural network grid model 94","Neural network grid model 19","Neural network grid model 73","Neural network grid model 98","XGBoost grid model 89","GBM grid model 52","Neural network grid model 62","XGBoost grid model 60","XGBoost grid model 34","GBM grid model 11","XGBoost grid model 36","XGBoost grid model 78","GBM grid model 6","GBM grid model 27","DRF model","Neural network grid model 84","XGBoost grid model 13","GBM grid model 44","XGBoost grid model 81","GBM model 2","Neural network grid model 59","XGBoost grid model 45","Neural network grid model 51","XGBoost grid model 25","GBM grid model 63","XGBoost grid model 11","GBM grid model 32","GBM grid model 48","Neural network grid model 64","Neural network grid model 3","GBM grid model 33","GBM grid model 76","XGBoost grid model 80","GBM grid model 99","XGBoost grid model 17","XGBoost grid model 9","Neural network grid model 15","XGBoost grid model 75","XGBoost grid model 86","XGBoost grid model 71","XGBoost grid model 67","GBM grid model 20","XGBoost grid model 3","XGBoost grid model 7","Neural network grid model 96","XGBoost grid model 52","XGBoost grid model 2","XGBoost grid model 38","Neural network grid model 45","Neural network grid model 25","GBM grid model 21","GBM grid model 3","GBM grid model 81","Neural network grid model 79","Neural network grid model 56","GBM grid model 37","GBM grid model 29","Neural network grid model 17","Neural network grid model 11","XGBoost grid model 82","GBM grid model 19","Neural network grid model 80","GBM grid model 22","Neural network grid model 68","GBM grid model 100","GBM grid model 10","Neural network grid model 26","XGBoost grid model 79","GBM grid model 77","XGBoost grid model 44","Neural network grid model 61","XGBoost grid model 28","XGBoost grid model 49","XGBoost grid model 15","GBM grid model 56","Neural network grid model 57","XGBoost grid model 97","Neural network grid model 33","Neural network grid model 70","XGBoost grid model 58","XGBoost grid model 51","Neural network grid model 27","Neural network grid model 78","GBM grid model 36","XGBoost grid model 27","XGBoost grid model 85","Neural network grid model 77","Neural network grid model 66","Neural network grid model 90","GBM grid model 5","XGBoost grid model 22","XGBoost grid model 55","Neural network grid model 29","Neural network grid model 16","XGBoost grid model 98","XGBoost grid model 87","Neural network grid model 2","XGBoost grid model 8","GBM grid model 91","XGBoost grid model 18","Neural network grid model 13","GBM grid model 39","Neural network grid model 20","GBM grid model 68","Neural network grid model 58","XGBoost grid model 19","XGBoost grid model 95","Neural network grid model 54","Neural network grid model 37","Neural network grid model 55","XGBoost grid model 73","Neural network grid model 89","XGBoost grid model 61","XGBoost grid model 6","Neural network grid model 92","XGBoost grid model 37","XGBoost grid model 70","Neural network grid model 49","XGBoost grid model 35","XGBoost grid model 66","Neural network grid model 46","XGBoost grid model 30","Neural network grid model 30","Neural network grid model 44","XGBoost grid model 84","Neural network grid model 23","Neural network grid model 47","Neural network grid model 32","XGBoost grid model 94","Neural network grid model 12","XGBoost grid model 69","XGBoost grid model 64","Neural network grid model 69","Neural network grid model 4","Neural network grid model 7","XGBoost grid model 12","XGBoost grid model 53","XGBoost grid model 33","Neural network grid model 52","Neural network grid model 36","XGBoost grid model 76","Neural network grid model 83","Neural network grid model 93","XGBoost grid model 77","Neural network grid model 41","XGBoost grid model 47","Neural network grid model 60","Neural network grid model 76","Neural network grid model 97","Neural network grid model 86","Neural network grid model 99","XGBoost grid model 39","XGBoost grid model 5","XGBoost grid model 74","Neural network grid model 53","Neural network grid model 82","Neural network grid model 85","XGBoost grid model 93","Neural network grid model 39","Neural network grid model 95","Neural network grid model 50","Neural network grid model 42","Neural network grid model 18","Neural network grid model 35","Neural network grid model 48","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[null,1,0.8723,0.8283,0.8723,0.789,0.7439,0.8723,0.9244,0.9729,0.9729,0.8283,0.9244,0.8283,0.9729,0.6538,0.6538,0.8283,0.636,0.7439,0.7274,0.7439,0.789,0.6538,0.9729,0.6538,0.7439,0.7274,0.7274,0.7439,0.5426,0.7439,0.8723,0.7439,0.7439,0.6782,0.7439,0.4784,0.6782,0.5646,0.7439,0.789,0.9244,0.7001,0.8283,0.4784,0.4975,0.7274,0.7001,0.6538,0.5882,0.5882,0.789,0.7001,0.8283,0.789,0.636,0.6782,0.7274,0.6782,0.7439,0.5646,0.636,0.6538,0.4975,0.7001,0.6782,0.3632,0.6782,0.636,0.5646,0.5646,0.7274,0.6538,0.636,0.636,0.7001,0.3536,0.6538,0.6538,0.6782,0.4241,0.4784,0.3134,0.4007,0.7001,0.6538,0.7001,0.4975,0.6163,0.6782,0.5426,0.636,0.3407,0.7439,0.6782,0.6538,0.5882,0.3134,0.6538,0.6163,0.5646,0.6538,0.7274,0.7274,0.7001,0.4975,0.5426,0.7274,0.7001,0.8283,0.8723,0.3632,0.5426,0.7439,0.7439,0.6163,0.4241,0.7274,0.5646,0.5882,0.7439,0.6163,0.8283,0.5882,0.7274,0.6163,0.636,0.6163,0.5882,0.3632,0.6782,0.4007,0.7001,0.4975,0.5426,0.7001,0.4975,0.4784,0.7274,0.4784,0.2882,0.6782,0.7439,0.8723,0.636,0.5426,0.5882,0.6163,0.7001,0.2954,0.237,0.7001,0.4784,0.636,0.5426,0.6782,0.6538,0.5646,0.6538,0.7001,0.7001,0.5426,0.5882,0.2882,0.636,0.4975,0.237,0.4241,0.4541,0.3082,0.5646,0.6782,0.3536,0.636,0.6163,0.5374,0.5426,0.789,0.4541,0.6163,0.636,0.5646,0.2954,0.3632,0.636,0.6163,0.3536,0.3536,0.3536,0.5646,0.636,0.5882,0.5374,0.4975,0.6538,0.7274,0.4007,0.5882,0.5426,0.5882,0.3536,0.3536,0.4975,0.5882,0.3632,0.4007,0.5646,0.5646,0.2954,0.5426,0.6782,0.3407,0.5426,0.5426,0.4541,0.4784,0.3407,0.7439,0.2954,0.3134,0.5374,0.4975,0.3632,0.4241,0.4541,0.2527,0.3082,0.4784,0.3536,0.237,0.4784,0.5426,0.4975,0.5374,0.5646,0.3536,0.3134,0.3536,0.4541,0.3082,0.4241,0.4541,0.5426,0.5426,0.3536,0.4241,0.4975,0.3632,0.3536,0.6163,0.4241,0.3407,0.3632,0.2258,0.3134,0.6163,0.3536,0.5882,0.5426,0.5374,0.3632,0.4241,0.5374,0.2954,0.4784,0.4541,0.237,0.4007,0.3134,0.3536,0.5374,0.3536,0.2258,0.3082,0.3632,0.3536,0.3536,0.3134,0.3632,0.3134,0.4541,0.3536,0.4241,0.2258,0.2527,0.3082,0.3536,0.2954,0.3082,0.2527,0.3536,0.3407,0.2527,0.054,0.0034,0.0034,0.0034,0.0034,0.0034],[1,0.9643,0.8056,1,0.7205,0.992,null,1,0.8704,0.8704,0.9208,1,0.8704,0.7274,0.6744,0.7653,0.9208,0.7274,0.851,0.9396,0.7653,0.7001,0.681,0.7001,0.7476,0.6421,0.8254,0.6744,0.7205,0.8056,0.8254,0.9396,0.6421,0.7476,0.6421,0.851,0.7274,0.9396,0.8056,0.9396,0.8254,0.6421,0.6931,0.8056,0.6421,0.9643,0.7205,0.681,0.6535,0.6535,0.6931,0.6931,0.6421,0.6421,0.6656,1,0.7653,0.681,0.7001,0.6744,0.6744,0.6535,0.7001,0.7476,0.7274,0.6421,0.6421,0.7882,0.6421,0.6421,0.6535,0.633,0.6421,0.6105,0.6421,0.6105,0.8704,1,0.7653,0.633,0.6421,0.7001,0.8056,1,0.7001,0.7274,0.633,0.6213,0.7274,0.6105,0.633,0.6421,0.6421,0.6656,0.633,0.6931,0.6421,0.7274,0.681,0.6535,0.8958,0.633,0.6421,0.6105,0.633,0.6105,0.7882,0.633,0.6421,0.633,0.6105,0.6105,0.8254,0.681,0.633,0.6656,0.6656,0.633,0.6421,0.6744,0.7882,0.7001,0.6421,0.633,0.6744,0.633,0.633,0.6105,0.633,0.6535,0.7001,0.7274,0.633,0.6656,0.6105,0.633,0.6105,0.6421,0.6421,0.6105,0.6744,0.681,0.6105,0.633,0.7653,0.633,0.6105,0.633,0.633,0.633,0.8958,0.6421,0.6105,0.633,0.6105,0.6105,0.6105,0.6105,0.633,0.681,0.6105,0.6105,0.6105,0.6421,0.633,0.633,0.6105,0.6931,0.6656,0.7274,0.6421,0.6105,0.6105,0.6421,0.6105,0.6105,0.6213,0.6105,0.6105,0.6535,0.6105,0.633,0.6105,0.6421,0.7476,0.6213,0.6105,0.6421,0.7205,0.6421,0.6105,0.6105,0.633,0.681,0.6105,0.6421,0.6105,0.6931,0.6105,0.6421,0.6105,0.6656,0.6105,0.6105,0.6105,0.6421,0.6105,0.7001,0.633,0.633,0.6105,0.6105,0.6421,0.6105,0.6105,0.633,0.6105,0.6105,0.6931,0.6213,0.6105,0.6105,0.6105,0.6105,0.6105,0.6105,0.6421,0.681,0.6092,0.6105,0.633,0.6105,0.6105,0.6105,0.6105,0.6105,0.633,0.6105,0.6421,0.6105,0.6105,0.6105,0.6105,0.6105,0.6105,0.6105,0.6213,0.6744,0.6092,0.6105,0.6105,0.6105,0.6105,0.6105,0.6105,0.6421,0.6105,0.6105,0.6105,0.6105,0.5913,0.6105,0.6421,0.4924,0.6105,0.404,0.6105,0.6105,0.6105,0.6105,0.4924,0.6105,0.4973,0.6092,0.546,0.546,0.6105,0.6092,0.6105,0.6213,0.6105,0.3521,0.3521,0.546,0.5913,0.3482,0.6105,0.385,0.6105,0.6105,0.3687,0.5913,0.385,0.144,0.232,0.004,0.004,0.004,0.004,0.004],[null,0.8668,0.8779,1,0.7493,0.9771,0.9771,1,0.9301,0.7879,0.7644,0.9618,1,0.8113,0.7493,0.8376,0.9618,0.7644,0.8113,0.9071,0.8779,0.7264,0.7493,0.7146,0.7406,0.7316,0.7493,0.7644,0.7316,0.7493,0.8779,0.9771,0.7001,0.7879,0.7001,0.7879,0.7001,0.8779,0.9301,0.9618,1,0.7264,0.7001,0.9493,0.7001,0.9771,0.7264,0.7879,0.7493,0.7001,0.7702,0.7702,0.7406,0.7146,0.6726,1,0.7644,0.7264,0.7493,0.7001,0.7406,0.7316,0.7406,0.8376,0.7001,0.7001,0.6726,0.7001,0.6726,0.7316,0.7406,0.7879,0.7001,0.7001,0.7001,0.7001,1,0.8779,0.7493,0.6726,0.6726,0.7644,0.9618,0.8779,0.7702,0.7264,0.6726,0.7001,0.7702,0.6726,0.6726,0.7316,0.7264,0.7146,0.6726,0.6726,0.7001,0.9618,0.9493,0.9301,1,0.6726,0.7702,0.6726,0.7406,0.6726,0.9771,0.7001,0.6726,0.7001,0.6726,0.6726,0.8113,0.7316,0.6982,0.8779,0.6726,0.6726,0.6726,0.6982,0.7316,0.9493,0.7146,0.6726,0.7001,0.7001,0.7001,0.6726,0.7001,0.7702,0.7702,0.7406,0.6726,0.7146,0.6726,0.6726,0.7001,0.6726,0.6726,0.6726,0.7001,0.7001,0.6726,0.6726,0.7406,0.6726,0.6726,0.7001,0.6726,0.6726,0.9618,0.6726,0.7001,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.7264,0.6726,0.6726,0.6726,0.7316,0.6726,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6982,0.6726,0.7001,0.6726,0.7001,0.9493,0.6726,0.6726,0.7702,0.7316,0.7001,0.6726,0.6726,0.6726,0.7644,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.7146,0.6726,0.6726,0.6726,0.6726,0.6726,0.7702,0.7001,0.6726,0.6726,0.7001,0.6726,0.6726,0.6726,0.7001,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.7001,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.6726,0.4424,0.4424,0.6726,0.6726,0.4424,0.6726,0.4424,0.6726,0.6726,0.4571,0.6726,0.4424,0.4424,0.4424,null,null,null,null,null],[0.9887,0.9674,0.8926,1,0.6311,0.9887,null,1,0.8197,0.8675,0.8197,1,0.8675,0.7545,0.6218,0.8,1,0.7168,0.7545,0.9427,0.7771,0.6311,0.6311,0.6236,0.6964,0.6155,0.8197,0.6509,0.6509,0.7168,0.8675,0.7545,0.598,0.7369,0.5782,0.6311,0.6311,0.8926,0.8,0.9887,0.9674,0.6218,0.6311,0.7545,0.598,0.9208,0.6509,0.6155,0.6311,0.6218,0.7771,0.7771,0.5788,0.6155,0.6236,1,0.7545,0.6311,0.6311,0.6311,0.6122,0.6236,0.6311,0.7369,0.6737,0.598,0.5788,0.7369,0.5788,0.598,0.6218,0.6155,0.5956,0.5782,0.5782,0.5782,0.8197,0.9427,0.6311,0.5788,0.5788,0.6311,0.8452,1,0.6737,0.6311,0.5782,0.5782,0.6311,0.5782,0.5782,0.6155,0.6155,0.6236,0.5788,0.5956,0.6236,0.7168,0.8,0.6218,0.9427,0.5782,0.6218,0.5667,0.5782,0.5782,0.6311,0.598,0.5782,0.5788,0.5782,0.5782,0.6964,0.6236,0.5782,0.6236,0.6311,0.6122,0.5788,0.5956,0.6311,0.6311,0.5788,0.5782,0.6122,0.5782,0.5782,0.5782,0.5788,0.6236,0.6236,0.6737,0.5782,0.5788,0.5782,0.5782,0.5782,0.5782,0.5788,0.5667,0.6122,0.6155,0.5782,0.5782,0.7168,0.5788,0.5667,0.5788,0.5782,0.5782,0.8452,0.5782,0.5782,0.5782,0.5667,0.5667,0.5667,0.5667,0.5782,0.598,0.5667,0.5667,0.5782,0.6155,0.5788,0.5782,0.5782,0.6122,0.5788,0.6236,0.5782,0.5667,0.5782,0.6155,0.5667,0.5667,0.5782,0.5782,0.5667,0.6311,0.5667,0.5782,0.5782,0.6155,0.6964,0.5667,0.5667,0.6218,0.6218,0.5956,0.5782,0.5782,0.5782,0.6236,0.5667,0.5782,0.5667,0.6122,0.5667,0.5782,0.5782,0.598,0.5782,0.5782,0.5782,0.5788,0.5782,0.6311,0.5788,0.598,0.5667,0.5782,0.6509,0.5782,0.5667,0.5782,0.5782,0.5782,0.7369,0.5782,0.5667,0.5667,0.5788,0.5667,0.5667,0.5667,0.598,0.598,0.5667,0.5667,0.5782,0.5667,0.5667,0.5667,0.5782,0.5667,0.5788,0.5667,0.5782,0.5782,0.5667,0.5667,0.5667,0.5667,0.5667,0.5667,0.5782,0.6218,0.5667,0.5667,0.5667,0.5667,0.5667,0.5667,0.5667,0.5956,0.5667,0.5667,0.5667,0.5667,0.546,0.5667,0.5782,0.4889,0.5667,0.4545,0.5584,0.5667,0.5667,0.5667,0.4454,0.5667,0.4788,0.5584,0.546,0.4454,0.5667,0.4889,0.5667,0.5782,0.5667,0.2652,0.3326,0.4545,0.5667,0.3326,0.5667,0.3493,0.5667,0.5667,0.3326,0.5584,0.4042,0.26,0.2261,0.0113,0.0113,0.0113,0.0113,0.0113],[1,2,15,21,6,23,42,32,28,4,3,30,7,8,5,50,74,16,87,65,57,18,29,55,11,67,26,36,37,49,133,104,12,46,19,51,24,130,131,140,60,31,10,93,14,168,134,68,58,45,108,112,41,122,9,245,169,79,27,61,35,96,92,123,114,56,64,181,80,62,101,105,59,97,75,98,84,238,164,52,53,279,199,295,163,78,70,25,228,120,100,147,117,252,43,63,91,149,258,153,203,186,115,77,90,81,187,159,54,48,17,20,243,109,38,156,118,236,34,141,160,40,82,13,145,39,107,69,86,137,217,144,184,89,138,143,94,193,207,33,226,249,47,22,275,110,116,132,111,83,284,253,165,177,66,124,71,88,158,167,72.5,72.5,135,121,271,128,196,285,209,213,267,142,106,189,162,103,146,152,44,183,99,85,102,262,222,113,119,261,237,276,139,127,151,216,129,76,126,227,95,191,125,230,277,170,136,240,219,178,185,268,155,150,248,148,179,218,173,274,161,198,259,176,200,225,201,206,296,265,157,242,272,171,194,154,208,182,260,278,288,224,255,231,172,175,174,234,250,247,211,195,223,190,256,232,294,286,166,251,197,215,188,202,233,204,239,192,180,270,220,254,214,221,210,282,263,205,246,264,273,269,266,212,244,229,280,235,257,241,290,287,281,292,293,283,297,313,313,313,313,313],[2,7,3,4,12,9,1,5,8,14,24,18,25,26,28,15,10,31,11,17,22,36,41,32,46,33,43,40,45,37,13,27,56,42,55,39,51,19,21,20,47,54,65,38,62,16,29,58,57,63,48.5,48.5,74,50,82,6,44,72,73,70,87,64,68,60,61,85,76,35,84,88,71,77,83,78,90,81,93,34,66,103,97,30,53,23,75,101,100,125,59,95,114,96,108,52,115,121,105,94,69,102,86,92,119,124,135,130,89,109,145,136,141,148,67,117,138,116,118,79,143,123,111,154,133,162,126,152,127,144,139,110,104,131,112,157,129,128,163,106,107,167,99,91,164,175,80,178,147,160,155,158,120,98,140,134,181,146,180,169,161,149,184.5,184.5,166,170,122,171,156,113,137,150,132,177,186,153,179,188,174,176,218,173,198,201,192,151,159,190,195,165,168,142,196,204,194,193,208,224,219,183,230,197,228,182,172,209,217,191,203,214,206,187,216,231,199,233,221,211,239,205,237,236,200,229,241,223,220,222,212,202,243,210,207,242,247,248,246,244,213,215,226,235,227,238,258,255,263,240,234,250,253,260,257,264,245,254,225,232,276,252,268,266,270,267,261,277,262,275,281,251,274,259,273,278,287,256,269,293,286,283,280,284,285,300,289,296,282,295,292,294,279,288,291,290,297,303,302,313,313,313,313,313],[1,8,5,2,13,4,3,6,7,22,24,14,21,26,36,18,9,29,12,20,28,44,32,34,61,25,45,38,46,47,11,16,53,42,51,43,58,19,15,17,48,57,59,30,63,23,31,41,60,64,39.5,39.5,68,37,91,10,27,52,99,71,70,55,54,50,73,81,96,56,74,80,77,78,107,88,90,83,97,49,72,103,109,33,67,35,65,108,113,132,66,95,85,82,79,62,147,110,105,84,69,89,76,75,94,126,92,125,87,106,115,158,173,157,98,128,154,93,138,100,155,102,104,165,140,160,121,150,134,144,151,148,112,101,129,130,133,124,120,135,111,172,122,116,179,181,118,114,168,136,153,178,86,117,159,137,174,177,164,167,131,149,186.5,186.5,176,166,127,171,141,119,169,139,123,161,180,163,145,189,170,175,190,142,185,195,203,152,143,205,193,156,209,162,198,202,194,146,213,236,214,192,238,207,220,206,184,218,224,188,183,211,233,191,240,228,196,234,230,210,225,216,250,200,204,237,223,201,232,217,182,221,248,226,208,246,222,256,212,245,235,215,197,229,227,231,255,257,252,247,243,219,254,258,241,269,244,253,239,242,280,249,274,259,284,276,267,265,260,287,282,251,264,262,275,273,272,263,270,290,271,266,285,283,278,300,291,296,279,299,286,294,277,288,289,297,298,307,303,311,312,313,314,315],[2,6,4,3,13,9,1,5,8,12,24,14,25,26,29,16,10,30,11,23,21,36,44,34,39,33,45,46,38,35,15,27,56,47,54,48,53,18,20,19,43,61,69,42,65,17,32,60,57,66,51.5,51.5,74,50,80,7,31,72,77,75,86,67,70,63,59,87,73,40,84,94,76,71,82,85,93,90,79,41,62,107,109,28,55,22,78,100,111,127,58,102,113,89,110,49,112,126,122,96,37,99,83,98,123,125,136,117,91,81,142,120,137,143,64,119,148,114,105,68,153,124,115,132,144,165,108,162,141,155,138,128,92,150,101,156,133,139,158,106,116,171,104,95,163,178,88,166,145,152,161,167,97,121,130,146,174,149,186,177,169,160,191.5,191.5,159,181,118,170,151,129,140,154,135,180,190,157,179,185,176,164,220,175,202,211,195,131,173,196,205,134,103,147,197,198,200,184,212,231,214,187,233,201,224,182,172,209,230,189,203,207,204,183,219,222,188,240,226,218,223,168,216,234,206,227,210,229,225,235,194,199,248,221,213,247,245,252,246,242,208,215,217,241,228,238,255,254,262,236,232,250,249,260,257,265,244,251,237,239,279,253,267,268,272,270,258,278,264,273,284,256,275,259,277,282,285,261,269,293,287,281,266,276,283,301,290,297,280,294,289,295,286,288,291,292,300,303,302,313,313,313,313,313],[6,23,27,30,44,45,47,48,51,52,75,76,78,86,98,99,103,106,121,125,128,134,146,155,157,158,159,160,166,168,172,174,177,177,179,181,186,186,187,196,198,203,203,203,204,224,226,227,232,238,247.5,251.5,257,259,262,268,271,275,276,277,278,282,284,296,307,309,309,312,322,324,325,331,331,348,348,352,353,362,364,365,368,370,374,375,381,387,394,409,411,412,412,414,414,415,417,420,423,423,433,443,448,451,451,452,453,453,454,455,456,462,468,468,472,473,478,479,479,483,485,490,490,491,499,500,500,503,509,512,514,523,525,526,526,532,533,534,535,540,541,543,551,551,553,556,561,568,576,580,580,586,587,589,594,594,595,596,601,601,619,625,635,635,636,638,638,640,644,646,655,656,657,660,662,662,665,665,666,667,672,673,684,692,692,696,697,704,712,716,717,727,730,731,739,739,762,767,773,789,796,796,797,800,805,806,807,808,808,810,828,829,830,831,831,855,856,857,860,863,864,868,869,869,874,878,878,880,884,887,896,899,900,906,908,910,912,913,916,923,928,929,937,938,940,941,951,957,959,966,967,973,978,988,989,990,995,999,1001,1005,1006,1008,1014,1015,1019,1024,1025,1027,1027,1028,1033,1034,1039,1054,1054,1062,1071,1081,1090,1094,1104,1112,1112,1113,1114,1118,1121,1123,1124,1124,1132,1151,1152,1171,1188,1196,1204,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6-1" class="section level4 hasAnchor" number="3.4.5.6">
<h4><span class="header-section-number">3.4.5.6</span> CV 6<a href="id_03_model_training.html#cv-6-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-9f1e2c063425fca695e6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9f1e2c063425fca695e6">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 82","Neural network grid model 17","Neural network grid model 75","GBM grid model 7","GBM grid model 87","GBM grid model 80","Neural network grid model 28","GBM grid model 50","Neural network grid model 38","Neural network grid model 24","GBM grid model 89","GBM grid model 60","GBM grid model 65","Neural network grid model 33","Neural network grid model 62","GBM grid model 17","Neural network grid model 61","GBM grid model 8","GBM grid model 24","GBM grid model 53","GBM grid model 46","GBM grid model 10","Neural network grid model 98","GBM grid model 20","Neural network grid model 91","Neural network grid model 36","GBM grid model 79","Neural network grid model 74","Neural network grid model 88","Neural network grid model 45","Neural network grid model 72","Neural network grid model 97","GBM grid model 72","GBM grid model 35","GBM grid model 74","GBM grid model 15","GBM grid model 26","GBM grid model 92","Neural network grid model 22","Super learner final","Neural network grid model 81","Neural network grid model 84","Neural network grid model 14","Neural network grid model 85","Neural network grid model 82","GBM grid model 62","Neural network grid model 53","Neural network grid model 56","Neural network grid model 31","GBM grid model 55","Neural network grid model 63","Neural network grid model 9","GBM grid model 12","GBM model 1","Neural network grid model 41","Neural network grid model 8","GBM model 2","Neural network grid model 94","Neural network grid model 21","Super learner neural network","Neural network grid model 67","GBM grid model 31","Neural network grid model 1","Neural network grid model 87","Neural network grid model 34","Neural network grid model 5","Neural network grid model 6","Neural network grid model 20","Neural network grid model 60","Neural network grid model 66","Super learner GBM","GBM grid model 73","GBM grid model 13","Neural network grid model 29","Neural network grid model 13","Neural network grid model 43","Neural network grid model 51","GBM grid model 84","GBM model 5","Neural network grid model 47","GBM grid model 59","XGBoost grid model 54","Neural network grid model 27","GBM grid model 69","GBM grid model 71","Neural network grid model 55","GBM grid model 83","Neural network grid model 15","GBM grid model 95","GBM grid model 41","GBM grid model 76","Super learner all models","GBM grid model 22","Neural network grid model 50","GBM grid model 4","GBM grid model 58","Neural network grid model 73","GBM grid model 11","Neural network grid model 44","GBM grid model 66","Neural network grid model 26","GBM grid model 1","Neural network grid model 70","GBM grid model 23","Neural network grid model 93","Super learner XGBoost","Neural network grid model 10","GBM grid model 96","Neural network grid model 19","GBM grid model 57","XGBoost model 3","XGBoost grid model 78","GBM model 3","XGBoost grid model 89","Neural network grid model 96","XGBoost grid model 9","GBM grid model 85","Neural network grid model 68","XGBoost grid model 27","GBM grid model 67","XRT model","Neural network grid model 4","Neural network grid model 25","GBM grid model 70","Neural network grid model 80","Neural network grid model 77","XGBoost grid model 23","GBM grid model 64","Neural network grid model 46","GBM grid model 21","Neural network grid model 79","Neural network grid model 78","Neural network grid model 48","Neural network grid model 23","GBM grid model 25","XGBoost grid model 94","Neural network grid model 92","XGBoost grid model 42","Neural network grid model 42","GBM grid model 98","Neural network grid model 90","GBM grid model 30","XGBoost grid model 70","GBM grid model 14","XGBoost grid model 88","Neural network grid model 64","GBM grid model 38","Neural network grid model 65","GBM grid model 49","Neural network grid model 32","GBM grid model 47","GBM grid model 54","GBM grid model 63","XGBoost grid model 11","Neural network grid model 52","GBM grid model 97","XGBoost grid model 14","Neural network grid model 99","Neural network grid model 76","GBM model 4","GBM grid model 34","GBM grid model 33","XGBoost grid model 86","GBM grid model 42","Neural network grid model 83","GBM grid model 61","Neural network grid model 11","GBM grid model 6","Neural network grid model 37","GBM grid model 94","GBM grid model 93","Neural network grid model 86","XGBoost grid model 2","Neural network grid model 57","GBM grid model 90","XGBoost model 1","GBM grid model 28","XGBoost grid model 25","GBM grid model 19","GBM grid model 51","Neural network grid model 58","Neural network grid model 100","XGBoost grid model 82","XGBoost grid model 98","XGBoost grid model 68","Neural network grid model 35","XGBoost grid model 13","GBM grid model 40","Neural network grid model 16","Neural network grid model 54","XGBoost grid model 79","XGBoost grid model 74","GBM grid model 44","GBM grid model 45","Neural network grid model 95","GBM grid model 3","GBM grid model 16","GBM grid model 77","XGBoost grid model 6","XGBoost grid model 85","XGBoost grid model 44","XGBoost grid model 24","Neural network grid model 30","Neural network grid model 40","Neural network grid model 2","Neural network grid model 69","XGBoost grid model 73","XGBoost grid model 21","GBM grid model 32","GBM grid model 68","GBM grid model 81","GBM grid model 48","XGBoost grid model 63","XGBoost grid model 55","XGBoost grid model 67","XGBoost grid model 92","XGBoost grid model 18","XGBoost grid model 97","XGBoost grid model 84","XGBoost grid model 28","GBM grid model 37","XGBoost grid model 53","Neural network grid model 89","XGBoost grid model 36","XGBoost grid model 95","XGBoost grid model 7","XGBoost grid model 58","GBM grid model 2","Neural network grid model 12","XGBoost model 2","GBM grid model 27","Neural network grid model 3","XGBoost grid model 60","XGBoost grid model 16","XGBoost grid model 8","Neural network grid model 7","DRF model","XGBoost grid model 22","XGBoost grid model 71","GBM grid model 39","GBM grid model 78","XGBoost grid model 46","XGBoost grid model 15","GBM grid model 88","XGBoost grid model 34","XGBoost grid model 76","GBM grid model 18","XGBoost grid model 4","Neural network grid model 18","GBM grid model 100","XGBoost grid model 75","XGBoost grid model 69","XGBoost grid model 38","XGBoost grid model 37","XGBoost grid model 61","GBM grid model 36","Neural network grid model 71","XGBoost grid model 20","GBM grid model 99","XGBoost grid model 91","GBM grid model 56","GBM grid model 9","GBM grid model 86","Neural network grid model 39","GBM grid model 43","XGBoost grid model 50","XGBoost grid model 5","XGBoost grid model 52","XGBoost grid model 81","XGBoost grid model 59","XGBoost grid model 41","XGBoost grid model 3","XGBoost grid model 93","XGBoost grid model 33","Neural network grid model 49","XGBoost grid model 17","XGBoost grid model 49","XGBoost grid model 80","GBM grid model 91","Neural network grid model 59","XGBoost grid model 77","GBM grid model 75","XGBoost grid model 47","XGBoost grid model 87","GBM grid model 5","GBM grid model 52","XGBoost grid model 1","XGBoost grid model 39","XGBoost grid model 51","XGBoost grid model 45","XGBoost grid model 48","GBM grid model 29","XGBoost grid model 19","XGBoost grid model 35","XGBoost grid model 12","XGBoost grid model 64","XGBoost grid model 30","XGBoost grid model 66","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[0.9156,0.8201,0.7836,null,0.7413,0.9156,0.9156,0.8201,0.8201,0.7413,0.7836,0.6866,0.8201,0.8723,0.7413,0.6133,0.7413,0.7836,0.8723,0.6866,0.5887,0.8201,0.7413,0.7247,0.6133,0.8201,0.7413,0.7413,0.7413,0.7413,0.7413,0.7836,0.7413,0.5887,0.7247,0.659,0.6866,0.7836,0.6133,0.5887,0.6133,0.7413,0.7247,0.6133,0.7413,0.6866,0.6133,0.8201,0.7247,0.6133,0.6866,0.6133,0.5887,0.6866,0.5887,0.8201,0.7247,0.5947,0.6133,0.5887,0.6133,0.6133,0.5887,0.7413,0.6133,0.5887,0.9156,0.6133,0.6133,0.5887,0.5887,0.5887,0.6133,0.6133,0.7247,0.6133,0.659,0.7413,0.9156,0.6133,0.5887,0.5887,0.8201,0.6133,0.5887,0.5887,0.6133,0.6133,0.6866,0.5887,0.6133,0.5887,0.7413,0.5887,0.6133,0.6133,0.6133,0.6866,0.5947,0.6133,0.6866,0.7413,0.7836,0.6866,0.6133,0.5887,0.8723,0.5887,0.6133,0.5887,0.6133,0.5887,0.5947,0.7247,0.6133,0.5887,0.6133,0.5887,0.5887,0.7247,0.5947,0.659,0.6133,0.5887,1,0.6133,0.5887,1,0.6133,0.5887,0.5887,0.5947,0.5887,0.5887,0.5887,0.5887,0.6133,0.5947,0.5887,0.6133,0.6866,0.6866,0.6133,0.6133,0.6133,0.6133,0.6133,0.6133,0.6133,0.5887,0.5887,0.659,0.5887,0.6133,0.6133,0.9156,0.5887,0.5887,0.5887,0.5947,0.6133,0.5887,0.5947,0.5887,0.5887,0.5887,0.659,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.6133,0.5887,0.6133,0.5887,0.7247,0.6133,0.5947,0.5947,0.5887,0.5887,0.5887,0.5887,0.6133,0.5947,0.5887,0.5887,0.5887,0.6133,0.5887,0.6866,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.7836,0.5887,0.5887,0.6133,0.5887,0.5947,0.6133,0.5887,0.6133,0.5887,0.6133,0.5887,0.5887,0.5887,0.659,0.5887,0.6133,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5947,0.5947,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.6133,0.5887,0.5887,0.5947,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.49,0.5887,0.5887,0.6133,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5947,0.6133,0.5887,0.5887,0.5887,0.5947,0.5887,0.5947,0.5887,0.5887,0.5887,0.5887,0.5887,0.6133,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.5887,0.49,0.1589,0.0034,0.0034,0.0034,0.0034,0.0034],[0.9239,null,0.768,0.8509,1,0.814,0.7283,0.8509,0.831,0.7283,0.9427,0.9824,0.8763,0.7168,0.9824,0.9239,0.9611,0.9427,0.8509,0.9427,0.9611,0.7168,0.7283,0.7937,0.7467,0.7283,1,0.7168,0.768,0.7168,0.7283,0.7283,0.9427,0.7467,0.7283,0.9824,1,0.7467,0.8763,0.831,0.768,0.7283,0.7283,0.7168,0.7283,0.7283,0.831,0.7168,0.7283,1,0.7168,0.7168,0.9016,0.768,0.7467,0.7168,0.768,0.7283,0.7283,0.7168,0.7168,0.7283,0.814,0.7168,0.7168,0.9016,0.7283,0.7168,0.7937,0.7283,0.9611,0.7283,0.831,0.7168,0.9239,0.7168,0.7283,0.768,0.768,0.7168,0.7283,0.7467,0.7168,0.7168,0.7168,0.7168,0.7467,0.7402,0.8509,0.768,0.7168,0.7283,0.7168,0.7467,0.814,0.7283,0.7168,0.7283,0.7402,0.7168,0.831,0.7283,0.7168,0.7168,0.7168,0.9611,0.7168,0.7402,0.7168,0.7283,0.7283,0.768,0.7283,0.7402,0.7168,0.7283,0.7467,0.7168,0.7283,0.7467,0.7283,0.7168,0.7168,0.7283,0.7283,0.7168,0.7283,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7402,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.814,0.7168,0.7168,0.7168,0.7168,0.7168,0.7283,0.7168,0.7283,0.7168,0.7168,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.7168,0.7283,0.7283,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7402,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7402,0.7168,0.7168,0.7283,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.7283,0.7168,0.7168,0.768,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.7168,0.3032,0.3653,0.004,0.004,0.004,0.004,0.004],[0.7783,null,0.8906,0.88,0.88,0.8727,0.8279,0.904,1,0.7783,0.9985,0.9586,1,0.7792,0.9269,0.8906,0.9461,0.9985,0.904,0.9586,0.904,0.789,0.7194,0.904,0.789,0.7194,1,0.7194,0.7805,0.7192,0.789,0.7805,0.8067,0.9985,0.7783,0.9586,1,0.9269,0.8906,0.789,0.7194,0.7805,0.904,0.7429,0.904,0.8279,0.8727,0.7194,0.789,0.9836,0.6983,0.7792,0.88,0.9269,0.7792,0.7429,0.9586,0.7783,0.7783,0.7194,0.6983,0.8727,0.7805,0.6983,0.6983,0.8906,0.7792,0.7194,0.8727,0.789,0.9985,0.7792,0.88,0.6983,0.9985,0.7192,0.7792,0.9461,0.9586,0.6983,0.8906,0.7805,0.6983,0.7783,0.7805,0.6983,0.7783,0.7792,0.8067,0.88,0.6983,0.6983,0.6983,0.8727,0.8585,0.7792,0.6983,0.7429,0.7783,0.6983,0.9586,0.8906,0.7783,0.7783,0.7783,0.9836,0.6983,0.8067,0.6983,0.7429,0.88,0.7805,0.7805,0.7783,0.7783,0.8067,0.88,0.769,0.8727,0.7792,0.8067,0.7194,0.7783,0.7792,0.7792,0.7792,0.7429,0.7194,0.7792,0.7792,0.6983,0.6983,0.6983,0.7429,0.8906,0.6983,0.7792,0.7194,0.6983,0.769,0.6983,0.7783,0.6983,0.7805,0.8279,0.6983,0.6983,0.6983,0.6983,0.6983,0.7792,0.6983,0.8279,0.6983,0.6983,0.7194,0.7805,0.6983,0.7429,0.769,0.6983,0.6983,0.7783,0.7792,0.6983,0.789,0.6983,0.7194,0.7429,0.7194,0.7792,0.7429,0.6983,0.6983,0.6983,0.6983,0.6983,0.9461,0.6983,0.7194,0.6983,0.6983,0.7194,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.7192,0.7792,0.6983,0.7429,0.6983,0.6983,0.6983,0.789,0.7429,0.6983,0.6983,0.6983,0.6983,0.6983,0.7783,0.6983,0.6983,0.6983,0.7194,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.88,0.6983,0.7194,0.6983,0.6983,0.7792,0.6983,0.6983,0.9461,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.7429,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.7192,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.7429,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.7194,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.6983,0.3529,0.6983,null,null,null,null,null],[0.8475,null,0.7438,0.9244,1,0.6685,0.6685,0.7889,0.8475,0.6669,0.7889,0.9244,0.7716,0.6685,0.7438,1,1,0.6685,0.875,0.8282,0.9518,0.6653,0.6653,0.7288,0.6669,0.6653,0.9244,0.6653,0.7438,0.6653,0.686,0.6597,0.9792,0.7288,0.6253,0.8282,0.9027,0.7438,0.8085,0.6685,0.6685,0.6669,0.686,0.6669,0.7063,0.6653,0.8085,0.6521,0.6669,0.8282,0.6253,0.6685,0.8282,0.7889,0.6669,0.6253,0.6685,0.6685,0.6669,0.6653,0.6253,0.6669,0.6653,0.6253,0.6253,0.7889,0.6669,0.6253,0.8475,0.6669,0.8085,0.6669,0.7288,0.6253,0.7889,0.6653,0.6653,0.7438,0.7438,0.6253,0.6653,0.6685,0.6253,0.6669,0.6653,0.6253,0.6669,0.6685,0.6685,0.6685,0.6253,0.6521,0.6253,0.7063,0.7063,0.6653,0.6253,0.6653,0.6685,0.6253,0.8085,0.6653,0.6597,0.6253,0.6653,0.8475,0.6253,0.6653,0.6253,0.6653,0.6685,0.6669,0.6669,0.6669,0.6685,0.686,0.6669,0.6653,0.686,0.6653,0.6653,0.6653,0.6653,0.6685,0.6685,0.6685,0.6653,0.6253,0.6653,0.6653,0.6253,0.6253,0.6653,0.6653,0.6653,0.6253,0.6669,0.6653,0.6253,0.6597,0.6253,0.6653,0.6253,0.6253,0.6685,0.6253,0.6253,0.6253,0.6253,0.6253,0.6653,0.6253,0.6653,0.6253,0.6597,0.6253,0.6653,0.6253,0.6685,0.6253,0.6253,0.6253,0.6669,0.6653,0.6253,0.6653,0.6253,0.6253,0.6597,0.6253,0.6669,0.6653,0.6253,0.6253,0.6253,0.6253,0.6253,0.6685,0.6253,0.6597,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6597,0.6669,0.6253,0.6653,0.6253,0.6253,0.6253,0.6685,0.6597,0.6253,0.6253,0.6653,0.6253,0.6253,0.6653,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.686,0.6253,0.6253,0.6253,0.6253,0.6669,0.6253,0.6253,0.7063,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.6253,0.5645,0.6253,0.6253,0.5433,0.3513,0.2217,0.0113,0.0113,0.0113,0.0113,0.0113],[2,13,18,1,16,8,43,5,63,30,17,39,9,75,32,60,90,22,4,33,137,20,19,55,142,114,65,46,157,28,21,105,42,139,34,86,50,10,94,109,77,51,193,112,72,70,173,66,45,78,58,83,103,74,232,7,14,239,188,231,179,40,298,36,165,282,31,104,134,216,180,113,69,158,140,159,125,24,11,107,108,250,47,25,141,235,52,201,35,295,147,121,15,219,64,84,174,56,234,61,93,12,57,41,176,240,48,161,186,126,102,196,54,73,212,82,59,267,110,23,268,128,185,98,26,162,229,3,138,106,273,265,287,286,155,182,167,160,288,76,129,44,156,87,122,143,27,183,29,251,96,38,169,62,237,6,211,257,218,53,85,151,99,163,261,171,187,88,269,116,120,276,194,253,79,153,67,131,49,71,202,227,100,204,101,266,91,119,252,292,242,192,178,37,281,205,133,92,127,197,175,221,207,283,284,80,149,224,118,214,97,117,215,89,225,81,144,233,272,95,195,115,220,111,191,259,217,146,258,152,148,203,136,123,150,279,297,209,230,275,68,270,277,132,172,222,247,248,274,135,280,285,238,124,264,241,289,168,198,245,256,166,130,278,199,164,145,184,177,154,223,200,206,226,213,236,189,208,249,294,262,170,181,190,246,254,271,210,228,263,255,244,243,260,290,293,291,296,313,313,313,313,313],[3,1,12,14,11,18,10,20,6,21,23,19,31,9,27,15,7,35,40,36,2,37,45,29,5,17,30,41,4,49,61,26,50,22,52,39,51,66,42,38,53,59,13,43,56,62,34,67,81,63,77,76,69,70,25,98,85,24,44,28,46,87,8,103,57,16,108,75,68,47,54,78,89,64,60,74,82,111,115,94,79,33,105,110,72,48,107,58,118,32,88,92,113,55,109,104,86,112,65,122,102,136,143,138,100,73,144,95,99,114,117,93,134,129,101,121,137,84,126,158,71,120,116,124,169,140,90,175,130,145,91,97,80,83,125,123,151,131,96,159,154,179,128,157,156,162,184.5,152,184.5,106,171,182,150,172,142,203,127,132,135,183,181,164,177,170,141,147,149,189,119,176,174,139,160,146,191,165,206,178,210,204,167,163,188,153,202,148,199,193,166,133,155,190,198,230,168,180,200,213,219,192,197,186,195,173,161,238,211,212,232,196,237,235,194,242,208,248,224,207,187,246,218,251,209,249,220,201,214,250,222,240,254,236,253,255,243,217,205,234,228,221,285,215,216,269,256,244,227,233,226,266,225,231,241,280,247,252,223,268,257,245,239,271,286,229,263,273,284,276,275,283,264,267,274,262,277,258,278,270,261,259,260,295,293,290,279,272,265,291,288,281,287,292,296,289,282,298,300,299,313,313,313,313,313],[3,1,9,23,12,25,10,30,7,15,27,17,28,8,18,16,5,33,40,36,4,51,46,35,6,11,34,37,2,45,50,29,48,21,67,44,59,81,39,38,52,58,13,47,68,57,24,64,65,62,71,63,61,77,19,96,103,20,41,26,43,100,14,95,53,22,91,82,79,32,60,72,94,66,89,55,75,106,111,76,85,49,117,116,84,42,98,56,120,31,74,90,157,70,115,109,69,135,54,130,127,153,113,143,92,80,126,119,86,121,140,102,155,158,88,166,160,73,123,161,83,136,101,146,151,97,105,174,128,124,78,87,104,110,134,129,112,138,93,172,148,180,164,169,144,132,203.5,108,203.5,125,156,189,131,187,99,208,133,114,139,197,178,147,176,137,107,152,159,167,170,177,171,122,154,118,207,186,196,184,209,206,150,145,199,179,191,149,220,193,142,168,163,165,181,246,141,175,215,236,200,182,211,188,190,162,185,254,222,173,232,198,243,239,210,248,194,255,240,201,192,257,214,242,219,249,225,223,226,228,183,244,230,217,247,260,251,195,202,231,229,205,284,221,218,258,253,237,241,224,227,276,213,216,238,279,212,233,235,271,261,250,245,274,285,252,272,281,280,265,273,286,259,278,266,262,256,270,283,275,264,234,268,293,294,290,263,267,269,291,287,277,288,295,296,292,282,298,299,297,311,312,313,314,315],[2,1,10,14,15,17,11,24,7,20,21,23,32,8,28,16,5,35,44,36,3,40,38,34,6,18,33,42,4,49,54,27,51,19,55,41,56,63,47,37,43,61,13,45,52,62,22,64,75,82,85,70,65,78,25,103,105,26,39,29,48,99,9,95,57,12,107,79,59,50,53,88,101,66,67,68,74,117,121,84,90,31,96,115,72,46,118,60,106,30,80,91,111,58,119,113,86,114,69,110,104,133,135,140,94,73,150,98,102,116,124,93,143,132,97,129,144,76,141,160,83,122,108,145,169,120,100,175,131,155,89,87,71,77,146,130,136,138,92,170,148,179,134,171,163,149,173.5,147,173.5,112,172,188,153,182,128,193,139,109,123,183,178,162,181,164,125,166,142,195,81,176,185,127,158,151,192,165,201,184,214,205,167,152,202,159,203,137,190,196,154,126,161,177,189,233,156,187,210,218,215,198,191,180,194,168,157,227,219,199,234,208,239,229,206,247,207,253,235,204,197,251,223,245,209,248,222,186,213,250,212,241,254,231,252,255,249,211,200,238,230,220,285,216,217,270,256,237,226,236,221,272,232,224,240,282,242,244,225,266,264,243,246,275,286,228,257,273,283,277,278,284,263,268,267,265,271,258,279,276,262,260,261,295,293,291,274,269,259,292,289,280,288,294,296,290,281,298,300,299,313,313,313,313,313],[10,16,49,52,54,68,74,79,83,86,88,98,100,100,105,107,107,125,128,141,146,148,148,153,159,160,162,166,167,171,186,187,191,201,208,210,216,220,222,222,225,229,232,247,248,251,253,261,266,285,291,292,298,299,301,304,307,309,312,314,316,326,329,329,332,332,337,340,340,345,347,351,353,354,356,356,356,358,358,361,362,363,365,366,369,371,375,375,379,388,389,394,396,402,407,410,415,417,422,423,426,434,448,462,462,466,468,473,473,477,483,484,486,492,498,498,500,500,500,502,505,506,510,513,515,519,524,527,527,530,531,536,542,556,560,564,566,567,569,577,579,582,582,584,585,586,588.5,590,590.5,594,595,597,603,603,606,610,610,612,615,616,622,624,633,634,634,636,637,639,639,645,650,664,666,668,669,669,670,677,682,686,686,687,689,695,697,700,700,701,714,719,721,724,746,746,746,747,758,759,761,769,774,775,786,786,787,799,801,808,816,816,816,820,825,826,834,837,843,845,848,849,850,853,857,857,858,869,870,874,875,877,886,887,888,893,893,902,904,912,917,921,922,922,928,929,937,940,941,941,948,949,950,956,957,965,965,970,972,973,980,983,986,986,987,987,991,991,992,1002,1003,1007,1009,1013,1013,1015,1017,1022,1029,1029,1036,1047,1051,1053,1061,1061,1062,1062,1064,1084,1092,1101,1118,1125,1131,1131,1135,1187,1190,1191,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7-1" class="section level4 hasAnchor" number="3.4.5.7">
<h4><span class="header-section-number">3.4.5.7</span> CV 7<a href="id_03_model_training.html#cv-7-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-b21d7bbd54b0bea33a5f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b21d7bbd54b0bea33a5f">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 72","GBM grid model 1","GBM grid model 26","GBM grid model 94","GBM grid model 83","Neural network grid model 75","GBM grid model 84","Neural network grid model 84","GBM grid model 74","GBM grid model 92","GBM grid model 67","Neural network grid model 31","GBM grid model 93","XGBoost grid model 20","GBM model 4","GBM grid model 87","GBM grid model 31","Neural network grid model 9","GBM grid model 97","Neural network grid model 72","GBM grid model 23","GBM grid model 24","GBM grid model 55","GBM grid model 71","GBM grid model 34","Neural network grid model 96","GBM grid model 80","Neural network grid model 62","GBM grid model 61","Neural network grid model 24","GBM grid model 60","Neural network grid model 81","GBM grid model 63","Neural network grid model 29","GBM grid model 15","GBM model 1","XGBoost grid model 91","GBM model 2","GBM grid model 28","GBM grid model 95","XGBoost grid model 86","Neural network grid model 8","GBM grid model 57","GBM grid model 70","Neural network grid model 61","GBM grid model 21","GBM grid model 25","Neural network grid model 93","Neural network grid model 22","Neural network grid model 57","GBM grid model 69","GBM grid model 64","Super learner GBM","GBM grid model 53","GBM grid model 8","GBM grid model 73","XGBoost grid model 42","GBM grid model 35","XGBoost grid model 8","Neural network grid model 77","GBM grid model 13","GBM grid model 45","Neural network grid model 58","GBM grid model 7","XGBoost grid model 98","XGBoost grid model 16","Neural network grid model 87","Neural network grid model 91","GBM grid model 59","Neural network grid model 52","Neural network grid model 10","XGBoost grid model 2","Neural network grid model 4","GBM grid model 2","GBM grid model 42","GBM grid model 17","GBM grid model 14","Neural network grid model 28","GBM grid model 40","GBM grid model 65","Neural network grid model 60","GBM grid model 82","GBM grid model 44","Neural network grid model 25","XGBoost grid model 92","XGBoost grid model 48","Neural network grid model 27","GBM grid model 3","Neural network grid model 64","Neural network grid model 86","Neural network grid model 92","GBM grid model 4","Neural network grid model 67","XGBoost grid model 7","Neural network grid model 56","XGBoost grid model 68","Super learner final","GBM grid model 10","Neural network grid model 34","GBM grid model 47","Neural network grid model 74","GBM grid model 79","XGBoost grid model 18","Neural network grid model 21","GBM grid model 51","GBM grid model 78","GBM grid model 32","XGBoost grid model 23","Neural network grid model 98","GBM grid model 81","GBM grid model 58","XGBoost grid model 89","GBM grid model 38","GBM grid model 49","XGBoost grid model 95","XGBoost model 3","Neural network grid model 54","XGBoost grid model 73","GBM grid model 5","Neural network grid model 90","XGBoost grid model 82","GBM model 5","GBM grid model 11","XGBoost grid model 78","GBM grid model 18","Neural network grid model 73","GBM grid model 27","XGBoost grid model 70","Neural network grid model 18","Neural network grid model 94","GBM grid model 43","Neural network grid model 20","Neural network grid model 46","Super learner neural network","GBM model 3","Neural network grid model 19","GBM grid model 6","XRT model","XGBoost grid model 25","GBM grid model 66","GBM grid model 99","GBM grid model 19","Neural network grid model 51","Neural network grid model 89","XGBoost grid model 54","GBM grid model 62","XGBoost grid model 13","GBM grid model 76","Neural network grid model 15","Super learner all models","Neural network grid model 83","XGBoost grid model 67","XGBoost grid model 34","XGBoost grid model 3","Super learner XGBoost","GBM grid model 96","Neural network grid model 88","Neural network grid model 63","GBM grid model 12","XGBoost grid model 1","GBM grid model 98","GBM grid model 100","GBM grid model 30","XGBoost grid model 17","Neural network grid model 6","GBM grid model 85","Neural network grid model 70","GBM grid model 20","Neural network grid model 11","GBM grid model 54","GBM grid model 9","GBM grid model 89","Neural network grid model 16","XGBoost grid model 14","Neural network grid model 41","XGBoost grid model 9","Neural network grid model 37","XGBoost model 1","XGBoost grid model 60","XGBoost grid model 46","XGBoost grid model 88","Neural network grid model 32","Neural network grid model 17","GBM grid model 50","Neural network grid model 65","DRF model","GBM grid model 86","XGBoost grid model 21","GBM grid model 29","Neural network grid model 13","Neural network grid model 100","GBM grid model 90","XGBoost grid model 81","XGBoost grid model 52","Neural network grid model 47","Neural network grid model 35","GBM grid model 75","XGBoost grid model 28","GBM grid model 33","XGBoost grid model 45","Neural network grid model 36","Neural network grid model 30","Neural network grid model 33","XGBoost grid model 15","Neural network grid model 78","GBM grid model 48","Neural network grid model 66","Neural network grid model 53","XGBoost grid model 24","GBM grid model 77","GBM grid model 41","GBM grid model 52","XGBoost grid model 59","Neural network grid model 43","Neural network grid model 23","Neural network grid model 26","Neural network grid model 59","Neural network grid model 55","Neural network grid model 97","XGBoost grid model 79","Neural network grid model 7","GBM grid model 22","Neural network grid model 82","Neural network grid model 95","XGBoost grid model 58","GBM grid model 16","Neural network grid model 12","XGBoost grid model 49","XGBoost model 2","XGBoost grid model 63","Neural network grid model 2","GBM grid model 56","XGBoost grid model 55","GBM grid model 88","Neural network grid model 45","XGBoost grid model 71","XGBoost grid model 80","XGBoost grid model 37","GBM grid model 68","Neural network grid model 44","GBM grid model 46","XGBoost grid model 41","Neural network grid model 49","Neural network grid model 38","XGBoost grid model 36","Neural network grid model 48","Neural network grid model 71","Neural network grid model 3","XGBoost grid model 51","Neural network grid model 40","Neural network grid model 1","GBM grid model 36","XGBoost grid model 5","XGBoost grid model 11","XGBoost grid model 22","GBM grid model 37","Neural network grid model 99","XGBoost grid model 4","Neural network grid model 69","XGBoost grid model 50","Neural network grid model 79","XGBoost grid model 97","XGBoost grid model 77","XGBoost grid model 19","Neural network grid model 85","Neural network grid model 76","Neural network grid model 68","Neural network grid model 80","Neural network grid model 42","GBM grid model 91","GBM grid model 39","XGBoost grid model 76","Neural network grid model 50","XGBoost grid model 44","XGBoost grid model 87","Neural network grid model 39","XGBoost grid model 6","XGBoost grid model 38","XGBoost grid model 12","XGBoost grid model 53","XGBoost grid model 61","Neural network grid model 5","XGBoost grid model 69","XGBoost grid model 84","Neural network grid model 14","XGBoost grid model 39","XGBoost grid model 27","XGBoost grid model 85","XGBoost grid model 33","XGBoost grid model 64","XGBoost grid model 94","XGBoost grid model 75","XGBoost grid model 66","XGBoost grid model 47","XGBoost grid model 74","XGBoost grid model 35","XGBoost grid model 30","XGBoost grid model 93","XGBoost grid model 72","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[0.9698,0.851,0.8408,0.9698,0.8988,0.9335,0.851,0.9698,0.8408,0.8988,null,0.8408,0.851,0.8408,0.8408,0.9335,0.9335,0.851,0.9698,0.851,0.8408,0.8408,0.9698,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8988,0.8408,0.8408,0.851,0.8408,0.9335,0.8408,0.8408,0.8408,0.8408,0.8408,0.9335,0.8408,0.851,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.9698,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.9335,0.8408,0.8408,0.8408,0.851,0.851,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.8408,0.8408,0.851,0.8408,0.851,0.8408,0.9698,0.8988,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.9335,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.9335,0.8408,0.8408,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.8408,0.9698,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.851,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.851,0.8988,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.9335,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.622,0.8408,0.8408,0.8408,0.8408,0.5444,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.8408,0.0034,0.0034,0.0034,0.0034,0.0034,0.0034],[0.9824,null,0.9824,0.9008,0.8517,0.8517,0.881,0.9458,0.9239,0.8517,0.8517,1,0.9458,1,0.9008,0.8517,0.8517,1,0.8451,0.9239,0.8517,0.8517,0.881,0.8451,0.8517,1,0.9239,0.9643,0.8517,0.9643,0.866,0.9824,0.8517,0.9458,0.9172,0.881,0.8517,0.8517,0.8517,0.881,0.9239,0.9172,0.8517,0.881,0.881,0.866,0.8451,0.9239,0.9172,0.9239,0.9172,0.8517,0.9824,0.8517,0.8451,0.8517,0.9643,0.8517,0.8451,0.881,0.8451,0.8451,0.9239,0.8451,0.9239,0.8451,0.8451,0.8517,0.881,0.866,0.8517,0.8517,0.8451,0.8451,0.8517,0.8451,0.8451,0.881,0.8451,0.8451,0.881,0.8451,0.9008,0.9643,0.8517,0.8517,0.8451,0.8517,0.881,0.8517,0.881,0.8517,0.8517,0.8451,0.8517,0.8451,0.8517,0.8451,0.8451,0.8451,0.881,0.866,0.8517,0.866,0.8451,0.8517,0.8451,0.8451,0.8517,0.8451,0.8451,0.8517,0.8451,0.8451,0.8517,0.8451,0.8451,0.8517,0.9172,0.8517,0.8451,0.8451,0.8517,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.881,0.8517,0.8517,0.8451,0.8517,0.8451,0.9008,0.8451,0.8517,0.8451,0.8451,0.8451,0.8451,0.8451,0.8517,0.8451,0.866,0.8517,0.8451,0.881,0.8451,0.8517,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8517,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8517,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.881,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.8451,0.0168,0.004,0.004,0.004,0.004,0.004],[1,null,0.9884,0.9668,0.9651,1,0.9672,1,0.9668,0.9651,0.9547,1,1,0.9668,0.9672,0.9884,0.9547,0.9884,0.9547,0.9831,0.9547,0.9547,0.9672,0.9547,0.9547,0.9672,0.9672,0.9884,0.9547,0.9668,0.9668,0.9884,0.9672,1,0.9547,0.9651,0.9651,0.9547,0.9651,0.9831,0.9884,0.9547,0.9547,0.9672,0.9547,0.964,0.9547,0.9884,1,1,0.9672,0.9547,1,0.9547,0.9547,0.9547,0.9831,0.9547,0.9547,0.9884,0.9547,0.9547,0.964,0.9651,0.9672,0.9547,0.964,1,0.9668,0.9547,0.9668,1,0.9668,0.9547,0.9547,0.9672,0.9547,0.9547,0.9547,0.9547,1,0.9547,0.9672,1,0.9547,0.9547,0.9547,0.9547,0.9672,0.9547,0.9672,0.9672,0.9547,0.964,0.9831,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9651,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9672,0.9547,0.9547,0.9672,1,0.9672,0.9547,0.9547,0.9547,0.9547,0.9547,0.9651,0.9547,0.9547,0.9547,0.9672,0.9547,0.964,0.9547,1,0.9547,1,0.9547,0.9672,0.9547,0.9547,0.9547,0.9547,0.9668,0.964,0.9547,1,0.9547,0.9547,1,0.9547,1,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.964,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9651,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9831,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,0.9547,null,null,null,null,null,null],[0.9761,null,0.9087,0.856,0.7942,0.8025,0.8025,0.856,0.834,0.7942,0.7942,0.9761,0.8481,0.9761,0.856,0.7942,0.7942,0.958,0.7853,0.7942,0.7942,0.856,0.8025,0.7853,0.793,0.9087,0.856,0.8481,0.793,0.8112,0.8025,0.9761,0.7853,1,0.8112,0.856,0.8025,0.7942,0.856,0.7942,0.8838,0.8025,0.7853,0.9305,0.7942,0.7853,0.7853,0.8481,0.8481,0.834,0.8112,0.7853,0.8025,0.7853,0.7853,0.7853,1,0.7942,0.7853,0.8025,0.7853,0.793,0.8025,0.8025,0.9305,0.7853,0.7853,0.8112,0.7942,0.7853,0.793,0.7942,0.7942,0.7942,0.7853,0.7942,0.7853,0.7942,0.7853,0.7853,0.8025,0.7942,0.7942,0.9305,0.8025,0.7942,0.7853,0.8025,0.8481,0.8481,0.8112,0.834,0.7853,0.793,0.7942,0.7853,0.7853,0.7853,0.7853,0.7853,0.7942,0.793,0.7853,0.793,0.7853,0.7942,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.8025,0.7853,0.7853,0.8025,0.8112,0.7942,0.7853,0.7853,0.7942,0.7853,0.7942,0.7853,0.7853,0.7942,0.7853,0.8112,0.8025,0.793,0.7853,0.7942,0.7853,0.856,0.7853,0.7942,0.7853,0.7853,0.7853,0.7853,0.7853,0.7942,0.7853,0.8025,0.7853,0.7853,0.8025,0.7853,0.8112,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7942,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.8025,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.6322,0.7853,0.7853,0.7853,0.7853,0.7853,0.7853,0.7183,0.6322,0.7853,0.7853,0.7853,0.0402,0.0114,0.0114,0.0114,0.0114,0.0114],[4,13,11,5,20,41,23,26,38,10,1,42,24,85,77,6,9,60,3,50,37,35,18,96,49,127,33,67,47,51,17,80,43,179,36,116,109,66,135,58,129,25,29,30,70,86,88,156,141,192,104,19,195,27,15,32,168,28,119,59,16,14,180,21,275,54,39,124,76,185,132,182,160,12,118,46,64,69,83,22,214,48,203,163,133,221,122,187,103,241,87,31,190,237,148,90,173,99,108,65,130,178,73,113,34,57,81,171,61,110,40,134,8,2,204,72,264,175,205,123,227,7,100,233,71,158,44,259,271,217,167,101,147,250,121,120,63,298,95,45,112,106,131,251,262,263,82,84,125,176,219,111,200,115,248,137,191,75,79,206,94,78,56,149,92,68,143,154,174,53,91,117,235,172,225,74,255,97,211,224,89,183,138,55,144,294,155,159,152,181,150,62,145,194,52,247,93,102,98,246,107,267,128,197,269,126,209,239,169,105,253,186,161,188,283,140,265,201,142,198,245,151,139,230,232,153,229,164,146,208,285,212,196,136,114,162,228,189,207,244,165,222,240,199,157,293,288,166,223,266,297,218,202,170,213,184,281,226,231,177,249,242,273,234,289,220,258,193,292,215,216,280,243,260,210,286,238,252,282,268,256,295,278,296,261,254,236,257,279,290,272,274,287,277,270,276,291,284,310,313,313,313,313,313],[3,1,8,7,9,4,13,12,10,21,24,19,23,5,6,34,37,16,41,22,38,43,35,20,33,14,50,30,36,31,59,32,52,2,57,28,26,42,17,48,25,51,60,55,56,46,47,29,39,15,53,77,18,76,92,80,27,85,49,90,93,91,40,81,11,82,84,61,79,54,62,45,69,105,68,98,94,104,86,115,44,131,65,75,71,58,96,63,121,64,112,123,67,70,88,107,87,110,122,125,95,73,117,118,135,127,120,78,124,111,138,106,158,160,83,132,72,103,108,126,100,165,130,97,143,119,151,99,74,113,109,145,142,101,139,152,153,66,147,176,136,133,134,89,102,114,148,150,159,137,144,167,128,164,116,149,141,180,173,140,178,174,187,163,190,188,166,157,171,202,185,195,154,161,155,197,146,199,156,162,191,179,177,212,194,129,169,186,196,189,192,222,181,172,237,168,214,211,210,170,225,175,231,200,183,217,206,193,203,228,184,204,220,215,182,233,198,209,242,216,208,235,245,213,205,230,207,232,241,221,201,224,227,256,271,246,229,236,239,219,248,226,234,249,264,218,240,266,243,244,223,250,257,269,260,268,238,254,261,274,255,263,253,265,252,275,259,284,251,279,280,258,277,273,285,262,283,276,270,272,282,267,281,278,288,293,297,292,286,287,289,291,290,294,299,298,295,301,310,313,313,313,313,313],[2,1,7,16,8,5,13,10,9,14,29,15,22,4,12,32,28,18,38,21,26,40,50,17,39,6,46,44,51,60,54,24,30,3,49,34,23,45,37,47,33,84,64,72,42,36,43,25,20,19,59,74,27,89,97,53,52,71,66,58,88,95,31,126,11,110,103,65,77,35,67,41,57,105,63,111,102,79,98,120,73,94,48,61,116,62,93,87,78,56,101,135,76,55,75,125,81,117,83,100,124,106,123,85,122,130,129,114,141,109,134,118,164,166,107,146,69,113,68,112,80,172,136,99,152,108,148,91,90,82,133,132,115,86,140,127,151,104,174,163,157,161,137,144,96,70,180,170,138,131,92,160,156,155,121,182,153,184,169,139,175,194,196,162,171,199,168,192,150,203,197,181,119,165,128,205,145,183,147,143,212,158,193,222,159,142,204,167,187,195,188,220,229,190,215,178,217,227,224,177,209,149,207,198,154,226,173,189,230,236,176,210,211,200,179,228,191,201,208,219,186,233,225,206,223,241,202,235,232,218,185,240,246,249,251,255,216,242,247,221,258,238,250,243,263,234,214,261,244,213,231,245,254,269,252,270,237,248,268,271,257,262,256,267,239,266,282,284,253,283,281,260,274,264,287,265,280,278,259,273,277,289,279,272,292,291,302,293,288,275,286,290,285,295,298,296,294,300,310,311,312,313,314,315],[2,1,9,10,13,8,11,12,7,26,18,20,28,4,5,32,35,17,34,29,31,24,47,21,38,14,42,30,40,33,50,44,58,3,49,15,36,43,16,55,23,56,64,62,52,60,53,25,37,19,41,88,22,71,61,107,27,92,51,79,91,93,45,75,6,63,86,65,96,54,68,70,59,125,103,102,98,111,97,113,39,109,69,90,72,57,89,66,105,46,108,120,76,48,100,94,82,101,115,139,81,78,122,123,152,131,117,84,124,121,151,116,146,150,85,129,77,95,106,126,87,163,142,80,145,127,170,67,83,110,114,147,132,99,137,138,171,73,128,161,140,149,148,74,104,118,155,169,154,136,135,153,112,164,119,141,130,178,198,134,176,179,193,160,189,190,168,144,159,197,187,173,158,172,165,199,133,200,166,156,201,175,188,211,205,143,185,208,186,157,196,228,183,184,243,162,232,216,226,167,227,182,220,191,181,219,206,174,195,230,194,207,218,213,180,223,177,222,244,209,210,231,242,203,192,235,221,233,245,224,202,214,229,263,268,247,241,249,225,236,250,239,204,252,261,212,215,267,251,240,217,256,264,272,257,271,237,265,234,273,258,260,248,266,255,276,246,287,253,279,280,262,270,269,289,259,281,278,274,275,284,254,283,277,286,293,297,292,282,285,290,288,291,294,298,300,295,302,310,313,313,313,313,313],[11,16,35,38,50,58,60,60,64,71,72,96,97,98,100,104,109,111,116,122,132,142,150,154,159,161,171,171,174,175,180,180,183,187,191,193,194,196,205,208,210,216,217,219,220,228,231,235,237,245,257,258,262,263,265,272,274,276,285,286,288,293,296,303,303,309,312,315,328,328,329,338,345,347,352,357,358,363,364,370,370,382,385,389,392,398,400,403,407,407,408,409,409,410,411,416,423,427,428,429,430,435,435,439,443,445,447,447,450,451,463,474,476,478,479,479,482,486,487,487,494,507,508,509,511,512,513,516,518,522,523,525,536,536,537,537,538,541,544,545,545,549,550,558,564,565,565,573,576,580,590,591,596,598,604,609,615,617,619,619,623,625,632,634,642,645,645,647,654,655,660,666,666,670,673,675,679,679,680,685,693,695,696,700,702,708,713,720,721,722,726,732,738,740,747,755,756,756,758,760,768,773,786,786,787,788,794,795,797,799,807,807,810,816,824,824,831,833,836,842,849,850,851,852,852,859,859,864,864,871,873,890,898,904,904,910,914,916,918,920,921,925,928,943,945,957,957,960,961,963,968,969,977,980,982,993,993,993,994,995,1019,1027,1030,1032,1035,1037,1045,1048,1049,1056,1057,1060,1064,1066,1071,1072,1082,1084,1085,1088,1099,1105,1121,1123,1127,1131,1132,1134,1135,1137,1137,1143,1153,1160,1165,1170,1175,1187,1240,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8-1" class="section level4 hasAnchor" number="3.4.5.8">
<h4><span class="header-section-number">3.4.5.8</span> CV 8<a href="id_03_model_training.html#cv-8-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-c826195f3e48c3e0ab8d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c826195f3e48c3e0ab8d">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 15","GBM grid model 53","GBM grid model 82","GBM grid model 87","GBM grid model 8","GBM grid model 92","GBM grid model 80","GBM grid model 38","GBM grid model 94","GBM grid model 58","GBM grid model 1","Neural network grid model 74","XGBoost grid model 8","GBM grid model 64","GBM grid model 45","Neural network grid model 98","Neural network grid model 64","GBM grid model 30","GBM grid model 23","GBM grid model 49","GBM grid model 35","GBM grid model 26","GBM grid model 17","XGBoost grid model 36","GBM grid model 84","Neural network grid model 9","GBM grid model 83","GBM grid model 50","Neural network grid model 31","GBM grid model 34","GBM grid model 89","Neural network grid model 87","GBM model 5","XGBoost grid model 28","Neural network grid model 22","GBM grid model 61","GBM grid model 24","Neural network grid model 63","GBM grid model 70","GBM grid model 97","Neural network grid model 61","Neural network grid model 84","XGBoost grid model 16","XGBoost grid model 42","GBM grid model 67","GBM grid model 4","Neural network grid model 55","GBM grid model 18","XGBoost grid model 79","GBM grid model 60","Neural network grid model 3","GBM grid model 41","Neural network grid model 100","Neural network grid model 65","Neural network grid model 81","XGBoost grid model 49","GBM grid model 93","XGBoost grid model 92","Neural network grid model 24","Super learner GBM","GBM grid model 59","GBM grid model 65","GBM grid model 57","XGBoost grid model 88","GBM grid model 6","Neural network grid model 88","Super learner final","Neural network grid model 47","GBM grid model 7","Super learner all models","Neural network grid model 66","XGBoost grid model 89","GBM grid model 32","Neural network grid model 8","GBM grid model 69","GBM grid model 31","Neural network grid model 73","GBM grid model 55","GBM grid model 71","Neural network grid model 90","Neural network grid model 29","GBM grid model 90","GBM grid model 21","Neural network grid model 92","GBM grid model 46","Neural network grid model 79","GBM grid model 74","XGBoost grid model 86","Neural network grid model 72","Neural network grid model 91","Neural network grid model 94","GBM grid model 88","GBM grid model 66","GBM grid model 28","Neural network grid model 57","GBM grid model 2","GBM grid model 51","Neural network grid model 44","GBM grid model 77","GBM grid model 98","Neural network grid model 23","Neural network grid model 86","Neural network grid model 52","XGBoost model 3","GBM grid model 62","GBM model 2","XGBoost grid model 55","XGBoost grid model 13","Neural network grid model 93","Neural network grid model 6","Neural network grid model 28","Neural network grid model 25","Neural network grid model 34","Super learner neural network","Neural network grid model 70","Neural network grid model 78","Neural network grid model 43","Neural network grid model 59","XGBoost grid model 68","Neural network grid model 51","Neural network grid model 77","Neural network grid model 80","Neural network grid model 75","Neural network grid model 21","GBM grid model 72","XGBoost grid model 11","Neural network grid model 16","XGBoost grid model 54","GBM grid model 11","GBM grid model 13","GBM grid model 95","Neural network grid model 14","GBM grid model 48","Neural network grid model 62","Neural network grid model 89","Neural network grid model 15","GBM grid model 39","GBM grid model 19","Neural network grid model 96","XGBoost grid model 76","GBM grid model 10","GBM grid model 54","GBM grid model 12","XRT model","Neural network grid model 41","GBM grid model 86","Neural network grid model 20","Neural network grid model 50","Neural network grid model 71","Neural network grid model 68","XGBoost grid model 51","XGBoost grid model 9","Neural network grid model 67","Neural network grid model 19","Neural network grid model 58","GBM grid model 20","Neural network grid model 10","Neural network grid model 48","XGBoost grid model 46","XGBoost grid model 18","GBM grid model 14","Neural network grid model 32","XGBoost grid model 70","GBM grid model 44","Neural network grid model 12","Neural network grid model 97","XGBoost grid model 4","Neural network grid model 54","XGBoost grid model 50","Neural network grid model 7","XGBoost grid model 98","Neural network grid model 85","Neural network grid model 27","GBM grid model 25","GBM grid model 33","GBM grid model 76","GBM model 1","XGBoost grid model 34","Neural network grid model 69","Neural network grid model 36","Neural network grid model 83","Neural network grid model 4","Neural network grid model 30","GBM grid model 73","Neural network grid model 56","XGBoost model 2","GBM grid model 5","GBM grid model 96","Neural network grid model 49","XGBoost grid model 71","GBM grid model 75","Neural network grid model 38","XGBoost grid model 58","GBM grid model 27","XGBoost grid model 17","XGBoost grid model 97","GBM model 3","Neural network grid model 13","Neural network grid model 35","XGBoost grid model 81","XGBoost grid model 22","GBM grid model 42","GBM grid model 9","GBM grid model 3","GBM grid model 40","XGBoost grid model 60","XGBoost grid model 39","GBM grid model 85","Neural network grid model 17","GBM grid model 47","GBM grid model 22","XGBoost grid model 33","GBM grid model 100","GBM model 4","XGBoost grid model 52","Super learner XGBoost","GBM grid model 63","XGBoost grid model 14","Neural network grid model 33","XGBoost grid model 85","GBM grid model 79","XGBoost grid model 20","XGBoost grid model 24","Neural network grid model 11","XGBoost grid model 91","XGBoost grid model 27","Neural network grid model 40","Neural network grid model 26","Neural network grid model 53","XGBoost grid model 44","XGBoost grid model 25","Neural network grid model 60","XGBoost grid model 48","XGBoost model 1","XGBoost grid model 67","GBM grid model 29","Neural network grid model 42","XGBoost grid model 87","GBM grid model 16","XGBoost grid model 59","XGBoost grid model 38","XGBoost grid model 63","XGBoost grid model 5","Neural network grid model 39","Neural network grid model 46","XGBoost grid model 3","GBM grid model 78","Neural network grid model 82","GBM grid model 37","XGBoost grid model 19","Neural network grid model 1","Neural network grid model 45","Neural network grid model 95","XGBoost grid model 37","XGBoost grid model 77","GBM grid model 43","XGBoost grid model 47","XGBoost grid model 23","Neural network grid model 2","XGBoost grid model 75","XGBoost grid model 95","Neural network grid model 5","XGBoost grid model 35","XGBoost grid model 82","XGBoost grid model 94","XGBoost grid model 45","XGBoost grid model 73","XGBoost grid model 74","XGBoost grid model 53","XGBoost grid model 6","GBM grid model 81","XGBoost grid model 41","XGBoost grid model 2","DRF model","Neural network grid model 18","Neural network grid model 99","XGBoost grid model 1","XGBoost grid model 21","Neural network grid model 76","GBM grid model 68","XGBoost grid model 61","XGBoost grid model 78","GBM grid model 56","GBM grid model 99","GBM grid model 91","GBM grid model 36","XGBoost grid model 80","XGBoost grid model 15","GBM grid model 52","Neural network grid model 37","XGBoost grid model 93","XGBoost grid model 12","XGBoost grid model 7","XGBoost grid model 64","XGBoost grid model 84","XGBoost grid model 30","XGBoost grid model 69","XGBoost grid model 72","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[0.6914,null,0.6712,0.6914,0.7783,0.6914,1,0.8201,0.8639,0.9156,0.7783,0.7362,0.8201,0.6712,0.8639,0.8201,0.6343,0.6343,0.6712,0.6712,0.6712,0.6914,0.5921,0.6914,0.8201,0.6184,1,0.9156,0.6712,0.6712,0.7783,0.7362,0.6617,0.7362,0.5667,0.5358,0.7362,0.7783,0.6712,0.5358,0.8201,0.6343,0.6914,0.5394,0.5667,0.8639,0.5667,0.6184,0.6617,0.6343,0.6617,0.6343,0.5394,0.5358,0.6712,0.6914,0.6712,0.6712,0.6914,0.507,0.5299,0.6617,0.6914,0.6712,0.6617,0.5394,0.5299,0.6343,0.8201,0.5299,0.6184,0.6343,0.6343,0.6914,0.6343,0.6617,0.5921,0.6184,0.6343,0.5921,0.6184,0.6914,0.7783,0.5667,0.8639,0.507,0.5358,0.5358,0.6914,0.6343,0.5394,0.6343,0.5667,0.5921,0.5008,0.5921,0.6617,0.5086,0.6617,0.9156,0.4901,0.4901,0.5358,0.512,0.5299,0.6343,0.6712,0.5394,0.5394,0.512,0.6712,0.5299,0.6343,0.4454,0.6617,0.5249,0.5358,0.4454,0.6184,0.6712,0.5358,0.6343,0.7783,0.5358,0.8639,0.6184,0.5008,0.4752,0.6914,0.6712,0.6712,0.5358,0.507,0.7362,0.4675,0.5358,0.5394,0.5667,0.5299,0.6617,0.8201,0.7783,0.5667,0.5086,0.512,0.5394,0.5394,0.512,0.4752,0.5086,0.5008,0.6617,0.6184,0.5394,0.6184,0.5667,0.5394,0.4454,0.5008,0.5358,0.6343,0.5249,0.5667,0.512,0.4752,0.6617,0.4901,0.5008,0.6617,0.5008,0.512,0.5086,0.5921,0.5667,0.5921,0.5921,0.5249,0.5394,0.4752,0.6914,0.4901,0.507,0.2654,0.6712,0.5394,0.5299,0.5921,0.5249,0.4675,0.5394,0.5394,0.8639,0.6184,0.5921,0.5358,0.5921,0.6712,0.5008,0.5086,0.5394,0.5008,0.5358,0.512,0.5086,0.6184,0.5086,0.5249,0.7362,0.507,0.6914,0.512,0.5299,0.5667,0.5921,0.5249,0.5008,0.6184,0.5008,0.4454,0.5358,0.5249,0.512,0.5358,0.5008,0.6343,0.5086,0.143,0.5008,0.5249,0.5667,0.5249,0.5299,0.5249,0.6914,0.6184,0.5299,0.4901,0.5008,0.512,0.512,0.5008,0.507,0.5249,0.3267,0.4901,0.6712,0.5921,0.5299,0.5008,0.512,0.2887,0.5249,0.507,0.5394,0.5086,0.5394,0.5299,0.5299,0.2887,0.5086,0.5394,0.4297,0.4675,0.507,0.5008,0.5008,0.512,0.512,0.5086,0.507,0.5299,0.5086,0.4752,0.5008,0.5299,0.4297,0.4675,0.4752,0.4297,0.5358,0.4454,0.5249,0.5086,0.5299,0.4901,0.507,0.5008,0.507,0.4752,0.4675,0.2887,0.1617,0.3267,0.1617,0.2654,0.0758,0.2356,0.0034,0.0034,0.0034,0.0034,0.0034,0.0034],[1,1,0.7757,0.7757,null,1,0.5692,0.8147,0.8147,0.8694,0.8005,0.5692,0.8147,0.6294,0.6866,0.6762,1,0.7385,0.7757,0.8147,0.8147,1,0.9855,0.5368,0.8005,0.6866,0.6866,0.5692,0.5692,0.8418,0.5591,0.5969,0.5969,0.5969,0.7757,0.6866,0.6517,0.5969,0.6866,0.7757,0.4987,0.6122,0.582,0.5591,0.8147,0.7385,0.7585,0.6866,0.7585,0.6122,0.6517,0.582,0.7135,0.582,0.5969,0.4579,0.5536,0.6866,0.4356,0.8968,0.6866,0.5591,0.5536,0.6122,0.6294,0.4901,0.7585,0.5368,0.582,0.7585,0.4738,0.6517,0.6122,0.582,0.6294,0.5969,0.5368,0.5082,0.6762,0.5368,0.5692,0.582,0.5368,0.4579,0.4738,0.4987,0.5692,0.5536,0.4579,0.4356,0.6122,0.5368,0.4579,0.4738,0.4901,0.4738,0.6294,0.5591,0.5269,0.4579,0.4987,0.5082,0.5536,0.4579,0.5591,0.4738,0.5082,0.5692,0.4711,0.4738,0.4987,0.5591,0.5269,0.4711,0.4356,0.4987,0.4738,0.582,0.4901,0.4356,0.4454,0.4711,0.4304,0.5082,0.4241,0.4738,0.4738,0.5591,0.5591,0.5368,0.4356,0.4454,0.4579,0.4356,0.4356,0.5591,0.4356,0.4454,0.4304,0.4987,0.4356,0.4579,0.4579,0.4579,0.5269,0.4579,0.4241,0.4356,0.4504,0.3968,0.5591,0.4356,0.4241,0.4241,0.4454,0.4036,0.4579,0.6294,0.4579,0.4579,0.4579,0.4579,0.4579,0.4356,0.5269,0.4356,0.4987,0.4579,0.4036,0.4579,0.5082,0.4304,0.4036,0.4454,0.4356,0.4356,0.3832,0.6122,0.4356,0.4036,0.4304,0.4036,0.4579,0.4036,0.4241,0.5082,0.4356,0.4036,0.4036,0.5536,0.4241,0.3832,0.4901,0.4036,0.4504,0.4504,0.4036,0.4356,0.4356,0.4241,0.4504,0.4738,0.4036,0.4241,0.4579,0.5692,0.4504,0.4356,0.4241,0.4036,0.5082,0.5368,0.4241,0.4356,0.4504,0.4304,0.4036,0.4241,0.4241,0.4579,0.4036,0.4036,0.4036,0.4036,0.3812,0.4241,0.4036,0.4036,0.4036,0.4579,0.4036,0.4036,0.4036,0.4036,0.4711,0.4579,0.4241,0.4241,0.4036,0.4036,0.4711,0.4711,0.4241,0.4036,0.4241,0.4579,0.4036,0.4036,0.4901,0.4579,0.4036,0.3832,0.4036,0.4579,0.4504,0.4241,0.4241,0.4241,0.4241,0.4304,0.4579,0.4356,0.4036,0.4454,0.4241,0.4241,0.5082,0.4036,0.4356,0.4987,0.4036,0.4036,0.3832,0.4356,0.4504,0.4036,0.4036,0.4036,0.3769,0.4036,0.3515,0.4036,0.4036,0.3703,0.3812,0.3832,0.3968,0.2589,0.4036,0.3812,0.3324,0.3832,0.3318,0.3769,0.3318,0.301,0.3812,0.0164,0.004,0.004,0.004,0.004,0.004],[0.9643,1,0.9919,0.7978,null,0.8475,0.7286,0.6099,0.7286,0.7978,0.7781,0.5946,0.684,0.5557,0.669,0.9057,0.8226,0.5075,0.6537,0.6099,0.684,0.7978,0.7286,0.7063,0.7063,0.8226,0.4733,0.4733,0.7063,0.6099,0.4163,0.669,0.397,0.4993,0.684,0.397,0.684,0.669,0.669,0.6099,0.5368,0.7533,0.4832,0.4832,0.684,0.684,0.7781,0.6099,0.669,0.4993,0.669,0.5368,0.8475,0.5368,0.5368,0.4733,0.4733,0.5368,0.4086,0.7978,0.6099,0.5946,0.6317,0.5946,0.5368,0.4086,0.4572,0.5557,0.4733,0.4572,0.5323,0.6317,0.4163,0.5731,0.4572,0.4333,0.4572,0.5368,0.5731,0.5368,0.6537,0.4832,0.5368,0.4155,0.3802,0.4733,0.7533,0.4832,0.4459,0.4733,0.6537,0.3997,0.5368,0.3802,0.5557,0.3947,0.4993,0.4832,0.3947,0.3997,0.3947,0.5557,0.5731,0.5075,0.6317,0.3947,0.5075,0.4832,0.4733,0.3802,0.4155,0.4993,0.5075,0.4163,0.3881,0.4733,0.5731,0.5368,0.5075,0.3517,0.3802,0.4155,0.4459,0.4459,0.3997,0.3881,0.4733,0.4733,0.4993,0.3802,0.5075,0.397,0.4572,0.397,0.3947,0.4459,0.3947,0.3947,0.4163,0.5731,0.3802,0.397,0.3947,0.4733,0.4733,0.3802,0.3881,0.4459,0.3802,0.3802,0.3997,0.4163,0.3947,0.3997,0.4086,0.3802,0.4155,0.4086,0.3947,0.4832,0.3947,0.4163,0.3802,0.3881,0.5075,0.3802,0.4333,0.397,0.3755,0.3802,0.4163,0.3802,0.3755,0.3881,0.3802,0.3802,0.3802,0.4155,0.3802,0.3517,0.3802,0.3802,0.4733,0.3802,0.3802,0.3947,0.4572,0.3802,0.3802,0.5075,0.4155,0.3517,0.5075,0.3802,0.3802,0.4163,0.3802,0.4333,0.3997,0.3997,0.3802,0.4155,0.3802,0.3802,0.3802,0.4832,0.3802,0.3802,0.3802,0.3402,0.4572,0.4163,0.3802,0.3802,0.4333,0.4733,0.3402,0.3802,0.3802,0.4733,0.3802,0.3802,0.3802,0.3802,0.311,0.3802,0.3802,0.3802,0.3947,0.3997,0.3802,0.3881,0.3402,0.3402,0.4086,0.3802,0.3802,0.3802,0.3402,0.3802,0.397,0.3802,0.3802,0.3947,0.3802,0.3802,0.3292,0.3402,0.4086,0.4086,0.3802,0.3379,0.3802,0.3997,0.4155,0.3802,0.3802,0.3947,0.3802,0.397,0.4459,0.397,0.311,0.4163,0.3802,0.3802,0.4163,0.3517,0.3802,0.4733,0.3517,0.3802,0.3802,0.3802,0.3947,0.3802,0.3755,0.3402,0.2372,0.311,0.311,0.3402,0.3679,0.3402,0.311,0.3679,0.3802,0.3379,0.3517,0.311,0.311,0.2589,0.311,0.2372,0.311,0.2372,0.2589,null,null,null,null,null,null],[0.8284,0.9397,0.7503,0.6523,null,0.6781,0.5597,0.5245,0.6523,0.5597,0.7262,0.4897,0.7019,0.4556,0.3794,0.5245,0.7262,0.4897,0.7503,0.5245,0.6055,0.8826,0.7019,0.404,0.5823,0.6055,0.5597,0.4207,0.4556,0.7746,0.3794,0.4646,0.3938,0.3794,0.5447,0.4646,0.6523,0.4897,0.5245,0.5597,0.3589,0.4897,0.4646,0.3794,0.8554,0.5597,0.7746,0.4897,0.5823,0.4897,0.5245,0.3794,0.6523,0.4646,0.5096,0.3589,0.3794,0.4897,0.3389,0.8284,0.4897,0.404,0.3938,0.4897,0.4207,0.3794,0.4556,0.4646,0.3678,0.4556,0.3589,0.4897,0.4897,0.5245,0.4556,0.3938,0.404,0.3678,0.4897,0.3678,0.5447,0.4646,0.3335,0.3678,0.2843,0.3794,0.5447,0.3938,0.3335,0.3074,0.5096,0.3589,0.3794,0.3074,0.404,0.3074,0.5096,0.486,0.3389,0.3074,0.3335,0.4646,0.4646,0.3389,0.3794,0.3389,0.3074,0.3938,0.3794,0.3589,0.3223,0.5597,0.3794,0.3074,0.2843,0.3678,0.3589,0.4646,0.3546,0.2843,0.3794,0.312,0.2938,0.3794,0.2822,0.3389,0.3794,0.3794,0.3794,0.3335,0.2974,0.3389,0.3074,0.2843,0.2974,0.3794,0.3034,0.3034,0.3074,0.3589,0.2564,0.3074,0.3389,0.3223,0.404,0.3678,0.2843,0.3589,0.312,0.2564,0.4207,0.2822,0.2822,0.3074,0.3223,0.2843,0.3074,0.4556,0.3589,0.2938,0.3074,0.3389,0.3678,0.2564,0.4207,0.2843,0.3074,0.2938,0.2564,0.3034,0.404,0.2938,0.2645,0.3034,0.2663,0.2663,0.2645,0.404,0.2822,0.2216,0.2645,0.2645,0.3546,0.2843,0.2822,0.3678,0.2843,0.2564,0.2645,0.3589,0.2938,0.2564,0.3794,0.2843,0.312,0.312,0.2564,0.2974,0.3546,0.2663,0.2822,0.3074,0.2564,0.3335,0.3074,0.486,0.2974,0.2843,0.2564,0.2564,0.4418,0.4418,0.2843,0.3335,0.312,0.3034,0.2564,0.2843,0.2843,0.3074,0.2822,0.2564,0.2645,0.2822,0.2246,0.2822,0.2645,0.2564,0.3034,0.312,0.2564,0.2663,0.2564,0.2564,0.3074,0.3389,0.3074,0.2663,0.2564,0.2843,0.312,0.2822,0.2645,0.2822,0.2974,0.3034,0.2216,0.2564,0.404,0.3074,0.2246,0.2216,0.2564,0.3223,0.2822,0.2974,0.2663,0.2974,0.2822,0.2843,0.3546,0.3223,0.2645,0.3223,0.2564,0.2822,0.312,0.2822,0.2822,0.3794,0.2564,0.2822,0.2216,0.2974,0.312,0.2645,0.2564,0.2216,0.2246,0.2564,0.2216,0.2402,0.2564,0.2564,0.2564,0.2564,0.2564,0.1914,0.2564,0.2216,0.1914,0.2216,0.1914,0.1914,0.1914,0.1914,0.2216,0.0129,0.0113,0.0113,0.0113,0.0113,0.0113],[3,1,9,15,32,24,2,8,11,14,13,48,53,22,7,21,69,51,40,66,47,97,107,56,12,78,6,4,43,34,5,25,18,42,114,133,10,67,45,162,63,85,46,112,108,17,194,71,60,35,135,49,165,136,61,33,20,75,50,175,103,39,23,70,36,152,143,116,16,149,181,59,148,38,79,57,101,55,99,138,123,26,19,125,27,238,269,86,37,90,200,102,104,115,216,58,91,224,80,41,265,255,179,183,159,94,89,92,177,192,72,160,113,234,96,242,145,287,106,84,134,105,30,178,28,65,258,253,73,64,76,214,296,31,267,172,205,126,170,82,44,52,83,298,228,166,156,229,279,198,204,87,124,168,164,157,100,289,239,130,93,231,128,161,257,146,243,274,117,261,215,249,122,98,118.5,118.5,184,147,272,120,264,190,291,62,153,129,176,197,273,210,111,88,139,54,199,142,95,247,251,109,284,127,169,217,144,180,110,68,246,29,203,244,154,81,193,232,74,230,221,150,167,196,195,235,121,163,297,222,271,158,137,208,241,77,131,213,281,201,185,189,227,263,182,292,268,132,140,223,225,211,286,141,254,155,262,171,151,186,295,219,191,290,248,259,206,252,207,173,188,187,174,202,236,294,266,288,270,237,278,209,240,220,212,218,245,250,226,233,260,285,256,276,275,282,293,280,277,310,313,313,313,313,313],[2,7,5,3,1,4,21,11,12,18,22,16,13,28,30,29,17,19,25,14,27,8,6,20,36,24,40,45,35,34,53,54,46,41,23,15,58,39,43,10,44,49,48,31,38,62,9,47,51,67,32,63,26,37,69,70,72,57,79,33,61,82,83,74,77,65,59.5,76,95,59.5,52,78,55,107,81,93,87,96,84,73,80,112,115,105,113,50,42,91,124,106,71,99,104,92,68,110,103,64,109,128,56,66,98,88,100,120,111,117,108,101,135,122,126,85,134,89,129,75,130,143,148,141,165,125,175,150,102,97,152,160,162,114,86,185,94,132,116,139,138,155,173,172,156,90,118,136,154,131,123,146,133,180,176,157,163,158,178,121,127,161,187,140,171,169,119,168,142,137,190,145,159,144,197,200,188.5,188.5,179,184,153,198,149,182,151,212,195,193,191,177,167,164,214,239,202,219,186,199,217,166,170,208,147,206,201,181,204,194,215,225,174,257,203,183,221,246,211,192,253,205,218,233,228,224,231,210,258,232,196,229,213,251,244,238,216,271,255,226,222,236,241,245,220,207,243,209,227,260,264,230,242,248,223,273,240,265,235,267,276,262,234,256,268,237,250,249,266,252,270,281,280,279,285,274,269,247,263,259,254,275,261,283,272,282,289,284,278,277,286,296,287,288,295,291,292,294,290,297,298,310,313,313,313,313,313],[2,7,4,3,1,5,14,18,16,19,28,8,15,27,37,26,9,20,31,23,17,10,6,24,48,12,54,46,33,45,43,38,57,50,25,22,77,34,51,13,44,32,71,29,39,68,11,67,56,70,36,64,21,30,59,75,81,49,62,35,55,82,99,76,106,40,60.5,63,114,60.5,42,104,58,86,88,109,84,112,90,79,78,119,126,72,121,41,47,102,107,94,53,110,98,100,65,135,116,66,120,138,52,73,74,95,89,132,139,134,85,91,125,87,113,80,131,83,108,69,143,140,130,129,153,105,168,165,92,103,172,161,157,111,96,160,101,124,122,150,128,173,181,196,183,97,117,156,141,118,93,127,144,170,162,149,145,164,169,115,142,177,187,137,180,158,148,167,152,123,179,136,171,154,178,199,201.5,201.5,175,190,133,189,146,163,147,233,182,206,185,192,151,186,203,193,215,243,184,236,224,159,155,216,166,214,197,188,217,208,223,250,174,263,212,213,229,247,200,211,257,194,205,235,241,207,226,198,239,251,195,222,191,228,253,210,219,274,256,244,176,218,237,246,230,240,249,209,204,266,265,234,238,232,220,259,221,269,231,271,278,267,227,248,270,225,245,242,261,260,277,283,276,282,287,279,262,258,255,252,264,268,254,285,272,281,286,288,275,273,284,297,289,280,295,291,292,293,294,296,298,310,311,312,313,314,315],[2,7,4,3,1,5,10,12,20,23,18,11,14,27,32,34,16,22,19,15,30,9,6,26,39,21,37,43,36,35,53,54,59,47,24,17,44,49,51,13,48,41,46,40,33,72,8,42,63,62,31,61,25,38,57,73,79,71,67,28,58,83,82,75,81,60,55.5,68,99,55.5,52,88,69,105,103,97,84,94,85,78,92,117,115,74,116,50,29,108,122,101,70,89,96,106,64,113,109,66,119,124,65,45,90,80,110,112,126,123,100,87,140,107,130,98,139,86,125,77,133,148,104,141,170,120,168,159,91,93,152,166,156,114,76,179,95,131,121,154,134,161,185,163,162,102,127,135,145,132,118,146,136,192,169,158,160,155,188,111,128,175,180,143,172,164,129,187,138,142,196,144,151,150,202,203,193.5,193.5,165,184,149,201,153,182,137,220,198,200,181,167,147,178,211,222,186,228,176,171,213,177,173,218,157,210,199,183,205,189,226,236,190,259,195,174,212,242,221,197,250,206,209,237,229,238,216,230,258,231,191,208,207,245,253,235,217,271,254,215,223,249,244,227,232,204,247,214,225,266,263,248,234,252,219,275,233,270,239,261,272,264,224,260,268,246,255,251,269,240,265,284,280,281,286,277,267,241,256,243,257,273,262,279,274,283,285,282,276,278,289,296,287,288,297,292,294,291,290,295,298,310,313,313,313,313,313],[9,22,22,24,35,38,47,49,59,74,81,83,95,104,106,110,111,112,115,118,121,124,125,126,135,135,137,138,147,148,154,171,180,180,186,187,189,189,190,198,199,207,211,212,218,219,222,227,230,234,234,237,237,241,246,251,252,252,258,271,277,286,287,295,300,317,318.5,323,324,324.5,327,329,330,336,351,356,356,357,358,368,373,374,375,376,377,379,387,387,390,391,394,400,402,413,413,416,419,420,428,431,438,439,441,446,458,458,465,466,470,471,472,476,482,497,500,500,507,508,512,515,516,516,518,528,539,539,543,546,549,551,551,553,554,555,557,559,564,569,570,571,583,583,584,587,590,593,596,610,613,617,617,629,631,632,632,634,635,636,636,643,647,651,651,652,653,668,675,676,682,686,696,697,699,700,702,702,703,705,707,708,712,717,726,727,728,728,733,733,738,738,739,742,742,744,745,748,749,749,749,751,754,757,766,769,770,771,774,779,784,808,813,814,816,816,825,832,834,835,853,855,865,865,868,873,876,877,879,881,882,882,887,891,893,893,896,898,902,904,907,907,909,914,921,924,924,924,932,935,939,943,948,948,948,959,967,970,977,979,980,983,997,998,998,1001,1002,1004,1019,1021,1024,1029,1032,1032,1034,1040,1040,1042,1045,1053,1055,1056,1058,1066,1072,1072,1074,1078,1085,1122,1123,1141,1143,1150,1153,1160,1167,1168,1171,1240,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9-1" class="section level4 hasAnchor" number="3.4.5.9">
<h4><span class="header-section-number">3.4.5.9</span> CV 9<a href="id_03_model_training.html#cv-9-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ea13f36d7c539bbfbcd5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ea13f36d7c539bbfbcd5">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 74","GBM grid model 66","GBM grid model 53","GBM grid model 35","GBM grid model 24","GBM grid model 23","GBM grid model 80","GBM grid model 1","GBM grid model 15","GBM grid model 92","GBM grid model 72","GBM model 4","GBM grid model 41","XGBoost grid model 60","GBM model 2","Neural network grid model 74","GBM grid model 85","Neural network grid model 75","GBM grid model 67","GBM grid model 25","Neural network grid model 8","GBM grid model 10","GBM grid model 8","Super learner final","GBM grid model 71","Super learner all models","GBM grid model 20","GBM grid model 32","GBM grid model 9","XGBoost grid model 77","GBM grid model 50","XGBoost grid model 78","Neural network grid model 10","Super learner GBM","GBM grid model 96","XGBoost grid model 91","GBM model 3","GBM grid model 78","GBM model 5","GBM grid model 37","GBM grid model 60","XGBoost grid model 17","GBM model 1","XGBoost grid model 46","GBM grid model 82","GBM grid model 38","GBM grid model 57","XGBoost grid model 3","Neural network grid model 38","GBM grid model 79","Neural network grid model 29","GBM grid model 49","Neural network grid model 87","GBM grid model 97","GBM grid model 17","GBM grid model 13","Neural network grid model 62","GBM grid model 87","GBM grid model 59","GBM grid model 26","XGBoost grid model 98","GBM grid model 29","Neural network grid model 73","Neural network grid model 28","Neural network grid model 81","Neural network grid model 22","GBM grid model 11","GBM grid model 89","GBM grid model 16","Neural network grid model 41","Neural network grid model 56","Neural network grid model 50","Neural network grid model 94","Neural network grid model 43","Neural network grid model 35","XGBoost grid model 49","Neural network grid model 80","GBM grid model 22","Neural network grid model 67","Neural network grid model 36","GBM grid model 19","Neural network grid model 17","Neural network grid model 32","XGBoost grid model 20","Super learner neural network","XGBoost grid model 67","GBM grid model 95","XGBoost grid model 63","GBM grid model 64","XGBoost grid model 79","XGBoost grid model 34","XGBoost grid model 18","Neural network grid model 23","Neural network grid model 3","Neural network grid model 95","Neural network grid model 88","Neural network grid model 58","GBM grid model 14","Neural network grid model 16","Neural network grid model 25","GBM grid model 73","Neural network grid model 78","GBM grid model 56","Neural network grid model 11","Neural network grid model 66","Neural network grid model 86","Neural network grid model 64","Neural network grid model 71","Neural network grid model 96","XGBoost grid model 84","Neural network grid model 70","XGBoost grid model 15","Neural network grid model 42","XGBoost grid model 5","XGBoost grid model 59","XGBoost grid model 7","XGBoost grid model 72","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[0.9729,0.6416,0.9729,0.693,null,0.7432,0.9185,0.51,1,0.5485,0.4725,0.4376,0.7432,0.4725,0.4725,0.5934,0.6416,0.5934,0.4725,0.4084,0.4084,0.4084,0.3648,0.2841,0.4376,0.2841,0.3648,0.313,0.3648,0.3648,0.5485,0.2555,0.3909,0.2458,0.4084,0.2978,0.4376,0.5485,0.693,0.4084,0.51,0.3383,0.4084,0.313,0.4725,0.4725,0.4376,0.3383,0.3909,0.3909,0.2841,0.51,0.4084,0.5934,0.4376,0.6416,0.4084,0.3909,0.2348,0.3383,0.3909,0.313,0.2689,0.313,0.3648,0.2689,0.3648,0.4084,0.2978,0.1581,0.313,0.1791,0.2311,0.2689,0.2348,0.4084,0.2689,0.3909,0.2458,0.313,0.4376,0.2555,0.2311,0.313,0.0894,0.2458,0.313,0.2348,0.5485,0.2348,0.3383,0.4084,0.2348,0.2458,0.2689,0.4084,0.2348,0.3909,0.1204,0.2978,0.3909,0.2348,0.2978,0.2978,0.2978,0.1276,0.2841,0.1276,0.2555,0.0554,0.2458,0.2348,0.1074,0.2348,0.2841,0.189,0.0034,0.0034,0.0034,0.0034,0.0034,0.0034],[0.7721,null,0.7478,0.7988,0.7721,0.6122,0.8258,0.8501,0.4283,0.4947,0.3669,0.6374,0.1015,0.2798,0.5874,0.2493,0.5391,0.114,0.3489,0.5631,0.1652,0.2798,0.2219,0.5157,0.1015,0.5157,0.3489,0.2099,0.2493,0.2099,0.2219,0.3318,0.187,0.3861,0.1287,0.3669,0.1287,0.1287,0.1652,0.2798,0.8501,0.1569,0.176,0.4499,0.2493,0.0619,0.097,0.1287,0.097,0.2219,0.1223,0.0619,0.0709,0.1475,0.0926,0.0873,0.0526,0.1475,0.2493,0.2099,0.2099,0.1988,0.081,0.1015,0.1015,0.1287,0.1287,0.2963,0.097,0.1652,0.1569,0.4721,0.187,0.1015,0.1652,0.1652,0.114,0.1073,0.097,0.0926,0.1475,0.1652,0.097,0.0663,0.1073,0.1015,0.1988,0.3137,0.1287,0.0581,0.1569,0.1073,0.1073,0.1015,0.187,0.0619,0.0581,0.114,0.097,0.0538,0.0538,0.114,0.081,0.0538,0.1015,0.097,0.0538,0.081,0.0538,0.1475,0.081,0.176,0.114,0.0762,0.097,0.1223,0.0153,0.004,0.004,0.004,0.004,0.004],[0.5349,null,0.4893,0.5118,0.4893,0.3861,0.612,0.3861,0.4239,0.2952,0.3477,0.4688,0.068,0.2483,0.368,0.1726,0.3487,0.1116,0.1632,0.2787,0.2209,0.2483,0.1632,0.4038,0.1116,0.4038,0.1526,0.1526,0.1116,0.1834,0.0803,0.235,0.1526,0.3312,0.0605,0.4038,0.068,0.0722,0.0861,0.1275,0.6371,0.1275,0.1726,0.2625,0.2209,0.0722,0.0605,0.0803,0.1956,0.1726,0.1344,0.0803,0.0803,0.0997,0.0605,0.0568,0.0861,0.1116,0.1116,0.1116,0.0861,0.0803,0.1275,0.1344,0.1526,0.2209,0.0772,0.2625,0.0803,0.2086,0.1344,0.6904,0.2483,0.0997,0.1834,0.1834,0.1275,0.1067,0.1067,0.068,0.0803,0.1726,0.0605,0.1437,0.1344,0.0997,0.0932,0.1116,0.0997,0.0639,0.1344,0.0803,0.1526,0.1275,0.1067,0.0772,0.0722,0.0533,0.0722,0.0639,0.0639,0.1116,0.0772,0.0568,0.1116,0.0772,0.0533,0.0639,0.0803,0.0861,0.068,0.1344,0.1202,0.0639,0.0722,0.0803,null,null,null,null,null,null],[0.8257,null,0.6928,1,0.7696,0.6142,0.7191,0.7432,0.5176,0.4518,0.3686,0.7432,0.1351,0.2779,0.5894,0.2779,0.667,0.1884,0.3501,0.5176,0.2115,0.252,0.2779,0.5648,0.1351,0.5648,0.2779,0.1884,0.2243,0.2381,0.1787,0.4518,0.2115,0.4329,0.1291,0.4981,0.1351,0.1351,0.1716,0.3126,0.9126,0.1787,0.1787,0.4518,0.2779,0.066,0.1291,0.0846,0.1625,0.252,0.1445,0.0583,0.1085,0.1716,0.0971,0.0908,0.0703,0.1884,0.2243,0.2115,0.1716,0.1787,0.1351,0.1351,0.2381,0.2115,0.1351,0.2668,0.1149,0.2115,0.1625,0.5176,0.2668,0.1085,0.1541,0.1716,0.1209,0.1625,0.1149,0.1351,0.1085,0.1884,0.104,0.1149,0.1625,0.1085,0.1787,0.2779,0.1541,0.1209,0.201,0.1445,0.1787,0.1209,0.1884,0.0522,0.1291,0.1209,0.1787,0.1085,0.0583,0.1716,0.0971,0.066,0.1085,0.1625,0.0522,0.0522,0.0738,0.1085,0.104,0.1787,0.1209,0.1085,0.1149,0.1541,0.0149,0.0048,0.0048,0.0048,0.0048,0.0048],[4,13,2,10,1,6,5,23,3,11,37,35,8,34,38,25,15,19,26,74,60,47,91,123,43,132,64,87,66,114,21,126,68,156,49,116,33,16,9,54,195,107,61,127,31,46,27,88,108,105,120,32,76,17,29,12,70,51,164,73,62,72,136,128,100,134,83,39,82,244,111,264,206,155,217,67,184,97,190,152,41,227,231,93,256,192,96,216,99,211,89,53,205,182,189,125,214,48,265,145,85,199,115,176,169,290,143,276,188,284,168,207,282,221,172,280,310,313,313,313,313,313],[2,1,6,4,8,9,11,5,15,14,10,16,26,19,17,22,28,32,35,18,30,39,25,12.5,47,12.5,37,27,36,21,53,20,31,7,43,23,51,65,70,48,3,34,52,33,75,55,63,50,44,46,41,74,60,90,79,96,73,81,49,86,85,82,58,62,72,56,84,113,78,29,71,24,42,57,40,91,61,80,59,64,107,54,38,103,45,68,120,66,121,76,127,137,88,89,92,111,99,161,83,122,139,104,159,124,131,133,156,105,153,132,208,187,174,224,247,261,310,313,313,313,313,313],[2,1,4,5,10,9,6,7,14,15,8,16,28,18,20,27,25,37,31,19,32,26,22,12.5,36,12.5,30,29,35,21,49,17,46,11,50,24,43,56,54,45,3,33,44,23,41,58,66,39,48,53,61,74,69,75,73,81,80,83,42,65,63,68,64,55,82,77,72,71,78,38,90,34,67,76,52,88,62,93,60,99,114,47,70,91,40,51,79,59,107,86,116,140,101,119,84,144,112,153,95,139,136,132,113,142,152,108,187,130,173,115,191,171,208,206,255,257,308,311,312,313,314,315],[2,1,6,3,11,8,10,4,15,14,9,16,29,20,18,22,32,30,33,19,26,42,21,12.5,40,12.5,39,27,38,23,57,17,36,7,41,24,63,62,70,59,5,34,55,31,71,61,64,56,46,47,35,78,60,89,91,98,74,83,48,80,94,88,53,67,58,51,81,105,92,28,68,25,37,65,45,108,49,87,54,50,112,52,43,96,44,76,111,75,120,79,123,136,77,85,110,116,82,150,72,109,157,106,160,124,133,97,149,129,161,145,199,201,179,217,250,255,310,313,313,313,313,313],[10,16,18,22,30,32,32,39,47,54,64,83,91,91,93,96,100,118,125,130,148,154,159,160.5,166,169.5,170,170,175,179,180,180,181,181,183,187,190,199,203,206,206,208,212,214,218,220,220,233,246,251,257,258,265,271,272,287,297,298,303,304,304,310,311,312,312,318,320,328,330,339,340,347,352,353,354,354,356,357,363,365,374,380,382,383,385,387,406,416,447,452,455,466,471,475,475,496,507,512,515,515,517,541,547,566,585,628,635,640,675,676,766,766,843,868,924,1053,1238,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10-1" class="section level4 hasAnchor" number="3.4.5.10">
<h4><span class="header-section-number">3.4.5.10</span> CV 10<a href="id_03_model_training.html#cv-10-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-fb92a620dbf4c362b44b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-fb92a620dbf4c362b44b">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 24","GBM grid model 53","GBM grid model 59","GBM grid model 67","GBM grid model 41","Neural network grid model 36","Neural network grid model 75","Neural network grid model 98","Neural network grid model 8","Neural network grid model 51","GBM grid model 4","GBM grid model 74","GBM grid model 66","Neural network grid model 74","XGBoost grid model 92","GBM grid model 98","GBM grid model 92","XGBoost grid model 24","GBM grid model 71","GBM grid model 35","GBM grid model 50","Neural network grid model 82","Neural network grid model 43","GBM model 2","Neural network grid model 15","GBM grid model 10","Neural network grid model 63","Neural network grid model 94","Neural network grid model 29","Neural network grid model 91","GBM grid model 15","GBM grid model 95","Neural network grid model 97","Super learner final","Super learner all models","GBM grid model 2","Neural network grid model 38","Neural network grid model 95","GBM grid model 60","GBM grid model 46","Neural network grid model 23","GBM grid model 63","Neural network grid model 71","Neural network grid model 65","Neural network grid model 19","Neural network grid model 96","Neural network grid model 56","Neural network grid model 11","XGBoost grid model 91","GBM grid model 14","Super learner neural network","Neural network grid model 59","Neural network grid model 64","Neural network grid model 78","Neural network grid model 88","Neural network grid model 9","GBM grid model 22","GBM grid model 8","XGBoost grid model 22","Neural network grid model 55","Neural network grid model 3","XGBoost grid model 78","GBM grid model 64","Neural network grid model 21","Neural network grid model 72","Neural network grid model 1","GBM grid model 82","Neural network grid model 25","GBM grid model 73","Neural network grid model 87","GBM grid model 78","XGBoost grid model 9","GBM grid model 17","Neural network grid model 52","Neural network grid model 49","GBM grid model 58","GBM grid model 55","Neural network grid model 62","Neural network grid model 47","Neural network grid model 22","Neural network grid model 92","GBM grid model 20","GBM grid model 79","GBM grid model 7","Neural network grid model 66","GBM model 4","XGBoost grid model 46","Neural network grid model 70","Neural network grid model 37","Neural network grid model 14","Neural network grid model 93","Neural network grid model 27","XGBoost grid model 63","GBM grid model 30","Neural network grid model 24","XGBoost grid model 68","GBM grid model 81","GBM grid model 45","Neural network grid model 53","GBM grid model 62","GBM grid model 31","GBM grid model 49","GBM grid model 13","GBM grid model 11","GBM grid model 32","Neural network grid model 77","GBM grid model 86","Neural network grid model 7","GBM grid model 57","GBM grid model 77","Neural network grid model 57","Neural network grid model 73","GBM grid model 5","GBM model 3","GBM grid model 84","GBM grid model 47","Neural network grid model 18","GBM grid model 99","GBM grid model 23","DRF model","Neural network grid model 61","Neural network grid model 84","GBM grid model 70","GBM grid model 21","GBM grid model 72","GBM model 1","Neural network grid model 44","Neural network grid model 54","XGBoost grid model 11","Neural network grid model 28","XGBoost grid model 50","GBM grid model 25","GBM grid model 54","XGBoost grid model 81","GBM grid model 19","GBM grid model 89","XGBoost grid model 14","GBM grid model 91","Neural network grid model 13","XGBoost grid model 49","GBM grid model 76","Neural network grid model 32","XGBoost grid model 37","GBM grid model 9","Super learner GBM","Neural network grid model 35","Neural network grid model 46","GBM model 5","GBM grid model 88","GBM grid model 51","Neural network grid model 10","GBM grid model 65","Neural network grid model 31","Neural network grid model 99","XGBoost grid model 20","Neural network grid model 58","XGBoost grid model 54","XGBoost grid model 59","GBM grid model 94","Neural network grid model 34","GBM grid model 33","XGBoost grid model 8","Super learner XGBoost","GBM grid model 100","GBM grid model 34","XGBoost grid model 58","Neural network grid model 90","Neural network grid model 68","XGBoost grid model 84","Neural network grid model 17","GBM grid model 90","XGBoost grid model 34","GBM grid model 85","GBM grid model 97","Neural network grid model 81","Neural network grid model 20","GBM grid model 12","GBM grid model 48","GBM grid model 38","XGBoost grid model 17","GBM grid model 40","GBM grid model 61","XGBoost grid model 98","Neural network grid model 67","Neural network grid model 4","Neural network grid model 42","XGBoost grid model 7","XGBoost grid model 70","Neural network grid model 40","GBM grid model 75","GBM grid model 69","GBM grid model 87","XGBoost grid model 3","GBM grid model 6","XGBoost grid model 1","XGBoost grid model 89","XGBoost grid model 60","XGBoost grid model 4","XGBoost grid model 42","GBM grid model 80","GBM grid model 52","XGBoost grid model 5","GBM grid model 93","GBM grid model 26","XGBoost grid model 18","XGBoost grid model 48","XGBoost grid model 95","Neural network grid model 30","Neural network grid model 41","XGBoost grid model 97","Neural network grid model 79","GBM grid model 28","XGBoost grid model 76","XGBoost grid model 88","GBM grid model 44","GBM grid model 16","XGBoost grid model 21","XGBoost grid model 67","XGBoost grid model 61","GBM grid model 27","XGBoost grid model 44","XGBoost grid model 2","XGBoost grid model 36","XGBoost grid model 41","GBM grid model 96","XGBoost grid model 93","XGBoost grid model 33","GBM grid model 1","XGBoost grid model 82","Neural network grid model 12","XGBoost grid model 23","XRT model","GBM grid model 42","XGBoost grid model 80","XGBoost grid model 51","GBM grid model 36","Neural network grid model 6","Neural network grid model 83","XGBoost grid model 71","GBM grid model 18","GBM grid model 83","XGBoost grid model 79","Neural network grid model 100","Neural network grid model 50","XGBoost grid model 16","XGBoost grid model 73","GBM grid model 43","Neural network grid model 5","Neural network grid model 16","Neural network grid model 45","Neural network grid model 39","Neural network grid model 60","XGBoost grid model 27","Neural network grid model 85","GBM grid model 37","Neural network grid model 69","Neural network grid model 76","Neural network grid model 89","Neural network grid model 2","XGBoost grid model 45","GBM grid model 3","XGBoost model 1","XGBoost grid model 55","XGBoost grid model 13","GBM grid model 29","XGBoost grid model 52","XGBoost model 3","Neural network grid model 26","Neural network grid model 48","XGBoost grid model 75","XGBoost grid model 25","XGBoost grid model 6","XGBoost grid model 28","Neural network grid model 33","GBM grid model 39","XGBoost grid model 86","XGBoost grid model 47","XGBoost grid model 74","XGBoost grid model 53","GBM grid model 68","XGBoost grid model 38","XGBoost grid model 77","Neural network grid model 80","XGBoost model 2","XGBoost grid model 87","XGBoost grid model 19","GBM grid model 56","XGBoost grid model 35","XGBoost grid model 94","XGBoost grid model 15","XGBoost grid model 66","XGBoost grid model 85","XGBoost grid model 39","Neural network grid model 86","XGBoost grid model 12","XGBoost grid model 69","XGBoost grid model 64","XGBoost grid model 72","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 65"],[null,0.618,0.6908,0.6566,0.549,0.5486,0.618,0.5686,0.549,0.6009,0.6009,0.5461,0.5686,0.549,0.6009,0.6566,0.8528,0.5798,0.6566,0.5686,0.7964,0.549,0.5798,0.5798,0.5461,0.7964,0.549,0.5461,0.5461,0.5461,0.7432,0.618,0.549,0.5461,0.5461,0.5798,0.5798,0.549,0.6908,0.549,0.5486,0.618,0.5461,0.5461,0.5461,0.5461,0.549,0.549,0.5686,0.6908,0.5461,0.5461,0.5486,0.5461,0.549,0.549,0.549,0.618,0.5461,0.5461,0.549,0.5486,0.618,0.5461,0.5798,0.4924,0.6908,0.5461,0.5686,0.549,0.6908,0.618,0.618,0.5461,0.5461,0.618,0.6566,0.5486,0.5461,0.5686,0.5461,0.6009,0.5798,0.5798,0.5798,0.6009,0.549,0.5461,0.5461,0.5461,0.5461,0.5461,0.5686,0.6566,0.5486,0.5798,0.6009,0.6009,0.5461,0.549,0.6566,0.6908,0.618,0.6908,0.5461,0.5461,0.5486,0.5461,0.618,0.5798,0.5461,0.5461,0.5461,0.5798,0.5798,0.6009,0.5461,0.549,0.6908,0.5486,0.5461,0.5461,0.549,0.6566,0.549,0.549,0.5461,0.5461,0.5798,0.5461,0.5798,0.6009,0.6908,0.5461,0.549,0.5486,0.5461,0.5686,0.5461,0.618,0.5686,0.5461,0.549,0.618,0.5461,0.5461,0.5461,0.9097,0.5686,0.6009,0.5486,0.618,0.549,0.5461,0.618,0.5461,0.5486,0.549,0.549,0.5461,0.549,0.5798,0.5461,0.549,0.6009,0.5686,0.5461,0.5461,0.5461,0.5461,0.549,0.549,0.6566,0.7432,0.5461,0.5461,0.5798,0.5486,0.6908,0.5461,0.549,0.549,0.5686,0.5461,0.5461,0.5461,0.5461,0.5686,0.5461,0.5461,0.6009,0.5461,0.618,0.5686,0.5461,0.5486,0.549,0.5461,0.5461,0.618,0.5461,0.5461,0.618,0.5798,0.5798,0.5461,0.549,0.5461,0.5461,0.5486,0.5461,0.6009,0.5486,0.549,0.5461,0.549,0.5461,0.5461,0.5461,0.6009,0.6009,0.5461,0.5686,0.5461,0.549,0.5461,0.5461,0.549,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.549,0.549,0.549,0.5486,0.5486,0.5461,0.5461,0.549,0.5486,0.5453,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.549,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5686,0.5461,0.5798,0.5461,0.4454,0.5461,0.6009,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5486,0.5461,0.549,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.5461,0.4454,0.5461,0.5461,0.4924,0.4454,0.5453,0.2852,0.0034,0.0034,0.0034,0.0034,0.0034,0.0034],[1,0.6611,0.9126,0.6611,0.7505,0.7334,0.8854,0.8284,0.5429,0.6092,0.7334,0.8284,0.6244,0.577,0.4972,0.5429,0.4504,0.7505,0.6437,0.5176,0.5879,0.7334,0.4431,0.5559,0.7334,0.6437,0.4504,0.5365,0.7768,0.5879,0.5879,0.577,0.5429,0.7505,0.7505,0.4789,0.4789,0.6437,0.5559,0.5879,0.8284,0.6244,null,0.6244,0.4789,0.5429,0.5075,0.4431,0.4431,0.5075,0.6611,0.6849,0.4598,0.5429,0.5429,0.4431,0.5176,0.577,0.5559,0.6849,0.4504,0.6092,0.4431,0.4431,0.5176,0.5365,0.4504,0.4647,0.4647,0.5176,0.4504,0.6244,0.4431,0.4504,0.7505,0.4504,0.4598,0.4972,0.4504,0.4647,0.6092,0.5559,0.5879,0.4431,0.4504,0.6611,0.4431,0.6244,0.5559,0.6437,0.5879,0.5429,0.4431,0.4647,0.4504,0.5075,0.5879,0.4431,0.4431,0.4431,0.4504,0.4598,0.4504,0.5176,0.5075,0.4431,0.4789,0.4647,0.4431,0.4504,0.4647,0.4504,0.4647,0.4504,0.4431,0.4504,0.4504,0.5429,0.5075,0.6611,0.5429,0.4431,0.4431,0.4431,0.4431,0.6244,0.4431,0.4431,0.4431,0.5559,0.4431,0.4504,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.5365,0.4431,0.5075,0.4431,0.4598,0.4504,0.4504,0.4504,0.4431,0.4431,0.4431,0.5075,0.5075,0.5176,0.4789,0.4504,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.5559,0.5429,0.4431,0.4598,0.4504,0.4431,0.5176,0.4431,0.4504,0.4431,0.4504,0.4789,0.4431,0.4431,0.4431,0.4598,0.4431,0.4431,0.4431,0.4598,0.4504,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4647,0.4647,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4504,0.5365,0.4431,0.4504,0.4431,0.4431,0.4431,0.4431,0.4504,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.3582,0.4598,0.4431,0.4431,0.4431,0.4431,0.4972,0.4431,0.5176,0.4431,0.4431,0.4431,0.4647,0.4431,0.4431,0.4431,0.4431,0.5879,0.4431,0.4431,0.4431,0.3464,0.4431,0.3369,0.4431,0.4431,0.4431,0.4333,0.4431,0.4431,0.4431,0.4044,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.4431,0.3582,0.4431,0.4431,0.4431,0.4431,0.4269,0.4431,0.4972,0.4504,0.3464,0.4431,0.4431,0.4044,0.4431,0.3369,0.4504,0.4431,0.4431,0.4431,0.4431,0.4431,0.2852,0.4333,0.1906,0.3418,0.4044,0.4431,0.4431,0.4431,0.4044,0.4333,0.2852,0.316,0.3324,0.2993,0.2852,0.0126,0.004,0.004,0.004,0.004,0.004],[0.8119,0.8998,0.6609,0.6609,0.7091,0.6414,0.4889,0.6265,0.5516,0.508,0.5516,0.7873,0.7627,0.508,0.4639,0.7091,0.6414,0.6414,0.6414,0.5406,0.6265,0.5663,0.5195,0.5516,0.6414,0.9272,0.4606,0.6848,0.5663,0.4985,0.6848,0.508,0.7357,0.5855,0.5855,0.4606,0.5663,0.5516,0.5302,0.6265,0.7873,0.5094,null,0.5094,0.508,0.508,0.4606,0.5663,0.4606,0.6106,0.5302,0.8119,0.4606,0.5406,0.4889,0.441,0.5094,0.5094,0.5406,0.4684,0.5302,0.5516,0.5663,0.508,0.4606,0.5094,0.5195,0.5663,0.508,0.4985,0.5094,0.4639,0.5195,0.5195,0.4985,0.4684,0.4684,0.4606,0.4606,0.4218,0.5406,0.6265,0.6265,0.4639,0.5406,0.5195,0.4684,0.5094,0.5516,0.5406,0.4684,0.5094,0.5302,0.427,0.4684,0.4985,0.6265,0.4985,0.5302,0.5094,0.6414,0.4985,0.5195,0.5094,0.427,0.4639,0.6609,0.5406,0.4889,0.5855,0.4606,0.4606,0.5406,0.4639,0.427,0.5094,0.508,0.4985,0.427,0.5855,0.4606,0.4218,0.4558,0.5302,0.5516,0.6609,0.427,0.4639,0.4218,0.5516,0.4218,0.4218,0.4684,0.4218,0.4218,0.4558,0.4218,0.4558,0.4218,0.4218,0.427,0.4606,0.441,0.4639,0.5302,0.4218,0.4639,0.427,0.427,0.441,0.4218,0.4684,0.4218,0.4606,0.427,0.4218,0.4639,0.5195,0.4606,0.4218,0.4218,0.427,0.4606,0.4218,0.4606,0.427,0.4218,0.4218,0.4684,0.4639,0.427,0.4558,0.4218,0.4218,0.4218,0.4218,0.427,0.4218,0.427,0.4684,0.4218,0.4218,0.4218,0.427,0.4218,0.4218,0.4985,0.4218,0.4218,0.4606,0.427,0.427,0.441,0.4218,0.5302,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4558,0.427,0.4218,0.427,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.427,0.4606,0.4218,0.4218,0.4218,0.441,0.4218,0.427,0.427,0.5094,0.4218,0.427,0.4218,0.4218,0.4218,0.4218,0.4606,0.4606,0.4218,0.4218,0.427,0.427,0.4218,0.4218,0.4218,0.4067,0.4067,0.4218,0.4067,0.427,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4067,0.4218,0.4218,0.4218,0.4218,0.4218,0.4067,0.4218,0.4067,0.4218,0.4218,0.4218,0.4218,0.4218,0.5195,0.4218,0.4218,0.4218,0.4067,0.4218,0.2957,0.4218,0.4218,0.4218,0.4218,0.4218,0.4218,0.4067,0.4067,0.2957,0.4067,0.4218,0.4218,0.4218,0.427,0.4067,0.4218,0.4067,0.3895,0.3895,0.3895,0.2957,null,null,null,null,null,null],[0.799,0.6523,0.799,0.5358,0.7456,0.7191,0.8205,0.7191,0.517,0.5564,0.5903,0.7191,0.47,0.517,0.4611,0.517,0.418,0.7191,0.6307,0.517,0.47,0.6759,0.3891,0.5358,0.6307,0.5903,0.4083,0.418,0.8205,0.5026,0.6075,0.4117,0.5564,0.6999,0.6999,0.4117,0.4452,0.5903,0.4083,0.5026,0.8205,0.5026,null,0.5735,0.4083,0.4117,0.47,0.4083,0.3992,0.47,0.6523,0.6759,0.47,0.426,0.5564,0.3802,0.4897,0.4117,0.47,0.5903,0.3992,0.426,0.426,0.3891,0.4611,0.5735,0.3891,0.4083,0.426,0.4611,0.4083,0.6075,0.4083,0.3992,0.6523,0.418,0.426,0.4117,0.3891,0.3992,0.517,0.5735,0.5735,0.4083,0.4117,0.47,0.4083,0.5026,0.6075,0.5903,0.4452,0.517,0.4083,0.4117,0.4117,0.5026,0.6075,0.4083,0.4117,0.4083,0.4083,0.4083,0.418,0.5358,0.4083,0.4611,0.5026,0.426,0.3802,0.418,0.4117,0.4083,0.418,0.4083,0.3992,0.4083,0.4083,0.426,0.3992,0.6075,0.4611,0.3802,0.3802,0.3992,0.4083,0.5735,0.4083,0.3802,0.3992,0.5358,0.3891,0.3802,0.3891,0.3891,0.3802,0.3802,0.4083,0.3891,0.3802,0.3891,0.3802,0.3992,0.4083,0.3802,0.4083,0.3891,0.47,0.4083,0.3891,0.3802,0.3774,0.4083,0.3891,0.4452,0.3992,0.4897,0.418,0.426,0.3891,0.3891,0.3802,0.3802,0.3891,0.3802,0.3891,0.3891,0.3802,0.3891,0.47,0.4897,0.3802,0.4083,0.4083,0.3802,0.4083,0.3802,0.4083,0.3802,0.4083,0.418,0.3802,0.3315,0.3802,0.4083,0.3891,0.3802,0.3802,0.3992,0.4083,0.3802,0.3891,0.3802,0.3802,0.3802,0.4083,0.3802,0.3891,0.4083,0.3992,0.3802,0.3802,0.3891,0.3802,0.3802,0.3802,0.3891,0.418,0.3802,0.4083,0.3802,0.3802,0.3155,0.3802,0.4083,0.3802,0.3992,0.3891,0.3891,0.3992,0.3802,0.3065,0.418,0.3891,0.3891,0.3891,0.3992,0.4083,0.3802,0.3992,0.4083,0.3802,0.3802,0.426,0.4083,0.3891,0.3802,0.3802,0.5026,0.4083,0.3802,0.3802,0.2925,0.3507,0.3155,0.3802,0.3194,0.3802,0.3194,0.4083,0.3802,0.3802,0.3315,0.3891,0.3891,0.3802,0.3802,0.3802,0.3802,0.3802,0.3802,0.3891,0.2925,0.3802,0.3802,0.3802,0.3802,0.3194,0.3891,0.4117,0.4083,0.2925,0.3802,0.3802,0.3802,0.3891,0.2925,0.3992,0.3802,0.3802,0.3802,0.3802,0.3802,0.2925,0.3194,0.1516,0.3065,0.3194,0.3802,0.3802,0.3802,0.3802,0.3802,0.2925,0.2925,0.3065,0.3065,0.2868,0.0095,0.0095,0.0095,0.0095,0.0095,0.0095],[1,25,13,21,55,97,60,62,90,64,34,130,67,89,26,19,4,94,51,63,6,139,111,102,183,14,57,200,199,126,3,9,150,142,151,48,93,209,12,132,243,49,274,164,175,198,157,125,69,24,252,282,144,201,91,114,185,50,170,225,140,121,79,138,80,297,8,210,52,70,18,33,15,174,249,29,35,109,120,116,230,101,133,7,136,58,178,160,264,231,238,221,156,16,113,84,82,17,215,88,31,32,56,37,108,214,167,248,10,71,246,181,173,68,41,27,267,117,5,296,168,118,59,20,119,184,259,269,54,155,152,46,22,135,105,96,162,161,240,74,83,263,61,23,190,247,244,2,86,99,131,40,85,280,44,233,193,147,47,148,110,73,250,98,81,75,191,245,288,227,95,146,38,11,203,197,42,127,28,194,129,78,65,202,261,291,270,77,279,115,39,172,107,30,268,166,100,257,158,45,272,153,36,76,66,213,122,286,254,154,234,53,112,141,176,72,229,226,255,43,106,218,104,186,188,251,236,123,235,258,182,298,92,217,216,237,189,273,128,87,103,187,177,275,124,143,159,295,276,195,284,207,206,271,145,242,283,278,293,208,211,180,171,137,179,169,163,212,294,281,134,232,165,204,260,149,205,220,219,192,256,266,224,196,223,222,228,253,241,265,287,262,239,290,285,277,289,310,313,313,313,313,313],[2,11,18,17,12,3,19,26,14,23,31,4,27,16,30,40,47,24,43,38,53,20,33,25,9,56,59,5,8,41,74,72,28,21.5,21.5,66,61,13,83,32,7,77,1,42,45,29,35,55,69,87,15,6,52,39,70,73,34,89,44,37,67,50,80,63,88,10,118,46,91,96,105,99,108,65,36,107,103,94,78,82,51,76,60,114,79,102,58,85,57,49,48,62,68,129,110,104,101,124,75,112,131,128,123,132,106,84,86,71,142,119,81,95,111,117,144,143,64,116,155,54,115,134,139,166,136,98,97,90,156,137,120,165,159,133,138,154,127,126,93,153,146,92,158,177,121,100,113,189,162,157,148,186,182,109,178,135,122,145,180,168,169,187,130,179,188,193,152,160,125,149,183,164,194,204,167,170,212,181,207,163,175,208,202,171,150,141,140,203,161,201,216,185,209,232,151,190,210,176,184,241,147,219,239,226,230,192,214,172,195,215,196,250,225,222,221,231,199,174,191,258,237,217,238,213,220,200,206,254,198,227,218,173,266,205,211,197,251,223,256,269,262,228,249,234,264,247,252,224,233,260,236,257,246,229,270,248,235,253,243,255,242,261,267,276,265,272,277,273,245,240,294,263,284,279,244,293,274,271,275,285,268,259,278,292,287,286,289,283,290,281,280,288,296,282,298,300,299,310,313,313,313,313,313],[2,9,20,15,12,3,22,19,14,34,45,6,23,24,56,43,63,37,41,52,75,18,35,42,10,65,38,7,8,26,55,62,17,29.5,29.5,71,39,16,60,49,5,70,1,32,28,27,57,64,73,89,11,4,69,36,74,53,46,81,58,31,47,99,79,80,91,13,100,40,104,78,107,101,113,48,25,116,110,66,85,86,33,95,90,123,76,103,83,68,21,44,54,51,98,133,77,115,122,147,50,106,144,134,132,149,112,82,105,67,140,121,61,88,97,137,139,157,93,108,148,59,96,117,155,160,111,120,84,72,156,102,136,154,174,129,145,128,127,124,94,164,163,87,159,173,114,131,118,202,168,150,175,180,151,92,184,119,152,167,196,169,185,193,143,183,204,191,161,109,126,135,194,181,221,231,138,141,224,186,218,170,200,209,207,153,142,125,146,212,130,217,242,189,208,238,165,222,214,158,211,226,179,187,253,237,235,192,236,162,172,220,171,243,234,225,178,259,176,205,190,261,247,197,256,240,199,182,213,223,201,210,239,195,248,230,228,219,216,166,252,264,258,251,229,206,254,267,245,198,177,233,188,215,246,232,272,244,203,227,241,255,260,271,274,284,270,276,279,265,257,249,292,250,283,263,266,290,273,269,277,285,262,268,282,293,280,286,291,278,288,281,275,289,295,287,294,299,297,310,311,312,313,314,315],[3,15,17,20,13,2,16,21,12,18,30,6,31,19,38,58,54,25,52,46,66,24,23,34,8,81,62,4,5,29,91,80,28,35.5,35.5,56,55,11,95,48,7,76,1,40,32,27,33,44,79,92,14,9,37,26,73,68,47,93,41,22,65,50,85,43,67,10,107,39,90,96,114,111,110,60,42,101,109,88,75,77,53,97,87,128,89,118,63,71,45,64,51,61,74,120,100,99,105,125,82,117,122,137,123,121,113,59,83,57,154,136,69,94,78,138,145,143,49,135,169,72,104,115,148,157,139,103,70,86,155,129,116,161,171,130,140,152,119,126,112,150,151,102,168,180,132,84,98,181,162,175,127,178,166,106,188,108,134,142,183,133,176,191,131,195,182,199,158,149,124,153,193,174,218,225,163,164,198,186,233,159,187,197,221,170,144,141,146,213,147,189,228,184,208,236,156,173,230,165,203,251,167,209,242,237,248,192,219,172,179,211,200,259,234,217,232,247,205,207,177,257,241,201,245,204,240,215,196,252,220,160,216,190,258,212,222,227,229,223,250,268,269,226,239,185,265,256,260,202,235,243,224,255,244,214,275,231,246,210,194,254,262,263,264,280,270,272,278,249,206,238,292,267,283,273,253,293,274,271,279,289,266,261,276,294,287,290,291,285,288,282,281,286,296,277,298,299,300,310,313,313,313,313,313],[8,60,68,73,92,105,117,128,130,139,140,146,148,148,150,160,168,180,187,199,200,201,202,203,210,216,216,216,220,222,223,223,223,228.5,237.5,241,248,249,250,261,262,272,277,278,280,281,282,288,290,292,292,301,302,302,308,308,312,313,313,315,319,320,323,324,326,330,333,335,337,340,344,344,346,347,352,353,357,357,358,361,367,369,370,372,380,381,382,384,387,388,391,395,396,398,400,402,410,413,422,423,428,431,434,439,439,439,441,443,446,447,457,458,459,460,469,470,473,476,477,481,483,484,501,503,505,505,510,517,521,523,524,526,526,527,528,530,535,537,539,541,543,544,546,553,557,562,573,574,578,581,581,584,584,587,594,595,601,601,606,618,640,644,654,655,655,658,662,663,663,664,665,665,671,671,671,672,676,680,686,686,691,692,695,696,697,698,702,705,717,722,725,730,732,736,740,751,754,756,756,763,765,768,770,776,779,789,791,792,800,800,801,805,805,805,807,809,809,812,813,819,831,833,843,843,847,848,851,852,854,855,855,856,864,864,877,880,885,885,886,888,892,892,894,900,907,913,916,919,921,931,932,934,942,946,962,965,967,968,971,972,975,975,976,977,984,989,997,999,1002,1008,1012,1012,1015,1019,1023,1025,1026,1031,1050,1051,1052,1054,1060,1075,1077,1084,1099,1099,1107,1109,1123,1125,1126,1136,1175,1175,1185,1240,1250,1251,1252,1253,1254]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation-1" class="section level3 hasAnchor" number="3.4.6">
<h3><span class="header-section-number">3.4.6</span> Final evaluation<a href="id_03_model_training.html#final-evaluation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb55-1"><a href="id_03_model_training.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits.RData&quot;</span>)</span>
<span id="cb55-2"><a href="id_03_model_training.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp.RData&quot;</span>)</span>
<span id="cb55-3"><a href="id_03_model_training.html#cb55-3" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/cell_penetration&quot;</span></span>
<span id="cb55-4"><a href="id_03_model_training.html#cb55-4" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb55-5"><a href="id_03_model_training.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 30&quot;</span>, <span class="st">&quot;Neural network grid model 98&quot;</span>, <span class="st">&quot;Neural network grid model 72&quot;</span>,</span>
<span id="cb55-6"><a href="id_03_model_training.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 1&quot;</span>, <span class="st">&quot;GBM grid model 45&quot;</span>, <span class="st">&quot;GBM grid model 82&quot;</span>, <span class="st">&quot;GBM grid model 72&quot;</span>,</span>
<span id="cb55-7"><a href="id_03_model_training.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 15&quot;</span>, <span class="st">&quot;GBM grid model 74&quot;</span>, <span class="st">&quot;GBM grid model 24&quot;</span></span>
<span id="cb55-8"><a href="id_03_model_training.html#cb55-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-9"><a href="id_03_model_training.html#cb55-9" aria-hidden="true" tabindex="-1"></a>logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-10"><a href="id_03_model_training.html#cb55-10" aria-hidden="true" tabindex="-1"></a>MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-11"><a href="id_03_model_training.html#cb55-11" aria-hidden="true" tabindex="-1"></a>F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-12"><a href="id_03_model_training.html#cb55-12" aria-hidden="true" tabindex="-1"></a>acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-13"><a href="id_03_model_training.html#cb55-13" aria-hidden="true" tabindex="-1"></a>EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-14"><a href="id_03_model_training.html#cb55-14" aria-hidden="true" tabindex="-1"></a>BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb55-15"><a href="id_03_model_training.html#cb55-15" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb55-16"><a href="id_03_model_training.html#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb55-17"><a href="id_03_model_training.html#cb55-17" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb55-18"><a href="id_03_model_training.html#cb55-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb55-19"><a href="id_03_model_training.html#cb55-19" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb55-20"><a href="id_03_model_training.html#cb55-20" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb55-21"><a href="id_03_model_training.html#cb55-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb55-22"><a href="id_03_model_training.html#cb55-22" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb55-23"><a href="id_03_model_training.html#cb55-23" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb55-24"><a href="id_03_model_training.html#cb55-24" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb55-25"><a href="id_03_model_training.html#cb55-25" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb55-26"><a href="id_03_model_training.html#cb55-26" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb55-27"><a href="id_03_model_training.html#cb55-27" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb55-28"><a href="id_03_model_training.html#cb55-28" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb55-29"><a href="id_03_model_training.html#cb55-29" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb55-30"><a href="id_03_model_training.html#cb55-30" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb55-31"><a href="id_03_model_training.html#cb55-31" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb55-32"><a href="id_03_model_training.html#cb55-32" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb55-33"><a href="id_03_model_training.html#cb55-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb55-34"><a href="id_03_model_training.html#cb55-34" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb55-35"><a href="id_03_model_training.html#cb55-35" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb55-36"><a href="id_03_model_training.html#cb55-36" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb55-37"><a href="id_03_model_training.html#cb55-37" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb55-38"><a href="id_03_model_training.html#cb55-38" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb55-39"><a href="id_03_model_training.html#cb55-39" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb55-40"><a href="id_03_model_training.html#cb55-40" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb55-41"><a href="id_03_model_training.html#cb55-41" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb55-42"><a href="id_03_model_training.html#cb55-42" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb55-43"><a href="id_03_model_training.html#cb55-43" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb55-44"><a href="id_03_model_training.html#cb55-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb55-45"><a href="id_03_model_training.html#cb55-45" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb55-46"><a href="id_03_model_training.html#cb55-46" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb55-47"><a href="id_03_model_training.html#cb55-47" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb55-48"><a href="id_03_model_training.html#cb55-48" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb55-49"><a href="id_03_model_training.html#cb55-49" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb55-50"><a href="id_03_model_training.html#cb55-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-51"><a href="id_03_model_training.html#cb55-51" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>category))</span>
<span id="cb55-52"><a href="id_03_model_training.html#cb55-52" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>category, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb55-53"><a href="id_03_model_training.html#cb55-53" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="st">&quot;penetrating&quot;</span>]</span>
<span id="cb55-54"><a href="id_03_model_training.html#cb55-54" aria-hidden="true" tabindex="-1"></a>  y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb55-55"><a href="id_03_model_training.html#cb55-55" aria-hidden="true" tabindex="-1"></a>  logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb55-56"><a href="id_03_model_training.html#cb55-56" aria-hidden="true" tabindex="-1"></a>  MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb55-57"><a href="id_03_model_training.html#cb55-57" aria-hidden="true" tabindex="-1"></a>  F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb55-58"><a href="id_03_model_training.html#cb55-58" aria-hidden="true" tabindex="-1"></a>  acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb55-59"><a href="id_03_model_training.html#cb55-59" aria-hidden="true" tabindex="-1"></a>  EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb55-60"><a href="id_03_model_training.html#cb55-60" aria-hidden="true" tabindex="-1"></a>  BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb55-61"><a href="id_03_model_training.html#cb55-61" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-62"><a href="id_03_model_training.html#cb55-62" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(logloss, MCC, F1, acc, EF, BEDROC, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_cpp.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb56"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb56-1"><a href="id_03_model_training.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_cpp.RData&quot;</span>)</span>
<span id="cb56-2"><a href="id_03_model_training.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb56-3"><a href="id_03_model_training.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F&lt;sub&gt;1&lt;/sub&gt;&quot;</span>, <span class="st">&quot;Balanced accuracy&quot;</span>, <span class="st">&quot;EF&quot;</span>, <span class="st">&quot;BEDROC&quot;</span>),</span>
<span id="cb56-4"><a href="id_03_model_training.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean  s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb56-5"><a href="id_03_model_training.html#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(logloss), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(logloss), <span class="dv">3</span>)),</span>
<span id="cb56-6"><a href="id_03_model_training.html#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(MCC), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(MCC), <span class="dv">3</span>)),</span>
<span id="cb56-7"><a href="id_03_model_training.html#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(F1), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(F1), <span class="dv">3</span>)),</span>
<span id="cb56-8"><a href="id_03_model_training.html#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(acc), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(acc), <span class="dv">3</span>)),</span>
<span id="cb56-9"><a href="id_03_model_training.html#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(EF), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(EF), <span class="dv">3</span>)),</span>
<span id="cb56-10"><a href="id_03_model_training.html#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(BEDROC), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(BEDROC), <span class="dv">3</span>))</span>
<span id="cb56-11"><a href="id_03_model_training.html#cb56-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb56-12"><a href="id_03_model_training.html#cb56-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb56-13"><a href="id_03_model_training.html#cb56-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb56-14"><a href="id_03_model_training.html#cb56-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-22f141f32a176b853198" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-22f141f32a176b853198">{"x":{"filter":"none","vertical":false,"data":[["Log loss","MCC","F<sub>1<\/sub>","Balanced accuracy","EF","BEDROC"],["0.259  0.017","0.794  0.014","0.901  0.005","0.897  0.007","2.081  0.065","0.999  0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean  s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="final-model-selection-1" class="section level3 hasAnchor" number="3.4.7">
<h3><span class="header-section-number">3.4.7</span> Final model selection<a href="id_03_model_training.html#final-model-selection-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb57-1"><a href="id_03_model_training.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp.RData&quot;</span>)</span>
<span id="cb57-2"><a href="id_03_model_training.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="id_03_model_training.html#cb57-3" aria-hidden="true" tabindex="-1"></a>holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/cell_penetration/whole_data_set/cv_holdout_predictions.csv&quot;</span>)</span>
<span id="cb57-4"><a href="id_03_model_training.html#cb57-4" aria-hidden="true" tabindex="-1"></a>fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb57-5"><a href="id_03_model_training.html#cb57-5" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb57-6"><a href="id_03_model_training.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Deep learning grid models</span></span>
<span id="cb57-7"><a href="id_03_model_training.html#cb57-7" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb57-8"><a href="id_03_model_training.html#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb57-9"><a href="id_03_model_training.html#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb57-10"><a href="id_03_model_training.html#cb57-10" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb57-11"><a href="id_03_model_training.html#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM grid models</span></span>
<span id="cb57-12"><a href="id_03_model_training.html#cb57-12" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb57-13"><a href="id_03_model_training.html#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb57-14"><a href="id_03_model_training.html#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb57-15"><a href="id_03_model_training.html#cb57-15" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb57-16"><a href="id_03_model_training.html#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM default models</span></span>
<span id="cb57-17"><a href="id_03_model_training.html#cb57-17" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb57-18"><a href="id_03_model_training.html#cb57-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb57-19"><a href="id_03_model_training.html#cb57-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb57-20"><a href="id_03_model_training.html#cb57-20" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb57-21"><a href="id_03_model_training.html#cb57-21" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost grid models</span></span>
<span id="cb57-22"><a href="id_03_model_training.html#cb57-22" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb57-23"><a href="id_03_model_training.html#cb57-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb57-24"><a href="id_03_model_training.html#cb57-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb57-25"><a href="id_03_model_training.html#cb57-25" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb57-26"><a href="id_03_model_training.html#cb57-26" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost default models</span></span>
<span id="cb57-27"><a href="id_03_model_training.html#cb57-27" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb57-28"><a href="id_03_model_training.html#cb57-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb57-29"><a href="id_03_model_training.html#cb57-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb57-30"><a href="id_03_model_training.html#cb57-30" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb57-31"><a href="id_03_model_training.html#cb57-31" aria-hidden="true" tabindex="-1"></a><span class="co"># DRF</span></span>
<span id="cb57-32"><a href="id_03_model_training.html#cb57-32" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb57-33"><a href="id_03_model_training.html#cb57-33" aria-hidden="true" tabindex="-1"></a><span class="co"># XRT</span></span>
<span id="cb57-34"><a href="id_03_model_training.html#cb57-34" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb57-35"><a href="id_03_model_training.html#cb57-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner all</span></span>
<span id="cb57-36"><a href="id_03_model_training.html#cb57-36" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb57-37"><a href="id_03_model_training.html#cb57-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner final</span></span>
<span id="cb57-38"><a href="id_03_model_training.html#cb57-38" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb57-39"><a href="id_03_model_training.html#cb57-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner deep learning</span></span>
<span id="cb57-40"><a href="id_03_model_training.html#cb57-40" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb57-41"><a href="id_03_model_training.html#cb57-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner GBM</span></span>
<span id="cb57-42"><a href="id_03_model_training.html#cb57-42" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb57-43"><a href="id_03_model_training.html#cb57-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner XGBoost</span></span>
<span id="cb57-44"><a href="id_03_model_training.html#cb57-44" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb57-45"><a href="id_03_model_training.html#cb57-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-46"><a href="id_03_model_training.html#cb57-46" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb57-47"><a href="id_03_model_training.html#cb57-47" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">&quot;./other_data/cell_penetration/whole_data_set/cv_res.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb58-1"><a href="id_03_model_training.html#cb58-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/cell_penetration/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb58-2"><a href="id_03_model_training.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">statistical_testing</span>(data,</span>
<span id="cb58-3"><a href="id_03_model_training.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric_vec =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F_1&quot;</span>, <span class="st">&quot;Balanced accuracy&quot;</span>),</span>
<span id="cb58-4"><a href="id_03_model_training.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">decreasing_vec =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb58-5"><a href="id_03_model_training.html#cb58-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="htmlwidget-05fdbbbea05e70f08311" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-05fdbbbea05e70f08311">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 59","GBM grid model 15","GBM grid model 53","XGBoost grid model 14","GBM grid model 46","GBM grid model 66","GBM grid model 60","GBM grid model 67","GBM grid model 35","XGBoost grid model 88","GBM grid model 8","Neural network grid model 75","XGBoost grid model 42","XGBoost grid model 4","GBM grid model 24","Neural network grid model 63","GBM grid model 47","GBM grid model 14","Super learner final","Neural network grid model 80","Super learner all models","GBM grid model 21","Super learner neural network","GBM grid model 80","Neural network grid model 17","XGBoost grid model 92","GBM grid model 41","GBM grid model 74","GBM grid model 88","GBM grid model 23","GBM model 5","GBM grid model 1","Neural network grid model 20","Neural network grid model 45","XGBoost grid model 2","GBM grid model 55","Super learner GBM","GBM grid model 84","Neural network grid model 84","XGBoost grid model 46","GBM grid model 20","GBM grid model 83","GBM grid model 30","Neural network grid model 43","GBM grid model 4","GBM grid model 40","Neural network grid model 87","XGBoost grid model 21","Neural network grid model 14","XGBoost grid model 20","GBM grid model 71","GBM grid model 61","Neural network grid model 31","GBM grid model 92","GBM grid model 93","GBM grid model 82","GBM grid model 98","GBM grid model 31","Neural network grid model 72","XGBoost grid model 91","XGBoost grid model 54","XGBoost grid model 23","XGBoost grid model 41","Neural network grid model 70","XGBoost grid model 13","GBM grid model 34","Neural network grid model 100","Neural network grid model 24","Neural network grid model 3","GBM grid model 65","GBM grid model 57","Neural network grid model 11","GBM grid model 72","Neural network grid model 6","GBM grid model 10","GBM grid model 2","GBM grid model 32","GBM grid model 38","GBM grid model 95","Neural network grid model 79","GBM grid model 75","GBM grid model 89","Neural network grid model 62","GBM grid model 87","GBM grid model 5","GBM grid model 12","XGBoost grid model 15","Neural network grid model 77","GBM grid model 17","GBM grid model 63","XGBoost grid model 81","GBM grid model 78","GBM grid model 49","GBM grid model 13","Neural network grid model 16","Neural network grid model 98","GBM grid model 62","GBM grid model 26","GBM grid model 70","Neural network grid model 26","XGBoost model 3","GBM model 1","GBM grid model 45","Super learner XGBoost","GBM grid model 79","XGBoost grid model 89","XGBoost grid model 75","Neural network grid model 56","GBM grid model 97","XGBoost grid model 73","GBM grid model 42","Neural network grid model 22","Neural network grid model 34","Neural network grid model 15","Neural network grid model 33","Neural network grid model 96","GBM grid model 91","GBM grid model 76","GBM grid model 58","GBM grid model 64","XGBoost grid model 8","GBM grid model 25","GBM grid model 86","GBM grid model 6","Neural network grid model 67","GBM grid model 50","Neural network grid model 54","Neural network grid model 92","XGBoost grid model 78","XGBoost grid model 9","Neural network grid model 25","GBM grid model 51","XGBoost grid model 34","XRT model","GBM grid model 18","XGBoost grid model 52","GBM grid model 9","Neural network grid model 28","Neural network grid model 82","Neural network grid model 41","GBM grid model 48","Neural network grid model 65","Neural network grid model 53","GBM grid model 73","XGBoost grid model 1","Neural network grid model 94","Neural network grid model 9","XGBoost grid model 45","GBM grid model 54","GBM grid model 16","Neural network grid model 51","XGBoost grid model 68","Neural network grid model 90","XGBoost grid model 33","XGBoost grid model 50","Neural network grid model 93","Neural network grid model 78","GBM grid model 69","XGBoost grid model 6","Neural network grid model 61","Neural network grid model 59","GBM model 4","Neural network grid model 83","GBM grid model 27","XGBoost grid model 97","Neural network grid model 2","Neural network grid model 74","Neural network grid model 38","XGBoost model 1","XGBoost grid model 22","Neural network grid model 47","Neural network grid model 4","XGBoost grid model 71","XGBoost grid model 44","GBM grid model 96","XGBoost grid model 59","XGBoost model 2","Neural network grid model 36","XGBoost grid model 60","XGBoost grid model 98","XGBoost grid model 49","Neural network grid model 88","XGBoost grid model 38","Neural network grid model 12","XGBoost grid model 11","XGBoost grid model 36","Neural network grid model 73","Neural network grid model 30","XGBoost grid model 86","Neural network grid model 64","GBM grid model 19","GBM grid model 44","GBM grid model 77","Neural network grid model 69","Neural network grid model 27","GBM grid model 39","Neural network grid model 8","XGBoost grid model 27","Neural network grid model 91","XGBoost grid model 94","GBM model 2","GBM grid model 11","XGBoost grid model 77","XGBoost grid model 18","Neural network grid model 81","XGBoost grid model 80","GBM grid model 28","XGBoost grid model 3","XGBoost grid model 58","GBM grid model 94","Neural network grid model 55","XGBoost grid model 25","XGBoost grid model 85","GBM grid model 52","Neural network grid model 32","GBM grid model 43","XGBoost grid model 82","XGBoost grid model 28","GBM grid model 22","XGBoost grid model 51","GBM grid model 33","XGBoost grid model 84","Neural network grid model 46","Neural network grid model 57","DRF model","Neural network grid model 19","GBM grid model 7","XGBoost grid model 30","XGBoost grid model 87","Neural network grid model 10","XGBoost grid model 79","GBM grid model 100","Neural network grid model 76","GBM model 3","XGBoost grid model 67","GBM grid model 36","GBM grid model 3","Neural network grid model 71","Neural network grid model 39","XGBoost grid model 17","GBM grid model 29","Neural network grid model 58","XGBoost grid model 76","Neural network grid model 52","XGBoost grid model 19","GBM grid model 37","XGBoost grid model 95","Neural network grid model 85","XGBoost grid model 64","XGBoost grid model 16","GBM grid model 56","Neural network grid model 13","XGBoost grid model 39","Neural network grid model 21","XGBoost grid model 37","XGBoost grid model 47","XGBoost grid model 5","XGBoost grid model 70","GBM grid model 85","Neural network grid model 44","XGBoost grid model 53","Neural network grid model 97","XGBoost grid model 24","Neural network grid model 35","XGBoost grid model 63","XGBoost grid model 55","XGBoost grid model 35","XGBoost grid model 66","Neural network grid model 89","GBM grid model 81","Neural network grid model 29","XGBoost grid model 61","Neural network grid model 7","GBM grid model 68","GBM grid model 99","XGBoost grid model 69","XGBoost grid model 12","Neural network grid model 99","Neural network grid model 50","Neural network grid model 42","XGBoost grid model 7","Neural network grid model 86","XGBoost grid model 74","Neural network grid model 60","XGBoost grid model 93","GBM grid model 90","XGBoost grid model 48","Neural network grid model 18","Neural network grid model 66","Neural network grid model 5","Neural network grid model 37","Neural network grid model 23","Neural network grid model 49","Neural network grid model 68","Neural network grid model 95","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 65","XGBoost grid model 56","XGBoost grid model 57"],[null,0.9698,0.6678,0.7092,0.5708,0.8041,0.5433,0.4429,0.6678,0.7092,0.5708,0.5708,0.5118,0.7092,0.6678,0.7092,0.7529,0.5708,0.4162,0.5118,0.3947,0.8556,0.2328,0.3603,0.4162,0.6053,0.5433,0.8041,0.4429,0.6266,0.7092,0.6053,0.4429,0.5118,0.5433,0.6266,0.3603,0.216,0.4162,0.3603,0.5118,0.1902,0.6053,0.5433,0.7529,0.5708,0.6678,0.6053,0.1902,0.3433,0.5433,0.7529,0.6678,0.0423,0.3433,0.1485,0.4854,0.6053,0.6266,0.2778,0.0847,0.6266,0.3603,0.4429,0.6053,0.6266,0.3433,0.5708,0.5433,0.9126,0.6266,0.1772,0.6678,0.3433,0.3179,0.6266,0.5433,0.7529,0.3433,0.3179,0.6053,0.0988,0.5118,0.1902,0.2778,0.6266,0.216,0.3603,0.6266,0.5708,0.5433,0.5433,0.6266,0.8041,0.2094,0.6266,0.5708,0.7529,0.5708,0.5708,0.4854,0.6266,0.8556,0.2902,0.2094,0.6053,0.1129,0.1485,0.7092,0.1772,0.6053,0.5118,0.5118,0.2534,0.2902,0.3603,0.1902,0.4429,0.6266,0.6266,0.1485,0.5118,0.1485,0.6266,0.3433,0.8556,0.1641,0.2778,0.1902,0.3179,0.2902,0.7092,0.1772,0.6678,0.5708,0.4162,0.4429,0.4162,0.2534,0.2094,0.4162,0.216,0.2534,0.7529,0.3603,0.1641,0.5118,0.1485,0.4854,0.4162,0.3433,0.3603,0.4429,0.1412,0.3603,0.2902,0.2328,0.4162,0.5118,0.5118,0.1902,0.5118,0.2902,0.5433,0.1485,0.1485,0.5118,0.2902,0.4162,0.2534,0.3947,0.3603,0.216,0.2328,0.1485,0.216,0.4162,0.2328,0.216,0.216,0.3603,0.2902,0.4162,0.216,0.3947,0.216,0.3433,0.1412,0.2902,0.3947,0.6053,0.4854,0.4162,0.2328,0.2328,0.4429,0.3603,0.3603,0.3179,0.2902,0.4854,0.5708,0.0988,0.3179,0.2902,0.4162,0.6266,0.2778,0.1772,0.4162,0.1902,0.216,0.1902,0.2902,0.1129,0.4429,0.1772,0.2328,0.2778,0.3603,0.5433,0.0988,0.2778,0.2328,0.5708,0.3179,0.2534,0.2328,0.216,0.2902,0.2534,0.4429,0.0847,0.4429,0.0923,0.3603,0.3947,0.1412,0.0626,0.3947,0.4429,0.2094,0.1641,0.2534,0.2902,0.3433,0.1485,0.1641,0.216,0.1485,0.3947,0.1412,0.2094,0.3433,0.1641,0.1772,0.1485,0.2094,0.1412,0.1322,0.2534,0.2094,0.2902,0.1412,0.1641,0.3179,0.3179,0.216,0.1485,0.1902,0.2778,0.2902,0.1485,0.2534,0.1129,0.2328,0.2778,0.1485,0.1322,0.0923,0.0923,0.1485,0.1485,0.0988,0.216,0.1772,0.1485,0.1485,0.1772,0.0923,0.1485,0.0758,0.0515,0.0988,0.0847,0.0034,0.0034,0.0034,0.0034,0.0034],[0.7499,0.5261,0.8825,0.6012,0.8015,0.6435,0.7745,0.6012,0.4054,0.5261,0.5261,0.9698,0.6435,0.4986,0.3988,0.5261,0.5654,0.8825,0.4986,0.5654,0.4986,0.5261,0.7237,0.5861,0.6435,0.5464,0.4839,0.4054,0.4986,0.6972,0.4054,0.3877,0.5464,0.5261,0.3877,0.4054,0.4222,0.7745,0.3562,0.4839,0.6012,0.5861,0.4839,0.6435,0.3781,0.5654,0.4986,0.5187,0.6012,0.4698,0.4362,0.3781,0.5261,null,0.3562,0.6012,0.4222,0.3988,0.4698,0.5464,0.8282,0.4839,0.6012,0.5187,0.3694,0.4362,0.5861,0.4553,0.3471,0.3694,0.3781,0.4698,0.3877,0.4698,0.3694,0.3694,0.3694,0.3466,0.3562,0.4839,0.3562,0.6435,0.4553,0.4553,0.4986,0.3471,0.6435,0.3877,0.3562,0.4222,0.3877,0.5654,0.3466,0.3694,0.3694,0.3877,0.4362,0.4698,0.4839,0.4054,0.4054,0.5261,0.3562,0.3988,0.5261,0.3562,0.3988,0.4362,0.3091,0.3781,0.3694,0.3313,0.2995,0.3694,0.4054,0.3456,0.3694,0.3471,0.3988,0.4054,0.5187,0.3562,0.4362,0.3091,0.3427,0.3988,0.3781,0.3562,0.3456,0.3694,0.2906,0.3781,0.3562,0.3781,0.3427,0.3694,0.3562,0.3466,0.2995,0.3562,0.4698,0.3562,0.3694,0.3562,0.3466,0.3877,0.3471,0.3471,0.2906,0.5261,0.4222,0.3471,0.3562,0.3466,0.3313,0.3694,0.3471,0.3313,0.3466,0.3694,0.3196,0.3562,0.3471,0.3091,0.3091,0.3781,0.3562,0.3427,0.3471,0.3427,0.3091,0.2906,0.2995,0.3471,0.4054,0.3456,0.3196,0.3562,0.2995,0.3091,0.3091,0.3456,0.2906,0.3091,0.3091,0.2995,0.2906,0.3456,0.3091,0.3456,0.3196,0.2906,0.3988,0.2995,0.3196,0.4362,0.3091,0.2906,0.3091,0.3313,0.2906,0.3471,0.2906,0.3466,0.3091,0.2906,0.3694,0.2906,0.2906,0.2906,0.3562,0.2906,0.2995,0.3694,0.2906,0.3091,0.3466,0.2906,0.3456,0.2906,0.2906,0.4054,0.2906,0.2995,0.3877,0.2906,0.3694,0.2906,0.2906,0.3456,0.2906,0.2906,0.2995,0.2906,0.2906,0.3313,0.2906,0.2906,0.2906,0.3466,0.3466,0.2995,0.2995,0.2906,0.2906,0.2906,0.2995,0.3196,0.2906,0.2906,0.2906,0.3427,0.2906,0.2906,0.2995,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2583,0.2906,0.2906,0.2906,0.2906,0.2906,0.2583,0.2906,0.2906,0.2906,0.2702,0.2583,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.1649,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.2906,0.0055,0.0055,0.0055,0.0055,0.0055],[1,0.7942,0.873,0.8867,0.9919,0.8479,0.9365,0.8867,0.7942,0.6482,0.7942,0.9365,0.7596,0.7218,0.6482,0.7596,0.6785,0.9642,0.9115,0.8867,0.9115,0.5602,0.8867,0.7942,0.8867,0.7474,0.6258,0.7596,0.7942,0.7876,0.5746,0.6079,0.7218,0.7596,0.7596,0.6785,0.7218,0.8479,0.7059,0.671,0.7218,1,0.6785,0.7596,0.6079,0.8867,0.6482,0.6433,0.7942,0.6433,0.7596,0.671,0.6482,null,0.6482,0.8479,0.5746,0.5746,0.5746,0.6433,0.873,0.6079,0.6785,0.6079,0.5218,0.5746,0.6482,0.5863,0.5933,0.5602,0.5602,0.6433,0.7218,0.5863,0.5746,0.5933,0.6482,0.5218,0.6258,0.7942,0.6785,0.7942,0.5863,0.5863,0.5933,0.6258,0.7942,0.5933,0.5863,0.5746,0.5511,0.6785,0.5218,0.5285,0.6258,0.5746,0.6482,0.5511,0.5602,0.5933,0.5602,0.6785,0.5377,0.5377,0.6482,0.5285,0.7474,0.6785,0.5218,0.6433,0.5746,0.5218,0.5218,0.5746,0.5285,0.5285,0.5602,0.5218,0.5746,0.5218,0.671,0.5602,0.6258,0.5218,0.5377,0.5746,0.5218,0.5285,0.5218,0.5285,0.5511,0.5746,0.5602,0.5602,0.5285,0.5285,0.6079,0.5218,0.5933,0.5285,0.7218,0.5218,0.5285,0.5746,0.5746,0.5746,0.5218,0.5602,0.5602,0.5933,0.6079,0.5218,0.5377,0.5863,0.5218,0.5863,0.5602,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.6482,0.5218,0.5218,0.5218,0.5602,0.5218,0.5218,0.5511,0.5218,0.6785,0.5218,0.5218,0.5218,0.5218,0.5933,0.5285,0.5511,0.5285,0.5218,0.5218,0.5218,0.5218,0.5933,0.5218,0.5218,0.5218,0.5218,0.5285,0.5218,0.5602,0.5602,0.5218,0.5218,0.5218,0.5746,0.5218,0.5218,0.5218,0.5377,0.5218,0.5218,0.5285,0.5511,0.5218,0.5218,0.5218,0.5218,0.5218,0.5377,0.5218,0.5218,0.5218,0.5218,0.5285,0.5218,0.5218,0.5285,0.5218,0.5218,0.5285,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5602,0.5218,0.5218,0.5602,0.5377,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5602,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,0.5218,null,null,null,null,null],[0.7578,0.5495,0.8854,0.7578,0.8041,0.6157,0.777,0.5495,0.5179,0.6157,0.5878,0.9698,0.7138,0.5179,0.4414,0.5179,0.5495,0.777,0.5878,0.7578,0.5878,0.6157,0.8854,0.6026,0.9698,0.5495,0.3923,0.4829,0.5878,0.6157,0.4467,0.4467,0.6026,0.5878,0.5878,0.4989,0.5385,0.777,0.5179,0.6026,0.7578,0.777,0.4905,0.6632,0.4905,0.5878,0.5179,0.6026,0.7138,0.4829,0.5495,0.4905,0.6157,null,0.4989,0.6632,0.4239,0.4414,0.4989,0.5153,0.8854,0.5153,0.6632,0.5385,0.4829,0.5179,0.4905,0.4905,0.5179,0.4989,0.3923,0.7578,0.4829,0.6026,0.4327,0.4467,0.4829,0.3923,0.4071,0.6026,0.3629,0.7138,0.5153,0.5153,0.5179,0.385,0.7578,0.4327,0.4414,0.4239,0.5179,0.6157,0.3923,0.4327,0.4467,0.385,0.5179,0.5878,0.5153,0.4989,0.4989,0.5495,0.3762,0.3923,0.6632,0.4071,0.4905,0.6157,0.3629,0.4414,0.385,0.3762,0.3762,0.4989,0.4989,0.3629,0.4829,0.3629,0.4327,0.4327,0.5385,0.3923,0.4467,0.3629,0.385,0.4905,0.4905,0.385,0.3762,0.385,0.3629,0.4905,0.3923,0.385,0.3629,0.385,0.4239,0.3629,0.3762,0.4467,0.5495,0.4467,0.4829,0.385,0.385,0.4989,0.3629,0.385,0.4327,0.5495,0.5179,0.385,0.4467,0.3923,0.4071,0.4414,0.3762,0.3629,0.3629,0.4071,0.3762,0.3762,0.3629,0.3629,0.3511,0.4414,0.3762,0.3629,0.3629,0.3629,0.3629,0.3629,0.3511,0.3629,0.4467,0.3762,0.3629,0.3762,0.3511,0.3629,0.3629,0.385,0.3511,0.3629,0.3629,0.3511,0.3629,0.4327,0.3629,0.3629,0.3629,0.3511,0.4414,0.3629,0.385,0.5179,0.3511,0.3511,0.3629,0.3629,0.3511,0.385,0.3511,0.3511,0.3629,0.3511,0.4414,0.3511,0.3629,0.3511,0.385,0.3511,0.3511,0.4239,0.3629,0.3511,0.3629,0.3511,0.4071,0.3511,0.3511,0.4829,0.3629,0.3511,0.4327,0.3511,0.385,0.3511,0.3511,0.3629,0.3511,0.3511,0.3762,0.3629,0.3511,0.4467,0.3629,0.3511,0.3629,0.385,0.3629,0.3511,0.3762,0.3511,0.3511,0.3511,0.3629,0.3629,0.3511,0.3511,0.3511,0.3762,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3762,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.303,0.3511,0.3511,0.3511,0.3511,0.3136,0.3511,0.3629,0.3629,0.3629,0.3511,0.3511,0.3511,0.228,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.3511,0.0113,0.0113,0.0113,0.0113,0.0113],[1,2,36,22,64,10,65,61,30,9,60,87,52,33,20,46,8,34,91,81,97,21,161,142,129,40,42,44,69,160,4,55,107,106,70,14,105,192,83,112,56,212,25,147,23,67,32,43,217,157,62,7,31,270,126,222,80,50,78,196,284,29,116,108,66,35,137,59,120,18,24,228,48,136,119,12,82,13,110,213,57,293,99,195,132,28,277,115,17,51,73,211,58,5,206,45,54,6,63,123,90,68,3,148,290,74,289,221,16,231,27,100,95,199,197,153,191,85,38,47,265,37,251,26,127,15,256,181,245,131,155,11,250,151,72,84,79,109,156,188,128,175,219,19,166,242,98,280,39,102,183,133,140,279,117,180,237,135,96,113,258,75,193,41,247,273,94,202,93,261,149,139,218,226,252,262,92,176,225,223,164,229,118,172,125,248,159,268,174,170,53,104,101,240,194,143,130,124,184,145,86,49,267,182,187,122,71,233,241,114,234,216,167,158,255,77,278,177,287,121,76,294,201,238,236,152,179,168,162,209,214,89,257,103,271,134,138,282,272,198,88,220,244,215,141,111,243,210,185,227,144,253,204,169,230,203,208,249,207,260,163,190,154,235,266,146,171,165,246,205,189,150,276,173,232,186,178,259,254,283,297,263,224,269,200,239,275,274,264,288,281,291,286,285,295,313,311,312,314.5,314.5],[2,8,6,14,3,20,13,15,26,32,16,11,25,33,38,30,47,29,23.5,34,23.5,55,5,9,21,45,41,44,43,12,68,51,35,36,54,74,42,10,48,37,53,7,71,39,76,57,85,69,19,28,65,90,94,1,56,18,59,72,70,31,4,79,58,62,80,83,61,91,73,109,97,27,93,75,60,103,78,104.5,77,46,100,17,87,50,86,110,22,84,116,108,99,52,104.5,119,63,121,117,126,106,98,102,111,140,89,40,115,49,81,136,64,144,127,124,101,82,114,88,120,139,161,66,150,67,167,123,171,95,113,96,132,128,177,92,122,165,159,168,153,151,138,142,145,118,188,131,133,173,107,183,162,146,154,163,112,155,158,125,164,166,172,134,175,148,197,129,135,208,160,185,130,187,184,147,141,137,143,194,186,156,149,182,176,200,190,206,157,193,152,189,196,235,217,216,170,192,201,210,212,202,203,222,242,169,195,219,218,237,179,180,225,207,199,213,220,209,246,174,221,181,244,259,178,226,205,204,245,228,236,227,239,224,262,215,260,211,253,251,198,214,229,278,234,223,248,264,271,231,241,258,238,266,232,250,261,243,252,249,240,247,255,267,265,272,263,233,285,277,284,254,270,283,295,256,291,269,287,294,268,275,273,257,274,292,279,300,288,282,281,290,280,276,293,297,301,299,311,312.5,312.5,314.5,314.5],[5,16,4,10,9,27,14,15,25,34,20,7,23,33,35,31,41,46,21.5,26,21.5,42,3,13,11,47,49,43,29,8,51,40,28,24,48,64,37,12,52,45,67,6,70,30,83,71,54,66,17,39,75,78,57,1,44,18,76,90,84,32,2,92,65,68,79,101,56,82,61,86,98,50,104,72,88,111,85,113.5,62,36,91,19,81,53,69,112,38,80,122,109,107,63,113.5,128,59,99,102,118,124,106,97,120,137,89,55,115,58,60,159,73,139,116,121,77,117,103,108,146,161,123,74,140,87,141,133,176,94,110,96,131,125,185,105,165,152,150,164,147,129,127,172,126,145,188,144,95,149,93,198,163,143,157,160,100,187,142,132,154,184,170,138,195,136,191,135,119,162,156,193,130,155,175,153,148,151,134,209,183,169,189,186,177,210,190,201,158,199,168,178,182,225,213,217,174,179,211,204,216,181,221,233,244,167,200,173,229,242,208,194,235,171,180,215,214,166,251,197,219,202,245,255,192,207,205,220,228,226,231,252,206,212,263,234,259,196,250,256,222,203,239,266,240,227,230,261,273,218,262,258,241,269,232,243,260,238,246,254,224,249,223,268,264,276,237,253,285,278,280,274,270,271,294,248,286,272,290,292,265,283,267,257,277,288,279,298,287,275,281,284,282,291,293,300,303,304,311,312.5,312.5,314,315],[3,10,7,14,2,23,13,17,28,34,18,9,27,33,42,29,44,32,24.5,20,24.5,49,4,11,16,46,48,54,45,15,74,52,30,38,51,72,41,12,43,36,55,6,67,31,68,56,86,81,8,37,62,91,88,1,53,22,66,76,61,35,5,97,59,69,82,90,60,87,65,108,104,19,84,47,64,107,89,109.5,96,50,101,21,83,57,70,113,26,93,120,112,103,58,109.5,139,63,126,119,143,100,71,111,105,138,94,40,121,39,79,135,78,148,117,125,92,73,99,85,127,141,149,75,154,80,168,128,158,77,122,102,146,133,180,106,115,166,164,151,153,131,116,134,130,95,187,142,123,174,114,176,170,132,160,145,118,156,137,124,167,177,169,98,189,159,208,136,129,192,140,191,144,175,171,157,162,147,155,206,163,161,165,195,150,204,182,203,172,188,152,202,196,239,219,222,173,193,205,217,214,200,199,230,248,183,210,209,221,247,179,184,228,190,207,212,218,185,260,186,227,178,241,263,194,225,211,201,237,233,232,226,216,231,270,181,267,215,259,254,198,213,238,282,220,224,234,262,275,240,223,242,245,273,236,257,265,244,255,251,253,264,229,271,256,274,250,243,285,279,283,246,278,281,296,258,290,276,289,295,268,252,249,261,269,293,272,302,291,286,284,288,277,280,292,297,301,298,311,312.5,312.5,314.5,314.5],[11,36,53,60,78,80,105,108,109,109,114,114,127,132,135,136,140,141,160.5,161,166.5,167,173,175,177,178,180,185,186,195,197,198,200,204,223,224,225,226,226,230,231,231,233,247,250,251,257,259,261,261,264,266,270,273,279,280,281,288,293,294,295,297,298,307,307,309,314,319,319,321,323,324,329,330,331,333,334,340.5,345,345,349,350,350,355,357,363,363,372,375,380,382,384,385.5,391,391,391,392,393,393,398,400,404,418,420,425,425,435,441,446,446,458,460,465,469,469,469,472,478,479,480,480,481,485,502,511,520,522,526,539,540,541,553,553,553,555,557,562,562,567,569,576,576,577,582,583,593,594,594,596,597,604,604,608,609,615,617,618,620,623,624,628,634,636,637,647,656,656,658,662,665,666,669,675,677,687,694,701,708,711,726,727,732,732,734,735,735,739,740,743,744,752,753,756,757,758,760,761,766,767,768,771,783,786,787,788,790,797,799,799,802,802,802,807,810,815,834,835,844,848,851,853,858,859,859,861,862,866,867,867,870,881,884,887,889,893,896,899,900,902,904,914,914,918,927,928,930,932,936,943,951,952,953,954,955,955,956,962,966,967,967,969,975,976,985,995,1001,1005,1012,1020,1023,1024,1035,1038,1040,1049,1052,1059,1060,1064,1072,1072,1083,1097,1099,1100,1105,1118,1120,1126,1127,1128,1169,1180,1190,1196,1246,1248.5,1249.5,1257.5,1258.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb59"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb59-1"><a href="id_03_model_training.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># statistical_testing(data, metric_vec=c(&#39;Log loss&#39;, &#39;MCC&#39;, &#39;F_1&#39;, &#39;Balanced accuracy&#39;),</span></span>
<span id="cb59-2"><a href="id_03_model_training.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                     decreasing_vec=c(FALSE, TRUE, TRUE, TRUE),</span></span>
<span id="cb59-3"><a href="id_03_model_training.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                     output_path=&#39;./other_data/cell_penetration/whole_data_set/cv_res_statistical_testing.csv&#39;)</span></span></code></pre></div>
</div>
<div id="final-reduced-sl-1" class="section level3 hasAnchor" number="3.4.8">
<h3><span class="header-section-number">3.4.8</span> Final reduced SL<a href="id_03_model_training.html#final-reduced-sl-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb60-1"><a href="id_03_model_training.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.init</span>(<span class="at">nthreads =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb60-2"><a href="id_03_model_training.html#cb60-2" aria-hidden="true" tabindex="-1"></a>model_path <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/cell_penetration/whole_data_set/superlearner_iter_1&quot;</span></span>
<span id="cb60-3"><a href="id_03_model_training.html#cb60-3" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(model_path)</span>
<span id="cb60-4"><a href="id_03_model_training.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp.RData&quot;</span>)</span>
<span id="cb60-5"><a href="id_03_model_training.html#cb60-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/cell_penetration/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb60-6"><a href="id_03_model_training.html#cb60-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(model<span class="sc">@</span>model<span class="sc">$</span>metalearner_model<span class="sc">@</span>model<span class="sc">$</span>coefficients_table)[<span class="fu">c</span>(<span class="st">&quot;names&quot;</span>, <span class="st">&quot;standardized_coefficients&quot;</span>)][<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb60-7"><a href="id_03_model_training.html#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="id_03_model_training.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)) {</span>
<span id="cb60-9"><a href="id_03_model_training.html#cb60-9" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> df<span class="sc">$</span>names[i]</span>
<span id="cb60-10"><a href="id_03_model_training.html#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;DeepLearning_model&quot;</span>)) {</span>
<span id="cb60-11"><a href="id_03_model_training.html#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dl_grid)) {</span>
<span id="cb60-12"><a href="id_03_model_training.html#cb60-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> dl_grid[[j]]) <span class="cf">break</span></span>
<span id="cb60-13"><a href="id_03_model_training.html#cb60-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-14"><a href="id_03_model_training.html#cb60-14" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, j)</span>
<span id="cb60-15"><a href="id_03_model_training.html#cb60-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;GBM_model&quot;</span>)) {</span>
<span id="cb60-16"><a href="id_03_model_training.html#cb60-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(gbm_grid)) {</span>
<span id="cb60-17"><a href="id_03_model_training.html#cb60-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> gbm_grid[[j]]) <span class="cf">break</span></span>
<span id="cb60-18"><a href="id_03_model_training.html#cb60-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-19"><a href="id_03_model_training.html#cb60-19" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, j)</span>
<span id="cb60-20"><a href="id_03_model_training.html#cb60-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;XGBoost_model&quot;</span>)) {</span>
<span id="cb60-21"><a href="id_03_model_training.html#cb60-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(xgboost_grid)) {</span>
<span id="cb60-22"><a href="id_03_model_training.html#cb60-22" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> xgboost_grid[[j]]) <span class="cf">break</span></span>
<span id="cb60-23"><a href="id_03_model_training.html#cb60-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb60-24"><a href="id_03_model_training.html#cb60-24" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, j)</span>
<span id="cb60-25"><a href="id_03_model_training.html#cb60-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;DRF&quot;</span>)) {</span>
<span id="cb60-26"><a href="id_03_model_training.html#cb60-26" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="st">&quot;DRF model&quot;</span></span>
<span id="cb60-27"><a href="id_03_model_training.html#cb60-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;XRT&quot;</span>)) {</span>
<span id="cb60-28"><a href="id_03_model_training.html#cb60-28" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="st">&quot;XRT model&quot;</span></span>
<span id="cb60-29"><a href="id_03_model_training.html#cb60-29" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb60-30"><a href="id_03_model_training.html#cb60-30" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">strsplit</span>(name, <span class="st">&quot;_&quot;</span>)[[<span class="dv">1</span>]], <span class="at">collapse =</span> <span class="st">&quot; model &quot;</span>)</span>
<span id="cb60-31"><a href="id_03_model_training.html#cb60-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-32"><a href="id_03_model_training.html#cb60-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-33"><a href="id_03_model_training.html#cb60-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-34"><a href="id_03_model_training.html#cb60-34" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> df<span class="sc">$</span>names</span>
<span id="cb60-35"><a href="id_03_model_training.html#cb60-35" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df, data[<span class="st">&quot;Balanced accuracy mean&quot;</span>], <span class="at">by =</span> <span class="st">&quot;row.names&quot;</span>)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb60-36"><a href="id_03_model_training.html#cb60-36" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>standardized_coefficients <span class="sc">&gt;</span> <span class="dv">0</span>, ]</span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb61-1"><a href="id_03_model_training.html#cb61-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(names, standardized_coefficients), <span class="at">y =</span> standardized_coefficients, <span class="at">fill =</span> <span class="st">`</span><span class="at">Balanced accuracy mean</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb61-2"><a href="id_03_model_training.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb61-3"><a href="id_03_model_training.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>, <span class="at">n.breaks =</span> <span class="dv">4</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">1.00</span>)) <span class="sc">+</span></span>
<span id="cb61-4"><a href="id_03_model_training.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, <span class="st">`</span><span class="at">Balanced accuracy mean</span><span class="st">`</span>)), <span class="at">nudge_y =</span> <span class="sc">-</span><span class="fl">0.0025</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-5"><a href="id_03_model_training.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, standardized_coefficients)), <span class="at">nudge_y =</span> <span class="fl">0.0035</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb61-6"><a href="id_03_model_training.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb61-7"><a href="id_03_model_training.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(df<span class="sc">$</span>standardized_coefficients) <span class="sc">+</span> <span class="fl">0.006</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb61-8"><a href="id_03_model_training.html#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb61-9"><a href="id_03_model_training.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb61-10"><a href="id_03_model_training.html#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb61-11"><a href="id_03_model_training.html#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb61-12"><a href="id_03_model_training.html#cb61-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb61-13"><a href="id_03_model_training.html#cb61-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb61-14"><a href="id_03_model_training.html#cb61-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb61-15"><a href="id_03_model_training.html#cb61-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb61-16"><a href="id_03_model_training.html#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb61-17"><a href="id_03_model_training.html#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="st">&quot;pt&quot;</span>),</span>
<span id="cb61-18"><a href="id_03_model_training.html#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb61-19"><a href="id_03_model_training.html#cb61-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb61-20"><a href="id_03_model_training.html#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb61-21"><a href="id_03_model_training.html#cb61-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb61-22"><a href="id_03_model_training.html#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb61-23"><a href="id_03_model_training.html#cb61-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.5</span>)</span>
<span id="cb61-24"><a href="id_03_model_training.html#cb61-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb61-25"><a href="id_03_model_training.html#cb61-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;Balanced accuracy&quot;</span>)) <span class="sc">+</span></span>
<span id="cb61-26"><a href="id_03_model_training.html#cb61-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-27"><a href="id_03_model_training.html#cb61-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Coefficient&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-28"><a href="id_03_model_training.html#cb61-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Cell-penetration&quot;</span>)</span></code></pre></div>
<p><img src="figures/Supplementary%20Fig%204%20cpp%20super%20learner.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="toxicity-classification-1" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Toxicity (classification)<a href="id_03_model_training.html#toxicity-classification-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="model-training-2" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Model training<a href="id_03_model_training.html#model-training-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb62-1"><a href="id_03_model_training.html#cb62-1" aria-hidden="true" tabindex="-1"></a>train_tx_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb62-2"><a href="id_03_model_training.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb62-3"><a href="id_03_model_training.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  tmp[<span class="st">&quot;category&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tmp[<span class="st">&quot;category&quot;</span>])</span>
<span id="cb62-4"><a href="id_03_model_training.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;category&quot;</span></span>
<span id="cb62-5"><a href="id_03_model_training.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb62-6"><a href="id_03_model_training.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>category)</span>
<span id="cb62-7"><a href="id_03_model_training.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  samp_factors <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">mean</span>(<span class="fu">table</span>(train_set<span class="sc">$</span>category)) <span class="sc">/</span> <span class="fu">table</span>(train_set<span class="sc">$</span>category))</span>
<span id="cb62-8"><a href="id_03_model_training.html#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb62-9"><a href="id_03_model_training.html#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb62-10"><a href="id_03_model_training.html#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb62-11"><a href="id_03_model_training.html#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-12"><a href="id_03_model_training.html#cb62-12" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb62-13"><a href="id_03_model_training.html#cb62-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-14"><a href="id_03_model_training.html#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb62-15"><a href="id_03_model_training.html#cb62-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-16"><a href="id_03_model_training.html#cb62-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-17"><a href="id_03_model_training.html#cb62-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb62-18"><a href="id_03_model_training.html#cb62-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb62-19"><a href="id_03_model_training.html#cb62-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb62-20"><a href="id_03_model_training.html#cb62-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb62-21"><a href="id_03_model_training.html#cb62-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb62-22"><a href="id_03_model_training.html#cb62-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-23"><a href="id_03_model_training.html#cb62-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb62-24"><a href="id_03_model_training.html#cb62-24" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-25"><a href="id_03_model_training.html#cb62-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-26"><a href="id_03_model_training.html#cb62-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-27"><a href="id_03_model_training.html#cb62-27" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb62-28"><a href="id_03_model_training.html#cb62-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-29"><a href="id_03_model_training.html#cb62-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb62-30"><a href="id_03_model_training.html#cb62-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-31"><a href="id_03_model_training.html#cb62-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb62-32"><a href="id_03_model_training.html#cb62-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb62-33"><a href="id_03_model_training.html#cb62-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-34"><a href="id_03_model_training.html#cb62-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb62-35"><a href="id_03_model_training.html#cb62-35" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-36"><a href="id_03_model_training.html#cb62-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-37"><a href="id_03_model_training.html#cb62-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-38"><a href="id_03_model_training.html#cb62-38" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb62-39"><a href="id_03_model_training.html#cb62-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-40"><a href="id_03_model_training.html#cb62-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-41"><a href="id_03_model_training.html#cb62-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-42"><a href="id_03_model_training.html#cb62-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb62-43"><a href="id_03_model_training.html#cb62-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-44"><a href="id_03_model_training.html#cb62-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-45"><a href="id_03_model_training.html#cb62-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-46"><a href="id_03_model_training.html#cb62-46" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb62-47"><a href="id_03_model_training.html#cb62-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-48"><a href="id_03_model_training.html#cb62-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-49"><a href="id_03_model_training.html#cb62-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-50"><a href="id_03_model_training.html#cb62-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb62-51"><a href="id_03_model_training.html#cb62-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-52"><a href="id_03_model_training.html#cb62-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-53"><a href="id_03_model_training.html#cb62-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-54"><a href="id_03_model_training.html#cb62-54" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb62-55"><a href="id_03_model_training.html#cb62-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-56"><a href="id_03_model_training.html#cb62-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-57"><a href="id_03_model_training.html#cb62-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-58"><a href="id_03_model_training.html#cb62-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb62-59"><a href="id_03_model_training.html#cb62-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-60"><a href="id_03_model_training.html#cb62-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-61"><a href="id_03_model_training.html#cb62-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-62"><a href="id_03_model_training.html#cb62-62" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb62-63"><a href="id_03_model_training.html#cb62-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-64"><a href="id_03_model_training.html#cb62-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-65"><a href="id_03_model_training.html#cb62-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-66"><a href="id_03_model_training.html#cb62-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb62-67"><a href="id_03_model_training.html#cb62-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-68"><a href="id_03_model_training.html#cb62-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-69"><a href="id_03_model_training.html#cb62-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-70"><a href="id_03_model_training.html#cb62-70" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb62-71"><a href="id_03_model_training.html#cb62-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-72"><a href="id_03_model_training.html#cb62-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-73"><a href="id_03_model_training.html#cb62-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-74"><a href="id_03_model_training.html#cb62-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb62-75"><a href="id_03_model_training.html#cb62-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-76"><a href="id_03_model_training.html#cb62-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-77"><a href="id_03_model_training.html#cb62-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-78"><a href="id_03_model_training.html#cb62-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb62-79"><a href="id_03_model_training.html#cb62-79" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-80"><a href="id_03_model_training.html#cb62-80" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-81"><a href="id_03_model_training.html#cb62-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-82"><a href="id_03_model_training.html#cb62-82" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb62-83"><a href="id_03_model_training.html#cb62-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-84"><a href="id_03_model_training.html#cb62-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb62-85"><a href="id_03_model_training.html#cb62-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb62-86"><a href="id_03_model_training.html#cb62-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb62-87"><a href="id_03_model_training.html#cb62-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-88"><a href="id_03_model_training.html#cb62-88" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb62-89"><a href="id_03_model_training.html#cb62-89" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-90"><a href="id_03_model_training.html#cb62-90" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-91"><a href="id_03_model_training.html#cb62-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-92"><a href="id_03_model_training.html#cb62-92" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb62-93"><a href="id_03_model_training.html#cb62-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-94"><a href="id_03_model_training.html#cb62-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-95"><a href="id_03_model_training.html#cb62-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-96"><a href="id_03_model_training.html#cb62-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb62-97"><a href="id_03_model_training.html#cb62-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-98"><a href="id_03_model_training.html#cb62-98" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-99"><a href="id_03_model_training.html#cb62-99" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb62-100"><a href="id_03_model_training.html#cb62-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-101"><a href="id_03_model_training.html#cb62-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-102"><a href="id_03_model_training.html#cb62-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-103"><a href="id_03_model_training.html#cb62-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb62-104"><a href="id_03_model_training.html#cb62-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-105"><a href="id_03_model_training.html#cb62-105" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-106"><a href="id_03_model_training.html#cb62-106" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb62-107"><a href="id_03_model_training.html#cb62-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-108"><a href="id_03_model_training.html#cb62-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb62-109"><a href="id_03_model_training.html#cb62-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb62-110"><a href="id_03_model_training.html#cb62-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb62-111"><a href="id_03_model_training.html#cb62-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-112"><a href="id_03_model_training.html#cb62-112" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-113"><a href="id_03_model_training.html#cb62-113" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb62-114"><a href="id_03_model_training.html#cb62-114" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-115"><a href="id_03_model_training.html#cb62-115" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-116"><a href="id_03_model_training.html#cb62-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GLM</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-117"><a href="id_03_model_training.html#cb62-117" aria-hidden="true" tabindex="-1"></a>  glm <span class="ot">&lt;-</span> <span class="fu">h2o.glm</span>(</span>
<span id="cb62-118"><a href="id_03_model_training.html#cb62-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GLM&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-119"><a href="id_03_model_training.html#cb62-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">alpha =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb62-120"><a href="id_03_model_training.html#cb62-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-121"><a href="id_03_model_training.html#cb62-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-122"><a href="id_03_model_training.html#cb62-122" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-123"><a href="id_03_model_training.html#cb62-123" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;GLM&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-124"><a href="id_03_model_training.html#cb62-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-125"><a href="id_03_model_training.html#cb62-125" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb62-126"><a href="id_03_model_training.html#cb62-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-127"><a href="id_03_model_training.html#cb62-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb62-128"><a href="id_03_model_training.html#cb62-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb62-129"><a href="id_03_model_training.html#cb62-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-130"><a href="id_03_model_training.html#cb62-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-131"><a href="id_03_model_training.html#cb62-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-132"><a href="id_03_model_training.html#cb62-132" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-133"><a href="id_03_model_training.html#cb62-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-134"><a href="id_03_model_training.html#cb62-134" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb62-135"><a href="id_03_model_training.html#cb62-135" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb62-136"><a href="id_03_model_training.html#cb62-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb62-137"><a href="id_03_model_training.html#cb62-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb62-138"><a href="id_03_model_training.html#cb62-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb62-139"><a href="id_03_model_training.html#cb62-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb62-140"><a href="id_03_model_training.html#cb62-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-141"><a href="id_03_model_training.html#cb62-141" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-142"><a href="id_03_model_training.html#cb62-142" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb62-143"><a href="id_03_model_training.html#cb62-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb62-144"><a href="id_03_model_training.html#cb62-144" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb62-145"><a href="id_03_model_training.html#cb62-145" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb62-146"><a href="id_03_model_training.html#cb62-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb62-147"><a href="id_03_model_training.html#cb62-147" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb62-148"><a href="id_03_model_training.html#cb62-148" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb62-149"><a href="id_03_model_training.html#cb62-149" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;GLM&quot;</span>,</span>
<span id="cb62-150"><a href="id_03_model_training.html#cb62-150" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb62-151"><a href="id_03_model_training.html#cb62-151" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb62-152"><a href="id_03_model_training.html#cb62-152" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb62-153"><a href="id_03_model_training.html#cb62-153" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb62-154"><a href="id_03_model_training.html#cb62-154" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-155"><a href="id_03_model_training.html#cb62-155" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb62-156"><a href="id_03_model_training.html#cb62-156" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb62-157"><a href="id_03_model_training.html#cb62-157" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-158"><a href="id_03_model_training.html#cb62-158" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb62-159"><a href="id_03_model_training.html#cb62-159" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb62-160"><a href="id_03_model_training.html#cb62-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb62-161"><a href="id_03_model_training.html#cb62-161" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb62-162"><a href="id_03_model_training.html#cb62-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb62-163"><a href="id_03_model_training.html#cb62-163" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb62-164"><a href="id_03_model_training.html#cb62-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb62-165"><a href="id_03_model_training.html#cb62-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb62-166"><a href="id_03_model_training.html#cb62-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb62-167"><a href="id_03_model_training.html#cb62-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb62-168"><a href="id_03_model_training.html#cb62-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb62-169"><a href="id_03_model_training.html#cb62-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-170"><a href="id_03_model_training.html#cb62-170" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb62-171"><a href="id_03_model_training.html#cb62-171" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-172"><a href="id_03_model_training.html#cb62-172" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-173"><a href="id_03_model_training.html#cb62-173" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb62-174"><a href="id_03_model_training.html#cb62-174" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-175"><a href="id_03_model_training.html#cb62-175" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-176"><a href="id_03_model_training.html#cb62-176" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-177"><a href="id_03_model_training.html#cb62-177" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb62-178"><a href="id_03_model_training.html#cb62-178" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-179"><a href="id_03_model_training.html#cb62-179" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-180"><a href="id_03_model_training.html#cb62-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb62-181"><a href="id_03_model_training.html#cb62-181" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb62-182"><a href="id_03_model_training.html#cb62-182" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb62-183"><a href="id_03_model_training.html#cb62-183" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb62-184"><a href="id_03_model_training.html#cb62-184" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb62-185"><a href="id_03_model_training.html#cb62-185" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb62-186"><a href="id_03_model_training.html#cb62-186" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb62-187"><a href="id_03_model_training.html#cb62-187" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb62-188"><a href="id_03_model_training.html#cb62-188" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb62-189"><a href="id_03_model_training.html#cb62-189" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb62-190"><a href="id_03_model_training.html#cb62-190" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb62-191"><a href="id_03_model_training.html#cb62-191" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb62-192"><a href="id_03_model_training.html#cb62-192" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb62-193"><a href="id_03_model_training.html#cb62-193" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb62-194"><a href="id_03_model_training.html#cb62-194" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb62-195"><a href="id_03_model_training.html#cb62-195" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb62-196"><a href="id_03_model_training.html#cb62-196" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-197"><a href="id_03_model_training.html#cb62-197" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb62-198"><a href="id_03_model_training.html#cb62-198" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb62-199"><a href="id_03_model_training.html#cb62-199" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb62-200"><a href="id_03_model_training.html#cb62-200" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-201"><a href="id_03_model_training.html#cb62-201" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb62-202"><a href="id_03_model_training.html#cb62-202" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb62-203"><a href="id_03_model_training.html#cb62-203" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb62-204"><a href="id_03_model_training.html#cb62-204" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb62-205"><a href="id_03_model_training.html#cb62-205" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb62-206"><a href="id_03_model_training.html#cb62-206" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb62-207"><a href="id_03_model_training.html#cb62-207" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb62-208"><a href="id_03_model_training.html#cb62-208" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb62-209"><a href="id_03_model_training.html#cb62-209" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb62-210"><a href="id_03_model_training.html#cb62-210" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb62-211"><a href="id_03_model_training.html#cb62-211" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb62-212"><a href="id_03_model_training.html#cb62-212" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-213"><a href="id_03_model_training.html#cb62-213" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb62-214"><a href="id_03_model_training.html#cb62-214" aria-hidden="true" tabindex="-1"></a>        <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-215"><a href="id_03_model_training.html#cb62-215" aria-hidden="true" tabindex="-1"></a>        <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-216"><a href="id_03_model_training.html#cb62-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb62-217"><a href="id_03_model_training.html#cb62-217" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb62-218"><a href="id_03_model_training.html#cb62-218" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-219"><a href="id_03_model_training.html#cb62-219" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-220"><a href="id_03_model_training.html#cb62-220" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb62-221"><a href="id_03_model_training.html#cb62-221" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-222"><a href="id_03_model_training.html#cb62-222" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-223"><a href="id_03_model_training.html#cb62-223" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb62-224"><a href="id_03_model_training.html#cb62-224" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb62-225"><a href="id_03_model_training.html#cb62-225" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-226"><a href="id_03_model_training.html#cb62-226" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb62-227"><a href="id_03_model_training.html#cb62-227" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb62-228"><a href="id_03_model_training.html#cb62-228" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb62-229"><a href="id_03_model_training.html#cb62-229" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb62-230"><a href="id_03_model_training.html#cb62-230" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> deeplearning_1<span class="sc">@</span>model_ids</span>
<span id="cb62-231"><a href="id_03_model_training.html#cb62-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb62-232"><a href="id_03_model_training.html#cb62-232" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb62-233"><a href="id_03_model_training.html#cb62-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb62-234"><a href="id_03_model_training.html#cb62-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb62-235"><a href="id_03_model_training.html#cb62-235" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb62-236"><a href="id_03_model_training.html#cb62-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb62-237"><a href="id_03_model_training.html#cb62-237" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb62-238"><a href="id_03_model_training.html#cb62-238" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-239"><a href="id_03_model_training.html#cb62-239" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb62-240"><a href="id_03_model_training.html#cb62-240" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-241"><a href="id_03_model_training.html#cb62-241" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-242"><a href="id_03_model_training.html#cb62-242" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb62-243"><a href="id_03_model_training.html#cb62-243" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-244"><a href="id_03_model_training.html#cb62-244" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-245"><a href="id_03_model_training.html#cb62-245" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-246"><a href="id_03_model_training.html#cb62-246" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb62-247"><a href="id_03_model_training.html#cb62-247" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-248"><a href="id_03_model_training.html#cb62-248" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-249"><a href="id_03_model_training.html#cb62-249" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb62-250"><a href="id_03_model_training.html#cb62-250" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb62-251"><a href="id_03_model_training.html#cb62-251" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb62-252"><a href="id_03_model_training.html#cb62-252" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb62-253"><a href="id_03_model_training.html#cb62-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb62-254"><a href="id_03_model_training.html#cb62-254" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb62-255"><a href="id_03_model_training.html#cb62-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb62-256"><a href="id_03_model_training.html#cb62-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb62-257"><a href="id_03_model_training.html#cb62-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb62-258"><a href="id_03_model_training.html#cb62-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb62-259"><a href="id_03_model_training.html#cb62-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb62-260"><a href="id_03_model_training.html#cb62-260" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-261"><a href="id_03_model_training.html#cb62-261" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb62-262"><a href="id_03_model_training.html#cb62-262" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-263"><a href="id_03_model_training.html#cb62-263" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-264"><a href="id_03_model_training.html#cb62-264" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb62-265"><a href="id_03_model_training.html#cb62-265" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-266"><a href="id_03_model_training.html#cb62-266" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-267"><a href="id_03_model_training.html#cb62-267" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-268"><a href="id_03_model_training.html#cb62-268" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb62-269"><a href="id_03_model_training.html#cb62-269" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-270"><a href="id_03_model_training.html#cb62-270" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-271"><a href="id_03_model_training.html#cb62-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb62-272"><a href="id_03_model_training.html#cb62-272" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb62-273"><a href="id_03_model_training.html#cb62-273" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb62-274"><a href="id_03_model_training.html#cb62-274" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb62-275"><a href="id_03_model_training.html#cb62-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb62-276"><a href="id_03_model_training.html#cb62-276" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb62-277"><a href="id_03_model_training.html#cb62-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb62-278"><a href="id_03_model_training.html#cb62-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb62-279"><a href="id_03_model_training.html#cb62-279" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb62-280"><a href="id_03_model_training.html#cb62-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb62-281"><a href="id_03_model_training.html#cb62-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb62-282"><a href="id_03_model_training.html#cb62-282" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-283"><a href="id_03_model_training.html#cb62-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb62-284"><a href="id_03_model_training.html#cb62-284" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-285"><a href="id_03_model_training.html#cb62-285" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb62-286"><a href="id_03_model_training.html#cb62-286" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb62-287"><a href="id_03_model_training.html#cb62-287" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-288"><a href="id_03_model_training.html#cb62-288" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-289"><a href="id_03_model_training.html#cb62-289" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-290"><a href="id_03_model_training.html#cb62-290" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb62-291"><a href="id_03_model_training.html#cb62-291" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-292"><a href="id_03_model_training.html#cb62-292" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb62-293"><a href="id_03_model_training.html#cb62-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb62-294"><a href="id_03_model_training.html#cb62-294" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb62-295"><a href="id_03_model_training.html#cb62-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb62-296"><a href="id_03_model_training.html#cb62-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb62-297"><a href="id_03_model_training.html#cb62-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb62-298"><a href="id_03_model_training.html#cb62-298" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation-2" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Inner cross-validation<a href="id_03_model_training.html#inner-cross-validation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb63-1"><a href="id_03_model_training.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits.RData&quot;</span>)</span>
<span id="cb63-2"><a href="id_03_model_training.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb63-3"><a href="id_03_model_training.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb63-4"><a href="id_03_model_training.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb63-5"><a href="id_03_model_training.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity/&quot;</span>, prefix)</span>
<span id="cb63-6"><a href="id_03_model_training.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb63-7"><a href="id_03_model_training.html#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_tx_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb63-8"><a href="id_03_model_training.html#cb63-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="training-on-whole-data-set-2" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Training on whole data set<a href="id_03_model_training.html#training-on-whole-data-set-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb64-1"><a href="id_03_model_training.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits.RData&quot;</span>)</span>
<span id="cb64-2"><a href="id_03_model_training.html#cb64-2" aria-hidden="true" tabindex="-1"></a>prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb64-3"><a href="id_03_model_training.html#cb64-3" aria-hidden="true" tabindex="-1"></a>exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity/&quot;</span>, prefix)</span>
<span id="cb64-4"><a href="id_03_model_training.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb64-5"><a href="id_03_model_training.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">train_tx_models</span>(<span class="at">train_set =</span> tx_data, <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb65-1"><a href="id_03_model_training.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb65-2"><a href="id_03_model_training.html#cb65-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-3"><a href="id_03_model_training.html#cb65-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-4"><a href="id_03_model_training.html#cb65-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-5"><a href="id_03_model_training.html#cb65-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-6"><a href="id_03_model_training.html#cb65-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-7"><a href="id_03_model_training.html#cb65-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb65-8"><a href="id_03_model_training.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>) {</span>
<span id="cb65-9"><a href="id_03_model_training.html#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">11</span>) {</span>
<span id="cb65-10"><a href="id_03_model_training.html#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Whole data set</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb65-11"><a href="id_03_model_training.html#cb65-11" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="st">&quot;whole_data_set&quot;</span></span>
<span id="cb65-12"><a href="id_03_model_training.html#cb65-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb65-13"><a href="id_03_model_training.html#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb65-14"><a href="id_03_model_training.html#cb65-14" aria-hidden="true" tabindex="-1"></a>    prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb65-15"><a href="id_03_model_training.html#cb65-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-16"><a href="id_03_model_training.html#cb65-16" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity/&quot;</span>, prefix)</span>
<span id="cb65-17"><a href="id_03_model_training.html#cb65-17" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb65-18"><a href="id_03_model_training.html#cb65-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb65-19"><a href="id_03_model_training.html#cb65-19" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb65-20"><a href="id_03_model_training.html#cb65-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb65-21"><a href="id_03_model_training.html#cb65-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb65-22"><a href="id_03_model_training.html#cb65-22" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb65-23"><a href="id_03_model_training.html#cb65-23" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb65-24"><a href="id_03_model_training.html#cb65-24" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb65-25"><a href="id_03_model_training.html#cb65-25" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb65-26"><a href="id_03_model_training.html#cb65-26" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb65-27"><a href="id_03_model_training.html#cb65-27" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb65-28"><a href="id_03_model_training.html#cb65-28" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb65-29"><a href="id_03_model_training.html#cb65-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb65-30"><a href="id_03_model_training.html#cb65-30" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb65-31"><a href="id_03_model_training.html#cb65-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb65-32"><a href="id_03_model_training.html#cb65-32" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb65-33"><a href="id_03_model_training.html#cb65-33" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb65-34"><a href="id_03_model_training.html#cb65-34" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb65-35"><a href="id_03_model_training.html#cb65-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb65-36"><a href="id_03_model_training.html#cb65-36" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb65-37"><a href="id_03_model_training.html#cb65-37" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb65-38"><a href="id_03_model_training.html#cb65-38" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb65-39"><a href="id_03_model_training.html#cb65-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb65-40"><a href="id_03_model_training.html#cb65-40" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb65-41"><a href="id_03_model_training.html#cb65-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb65-42"><a href="id_03_model_training.html#cb65-42" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb65-43"><a href="id_03_model_training.html#cb65-43" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb65-44"><a href="id_03_model_training.html#cb65-44" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb65-45"><a href="id_03_model_training.html#cb65-45" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb65-46"><a href="id_03_model_training.html#cb65-46" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb65-47"><a href="id_03_model_training.html#cb65-47" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb65-48"><a href="id_03_model_training.html#cb65-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-49"><a href="id_03_model_training.html#cb65-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-50"><a href="id_03_model_training.html#cb65-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb65-51"><a href="id_03_model_training.html#cb65-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb65-52"><a href="id_03_model_training.html#cb65-52" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb65-53"><a href="id_03_model_training.html#cb65-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb65-54"><a href="id_03_model_training.html#cb65-54" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb65-55"><a href="id_03_model_training.html#cb65-55" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb65-56"><a href="id_03_model_training.html#cb65-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb65-57"><a href="id_03_model_training.html#cb65-57" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb65-58"><a href="id_03_model_training.html#cb65-58" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb65-59"><a href="id_03_model_training.html#cb65-59" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb65-60"><a href="id_03_model_training.html#cb65-60" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb65-61"><a href="id_03_model_training.html#cb65-61" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb65-62"><a href="id_03_model_training.html#cb65-62" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb65-63"><a href="id_03_model_training.html#cb65-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb65-64"><a href="id_03_model_training.html#cb65-64" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb65-65"><a href="id_03_model_training.html#cb65-65" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb65-66"><a href="id_03_model_training.html#cb65-66" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb65-67"><a href="id_03_model_training.html#cb65-67" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb65-68"><a href="id_03_model_training.html#cb65-68" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb65-69"><a href="id_03_model_training.html#cb65-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb65-70"><a href="id_03_model_training.html#cb65-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb65-71"><a href="id_03_model_training.html#cb65-71" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb65-72"><a href="id_03_model_training.html#cb65-72" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb65-73"><a href="id_03_model_training.html#cb65-73" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb65-74"><a href="id_03_model_training.html#cb65-74" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb65-75"><a href="id_03_model_training.html#cb65-75" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb65-76"><a href="id_03_model_training.html#cb65-76" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb65-77"><a href="id_03_model_training.html#cb65-77" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb65-78"><a href="id_03_model_training.html#cb65-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-79"><a href="id_03_model_training.html#cb65-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-80"><a href="id_03_model_training.html#cb65-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb65-81"><a href="id_03_model_training.html#cb65-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb65-82"><a href="id_03_model_training.html#cb65-82" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb65-83"><a href="id_03_model_training.html#cb65-83" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb65-84"><a href="id_03_model_training.html#cb65-84" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb65-85"><a href="id_03_model_training.html#cb65-85" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb65-86"><a href="id_03_model_training.html#cb65-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb65-87"><a href="id_03_model_training.html#cb65-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb65-88"><a href="id_03_model_training.html#cb65-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb65-89"><a href="id_03_model_training.html#cb65-89" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb65-90"><a href="id_03_model_training.html#cb65-90" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb65-91"><a href="id_03_model_training.html#cb65-91" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb65-92"><a href="id_03_model_training.html#cb65-92" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb65-93"><a href="id_03_model_training.html#cb65-93" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb65-94"><a href="id_03_model_training.html#cb65-94" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb65-95"><a href="id_03_model_training.html#cb65-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb65-96"><a href="id_03_model_training.html#cb65-96" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb65-97"><a href="id_03_model_training.html#cb65-97" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb65-98"><a href="id_03_model_training.html#cb65-98" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb65-99"><a href="id_03_model_training.html#cb65-99" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb65-100"><a href="id_03_model_training.html#cb65-100" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb65-101"><a href="id_03_model_training.html#cb65-101" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb65-102"><a href="id_03_model_training.html#cb65-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb65-103"><a href="id_03_model_training.html#cb65-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb65-104"><a href="id_03_model_training.html#cb65-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb65-105"><a href="id_03_model_training.html#cb65-105" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb65-106"><a href="id_03_model_training.html#cb65-106" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb65-107"><a href="id_03_model_training.html#cb65-107" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb65-108"><a href="id_03_model_training.html#cb65-108" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb65-109"><a href="id_03_model_training.html#cb65-109" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb65-110"><a href="id_03_model_training.html#cb65-110" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb65-111"><a href="id_03_model_training.html#cb65-111" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb65-112"><a href="id_03_model_training.html#cb65-112" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-113"><a href="id_03_model_training.html#cb65-113" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-114"><a href="id_03_model_training.html#cb65-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb65-115"><a href="id_03_model_training.html#cb65-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-116"><a href="id_03_model_training.html#cb65-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-117"><a href="id_03_model_training.html#cb65-117" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb65-118"><a href="id_03_model_training.html#cb65-118" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb65-119"><a href="id_03_model_training.html#cb65-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-120"><a href="id_03_model_training.html#cb65-120" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb65-121"><a href="id_03_model_training.html#cb65-121" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb65-122"><a href="id_03_model_training.html#cb65-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-123"><a href="id_03_model_training.html#cb65-123" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb65-124"><a href="id_03_model_training.html#cb65-124" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb65-125"><a href="id_03_model_training.html#cb65-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-126"><a href="id_03_model_training.html#cb65-126" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/toxicity/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb65-127"><a href="id_03_model_training.html#cb65-127" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/toxicity/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb65-128"><a href="id_03_model_training.html#cb65-128" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/toxicity/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb65-129"><a href="id_03_model_training.html#cb65-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-130"><a href="id_03_model_training.html#cb65-130" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation-2" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Model evaluation<a href="id_03_model_training.html#model-evaluation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb66-1"><a href="id_03_model_training.html#cb66-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb66-2"><a href="id_03_model_training.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb66-3"><a href="id_03_model_training.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-4"><a href="id_03_model_training.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb66-5"><a href="id_03_model_training.html#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb66-6"><a href="id_03_model_training.html#cb66-6" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb66-7"><a href="id_03_model_training.html#cb66-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb66-8"><a href="id_03_model_training.html#cb66-8" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb66-9"><a href="id_03_model_training.html#cb66-9" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb66-10"><a href="id_03_model_training.html#cb66-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb66-11"><a href="id_03_model_training.html#cb66-11" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb66-12"><a href="id_03_model_training.html#cb66-12" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb66-13"><a href="id_03_model_training.html#cb66-13" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb66-14"><a href="id_03_model_training.html#cb66-14" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb66-15"><a href="id_03_model_training.html#cb66-15" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb66-16"><a href="id_03_model_training.html#cb66-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-17"><a href="id_03_model_training.html#cb66-17" aria-hidden="true" tabindex="-1"></a>    logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-18"><a href="id_03_model_training.html#cb66-18" aria-hidden="true" tabindex="-1"></a>    MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-19"><a href="id_03_model_training.html#cb66-19" aria-hidden="true" tabindex="-1"></a>    F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-20"><a href="id_03_model_training.html#cb66-20" aria-hidden="true" tabindex="-1"></a>    acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-21"><a href="id_03_model_training.html#cb66-21" aria-hidden="true" tabindex="-1"></a>    EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-22"><a href="id_03_model_training.html#cb66-22" aria-hidden="true" tabindex="-1"></a>    BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-23"><a href="id_03_model_training.html#cb66-23" aria-hidden="true" tabindex="-1"></a>    threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb66-24"><a href="id_03_model_training.html#cb66-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb66-25"><a href="id_03_model_training.html#cb66-25" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>]</span>
<span id="cb66-26"><a href="id_03_model_training.html#cb66-26" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb66-27"><a href="id_03_model_training.html#cb66-27" aria-hidden="true" tabindex="-1"></a>      y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb66-28"><a href="id_03_model_training.html#cb66-28" aria-hidden="true" tabindex="-1"></a>      logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-29"><a href="id_03_model_training.html#cb66-29" aria-hidden="true" tabindex="-1"></a>      MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb66-30"><a href="id_03_model_training.html#cb66-30" aria-hidden="true" tabindex="-1"></a>      F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-31"><a href="id_03_model_training.html#cb66-31" aria-hidden="true" tabindex="-1"></a>      acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-32"><a href="id_03_model_training.html#cb66-32" aria-hidden="true" tabindex="-1"></a>      EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb66-33"><a href="id_03_model_training.html#cb66-33" aria-hidden="true" tabindex="-1"></a>      BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb66-34"><a href="id_03_model_training.html#cb66-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-35"><a href="id_03_model_training.html#cb66-35" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb66-36"><a href="id_03_model_training.html#cb66-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb66-37"><a href="id_03_model_training.html#cb66-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb66-38"><a href="id_03_model_training.html#cb66-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb66-39"><a href="id_03_model_training.html#cb66-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb66-40"><a href="id_03_model_training.html#cb66-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb66-41"><a href="id_03_model_training.html#cb66-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb66-42"><a href="id_03_model_training.html#cb66-42" aria-hidden="true" tabindex="-1"></a>      logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb66-43"><a href="id_03_model_training.html#cb66-43" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb66-44"><a href="id_03_model_training.html#cb66-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb66-45"><a href="id_03_model_training.html#cb66-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb66-46"><a href="id_03_model_training.html#cb66-46" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb66-47"><a href="id_03_model_training.html#cb66-47" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb66-48"><a href="id_03_model_training.html#cb66-48" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb66-49"><a href="id_03_model_training.html#cb66-49" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb66-50"><a href="id_03_model_training.html#cb66-50" aria-hidden="true" tabindex="-1"></a>        logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-51"><a href="id_03_model_training.html#cb66-51" aria-hidden="true" tabindex="-1"></a>        MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-52"><a href="id_03_model_training.html#cb66-52" aria-hidden="true" tabindex="-1"></a>        F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-53"><a href="id_03_model_training.html#cb66-53" aria-hidden="true" tabindex="-1"></a>        acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-54"><a href="id_03_model_training.html#cb66-54" aria-hidden="true" tabindex="-1"></a>        EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-55"><a href="id_03_model_training.html#cb66-55" aria-hidden="true" tabindex="-1"></a>        BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb66-56"><a href="id_03_model_training.html#cb66-56" aria-hidden="true" tabindex="-1"></a>        threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb66-57"><a href="id_03_model_training.html#cb66-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb66-58"><a href="id_03_model_training.html#cb66-58" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>]</span>
<span id="cb66-59"><a href="id_03_model_training.html#cb66-59" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb66-60"><a href="id_03_model_training.html#cb66-60" aria-hidden="true" tabindex="-1"></a>          y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb66-61"><a href="id_03_model_training.html#cb66-61" aria-hidden="true" tabindex="-1"></a>          logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-62"><a href="id_03_model_training.html#cb66-62" aria-hidden="true" tabindex="-1"></a>          MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb66-63"><a href="id_03_model_training.html#cb66-63" aria-hidden="true" tabindex="-1"></a>          F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-64"><a href="id_03_model_training.html#cb66-64" aria-hidden="true" tabindex="-1"></a>          acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb66-65"><a href="id_03_model_training.html#cb66-65" aria-hidden="true" tabindex="-1"></a>          EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb66-66"><a href="id_03_model_training.html#cb66-66" aria-hidden="true" tabindex="-1"></a>          BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb66-67"><a href="id_03_model_training.html#cb66-67" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb66-68"><a href="id_03_model_training.html#cb66-68" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb66-69"><a href="id_03_model_training.html#cb66-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb66-70"><a href="id_03_model_training.html#cb66-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb66-71"><a href="id_03_model_training.html#cb66-71" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb66-72"><a href="id_03_model_training.html#cb66-72" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb66-73"><a href="id_03_model_training.html#cb66-73" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb66-74"><a href="id_03_model_training.html#cb66-74" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb66-75"><a href="id_03_model_training.html#cb66-75" aria-hidden="true" tabindex="-1"></a>          logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb66-76"><a href="id_03_model_training.html#cb66-76" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb66-77"><a href="id_03_model_training.html#cb66-77" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb66-78"><a href="id_03_model_training.html#cb66-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb66-79"><a href="id_03_model_training.html#cb66-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-80"><a href="id_03_model_training.html#cb66-80" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb66-81"><a href="id_03_model_training.html#cb66-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb66-82"><a href="id_03_model_training.html#cb66-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Log loss mean&quot;</span>, <span class="st">&quot;Log loss s.e.m.&quot;</span>, <span class="st">&quot;MCC mean&quot;</span>, <span class="st">&quot;MCC s.e.m.&quot;</span>, <span class="st">&quot;F_1 mean&quot;</span>, <span class="st">&quot;F_1 s.e.m.&quot;</span>,</span>
<span id="cb66-83"><a href="id_03_model_training.html#cb66-83" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Balanced accuracy mean&quot;</span>, <span class="st">&quot;Balanced accuracy s.e.m.&quot;</span>, <span class="st">&quot;EF mean&quot;</span>, <span class="st">&quot;EF s.e.m.&quot;</span>, <span class="st">&quot;BEDROC mean&quot;</span>, <span class="st">&quot;BEDROC s.e.m.&quot;</span>,</span>
<span id="cb66-84"><a href="id_03_model_training.html#cb66-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Log loss CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;MCC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;F_1 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb66-85"><a href="id_03_model_training.html#cb66-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Balanced accuracy CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;EF CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;BEDROC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb66-86"><a href="id_03_model_training.html#cb66-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb66-87"><a href="id_03_model_training.html#cb66-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb66-88"><a href="id_03_model_training.html#cb66-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb66-89"><a href="id_03_model_training.html#cb66-89" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb66-90"><a href="id_03_model_training.html#cb66-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb66-91"><a href="id_03_model_training.html#cb66-91" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-92"><a href="id_03_model_training.html#cb66-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb66-93"><a href="id_03_model_training.html#cb66-93" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection-2" class="section level3 hasAnchor" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> Inner loop model selection<a href="id_03_model_training.html#inner-loop-model-selection-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb67-1"><a href="id_03_model_training.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx.RData&quot;</span>)</span>
<span id="cb67-2"><a href="id_03_model_training.html#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="id_03_model_training.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb67-4"><a href="id_03_model_training.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb67-5"><a href="id_03_model_training.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb67-6"><a href="id_03_model_training.html#cb67-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb67-7"><a href="id_03_model_training.html#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb67-8"><a href="id_03_model_training.html#cb67-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb67-9"><a href="id_03_model_training.html#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb67-10"><a href="id_03_model_training.html#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb67-11"><a href="id_03_model_training.html#cb67-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-12"><a href="id_03_model_training.html#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb67-13"><a href="id_03_model_training.html#cb67-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb67-14"><a href="id_03_model_training.html#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb67-15"><a href="id_03_model_training.html#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb67-16"><a href="id_03_model_training.html#cb67-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-17"><a href="id_03_model_training.html#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb67-18"><a href="id_03_model_training.html#cb67-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb67-19"><a href="id_03_model_training.html#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb67-20"><a href="id_03_model_training.html#cb67-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb67-21"><a href="id_03_model_training.html#cb67-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-22"><a href="id_03_model_training.html#cb67-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb67-23"><a href="id_03_model_training.html#cb67-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb67-24"><a href="id_03_model_training.html#cb67-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb67-25"><a href="id_03_model_training.html#cb67-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb67-26"><a href="id_03_model_training.html#cb67-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-27"><a href="id_03_model_training.html#cb67-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb67-28"><a href="id_03_model_training.html#cb67-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb67-29"><a href="id_03_model_training.html#cb67-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb67-30"><a href="id_03_model_training.html#cb67-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb67-31"><a href="id_03_model_training.html#cb67-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-32"><a href="id_03_model_training.html#cb67-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GLM</span></span>
<span id="cb67-33"><a href="id_03_model_training.html#cb67-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb67-34"><a href="id_03_model_training.html#cb67-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb67-35"><a href="id_03_model_training.html#cb67-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb67-36"><a href="id_03_model_training.html#cb67-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb67-37"><a href="id_03_model_training.html#cb67-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb67-38"><a href="id_03_model_training.html#cb67-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb67-39"><a href="id_03_model_training.html#cb67-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb67-40"><a href="id_03_model_training.html#cb67-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb67-41"><a href="id_03_model_training.html#cb67-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb67-42"><a href="id_03_model_training.html#cb67-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb67-43"><a href="id_03_model_training.html#cb67-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb67-44"><a href="id_03_model_training.html#cb67-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb67-45"><a href="id_03_model_training.html#cb67-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb67-46"><a href="id_03_model_training.html#cb67-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb67-47"><a href="id_03_model_training.html#cb67-47" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb67-48"><a href="id_03_model_training.html#cb67-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-49"><a href="id_03_model_training.html#cb67-49" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb67-50"><a href="id_03_model_training.html#cb67-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb67-51"><a href="id_03_model_training.html#cb67-51" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1-2" class="section level4 hasAnchor" number="3.5.5.1">
<h4><span class="header-section-number">3.5.5.1</span> CV 1<a href="id_03_model_training.html#cv-1-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-9a8bf6e65f1da81a804a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9a8bf6e65f1da81a804a">{"x":{"filter":"none","vertical":false,"data":[["Super learner XGBoost","Super learner final","XGBoost grid model 24","XGBoost grid model 97","XGBoost grid model 63","XGBoost grid model 4","XGBoost grid model 68","XGBoost grid model 86","XGBoost grid model 49","XGBoost grid model 45","XGBoost grid model 17","XGBoost grid model 84","GBM grid model 1","XGBoost grid model 48","XGBoost grid model 71","XGBoost grid model 89","GBM grid model 33","Super learner all models","GBM grid model 26","XGBoost grid model 2","XGBoost grid model 44","XGBoost grid model 14","GBM grid model 19","GBM grid model 80","XGBoost grid model 98","GBM grid model 85","GBM grid model 74","XGBoost grid model 41","GBM grid model 56","XGBoost grid model 36","XGBoost grid model 91","GBM grid model 37","XGBoost grid model 25","XGBoost grid model 3","XGBoost grid model 33","XGBoost grid model 23","XGBoost grid model 50","XGBoost model 3","XGBoost grid model 20","GBM grid model 53","XGBoost grid model 1","GBM grid model 65","XGBoost grid model 95","GBM grid model 14","XGBoost grid model 70","XGBoost grid model 22","GBM grid model 22","GBM grid model 3","GBM grid model 52","GBM grid model 97","GBM grid model 58","GBM grid model 62","XGBoost model 1","GBM grid model 50","GBM grid model 66","XGBoost grid model 81","GBM grid model 71","XGBoost grid model 79","GBM grid model 7","XGBoost grid model 8","XGBoost grid model 11","XGBoost grid model 73","GBM grid model 25","GBM grid model 2","XGBoost grid model 9","GBM grid model 39","GBM model 4","XGBoost grid model 75","GBM grid model 87","GBM grid model 27","XGBoost grid model 92","GBM grid model 12","XGBoost grid model 28","GBM model 3","GBM grid model 73","GBM grid model 41","GBM grid model 89","GBM grid model 96","GBM grid model 88","XGBoost grid model 82","XGBoost grid model 42","XGBoost grid model 87","GBM grid model 4","GBM grid model 29","Super learner GBM","GBM grid model 6","GBM grid model 84","GBM grid model 92","GBM grid model 95","GBM grid model 99","GBM grid model 17","DRF model","GBM grid model 38","GBM grid model 69","XGBoost grid model 60","GBM grid model 54","GBM grid model 49","XGBoost grid model 80","GBM grid model 75","GBM model 2","XGBoost grid model 34","GBM grid model 45","GBM grid model 57","GBM grid model 31","GBM grid model 9","XGBoost grid model 13","XGBoost grid model 16","GBM grid model 78","GBM model 5","GBM grid model 70","XGBoost grid model 21","GBM grid model 10","XGBoost grid model 5","XGBoost grid model 77","GBM grid model 90","GBM grid model 23","XGBoost grid model 55","XGBoost grid model 94","XRT model","GBM grid model 60","GBM grid model 40","GBM grid model 5","GBM grid model 68","GBM model 1","GBM grid model 48","GBM grid model 91","GBM grid model 79","GBM grid model 44","GBM grid model 36","GBM grid model 86","XGBoost grid model 58","GBM grid model 11","XGBoost grid model 15","GBM grid model 67","Super learner neural network","XGBoost grid model 18","GBM grid model 47","XGBoost grid model 51","GBM grid model 81","XGBoost grid model 6","GBM grid model 46","GBM grid model 20","GBM grid model 82","XGBoost grid model 19","GBM grid model 42","GBM grid model 16","GBM grid model 24","XGBoost grid model 37","XGBoost model 2","XGBoost grid model 76","GBM grid model 18","GBM grid model 30","XGBoost grid model 88","GBM grid model 55","XGBoost grid model 52","GBM grid model 34","GBM grid model 8","XGBoost grid model 38","GBM grid model 94","GBM grid model 59","GBM grid model 43","XGBoost grid model 74","GBM grid model 61","GBM grid model 93","GBM grid model 51","GBM grid model 98","GBM grid model 77","GBM grid model 28","XGBoost grid model 30","GBM grid model 13","XGBoost grid model 47","GBM grid model 83","GBM grid model 15","GBM grid model 35","GBM grid model 100","XGBoost grid model 59","GBM grid model 21","GBM grid model 63","XGBoost grid model 85","XGBoost grid model 27","XGBoost grid model 53","GBM grid model 76","XGBoost grid model 61","XGBoost grid model 66","XGBoost grid model 64","GBM grid model 64","XGBoost grid model 93","XGBoost grid model 69","XGBoost grid model 54"],[0.6797,null,0.5818,0.4563,0.4563,0.5818,0.6312,0.3305,0.3628,0.5818,0.4222,0.4222,0.498,0.498,0.7913,0.3628,0.3628,0.311,0.3934,0.5411,0.6312,0.5411,0.3628,0.4563,0.213,0.498,0.3628,0.4222,0.3305,0.3934,0.1461,0.2913,0.5818,0.1644,0.0237,0.6797,0.1461,0.3628,0.1881,0.3934,0.3934,0.3628,0.311,0.3628,0.1881,0.5411,0.3934,0.2913,0.311,0.3496,0.4222,0.3628,0.3628,0.3934,0.3628,0.3496,0.2913,0.3496,0.3496,0.4222,0.2758,0.4563,0.2758,0.1881,0.3934,0.3305,0.4563,0.311,0.2572,0.2343,0.6797,0.2343,0.4563,0.498,0.2343,0.2758,0.3496,0.0912,0.3305,0.311,0.4222,0.3628,0.3496,0.4222,0.4563,0.3934,0.213,0.4222,0.311,0.3305,0.3305,0.3305,0.2758,0.2572,0.3628,0.2343,0.3628,0.3628,0.4222,0.5818,0.5818,0.213,0.2343,0.2343,0.3305,0.4563,0.213,0.3496,0.3628,0.2343,0.2913,0.1461,0.1644,0.2913,0.3496,0.311,0.2572,0.3628,0.3496,0.2758,0.1644,0.3305,0.2758,0.5411,0.3496,0.2572,0.1277,0.2572,0.0654,0.1644,0.1461,0.3496,0.2913,0.1644,0.2913,0.311,0.3628,0.3305,0.311,0.311,0.4222,0.3628,0.2913,0.3628,0.1644,0.3496,0.0912,0.311,0.3496,0.2758,0.3305,0.3305,0.4222,0.3305,0.3934,0.2343,0.1461,0.2758,0.2572,0.0768,0.2913,0.3496,0.2913,0.2913,0.1277,0.0768,0.0768,0.3305,0.2913,0.2758,0.2572,0.2758,0.2913,0.311,0.2913,0.2572,0.213,0.2913,0.311,0.2758,0.1881,0.2913,0.2758,0.3305,0.3496,0.2758,0.311,0.2572,0.1644],[0.7672,0.6626,0.5856,0.6371,0.4053,0.3271,0.3387,0.7672,0.3875,0.4428,0.3536,0.4428,0.3387,0.3681,0.2258,0.4428,0.3128,0.4053,0.3681,0.3074,0.2258,0.2806,0.3681,0.2596,1,0.2901,0.4053,0.2806,0.3387,0.2258,0.9427,0.3387,0.2117,0.7167,null,0.2664,0.7432,0.245,0.4258,0.3387,0.2901,0.2258,0.3128,0.3128,0.245,0.2664,0.1575,0.3387,0.3681,0.2664,0.2901,0.2664,0.2054,0.3128,0.3271,0.2258,0.2664,0.3128,0.2258,0.245,0.2901,0.245,0.2258,0.3128,0.1537,0.1938,0.245,0.3536,0.2396,0.3536,0.1782,0.2901,0.2054,0.2117,0.2596,0.3128,0.3128,0.3128,0.2117,0.3681,0.2664,0.1912,0.2258,0.1938,0.2258,0.3128,0.2258,0.245,0.2054,0.1938,0.1938,0.1444,0.1938,0.2117,0.2117,0.3536,0.2664,0.1204,0.1575,0.1301,0.1204,0.2806,0.245,0.2258,0.2258,0.1301,0.3271,0.2901,0.1575,0.2664,0.1938,0.2664,0.3128,0.3387,0.1782,0.2258,0.3128,0.245,0.245,0.2258,0.1575,0.1301,0.2258,0.1301,0.1938,0.2258,0.2396,0.1782,0.2901,0.2258,0.2901,0.1575,0.2117,0.1782,0.2117,0.1444,0.1938,0.1204,0.1444,0.1938,0.1103,0.1444,0.1444,0.2117,0.1938,0.1575,0.2664,0.1301,0.1301,0.1575,0.1404,0.1204,0.1537,0.1444,0.1782,0.1575,0.1575,0.1537,0.2117,0.1938,0.1103,0.1782,0.1575,0.1444,0.1204,0.1301,0.1301,0.1204,0.1938,0.1444,0.1301,0.0996,0.1103,0.0996,0.0731,0.1301,0.0996,0.1103,0.1301,0.1204,0.1301,0.1103,0.0862,0.1204,0.0616,0.1103,0.1204,0.1103,0.1204],[0.7382,0.6584,0.4866,0.6839,0.4066,0.2686,0.3248,0.633,0.3248,0.2913,0.3006,0.3706,0.4066,0.3375,0.2097,0.3524,0.3524,0.4443,0.4066,0.284,0.2288,0.284,0.4658,0.2617,0.8528,0.2913,0.4443,0.2617,0.3375,0.2288,0.8798,0.4066,0.2097,0.6081,null,0.2686,0.5837,0.2686,0.4272,0.3006,0.3375,0.3105,0.3105,0.3524,0.3105,0.2513,0.1948,0.3375,0.4443,0.3105,0.2686,0.2513,0.2209,0.3105,0.3524,0.1754,0.2686,0.3375,0.2913,0.2418,0.3006,0.2288,0.2913,0.3248,0.1519,0.2513,0.2097,0.3006,0.3006,0.3006,0.154,0.2913,0.2075,0.2288,0.2209,0.3006,0.2097,0.2913,0.2913,0.3706,0.2418,0.1419,0.1754,0.2097,0.2288,0.2513,0.2513,0.2913,0.2209,0.154,0.1754,0.1158,0.1948,0.2288,0.2097,0.3902,0.2513,0.1419,0.1948,0.154,0.1419,0.2418,0.2513,0.2075,0.3105,0.1419,0.2617,0.3248,0.154,0.2097,0.1519,0.3375,0.2913,0.3105,0.154,0.2686,0.2686,0.2097,0.1754,0.2288,0.1948,0.1419,0.2617,0.154,0.1871,0.2097,0.2617,0.1419,0.3105,0.2686,0.2617,0.1419,0.1948,0.2288,0.2686,0.1336,0.1871,0.1158,0.154,0.1948,0.1336,0.1754,0.1171,0.2097,0.1948,0.1419,0.2686,0.1171,0.1419,0.1419,0.1419,0.1171,0.1158,0.1336,0.0941,0.2097,0.154,0.1419,0.154,0.2097,0.0941,0.2097,0.154,0.1171,0.1336,0.154,0.154,0.1171,0.1171,0.1419,0.1086,0.1086,0.0862,0.0941,0.0941,0.1419,0.0862,0.1086,0.1171,0.1336,0.1419,0.1086,0.0686,0.1086,0.0628,0.0862,0.0941,0.0941,0.1336],[0.6563,0.4202,0.4385,0.4803,0.3656,0.225,0.1933,0.6563,0.3837,0.3306,0.2031,0.3306,0.1604,0.3656,0.1933,0.2114,0.1604,0.4803,0.2976,0.3147,0.2114,0.4202,0.1763,0.1304,0.9097,0.1458,0.3656,0.3837,0.1604,0.1933,0.8826,0.2114,0.2658,0.8258,null,0.2976,0.4803,0.2371,0.4202,0.1458,0.4026,0.1458,0.4026,0.1763,0.3306,0.1933,0.1458,0.1604,0.2371,0.1328,0.1458,0.1458,0.2031,0.1763,0.2031,0.1328,0.1458,0.1763,0.1328,0.2976,0.1604,0.1127,0.1763,0.1933,0.1565,0.1458,0.1763,0.187,0.2031,0.2031,0.1933,0.1458,0.2519,0.1229,0.1127,0.1328,0.1763,0.1328,0.0974,0.3656,0.2658,0.1049,0.1229,0.1604,0.1229,0.1763,0.1604,0.2114,0.187,0.1127,0.1127,0.1933,0.1933,0.1328,0.2658,0.1304,0.1127,0.2371,0.1127,0.1127,0.1763,0.1304,0.1604,0.1712,0.1081,0.1458,0.187,0.1328,0.1763,0.1081,0.1763,0.1127,0.1458,0.2114,0.0768,0.0891,0.2114,0.1604,0.2114,0.1604,0.1328,0.1458,0.1604,0.1229,0.0768,0.1127,0.1304,0.1127,0.1127,0.1328,0.1933,0.1229,0.1127,0.1127,0.1229,0.0974,0.1328,0.1127,0.1127,0.1081,0.0891,0.1127,0.0974,0.2114,0.1229,0.0891,0.1328,0.0974,0.1328,0.1458,0.1049,0.1081,0.1429,0.0974,0.1604,0.1127,0.1127,0.1127,0.0665,0.0974,0.0665,0.1933,0.1229,0.1229,0.0974,0.0974,0.1081,0.1081,0.1328,0.0974,0.1081,0.0891,0.0574,0.1229,0.0974,0.1229,0.1081,0.0665,0.1229,0.1229,0.0768,0.0665,0.0974,0.1229,0.0768,0.0974,0.0574,0.1127,0.1081],[6,1,10,27,35,18,20,66,43,19,24,62,59,28,4,84,31,111,76,7,8,5,39,40,171,42,93,14,108,21,184,101,9,186,199,2,189,44,182,49,169,47,144,30,155,12,33,112,133,96,41,72,71,55,91,26,134,45,51,29,157,68,152,141,17,85,16,106,146,153,3,147,23,11,113,127,87,183,124,212,25,67,83,38,37,54,142,77,102,53,119,50,109,137,61,178,63,34,36,22,15,140,148,121,57,13,175,126,46,168,89,177,172,192,60,136,104,99,129,165,170,79,149,32,88,139,176,166,190,163,159,81,117,156,94,74,80,48,86,73,65,64,125,92,167,58,188,82,75,162,78,70,52,138,56,181,164,105,110,185,98,160,114,145,174,204,180,90,122,97,161,150,118,103,95,116,130,107,128,115,158,120,131,132,135,151,143,154,283],[4,7,13,9,15,25,26,12,22,30,31,20,16,37,51,18,35,14,23,56,55,60,36,40,2,41,19,61,21,62,3,24,66,6,1,70,5,52,10,46,17,53,28,63,27,84,78,38,29,48,76,59,64,68,54,95,45,83,72,99,33,75,39,42,110,65,98,71,44,49,124,47,119,109,67,58,80,32,74,50,133,106,91,112,115,104,69,108,86,105,85,140,93,79,126,57,121,151,120,132,146,81,77,90,117,143,87,94,153,82,147,73,92,107,134,96,127,125,141,100,89,136,102,150,128,113,97,101,88,103,122,138,137,111,130,164,145,178,154,172,155,156,139,162,118,157,114,168,165,148,159,166,175,135,179,116,129,173,158,123,161,149,169,160,152,131,142,180,184,183,171,163,177,185,187,182,176,188,190,193,167,189,194,195,198,191,196,197,192],[4,7,13,9,22,25,28,12,27,44,43,26,14,46,61,16,34,21,18,75,71,77,29,41,3,39,15,96,20,72,2,19,92,6,1,100,5,56,10,42,17,48,33,55,40,104,81,30,24,47,74,54,73,65,53,120,49,93,67,117,32,79,31,36,118,59,105,80,37,45,141,35,134,109,60,52,69,23,66,58,146,115,99,110,113,103,64,112,87,94,85,152,95,63,140,51,126,162,114,133,149,68,70,84,111,144,86,90,159,62,156,57,101,121,137,82,132,127,153,98,78,138,91,142,122,107,83,89,76,88,119,130,135,97,123,169,139,186,148,176,143,151,136,167,108,150,106,171,166,154,158,165,181,128,185,102,124,179,155,116,157,145,168,160,147,125,129,177,189,178,175,161,174,184,183,180,172,187,193,192,163,188,194,195,201,191,196,200,190],[5,10,11,8,14,31,27,12,18,28,25,17,39,23,24,35,55,9,43,22,26,21,65,57,2,64,60,16,41,36,3,56,33,4,1,32,6,54,13,79,19,83,29,87,20,45,61,75,73,70,71,80,58,81,72,34,52,62,96,42,66,67,68,74,49,97,88,50,82,69,48,89,44,106,98,102,104,105,85,30,53,76,92,110,107,112,99,77,100,125,93,46,91,111,63,109,86,51,129,113,94,117,114,115,132,127,84,126,78,135,59,147,95,40,130,148,101,119,47,108,136,121,137,157,149,128,133,134,139,145,103,155,122,153,172,116,171,124,150,118,177,170,141,120,152,186,143,131,146,90,161,159,154,163,144,169,162,123,158,160,173,138,165,156,151,164,185,190,142,183,140,175,182,180,189,176,179,193,166,178,194,188,168,174,196,198,199,184,202],[19,25,47,53,86,99,101,102,110,121,123,125,128,134,140,153,155,155,160,160,160,163,169,178,178,186,187,187,190,191,192,200,200,202,202,204,205,206,215,216,222,231,234,235,242,245,253,255,259,261,262,265,266,269,270,275,280,283,286,287,288,289,290,293,294,306,307,307,309,316,316,318,320,335,338,339,340,343,349,350,357,364,365,370,372,373,374,374,375,377,382,388,388,390,390,395,396,398,399,400,404,406,409,410,417,427,432,436,436,447,451,454,460,460,461,462,464,470,470,471,473,474,479,481,487,487,489,490,493,499,503,504,511,517,519,523,535,536,538,539,540,541,541,541,545,551,551,552,552,554,556,560,562,564,564,568,579,580,581,584,589,592,616,621,624,624,636,637,637,641,647,649,651,652,654,654,657,675,677,678,682,685,687,696,730,731,734,735,867]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2-2" class="section level4 hasAnchor" number="3.5.5.2">
<h4><span class="header-section-number">3.5.5.2</span> CV 2<a href="id_03_model_training.html#cv-2-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-7a7f7b2157ce5e2f5177" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7a7f7b2157ce5e2f5177">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","XGBoost grid model 24","Super learner all models","XGBoost grid model 68","Super learner XGBoost","XGBoost grid model 14","XGBoost grid model 71","XGBoost grid model 34","XGBoost grid model 23","XGBoost grid model 45","XGBoost model 3","XGBoost grid model 2","XGBoost grid model 42","XGBoost grid model 81","XGBoost grid model 28","XGBoost grid model 13","XGBoost grid model 88","XGBoost grid model 18","GBM grid model 58","XGBoost grid model 25","XGBoost grid model 11","XGBoost grid model 92","XGBoost grid model 9","XGBoost grid model 16","XGBoost grid model 15","XGBoost grid model 89","XGBoost grid model 52","XGBoost grid model 86","GBM grid model 22","XGBoost grid model 41","XGBoost grid model 17","XGBoost grid model 95","XGBoost grid model 21","XGBoost model 1","XGBoost grid model 27","XGBoost grid model 37","XGBoost grid model 87","XGBoost model 2","XGBoost grid model 55","XGBoost grid model 53","XGBoost grid model 6"],[0.9097,0.2062,0.0917,0.2306,0.4866,null,0.0791,0.0212,0.7384,0.1592,0.4866,0.5324,0.2915,0.1822,0.1592,0.2915,0.7939,0.1062,0.0574,0.1399,0.1228,0.6332,0.2915,0.0574,0.2603,0.2603,0.6841,0.1228,0.0676,0.3595,0.1592,0.0574,0.5818,0.6841,0.3595,0.1062,0.1399,0.3239,0.1399,0.0791,0.0917],[0.3234,0.488,0.3373,0.307,0.2772,0.4078,0.627,null,0.307,0.2772,0.5322,0.2772,0.3373,0.488,0.3373,0.1811,0.2772,0.2031,0.307,0.3704,0.2772,0.2772,0.163,0.3234,0.2772,0.2772,0.1811,0.3704,0.1724,0.1266,0.1811,0.4078,0.2267,0.0992,0.1724,0.163,0.1811,0.163,0.1929,0.1724,0.1266],[0.3442,0.4191,0.3848,0.3727,0.3442,0.4546,0.6583,null,0.4191,0.3268,0.541,0.3026,0.3848,0.4546,0.4191,0.3026,0.2931,0.3026,0.4546,0.4978,0.3026,0.3727,0.2265,0.3156,0.3546,0.3848,0.2773,0.4764,0.2931,0.145,0.3026,0.3848,0.2626,0.1613,0.2157,0.2489,0.2489,0.1799,0.2157,0.2405,0.1613],[0.2805,0.3594,0.3945,0.3281,0.2954,0.3281,0.4801,null,0.2665,0.2097,0.4369,0.2954,0.2369,0.3281,0.2369,0.1649,0.1434,0.2097,0.0802,0.2665,0.2097,0.1434,0.0681,0.2805,0.1867,0.1081,0.1867,0.2097,0.1003,0.1434,0.1434,0.3594,0.1081,0.0582,0.0633,0.1867,0.0681,0.125,0.0868,0.0542,0.0582],[2,29,45,26,15,1,93,106,4,62,10,9,12,43,49,17,8,37,72,33,54,3,14,103,27,25,6,75,71,13,58,169,7,11,23,86,70,28,64,59,47],[19,14,13,18,26,39,4,1,40,20,41,45,44,37,36,53,56,49,30,52,48,68,63,38,65,66,80,59,62,92,72,31,105,119,122,109,110,147,131,133,167],[20,14,17,18,32,47,6,1,44,22,51,53,49,38,37,59,65,60,24,66,55,80,68,45,77,74,89,63,58,112,82,34,113,126,131,115,105,165,143,142,180],[20,9,7,22,21,14,4,1,29,15,26,27,33,39,42,43,46,34,59,35,40,48,56,18,45,53,49,47,66,41,50,38,63,99,93,75,108,78,101,113,112],[61,66,82,84,94,101,107,109,117,119,128,134,138,157,164,172,175,180,185,186,197,199,201,204,214,218,224,244,257,258,262,272,288,355,369,385,393,418,439,447,506]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3-2" class="section level4 hasAnchor" number="3.5.5.3">
<h4><span class="header-section-number">3.5.5.3</span> CV 3<a href="id_03_model_training.html#cv-3-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-e42f9a8010bbf49c245b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e42f9a8010bbf49c245b">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner XGBoost","XGBoost grid model 89","XGBoost grid model 68","XGBoost model 3","XGBoost grid model 24","XGBoost grid model 63","GBM grid model 69","GBM grid model 25","XGBoost grid model 45","XGBoost grid model 34","XGBoost grid model 95","Super learner all models","GBM grid model 41","XGBoost grid model 75","Super learner GBM","XGBoost grid model 36","GBM grid model 65","XGBoost grid model 82","GBM grid model 11","XGBoost grid model 50","XGBoost grid model 23","GBM grid model 55","GBM grid model 14","GBM grid model 7","XGBoost grid model 1","XGBoost grid model 46","XGBoost grid model 20","XGBoost grid model 91","GBM model 3","GBM model 4","XGBoost grid model 11","GBM grid model 89","GBM grid model 99","GBM grid model 3","XGBoost grid model 71","XGBoost grid model 84","GBM grid model 85","XGBoost grid model 2","XGBoost grid model 25","XGBoost grid model 98","GBM grid model 2","GBM grid model 86","GBM grid model 49","GBM grid model 31","GBM grid model 45","XGBoost grid model 13","GBM grid model 92","GBM grid model 67","XGBoost grid model 73","XGBoost grid model 42","GBM grid model 38","GBM grid model 84","XGBoost grid model 49","GBM grid model 75","XGBoost grid model 86","XGBoost grid model 92","XGBoost grid model 60","GBM grid model 48","GBM grid model 12","GBM grid model 57","GBM grid model 56","GBM grid model 29","XGBoost grid model 22","GBM grid model 42","XGBoost grid model 33","GBM grid model 36","GBM grid model 4","GBM grid model 52","GBM grid model 62","XGBoost grid model 79","GBM grid model 68","GBM grid model 80","GBM grid model 73","XGBoost grid model 16","XGBoost grid model 17","XGBoost grid model 15","GBM grid model 17","XGBoost grid model 41","GBM grid model 82","XGBoost grid model 4","GBM grid model 6","GBM grid model 1","XGBoost grid model 3","GBM grid model 66","GBM grid model 19","GBM grid model 87","GBM grid model 88","XGBoost grid model 9","GBM model 5","XGBoost grid model 58","GBM grid model 8","GBM grid model 26","GBM grid model 37","GBM grid model 44","XGBoost grid model 14","XGBoost grid model 28","GBM grid model 83","GBM grid model 33","GBM grid model 43","GBM grid model 46","GBM grid model 78","XGBoost model 1","GBM grid model 22","GBM grid model 74","GBM grid model 79","GBM grid model 47","GBM model 2","GBM grid model 53","GBM grid model 95","XGBoost grid model 87","XGBoost grid model 52","XRT model","XGBoost grid model 44","GBM grid model 71","XGBoost grid model 70","GBM grid model 27","GBM grid model 98","XGBoost grid model 80","GBM grid model 9","GBM grid model 100","XGBoost grid model 88","GBM grid model 18","XGBoost grid model 18","GBM grid model 58","GBM grid model 77","XGBoost grid model 8","XGBoost grid model 77","GBM grid model 50","GBM grid model 54","GBM grid model 72","GBM model 1","GBM grid model 81","GBM grid model 30","XGBoost grid model 48","GBM grid model 93","XGBoost grid model 81","GBM grid model 96","GBM grid model 34","GBM grid model 59","GBM grid model 39","GBM grid model 70","GBM grid model 91","XGBoost grid model 97","DRF model","GBM grid model 10","GBM grid model 97","GBM grid model 21","GBM grid model 5","GBM grid model 90","GBM grid model 13","GBM grid model 94","GBM grid model 76","XGBoost grid model 74","GBM grid model 24","GBM grid model 20","GBM grid model 51","XGBoost grid model 54","XGBoost grid model 55","XGBoost grid model 19","GBM grid model 40","XGBoost grid model 27","XGBoost grid model 51","GBM grid model 23","XGBoost grid model 37","XGBoost grid model 6","XGBoost grid model 21","XGBoost grid model 76","GBM grid model 64","GBM grid model 63","Super learner neural network","XGBoost grid model 39","XGBoost grid model 64","XGBoost grid model 94","GBM grid model 16","XGBoost grid model 47","XGBoost model 2","XGBoost grid model 38","XGBoost grid model 93","GBM grid model 35","XGBoost grid model 59","XGBoost grid model 53","XGBoost grid model 5","XGBoost grid model 30","XGBoost grid model 61","XGBoost grid model 35","XGBoost grid model 66"],[null,0.5341,0.4343,0.7337,0.58,0.5341,0.498,0.3629,0.3082,0.58,0.498,0.4036,0.2883,0.3629,0.3082,0.3844,0.4674,0.3844,0.4674,0.4036,0.3231,0.5341,0.4036,0.3844,0.3844,0.1461,0.1111,0.1111,0.0799,0.6797,0.6797,0.3629,0.4036,0.4036,0.3231,0.3844,0.3424,0.498,0.3844,0.4036,0.0956,0.3844,0.1907,0.4674,0.3424,0.3082,0.5341,0.4343,0.3424,0.5341,0.4036,0.3844,0.3231,0.3082,0.4674,0.3629,0.498,0.5341,0.4343,0.3231,0.2883,0.2883,0.498,0.3844,0.2357,0.1248,0.3082,0.5341,0.4036,0.4343,0.4343,0.3231,0.3231,0.3231,0.2357,0.6292,0.3231,0.3844,0.4674,0.1678,0.58,0.4674,0.498,0.1111,0.4343,0.2357,0.3231,0.4343,0.4343,0.4674,0.3629,0.2357,0.498,0.498,0.3231,0.498,0.4674,0.3424,0.2357,0.4036,0.3629,0.4343,0.498,0.1907,0.3844,0.3082,0.3844,0.6292,0.3629,0.1678,0.2618,0.5341,0.3844,0.4343,0.3231,0.3082,0.2618,0.2883,0.3844,0.3424,0.4036,0.4674,0.3629,0.4036,0.4036,0.1907,0.4036,0.3424,0.1248,0.3424,0.4036,0.4036,0.4036,0.3424,0.3231,0.3424,0.498,0.2158,0.2618,0.2618,0.3629,0.2357,0.2883,0.3629,0.3629,0.2357,0.3082,0.3424,0.3082,0.4036,0.3231,0.3629,0.3082,0.2158,0.3082,0.3844,0.3424,0.1248,0.3231,0.3424,0.2618,0.2618,0.3629,0.3424,0.3629,0.2883,0.2357,0.1907,0.3424,0.3231,0.2883,0.2883,0.2357,0.3082,0.2357,0.1248,0.3629,0.2618,0.1461,0.1111,0.1907,0.1678,0.1248,0.1678,0.2158,0.2158,0.1248],[null,0.5744,0.6863,0.5047,0.4455,0.4258,0.4455,0.4658,0.7647,0.3278,0.389,0.4658,0.6648,0.6863,0.4258,0.5047,0.4658,0.5934,0.4455,0.5047,0.6648,0.4658,0.4658,0.4455,0.389,0.6415,0.6863,0.9698,0.7384,0.389,0.4455,0.5744,0.4455,0.407,0.4658,0.3165,0.4455,0.407,0.389,0.5047,0.5521,0.4658,0.6415,0.389,0.4658,0.5934,0.389,0.4455,0.6415,0.389,0.3471,0.3756,0.4658,0.5934,0.3756,0.389,0.346,0.389,0.4455,0.4658,0.5047,0.4658,0.3278,0.389,0.5521,0.4658,0.5934,0.389,0.389,0.389,0.3165,0.4455,0.4658,0.4455,0.5047,0.3278,0.3756,0.3471,0.3278,0.389,0.2984,0.389,0.3165,0.4455,0.3278,0.4658,0.389,0.407,0.3756,0.3471,0.3471,0.4658,0.346,0.3471,0.4455,0.3165,0.3165,0.3278,0.4455,0.3756,0.3471,0.389,0.3278,0.4258,0.3756,0.4455,0.3165,0.3471,0.3278,0.389,0.3756,0.3278,0.3471,0.3165,0.389,0.3165,0.3471,0.3756,0.2984,0.3278,0.3165,0.2158,0.3278,0.2984,0.2984,0.4658,0.3278,0.3278,0.4455,0.3471,0.2748,0.2984,0.2748,0.3165,0.3278,0.3165,0.3165,0.4455,0.3278,0.3471,0.2984,0.3675,0.389,0.2984,0.3278,0.3278,0.3471,0.2748,0.2448,0.2158,0.2748,0.1933,0.2158,0.3278,0.3471,0.2158,0.2075,0.1933,0.1505,0.2984,0.3165,0.2984,0.1715,0.3165,0.1845,0.1933,0.1715,0.2158,0.2984,0.1715,0.1444,0.1176,0.1715,0.1715,0.2448,0.1933,0.1933,0.0878,0.1505,0.2158,0.1337,0.1176,0.1337,0.1013,0.1013,0.0751,0.1505],[null,0.5822,0.667,0.5484,0.4949,0.4516,0.4326,0.5953,0.7167,0.384,0.4021,0.4949,0.5822,0.693,0.4625,0.5635,0.4625,0.5953,0.384,0.5635,0.667,0.4021,0.5243,0.5243,0.4949,0.6436,0.7696,0.9097,0.7962,0.4157,0.4625,0.5822,0.4949,0.4516,0.5243,0.3195,0.4625,0.513,0.4326,0.4949,0.4949,0.5243,0.8528,0.513,0.5822,0.5953,0.4021,0.5953,0.7167,0.4625,0.3763,0.4326,0.5953,0.5243,0.4326,0.4326,0.3195,0.4157,0.4625,0.5243,0.6436,0.5953,0.384,0.4157,0.5953,0.4625,0.7431,0.4326,0.4326,0.4326,0.3483,0.4625,0.5635,0.4326,0.5243,0.3271,0.4157,0.4326,0.3763,0.4326,0.3271,0.4326,0.384,0.4857,0.3456,0.5635,0.4326,0.4326,0.384,0.3483,0.3483,0.5243,0.384,0.384,0.5635,0.2748,0.3483,0.384,0.5635,0.384,0.384,0.4157,0.3483,0.4949,0.4326,0.513,0.3074,0.3763,0.384,0.4949,0.3763,0.384,0.3195,0.3763,0.4326,0.2748,0.3763,0.384,0.2374,0.384,0.3483,0.248,0.384,0.3271,0.3763,0.4949,0.384,0.2748,0.513,0.384,0.3674,0.3456,0.3483,0.384,0.3674,0.3483,0.3195,0.4326,0.3483,0.384,0.3271,0.384,0.4157,0.3074,0.3195,0.384,0.4516,0.3271,0.3074,0.2231,0.3271,0.2748,0.169,0.2748,0.3483,0.2634,0.2374,0.1933,0.169,0.248,0.384,0.2231,0.1611,0.3271,0.1118,0.169,0.169,0.2634,0.3271,0.169,0.1456,0.1456,0.1505,0.1933,0.248,0.1505,0.1819,0.0894,0.1933,0.248,0.1176,0.1176,0.1505,0.0622,0.1049,0.0622,0.1358],[null,0.6605,0.6863,0.5376,0.2744,0.4066,0.4487,0.3028,0.3875,0.3028,0.266,0.3028,0.6605,0.3028,0.3681,0.3363,0.3363,0.4066,0.4704,0.2091,0.5612,0.3202,0.2278,0.2514,0.2091,0.5856,0.7964,0.8501,0.7964,0.1818,0.3681,0.4272,0.2278,0.1818,0.1592,0.1546,0.2744,0.266,0.2514,0.3681,0.8501,0.3363,0.4914,0.2744,0.2514,0.2744,0.2278,0.2091,0.3681,0.2091,0.3028,0.1705,0.2278,0.3681,0.2091,0.3681,0.3549,0.3028,0.1592,0.12,0.1891,0.2744,0.1592,0.2744,0.2091,0.2744,0.2514,0.1445,0.1705,0.1445,0.1705,0.1705,0.2514,0.1302,0.5376,0.2514,0.2091,0.12,0.2278,0.1891,0.1891,0.2278,0.1705,0.2514,0.1193,0.1705,0.1445,0.2021,0.2278,0.1705,0.1445,0.1705,0.1546,0.1445,0.1705,0.1592,0.1705,0.2278,0.2091,0.1103,0.1705,0.2744,0.1705,0.2091,0.1302,0.2514,0.1891,0.12,0.1404,0.12,0.1891,0.1705,0.3028,0.2278,0.2278,0.2278,0.1302,0.12,0.2278,0.12,0.1445,0.1445,0.1302,0.2514,0.1592,0.1302,0.223,0.1705,0.1705,0.1302,0.1592,0.1103,0.12,0.12,0.1705,0.1302,0.1592,0.1302,0.1016,0.12,0.0891,0.1101,0.1302,0.1891,0.1891,0.1103,0.1705,0.1592,0.1445,0.1103,0.1103,0.067,0.12,0.2744,0.1103,0.1103,0.0725,0.1016,0.1016,0.1445,0.1302,0.1891,0.1705,0.1103,0.1296,0.1592,0.12,0.1592,0.1302,0.0756,0.0725,0.0891,0.1302,0.0756,0.0756,0.1103,0.1103,0.1016,0.1445,0.1016,0.1103,0.0579,0.0579,0.0891,0.0756,0.0756,0.1302],[1,7,37,2,9,3,17,63,65,11,13,48,118,62,82,69,16,68,10,28,124,14,49,60,56,150,192,190,179,12,4,84,31,33,110,15,90,21,19,25,183,109,161,71,99,131,5,50,127,8,39,42,102,158,35,121,6,38,41,75,189,116,36,85,151,178,169,40,53,24,57,113,138,43,135,58,79,73,22,147,20,66,61,174,44,188,104,34,30,32,119,143,55,46,88,27,23,72,210,70,77,76,51,186,45,145,67,18,80,185,130,47,115,52,108,86,140,170,59,87,107,54,64,125,29,180,74,193,212,91,78,26,89,141,167,100,83,173,157,144,105,181,137,95,162,164,168,114,94,96,103,101,128,172,152,81,112,216,98,92,159,123,93,111,148,106,126,153,117,129,132,139,156,149,142,166,120,133,146,187,165,175,154,176,155,160,171],[1,4,8,22,17,24,28,11,13,41,44,30,6,20,21,25,51,23,58,38,12,56,33,35,34,15,2,3,7,63,66,42,53,54,18,72,45,61,75,71,10,27,9,48,37,26,85,57,29,89,81,67,39,31,65,49,98,86,70,52,16,50,76,73,32,40,19,78,77,83,93,55,43,79,68,97,88,69,121,46,116,91,90,62,94,36,74,102,122,115,87,59,104,103,84,142,133,95,47,100,99,101,130,60,112,80,111,136,109,64,106,144,132,145,118,129,105,96,164,131,123,158,139,134,149,92,151,110,82,128,140,159,138,120,125,141,154,108,119,124,135,107,127,163,148,114,117,150,156,162,153,155,157,152,137,166,160,143,176,177,147,171,187,165,170,180,183,175,174,173,169,182,181,172,167,178,192,196,190,168,188,186,195,197,201,200,198],[1,4,6,31,19,33,40,11,12,50,49,32,9,20,30,23,63,21,72,38,14,77,26,35,27,18,2,3,8,60,66,54,55,58,16,83,46,61,85,81,13,24,7,47,37,22,95,56,28,93,105,64,34,39,59,57,118,103,67,53,10,44,74,84,25,43,15,69,70,79,104,51,36,73,80,110,89,62,137,42,122,86,82,65,94,29,68,108,132,126,92,45,99,102,78,155,140,87,41,98,90,101,136,52,111,71,115,134,106,48,113,153,145,152,121,128,91,88,172,129,120,163,133,141,146,76,160,116,75,124,135,147,131,114,130,138,157,97,112,119,125,96,123,165,161,100,107,151,148,158,143,149,156,159,127,164,154,144,174,179,142,175,195,162,173,181,189,177,170,169,168,186,184,171,166,182,192,199,194,167,188,190,196,200,204,202,198],[1,5,9,13,28,14,15,27,32,20,24,25,3,40,16,33,23,44,18,57,12,17,64,46,69,10,2,4,6,66,65,21,68,62,67,41,31,70,35,37,8,59,43,55,51,54,49,72,58,53,19,74,76,26,96,30,38,34,84,83,52,61,88,36,71,22,87,108,98,115,48,89,91,116,29,47,60,114,39,86,78,94,110,42,112,93,100,103,63,77,56,109,111,118,122,50,79,129,95,125,130,120,81,102,134,106,119,132,127,126,80,90,45,92,101,113,137,123,82,133,131,107,147,85,162,140,104,73,124,158,151,182,157,143,97,142,128,155,146,148,171,152,156,121,75,173,159,141,166,150,172,168,139,99,167,178,170,105,160,161,165,145,149,187,135,163,138,136,185,184,189,153,144,174,193,154,181,164,169,186,191,188,199,179,192,197,196],[4,20,60,68,73,74,100,112,122,122,130,135,136,142,149,150,153,156,158,161,162,164,172,176,186,193,198,200,200,201,201,201,207,207,211,211,212,213,214,214,214,219,220,221,224,233,234,235,242,243,244,247,251,254,255,257,260,261,262,263,267,271,274,278,279,283,290,295,298,301,302,308,308,311,312,312,316,318,319,321,336,337,343,343,344,346,346,347,347,350,354,356,369,369,372,374,375,383,393,393,396,398,398,400,402,402,412,420,422,423,429,434,437,441,448,456,473,477,477,480,481,482,483,485,486,488,489,492,493,501,504,514,515,518,519,521,522,533,534,535,536,536,543,544,546,551,551,556,564,566,571,573,580,582,583,589,596,608,608,609,613,614,624,625,626,630,636,641,646,655,658,660,665,666,668,680,685,692,699,708,732,739,744,752,752,759,763]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4-2" class="section level4 hasAnchor" number="3.5.5.4">
<h4><span class="header-section-number">3.5.5.4</span> CV 4<a href="id_03_model_training.html#cv-4-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-c273df6ef71c83496c93" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c273df6ef71c83496c93">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","GBM grid model 62","Super learner GBM","XGBoost grid model 14","XGBoost grid model 73","GBM grid model 66","XGBoost grid model 42","GBM grid model 82","XGBoost grid model 13","XGBoost model 3","Super learner all models","XGBoost grid model 19","Super learner XGBoost","GBM grid model 12","XGBoost grid model 63","XGBoost grid model 24","XGBoost grid model 25","GBM grid model 26","XGBoost grid model 89","XGBoost grid model 86","XGBoost grid model 21","XGBoost grid model 71","GBM grid model 22","GBM grid model 14","GBM model 3","XGBoost grid model 92","XGBoost grid model 81","XGBoost grid model 68","XGBoost grid model 52","XGBoost grid model 28","XGBoost grid model 2","XGBoost grid model 23","XGBoost grid model 88","GBM grid model 29","GBM grid model 7","GBM grid model 28","GBM grid model 20","XGBoost grid model 41","GBM grid model 46","GBM model 2","XGBoost model 1","GBM grid model 90","GBM model 5","XGBoost grid model 9","GBM model 1","GBM grid model 81","XGBoost grid model 64","GBM grid model 16","GBM grid model 53","GBM model 4","XGBoost grid model 4","XRT model","XGBoost model 2","GBM grid model 100","XGBoost grid model 94","XGBoost grid model 27","GBM grid model 49","XGBoost grid model 6","XGBoost grid model 66","GBM grid model 94","XGBoost grid model 80","DRF model","GBM grid model 64","GBM grid model 23","XGBoost grid model 11","GBM grid model 15","GBM grid model 47","XGBoost grid model 51","XGBoost grid model 30","XGBoost grid model 38","GBM grid model 30","Super learner neural network","Neural network grid model 27","Neural network grid model 38"],[null,0.118,0.2259,0.7337,0.0653,0.118,0.3947,0.0488,0.2857,0.2259,0.0562,0.118,0.2857,0.1753,0.0061,0.1349,0.1753,0.0562,0.1992,0.0755,0.5255,0.0562,0.0653,0.0562,0.7337,0.4819,0.1753,0.118,0.3197,0.1349,0.3947,0.5744,0.5255,0.0653,0.0755,0.1992,0.1753,0.2542,0.0755,0.3197,0.2542,0.1349,0.5255,0.1547,0.3947,0.0653,0.1349,0.1547,0.1547,0.4819,0.3572,0.118,0.0755,0.103,0.0653,0.0755,0.103,0.0653,0.1753,0.2542,0.1349,0.1992,0.0562,0.0886,0.0886,0.118,0.0653,0.0755,0.0562,0.0562,0.0755,0.103,0.0562,0.0562],[0.9214,null,0.6467,0.5563,0.8447,0.82,0.5563,0.9488,0.6258,0.5932,0.5932,0.6153,0.4547,0.6258,0.8694,0.5563,0.5827,0.6258,0.6816,0.6258,0.4547,0.6664,0.6467,0.7085,0.4547,0.43,0.5554,0.5563,0.43,0.6408,0.4547,0.43,0.3654,0.5563,0.4869,0.4869,0.5315,0.3092,0.398,0.3384,0.398,0.398,0.3654,0.3595,0.3092,0.4547,0.3654,0.293,0.4474,0.2562,0.3384,0.2279,0.293,0.43,0.293,0.293,0.5098,0.3092,0.2767,0.3092,0.2767,0.3092,0.398,0.1817,0.3092,0.3384,0.293,0.1199,0.1665,0.1665,0.1665,0.1563,0.293,0.2562],[0.8502,1,0.7489,0.5904,0.8694,0.8227,0.6585,null,0.6585,0.7325,0.6418,0.687,0.5245,0.6942,0.7489,0.5754,0.7325,0.7942,0.7489,0.6585,0.3957,0.7489,0.8227,0.6585,0.4778,0.4778,0.5754,0.5904,0.5754,0.7145,0.3183,0.3183,0.3183,0.6585,0.4551,0.4097,0.5584,0.3753,0.5584,0.4247,0.4097,0.5904,0.3447,0.3957,0.3957,0.5904,0.5584,0.3957,0.5515,0.3447,0.3571,0.2645,0.3447,0.3957,0.4097,0.3753,0.4551,0.2915,0.3368,0.4551,0.1648,0.2915,0.4892,0.2416,0.3957,0.3957,0.3183,0.1229,0.2327,0.1648,0.1867,0.1648,0.3571,0.1761],[0.9698,0.7628,0.5375,0.7628,0.7285,0.4949,0.6594,0.5375,0.6816,0.6594,0.7012,0.6155,0.5168,0.4237,null,0.7628,0.7532,0.3496,0.7628,0.7628,0.4625,0.7532,0.3181,0.2972,0.2972,0.4625,0.2972,0.6398,0.3828,0.6816,0.3496,0.3181,0.1874,0.2972,0.2317,0.1874,0.2972,0.2972,0.1568,0.148,0.3496,0.2577,0.1677,0.4022,0.1688,0.1874,0.2317,0.1166,0.3181,0.1677,0.2087,0.3369,0.2087,0.2087,0.1381,0.1874,0.2317,0.1688,0.1874,0.1349,0.2087,0.3154,0.148,0.0886,0.2856,0.1349,0.1013,0.1166,0.0772,0.1267,0.0578,0.1013,0.1381,0.1349],[1,43,13,3,73,30,21,109,20,17,47,36,10,23,205,40,46,57,37,75,12,90,64,48,2,7,34,67,15,50,14,4,9,41,38,19,29,18,54,6,25,35,8,28,11,69,32,24,27,5,16,72,42,65,61,70,49,66,31,22,26,159,58,33,55,44,76,39,79,45,71,60,138,146],[5,1,15,38,11,20,37,2,64,65,57,60,75,66,8,80,72,53,81,67,93,63,59,69,97,119,99,94,121,107,123,127,128,108,112,115,120,142,101,129,143,116,139,147,140,110,145,133,144,155,164,165,150,134,148,149,158,166,175,169,189,162,168,182,179,181,174,201,187,212,190,209,180,195],[10,2,12,54,13,18,48,1,72,73,67,69,78,65,14,92,74,51,93,80,103,76,52,58,98,129,105,111,127,118,130,133,134,113,109,104,115,158,95,132,149,106,139,165,136,100,150,124,144,148,169,178,157,135,146,152,154,170,174,163,200,172,160,182,186,177,171,212,188,220,185,211,180,195],[3,11,46,6,16,50,17,37,28,29,18,30,43,59,1,20,40,73,35,26,41,22,85,87,78,51,70,38,60,52,69,91,90,108,114,138,117,64,139,122,86,152,125,81,136,148,113,163,142,160,124,61,135,153,143,134,168,131,155,182,130,67,183,184,166,197,180,157,181,169,209,206,189,192],[19,57,86,101,113,118,123,149,184,184,189,195,206,213,228,232,232,234,246,248,249,251,260,262,275,306,308,310,323,327,336,355,361,370,373,376,381,382,389,389,403,409,411,421,423,427,440,444,457,468,473,476,484,487,498,505,529,533,535,536,545,560,569,581,586,599,601,609,635,646,655,686,687,728]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5-2" class="section level4 hasAnchor" number="3.5.5.5">
<h4><span class="header-section-number">3.5.5.5</span> CV 5<a href="id_03_model_training.html#cv-5-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-a6fcf20aded8fc682026" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a6fcf20aded8fc682026">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner XGBoost","XGBoost grid model 25","XGBoost grid model 24","XGBoost grid model 68","XGBoost model 3","XGBoost grid model 92","XGBoost grid model 28","XGBoost grid model 9","XGBoost grid model 45","XGBoost grid model 71","XGBoost grid model 15","Super learner all models","XGBoost grid model 63","XGBoost grid model 81","XGBoost grid model 41","XGBoost grid model 86","XGBoost grid model 11","XGBoost grid model 95","GBM grid model 73","GBM grid model 14","GBM grid model 1","XGBoost grid model 42","XGBoost grid model 17","GBM grid model 3","XGBoost grid model 22","XGBoost grid model 3","XGBoost grid model 91","XGBoost grid model 36","XGBoost grid model 4","Super learner GBM","XGBoost grid model 98","XGBoost grid model 79","XGBoost grid model 50","GBM grid model 26","XGBoost grid model 84","XGBoost grid model 88","GBM grid model 85","XGBoost grid model 78","GBM grid model 57","XGBoost grid model 13","GBM grid model 65","XGBoost grid model 76","GBM model 2","XGBoost grid model 58","GBM grid model 33","XGBoost model 1","GBM grid model 89","XGBoost grid model 2","XGBoost grid model 70","GBM grid model 42","GBM grid model 37","XGBoost grid model 89","XGBoost grid model 49","GBM grid model 80","GBM grid model 2","GBM model 4","XGBoost grid model 73","GBM grid model 38","GBM grid model 58","GBM grid model 19","XGBoost grid model 34","GBM grid model 12","GBM grid model 41","GBM grid model 84","GBM grid model 7","XGBoost grid model 14","GBM grid model 44","GBM grid model 88","GBM grid model 50","GBM grid model 36","XGBoost grid model 75","GBM grid model 52","GBM grid model 74","GBM grid model 95","XGBoost grid model 21","XGBoost grid model 8","XGBoost grid model 52","XGBoost grid model 23","GBM grid model 53","GBM grid model 17","GBM grid model 86","GBM grid model 31","XGBoost grid model 19","XGBoost grid model 60","GBM grid model 11","GBM grid model 25","XGBoost grid model 48","GBM grid model 22","GBM model 3","GBM grid model 5","GBM grid model 56","XGBoost grid model 53","XGBoost grid model 80","XGBoost grid model 1","GBM grid model 75","GBM grid model 92","GBM grid model 45","XGBoost grid model 55","GBM grid model 99","GBM grid model 62","GBM grid model 72","GBM grid model 78","XGBoost grid model 44","GBM grid model 87","GBM grid model 79","DRF model","GBM grid model 69","GBM grid model 81","GBM grid model 10","GBM grid model 39","GBM grid model 70","GBM grid model 47","GBM grid model 98","GBM grid model 28","GBM grid model 55","GBM grid model 66","GBM grid model 4","GBM grid model 29","GBM grid model 48","GBM grid model 71","GBM grid model 68","GBM grid model 82","GBM grid model 24","XGBoost grid model 27","GBM grid model 46","GBM grid model 6","GBM grid model 83","XGBoost grid model 18","GBM grid model 32","GBM grid model 76","XGBoost grid model 51","GBM grid model 40","GBM grid model 8","GBM grid model 77","XGBoost model 2","XGBoost grid model 93","XGBoost grid model 87","XRT model","GBM grid model 91","XGBoost grid model 37","GBM grid model 97","XGBoost grid model 54","GBM grid model 96","GBM grid model 94","GBM grid model 9","GBM grid model 51","GBM grid model 90","XGBoost grid model 97","GBM grid model 16","XGBoost grid model 94","GBM grid model 30","GBM grid model 27","GBM grid model 100","XGBoost grid model 82","XGBoost grid model 6","GBM grid model 63","GBM grid model 20","XGBoost grid model 61","GBM grid model 13","GBM grid model 49","GBM model 5","XGBoost grid model 47","GBM grid model 21","XGBoost grid model 39","XGBoost grid model 38","XGBoost grid model 85","GBM grid model 35","XGBoost grid model 66","Super learner neural network","XGBoost grid model 64"],[null,0.6841,0.5875,0.6841,0.7384,0.5875,0.8501,0.6841,0.7939,0.281,0.3522,0.281,0.1792,0.281,0.2946,0.5447,0.281,0.281,0.281,0.281,0.5447,0.4626,0.4626,0.3522,0.327,0.2946,0.0588,0.0283,0.1602,0.5875,0.2602,0.0806,0.141,0.0806,0.5447,0.1999,0.3864,0.2602,0.1602,0.3522,0.5447,0.2946,0.1245,0.5875,0.0806,0.2946,0.2602,0.2946,0.503,0.0942,0.1792,0.4626,0.4222,0.2395,0.503,0.2395,0.503,0.503,0.2602,0.327,0.1999,0.6373,0.3864,0.4626,0.2395,0.3864,0.6373,0.2946,0.2212,0.3522,0.0942,0.0697,0.2946,0.2946,0.2946,0.5447,0.2212,0.5875,0.4222,0.327,0.3522,0.2602,0.2602,0.2946,0.3522,0.4222,0.1999,0.0806,0.4222,0.6841,0.4222,0.281,0.1081,0.503,0.2602,0.327,0.3522,0.281,0.2395,0.3522,0.3864,0.3522,0.2395,0.2395,0.2395,0.0806,0.1602,0.141,0.2946,0.141,0.2602,0.1792,0.4222,0.1081,0.3522,0.3522,0.2946,0.1999,0.3864,0.2946,0.2395,0.1602,0.2602,0.1081,0.2395,0.2212,0.2946,0.2946,0.1081,0.2946,0.2946,0.2212,0.1081,0.141,0.141,0.2602,0.0697,0.0697,0.0588,0.1999,0.2602,0.2602,0.141,0.0806,0.1999,0.281,0.1602,0.2395,0.1792,0.2946,0.2212,0.1999,0.1792,0.281,0.1602,0.1792,0.2212,0.281,0.0942,0.2395,0.2212,0.2946,0.1245,0.1792,0.1245,0.1792,0.1245,0.1245,0.141,0.1081,0.2395],[0.8637,0.9185,0.5953,0.5064,0.461,0.461,0.3094,0.461,0.5502,0.4207,0.748,0.2721,0.5502,0.3094,0.4207,0.1932,0.5502,0.748,0.6975,0.2342,0.3435,0.2342,0.2342,0.2153,0.2983,0.6202,null,0.9698,0.9427,0.2602,0.2721,0.5744,0.4207,0.6713,0.2836,0.4207,0.4207,0.3435,0.5953,0.1932,0.2602,0.2721,0.5064,0.1577,0.461,0.2342,0.2983,0.2836,0.1146,0.3094,0.2836,0.2836,0.3094,0.2836,0.2153,0.2983,0.1876,0.2153,0.2836,0.3435,0.3094,0.2602,0.2492,0.1423,0.2342,0.2602,0.176,0.2342,0.2342,0.1423,0.2056,0.2286,0.2056,0.2342,0.176,0.2602,0.4207,0.2342,0.1932,0.2721,0.1577,0.2342,0.1876,0.1932,0.1932,0.1932,0.1932,0.2153,0.176,0.1423,0.176,0.176,0.3435,0.1103,0.3094,0.176,0.176,0.1932,0.1932,0.1288,0.1146,0.1577,0.2286,0.2153,0.1423,0.1288,0.1577,0.176,0.1146,0.1423,0.1577,0.153,0.1577,0.1577,0.1146,0.1103,0.1146,0.1103,0.1103,0.1288,0.1146,0.1146,0.1103,0.1103,0.3094,0.1146,0.1388,0.1577,0.2153,0.1146,0.1103,0.0693,0.1103,0.1146,0.1146,0.1288,0.1423,0.1932,0.1103,0.1288,0.1423,0.1146,0.1423,0.1288,0.1103,0.1146,0.1103,0.1146,0.1577,0.1103,0.1061,0.1146,0.1577,0.1103,0.2342,0.1103,0.1146,0.0941,0.06,0.1423,0.1146,0.0693,0.1146,0.0806,0.1061,0.0693,0.1103,0.1103,0.0693,0.1288,0.1061],[0.7502,1,0.4642,0.5484,0.503,0.503,0.3197,0.4642,0.4642,0.4642,0.6998,0.3355,0.503,0.2935,0.503,0.2258,0.65,0.7502,0.8041,0.3197,0.4482,0.2935,0.2258,0.244,0.4039,0.7261,null,1,0.9488,0.2258,0.2829,0.6758,0.5262,0.6243,0.3837,0.3497,0.3497,0.3837,0.5993,0.2585,0.2664,0.3074,0.503,0.2258,0.503,0.2664,0.3689,0.3197,0.1276,0.3497,0.3197,0.3497,0.3197,0.2664,0.2664,0.3074,0.2169,0.244,0.3355,0.3837,0.3837,0.244,0.2935,0.1845,0.2664,0.2935,0.2039,0.3355,0.3197,0.1845,0.3074,0.2386,0.3074,0.2664,0.1845,0.244,0.3497,0.2039,0.2258,0.2935,0.1845,0.244,0.1966,0.244,0.1845,0.2039,0.2935,0.2386,0.244,0.1523,0.2169,0.1845,0.3837,0.1054,0.2664,0.1638,0.1717,0.1845,0.1523,0.1523,0.1966,0.1523,0.2585,0.244,0.244,0.1523,0.2258,0.2258,0.1249,0.1845,0.244,0.2386,0.1276,0.2039,0.1402,0.1717,0.1402,0.1276,0.1276,0.1402,0.151,0.2039,0.1402,0.1402,0.2664,0.1402,0.1842,0.1402,0.1845,0.1523,0.1402,0.0731,0.1402,0.1717,0.1845,0.1523,0.1845,0.1845,0.0941,0.1402,0.1523,0.1717,0.2039,0.1523,0.1021,0.1155,0.1155,0.1276,0.2039,0.1276,0.0914,0.0941,0.1845,0.1054,0.1717,0.1276,0.1155,0.1155,0.0634,0.1845,0.1276,0.084,0.1155,0.084,0.1155,0.0634,0.0941,0.1054,0.084,0.1523,0.0941],[0.9155,1,0.5744,0.4626,0.4849,0.2441,0.693,0.5082,0.5539,0.4626,0.693,0.2441,0.6457,0.5539,0.4626,0.381,0.5973,0.4626,0.5973,0.1268,0.1344,0.0761,0.4237,0.3435,0.1014,0.748,0.8583,null,0.8338,0.2177,0.1689,0.381,0.381,0.5539,0.1178,0.3435,0.6457,0.2441,0.5744,0.0934,0.2441,0.1503,0.2725,0.0845,0.4626,0.0934,0.1503,0.1,0.0761,0.1925,0.1344,0.1014,0.1689,0.2725,0.0934,0.1344,0.0758,0.1503,0.0934,0.0934,0.1689,0.2592,0.0845,0.0845,0.1344,0.0934,0.2177,0.0934,0.0845,0.0697,0.1178,0.1503,0.1014,0.0934,0.1,0.2725,0.2725,0.1503,0.1689,0.0934,0.0697,0.1014,0.1503,0.1014,0.2177,0.0588,0.1344,0.1014,0.1014,0.063,0.1503,0.1014,0.2177,0.1503,0.2441,0.0821,0.0761,0.0697,0.1925,0.063,0.063,0.0761,0.0588,0.1689,0.0761,0.063,0.1925,0.0588,0.0761,0.0697,0.0528,0.1014,0.063,0.0761,0.0588,0.063,0.0528,0.0528,0.063,0.0821,0.0761,0.063,0.0915,0.0697,0.3435,0.0697,0.1014,0.0845,0.1689,0.0934,0.1014,0.0697,0.0588,0.063,0.0697,0.0845,0.1014,0.1503,0.1014,0.1178,0.0934,0.0697,0.0934,0.063,0.063,0.0528,0.063,0.063,0.0934,0.063,0.063,0.0697,0.0761,0.0578,0.1689,0.0528,0.0761,0.0528,0.0761,0.1014,0.0845,0.0528,0.0845,0.0528,0.0845,0.0697,0.0845,0.0588,0.0697,0.063,0.0934],[1,3,4,6,5,10,2,14,9,45,48,42,120,41,73,19,80,108,111,56,15,22,20,32,51,136,185,190,179,18,49,173,143,160,21,101,38,113,177,28,11,71,139,8,171,77,81,67,7,128,125,30,88,142,26,107,16,29,76,55,164,12,61,31,132,33,17,100,176,63,154,184,97,72,64,46,163,35,24,47,36,104,87,86,34,25,115,169,59,13,37,65,155,23,180,50,62,90,99,39,57,68,151,123,116,172,192,158,69,130,148,145,44,144,52,60,75,112,93,85,103,134,94,150,118,82,78,43,175,66,92,84,147,149,157,96,168,156,193,127,95,98,218,188,105,79,137,83,161,70,114,122,153,89,216,121,131,54,138,91,106,74,141,119,146,135,133,126,140,159,129],[4,3,14,13,21,20,31,29,36,23,26,33,11,38,28,49,24,17,18,32,45,48,57,51,39,19,1,2,7,62,47,10,22,15,58,37,63,30,16,67,78,52,34,80,25,53,60,59,91,43,41,71,61,42,79,50,87,90,66,69,35,104,73,89,55,93,113,65,40,84,46,44,64,76,82,106,54,112,119,88,102,68,85,94,125,108,72,70,100,120,105,99,75,144,74,117,107,95,115,121,110,109,83,114,101,86,92,81,133,98,96,97,139,103,140,137,131,118,127,135,132,111,134,122,149,142,143,151,128,157,147,166,136,129,126,164,148,153,155,150,181,156,130,123,162,168,152,169,158,173,170,165,145,172,138,167,161,186,183,174,179,193,188,177,187,201,196,192,194,176,198],[3,4,15,16,24,20,45,38,44,28,27,37,14,47,36,74,23,13,18,25,35,43,75,69,31,19,1,2,7,70,41,10,21,11,55,39,79,22,17,64,99,48,42,83,29,46,68,50,106,53,32,62,65,52,73,40,90,112,59,60,26,120,63,92,49,93,134,57,33,82,34,51,54,66,80,128,67,126,144,86,103,56,84,101,147,108,61,81,98,113,97,94,72,162,78,110,105,91,131,111,102,104,76,123,96,85,119,71,137,88,89,87,125,95,135,132,122,107,116,130,129,100,133,117,160,141,143,146,124,155,145,182,138,118,114,167,153,161,174,149,188,148,140,109,157,166,152,164,159,168,181,163,136,173,142,175,158,184,189,170,179,192,196,177,193,201,198,186,197,165,199],[4,3,10,11,16,36,12,29,25,21,37,27,9,28,23,19,34,24,17,58,78,70,31,32,64,14,2,1,6,49,69,13,22,26,80,40,38,60,18,77,48,66,35,83,30,81,53,87,61,41,71,110,59,39,100,84,90,54,86,105,68,63,106,91,74,94,50,93,67,89,85,42,107,108,98,46,44,56,45,112,95,109,88,79,55,121,115,47,111,122,132,117,73,51,52,119,124,123,57,133,140,128,116,72,126,101,43,142,114,146,134,141,167,135,157,155,156,149,152,139,130,151,136,113,76,143,153,177,97,147,145,102,137,162,164,138,99,103,65,163,125,190,104,174,171,183,160,189,127,196,144,161,178,181,120,154,168,200,118,195,186,192,131,191,158,159,172,199,175,209,193],[12,13,43,46,66,86,90,110,114,117,138,139,154,154,160,161,161,162,164,171,173,183,183,184,185,188,189,195,199,199,206,206,208,212,214,217,218,225,228,236,236,237,250,254,255,257,262,263,265,265,269,273,273,275,278,281,283,285,287,289,293,299,303,303,310,313,314,315,316,318,319,321,322,322,324,326,328,329,332,333,336,337,344,360,361,362,363,367,368,368,371,375,375,380,384,396,398,399,402,404,409,409,426,432,439,444,446,452,453,462,467,470,475,477,484,484,484,486,488,489,494,496,497,502,503,508,517,517,524,525,529,534,558,558,561,565,568,573,587,589,589,592,592,594,595,596,601,605,605,607,609,611,612,615,616,617,618,624,628,630,650,651,656,664,684,696,699,703,706,709,719]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6-2" class="section level4 hasAnchor" number="3.5.5.6">
<h4><span class="header-section-number">3.5.5.6</span> CV 6<a href="id_03_model_training.html#cv-6-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-feac5d00d727778b1243" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-feac5d00d727778b1243">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner XGBoost","XGBoost grid model 86","XGBoost grid model 68","Super learner GBM","XGBoost grid model 84","GBM grid model 37","GBM grid model 38","GBM grid model 80","GBM grid model 52","XGBoost grid model 50","GBM grid model 85","XGBoost grid model 70","GBM grid model 95","XGBoost grid model 79","XGBoost grid model 95","XGBoost grid model 89","XGBoost grid model 42","XGBoost grid model 41","GBM grid model 88","XGBoost grid model 98","XGBoost grid model 22","Super learner all models","XGBoost grid model 17","GBM grid model 57","XGBoost grid model 45","XGBoost grid model 3","GBM grid model 19","GBM grid model 33","XGBoost model 3","GBM grid model 53","GBM grid model 36","GBM grid model 56","XGBoost grid model 33","GBM grid model 8","XGBoost grid model 1","GBM grid model 26","GBM grid model 42","GBM grid model 74","XGBoost grid model 24","XGBoost grid model 63","XGBoost grid model 73","GBM grid model 79","GBM grid model 14","XGBoost grid model 7","GBM model 3","XGBoost grid model 36","GBM grid model 50","XGBoost grid model 25","XGBoost grid model 91","GBM grid model 67","GBM grid model 92","GBM grid model 45","GBM grid model 1","GBM grid model 84","GBM grid model 12","GBM grid model 3","XGBoost grid model 20","XGBoost grid model 34","XGBoost grid model 67","GBM grid model 25","GBM grid model 41","GBM grid model 54","GBM grid model 72","GBM grid model 82","XGBoost grid model 11","XGBoost grid model 78","XGBoost grid model 9","GBM grid model 69","XGBoost grid model 16","GBM grid model 99","GBM grid model 66","XGBoost grid model 58","GBM model 4","GBM grid model 27","GBM grid model 71","XGBoost grid model 2","XGBoost grid model 4","GBM grid model 2","GBM grid model 65","GBM grid model 81","GBM grid model 90","GBM model 2","GBM grid model 86","GBM grid model 10","XGBoost grid model 49","XGBoost model 1","XGBoost grid model 92","GBM grid model 5","XGBoost grid model 81","GBM grid model 55","GBM grid model 58","GBM grid model 17","GBM grid model 6","GBM grid model 18","GBM grid model 97","GBM grid model 4","GBM grid model 87","GBM grid model 73","XGBoost grid model 14","GBM grid model 29","GBM grid model 7","GBM grid model 39","GBM grid model 9","GBM grid model 31","XGBoost grid model 46","XGBoost grid model 60","GBM grid model 34","XGBoost grid model 76","GBM grid model 68","XGBoost grid model 44","GBM grid model 11","GBM grid model 62","GBM grid model 89","XGBoost grid model 71","XGBoost grid model 23","XGBoost grid model 8","GBM grid model 75","GBM grid model 94","GBM grid model 22","XGBoost grid model 28","GBM grid model 20","GBM grid model 47","XGBoost grid model 75","GBM grid model 16","XGBoost grid model 55","GBM grid model 48","XRT model","XGBoost grid model 97","XGBoost grid model 48","GBM grid model 96","XGBoost grid model 82","GBM grid model 78","GBM grid model 40","GBM grid model 100","XGBoost grid model 87","GBM grid model 49","XGBoost grid model 52","GBM grid model 44","XGBoost grid model 77","GBM grid model 64","XGBoost grid model 54","GBM grid model 32","GBM grid model 91","GBM grid model 77","GBM model 5","XGBoost model 2","GBM grid model 51","GBM grid model 76","GBM model 1","GBM grid model 43","XGBoost grid model 80","GBM grid model 23","XGBoost grid model 13","XGBoost grid model 18","XGBoost grid model 37","GBM grid model 63","XGBoost grid model 21","GBM grid model 46","GBM grid model 24","XGBoost grid model 74","GBM grid model 13","GBM grid model 60","XGBoost grid model 38","GBM grid model 21","GBM grid model 61","GBM grid model 93","GBM grid model 70","XGBoost grid model 15","GBM grid model 28","GBM grid model 83","XGBoost grid model 88","Super learner neural network","XGBoost grid model 51","GBM grid model 30","XGBoost grid model 94","XGBoost grid model 27","GBM grid model 98","XGBoost grid model 19","GBM grid model 15","GBM grid model 35","XGBoost grid model 61","XGBoost grid model 85","GBM grid model 59","XGBoost grid model 6","XGBoost grid model 12","XGBoost grid model 53","XGBoost grid model 39","XGBoost grid model 69","XGBoost grid model 64","XGBoost grid model 5","XGBoost grid model 30","XGBoost grid model 35","XGBoost grid model 66"],[0.9698,0.878,0.5633,null,0.7782,0.7061,0.6634,0.5862,0.5862,0.736,0.3898,0.5862,0.5862,0.6164,0.5246,0.4258,0.7782,0.9244,0.736,0.6164,0.1655,0.9698,0.1655,0.9698,0.6164,0.5862,0.3365,0.5862,0.5862,0.82,0.736,0.3037,0.4936,0.1277,0.3365,0.736,0.7061,0.3898,0.5633,0.9698,0.82,0.7782,0.5246,0.9244,0.0639,0.9244,0.5633,0.6164,0.82,0.0639,0.3576,0.6164,0.459,0.736,0.4936,0.5862,0.5246,0.3037,0.9698,0.0639,0.3898,0.5246,0.6164,0.4936,0.5862,0.4258,0.2417,0.82,0.5633,0.2417,0.5862,0.7061,0.2417,0.7782,0.5246,0.3576,0.82,0.6634,0.5246,0.5862,0.459,0.5246,0.82,0.4258,0.3037,0.5862,0.736,0.9244,0.736,0.459,0.736,0.7061,0.5633,0.3898,0.736,0.6164,0.6634,0.3365,0.5862,0.7782,0.7061,0.7061,0.459,0.5246,0.6164,0.0639,0.3576,0.1655,0.1655,0.459,0.5862,0.6164,0.6164,0.5246,0.9244,0.7782,0.736,0.5633,0.459,0.4936,0.7782,0.736,0.6164,0.4936,0.7061,0.3576,0.4936,0.3576,0.6634,0.4258,0.1655,0.82,0.5862,0.2715,0.2417,0.2158,0.4936,0.5633,0.3037,0.6634,0.3365,0.459,0.3365,0.3898,0.3576,0.459,0.4258,0.3576,0.2158,0.736,0.5246,0.4936,0.5246,0.6164,0.5633,0.3898,0.2715,0.4258,0.3576,0.459,0.2417,0.3365,0.3576,0.1483,0.2715,0.3576,0.3576,0.2158,0.3037,0.4936,0.4258,0.2715,0.2417,0.3898,0.2715,0.1483,0.3898,0.3576,0.1655,0.2158,0.1907,0.1907,0.1655,0.2158,0.1483,0.0639,0.1907,0.1094,0.0639,0.1655,0.1277,0.0919,0.0639,0.0768],[0.6907,0.7939,0.5152,0.4625,0.5993,0.5993,0.486,0.6907,0.5152,0.6479,0.6735,0.6907,0.4766,0.486,0.4625,0.4343,0.5152,0.362,0.3262,0.4343,null,0.5152,0.7432,0.537,0.4766,0.5558,0.6907,0.5152,0.4766,0.4003,0.4625,0.6479,0.5152,0.7432,0.9097,0.5039,0.407,0.6907,0.486,0.4003,0.3874,0.407,0.5993,0.4625,0.7939,0.362,0.4343,0.5152,0.362,0.7939,0.6243,0.486,0.5039,0.457,0.5558,0.3874,0.5993,0.4766,0.3262,0.486,0.5993,0.5152,0.486,0.4625,0.4343,0.537,0.5558,0.3874,0.3262,0.5039,0.4003,0.4343,0.4003,0.407,0.4343,0.3874,0.2949,0.4003,0.4766,0.4625,0.3874,0.4343,0.4343,0.4766,0.486,0.4003,0.4291,0.3262,0.3131,0.3131,0.5558,0.407,0.3874,0.3874,0.4625,0.4625,0.3262,0.4343,0.486,0.407,0.407,0.3874,0.4625,0.4343,0.407,0.486,0.407,0.4625,0.4343,0.5039,0.2949,0.3131,0.3262,0.3874,0.2949,0.2949,0.2156,0.3262,0.3131,0.4625,0.3131,0.2512,0.2698,0.407,0.3262,0.3262,0.3874,0.3131,0.1986,0.362,0.3131,0.2512,0.2844,0.3874,0.3131,0.2376,0.3262,0.2156,0.362,0.3131,0.2949,0.2698,0.3131,0.3874,0.3131,0.2376,0.1817,0.2295,0.2698,0.2512,0.2512,0.2376,0.3262,0.1598,0.2512,0.2651,0.1986,0.2844,0.2156,0.2512,0.2651,0.1986,0.3262,0.2156,0.2512,0.2844,0.3262,0.2512,0.2698,0.1817,0.2512,0.2376,0.2698,0.1446,0.2295,0.1986,0.2156,0.2376,0.1787,0.1817,0.2156,0.1563,0.1787,0.2156,0.1446,0.1598,0.1817,0.2376,0.1817,0.1817,0.1817,0.1787,0.1446,0.0971],[0.6587,0.7432,0.6136,0.5773,0.6998,0.637,0.5963,0.7214,0.6136,0.6998,0.7432,0.6136,0.5225,0.5337,0.5337,0.5099,0.5337,0.3898,0.4621,0.4621,null,0.5337,0.6998,0.5225,0.482,0.5773,0.7432,0.5963,0.5225,0.4367,0.5099,0.6587,0.558,0.8231,0.8501,0.5963,0.4866,0.6998,0.5337,0.4866,0.5099,0.4621,0.6136,0.5099,0.7696,0.4621,0.3898,0.5337,0.4383,0.7964,0.7214,0.5099,0.5029,0.5225,0.6587,0.4866,0.6998,0.5225,0.3695,0.6998,0.7214,0.5773,0.4866,0.5337,0.4621,0.6848,0.6136,0.4383,0.4367,0.5963,0.482,0.4866,0.5029,0.4383,0.4866,0.4866,0.3444,0.3895,0.5225,0.4866,0.4558,0.4621,0.4383,0.5225,0.637,0.4367,0.5029,0.3695,0.3444,0.3895,0.5773,0.4367,0.3898,0.4383,0.5099,0.5099,0.3898,0.4621,0.5337,0.4237,0.4866,0.4558,0.5099,0.4367,0.4621,0.5099,0.4383,0.5029,0.4367,0.5029,0.3444,0.3898,0.4383,0.4866,0.4237,0.301,0.301,0.4237,0.3898,0.4621,0.301,0.3444,0.3898,0.482,0.3898,0.3898,0.4621,0.4104,0.2483,0.4104,0.3898,0.3444,0.3637,0.4558,0.3444,0.301,0.3444,0.301,0.4866,0.3695,0.3357,0.3444,0.3444,0.4383,0.4237,0.2871,0.2977,0.2977,0.301,0.3444,0.301,0.2336,0.4383,0.1624,0.3444,0.2742,0.2562,0.3637,0.2871,0.3444,0.2977,0.2562,0.3695,0.1958,0.3357,0.2977,0.3444,0.3695,0.4237,0.2336,0.3444,0.2562,0.3444,0.1778,0.2977,0.2187,0.2336,0.3357,0.1958,0.2483,0.2562,0.1753,0.1866,0.3357,0.1866,0.1624,0.1866,0.2871,0.2187,0.1958,0.2336,0.1624,0.1778,0.1087],[0.894,0.9698,0.9214,0.6543,0.7528,null,0.4731,0.5039,0.6543,0.5635,0.894,0.5445,0.7528,0.4022,0.5635,0.5039,0.5224,0.4731,0.7796,0.3859,0.6074,0.4842,0.7528,0.4842,0.3859,0.4842,0.7528,0.4555,0.4176,0.3334,0.4555,0.4842,0.7333,0.7065,0.5224,0.6803,0.3334,0.6306,0.3859,0.5445,0.5039,0.3614,0.6306,0.4555,0.9698,0.2842,0.4842,0.311,0.311,0.9698,0.4842,0.3859,0.4022,0.311,0.4378,0.3614,0.5224,0.9698,0.3614,0.4842,0.4731,0.3334,0.3334,0.311,0.4176,0.5635,0.5635,0.4176,0.3255,0.5224,0.4176,0.2269,0.6074,0.2269,0.3614,0.4022,0.4022,0.3859,0.3255,0.311,0.4731,0.3859,0.2842,0.3334,0.3859,0.3859,0.3334,0.3859,0.2269,0.3334,0.311,0.3614,0.2538,0.3614,0.2538,0.3614,0.311,0.311,0.2678,0.4378,0.2538,0.353,0.2538,0.3255,0.4555,0.4842,0.4176,0.3803,0.3859,0.3614,0.3614,0.1634,0.1658,0.2678,0.3859,0.2423,0.1874,0.1363,0.2075,0.3334,0.2538,0.1874,0.1874,0.5861,0.2075,0.2269,0.3334,0.6074,0.3255,0.1874,0.1658,0.1658,0.1874,0.5861,0.1658,0.1363,0.1658,0.2269,0.2075,0.2269,0.1213,0.2075,0.1998,0.2678,0.1022,0.1213,0.1213,0.1109,0.1213,0.1658,0.1528,0.2269,0.2075,0.1147,0.2075,0.1363,0.1528,0.311,0.1022,0.1213,0.2269,0.1147,0.2269,0.2269,0.1658,0.1528,0.1998,0.1147,0.2269,0.0936,0.0845,0.2075,0.0845,0.1213,0.1213,0.1363,0.1634,0.1022,0.1213,0.0936,0.074,0.1213,0.074,0.1213,0.1213,0.1658,0.064,0.1213,0.1213,0.1213,0.0936,0.0845,0.064,0.074],[4,14,29,1,35,80,45,71,43,62,111,78,56,50,63,95,52,6,19,54,166,3,151,2,58,88,173,51,68,9,42,156,116,186,140,57,27,160,75,7,31,8,121,11,195,5,67,60,12,188,163,55,120,25,154,94,107,165,17,199,135,110,70,105,66,141,164,23,91,131,72,49,146,20,99,129,18,32,118,84,122,89,15,145,157,64,53,10,37,65,41,47,74,109,48,61,28,137,126,22,30,59,102,92,79,191,150,182,148,174,38,46,34,97,16,13,33,87,108,73,21,40,39,90,44,106,112,194,69,159,193,24,82,168,125,177,104,76,162,196,123,124,128,130,184,77,114,113,180,26,93,81,101,36,83,96,138,100,119,144,136,85,155,161,143,127,133,171,189,86,98,142,172,115,132,176,103,153,147,152,175,139,134,183,149,179,169,170,187,181,167,178,190,192],[2,5,6,26,11,4,15,12,24,16,3,17,35,29,33,19,36,60,56,30,1,63,9,58,34,38,8,48,39,69,45,10,27,7,18,55,52,13,40,81,68,78,25,70,14,80,66,51,85,20,21,67,41,71,23,50,37,31,97,22,28,42,61,46,74,44,43,110,65,49,82,83,59,93,72,53,107,111,54,76,57,79,105,47,32,101,103,127,98,108,94,91,88,84,92,87,109,77,75,134,114,102,89,95,100,73,90,62,99,64,145,119,123,104,142,156,141,106,113,124,147,132,131,126,128,121,117,118,148,96,86,162,133,115,129,120,140,160,116,122,135,138,137,130,112,161,150,152,125,184,157,179,153,188,170,172,154,181,151,143,166,169,144,174,155,158,159,136,146,173,168,180,149,195,176,177,192,167,186,175,164,202,191,171,200,197,185,194,187,199,203,209,210,220],[2,3,5,33,9,7,13,10,23,16,4,18,44,32,40,21,42,78,72,30,1,77,14,62,31,45,11,47,35,75,38,8,28,6,17,61,46,12,37,88,80,86,25,60,15,81,79,55,102,22,19,66,41,63,20,48,29,57,116,24,27,34,58,39,76,43,50,118,59,56,84,74,67,96,70,51,112,122,49,65,52,71,104,36,26,109,106,140,97,111,93,90,82,85,87,73,105,68,64,147,108,92,89,91,99,83,98,54,113,53,158,115,117,100,146,164,149,94,107,127,148,128,126,134,120,123,114,135,157,95,69,165,130,110,131,121,137,167,103,133,129,138,132,124,101,160,142,150,125,182,152,183,144,191,177,178,153,186,141,136,176,171,139,185,151,154,159,119,145,172,163,184,143,202,174,180,194,166,189,173,162,204,192,170,196,201,181,195,190,200,203,212,217,230],[5,8,6,16,22,1,31,15,28,27,4,19,13,38,18,20,26,14,17,51,2,29,3,56,67,25,7,55,59,48,78,30,34,10,37,41,92,32,66,43,40,49,54,94,11,70,24,72,39,12,45,65,52,96,60,68,87,9,33,23,80,86,89,88,69,57,36,42,83,62,63,101,35,99,71,79,75,47,93,91,85,82,100,97,112,53,76,64,110,58,115,116,104,74,129,136,117,84,107,73,130,131,106,111,113,44,61,102,46,121,77,140,152,126,123,98,108,145,114,124,132,150,154,103,166,109,119,21,95,120,139,141,151,118,135,105,147,125,149,81,146,143,155,169,158,162,160,159,144,182,175,134,181,168,157,142,148,127,185,176,122,180,171,90,164,174,163,192,138,189,205,128,178,137,170,133,179,190,161,184,194,167,195,193,183,153,199,177,173,172,202,197,200,198],[13,30,46,76,77,92,104,108,118,121,122,132,148,149,154,155,156,158,164,165,170,172,177,178,190,196,199,201,201,201,203,204,205,209,212,214,217,217,218,219,219,221,225,235,235,236,236,238,238,242,248,253,254,255,257,260,260,262,263,268,270,272,278,278,285,285,293,293,298,298,301,307,307,308,312,312,312,312,314,316,316,321,324,325,327,327,338,341,342,342,343,344,348,352,356,357,359,366,372,376,382,384,386,389,391,391,399,400,406,412,418,420,426,427,427,431,431,432,442,448,448,450,450,453,458,459,462,468,469,470,487,492,496,511,520,523,528,528,530,532,533,543,552,553,555,560,566,574,574,574,577,577,579,583,587,588,593,594,596,599,600,605,609,610,613,613,614,618,618,620,634,634,642,649,652,666,668,676,683,684,695,712,712,717,728,730,734,736,737,752,775,796,817,840]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7-2" class="section level4 hasAnchor" number="3.5.5.7">
<h4><span class="header-section-number">3.5.5.7</span> CV 7<a href="id_03_model_training.html#cv-7-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-818336deb978766e117a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-818336deb978766e117a">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","XGBoost grid model 92","XGBoost grid model 25","XGBoost grid model 50","Super learner XGBoost","XGBoost grid model 9","XGBoost grid model 24","XGBoost grid model 71","XGBoost grid model 17","XGBoost grid model 45","XGBoost grid model 34","XGBoost grid model 14","XGBoost grid model 13","XGBoost grid model 49","XGBoost grid model 73","XGBoost grid model 68","XGBoost grid model 89","Super learner all models","GBM grid model 50","GBM grid model 82","XGBoost grid model 11","XGBoost grid model 70","XGBoost grid model 3","GBM grid model 58","XGBoost grid model 98","XGBoost grid model 8","XGBoost grid model 82","XGBoost grid model 95","XGBoost grid model 44","GBM grid model 80","XGBoost grid model 86","XGBoost model 3","GBM grid model 22","GBM grid model 19","XGBoost grid model 2","GBM grid model 92","XGBoost grid model 84","GBM grid model 86","Super learner GBM","XGBoost grid model 42","XGBoost grid model 23","GBM grid model 43","GBM grid model 65","XGBoost grid model 36","XGBoost grid model 60","GBM grid model 38","GBM grid model 99","GBM grid model 31","GBM grid model 45","GBM grid model 3","XGBoost grid model 67","GBM grid model 54","XGBoost grid model 41","GBM grid model 68","GBM grid model 48","XGBoost grid model 28","GBM grid model 56","XGBoost grid model 16","GBM grid model 23","GBM grid model 90","GBM grid model 37","XGBoost model 1","XGBoost grid model 81","GBM grid model 52","GBM grid model 33","GBM grid model 26","GBM grid model 76","GBM grid model 63","GBM grid model 87","XGBoost grid model 18","GBM grid model 25","GBM grid model 53","GBM grid model 6","GBM model 2","GBM grid model 39","XGBoost grid model 22","Super learner neural network","XRT model","GBM grid model 71","XGBoost grid model 4","GBM grid model 57","XGBoost grid model 63","GBM model 4","XGBoost grid model 88","GBM model 5","GBM grid model 95","GBM grid model 4","GBM grid model 72","GBM grid model 44","XGBoost grid model 15","XGBoost grid model 21","XGBoost grid model 51","GBM grid model 17","GBM grid model 85","XGBoost grid model 80","XGBoost grid model 79","GBM grid model 73","XGBoost grid model 87","GBM grid model 89","GBM grid model 1","XGBoost grid model 75","GBM grid model 66","DRF model","GBM grid model 62","XGBoost grid model 48","GBM grid model 74","XGBoost model 2","XGBoost grid model 52","GBM grid model 97","GBM grid model 12","XGBoost grid model 97","XGBoost grid model 74","XGBoost grid model 76","GBM grid model 75","GBM model 3","GBM grid model 27","GBM grid model 88","XGBoost grid model 39","GBM grid model 49","GBM grid model 18","XGBoost grid model 77","XGBoost grid model 61","GBM grid model 30","GBM grid model 81","XGBoost grid model 37","XGBoost grid model 55","GBM grid model 46","GBM grid model 47","XGBoost grid model 19","GBM grid model 94","XGBoost grid model 85","GBM grid model 24","XGBoost grid model 38","XGBoost grid model 94","XGBoost grid model 35","GBM grid model 16","XGBoost grid model 66","GBM grid model 20","XGBoost grid model 53","XGBoost grid model 6","GBM grid model 13","GBM grid model 5","XGBoost grid model 47"],[null,0.9698,0.7964,0.4963,0.4164,0.7964,0.7456,0.8528,0.4963,0.4963,0.3399,0.5895,0.5895,0.7456,0.4963,0.7964,0.305,0.0933,0.1591,0.1591,0.1024,0.2201,0.0222,0.2754,0.1784,0.305,0.461,0.1024,0.6952,0.2201,0.2201,0.4963,0.3399,0.2486,0.4963,0.1985,0.1024,0.0537,0.1268,0.4963,0.5447,0.2201,0.1784,0.5895,0.1268,0.113,0.1985,0.1024,0.1024,0.0813,0.1024,0.1024,0.5895,0.0933,0.0813,0.6952,0.0813,0.0626,0.113,0.1784,0.1784,0.2754,0.2754,0.2201,0.1985,0.1784,0.1591,0.1445,0.1784,0.305,0.0714,0.1591,0.1591,0.305,0.1445,0.4164,0.1591,0.305,0.1268,0.7456,0.2201,0.2201,0.3783,0.3399,0.2201,0.1024,0.0933,0.113,0.1024,0.113,0.1591,0.4963,0.0813,0.2754,0.4164,0.4164,0.1784,0.0714,0.1024,0.1985,0.0714,0.1985,0.1591,0.1985,0.2754,0.1591,0.3783,0.2754,0.0714,0.0933,0.113,0.113,0.0714,0.1591,0.305,0.0537,0.1445,0.1024,0.2486,0.1268,0.2201,0.2754,0.0813,0.1985,0.0714,0.2486,0.1268,0.113,0.113,0.113,0.0933,0.0537,0.1445,0.0933,0.113,0.1268,0.0626,0.1024,0.0813,0.1024,0.1268,0.113,0.1591],[0.5726,0.5726,0.2586,0.6776,0.5272,0.3373,0.3373,0.2857,0.1816,0.3548,0.3737,0.2857,0.2282,0.2731,0.1188,0.134,0.2857,0.4568,0.2282,0.1609,0.3207,0.2282,null,0.1252,0.2857,0.101,0.0817,0.2857,0.1188,0.1117,0.1414,0.2282,0.1609,0.101,0.1117,0.1117,0.0889,0.1414,0.101,0.134,0.097,0.097,0.1252,0.204,0.1816,0.2282,0.0889,0.1816,0.1414,0.1414,0.1252,0.0817,0.097,0.101,0.1117,0.0889,0.204,0.204,0.1117,0.1117,0.1117,0.109,0.1117,0.0817,0.101,0.101,0.097,0.1252,0.101,0.097,0.1938,0.101,0.0889,0.101,0.1117,0.204,0.204,0.101,0.1117,0.0877,0.0817,0.1117,0.0889,0.101,0.0817,0.101,0.1609,0.0817,0.101,0.101,0.097,0.097,0.1252,0.0889,0.0889,0.1414,0.101,0.101,0.097,0.101,0.101,0.0817,0.0877,0.1117,0.097,0.101,0.1188,0.101,0.0817,0.097,0.101,0.0817,0.097,0.101,0.1117,0.1252,0.097,0.0755,0.0629,0.0702,0.101,0.0817,0.0564,0.0755,0.0817,0.0564,0.0817,0.0702,0.1516,0.0755,0.0889,0.0755,0.0702,0.0755,0.0702,0.0817,0.0702,0.0817,0.097,0.0629,0.0755,0.0702,0.097],[0.5966,0.2829,0.2542,0.3909,0.4299,0.4094,0.333,0.2267,0.2267,0.333,0.451,0.2267,0.2172,0.2542,0.1227,0.1108,0.1425,0.24,0.1597,0.2047,0.3514,0.1803,null,0.1597,0.2829,0.075,0.075,0.2677,0.1227,0.1355,0.1425,0.1803,0.105,0.0951,0.1425,0.1291,0.1149,0.2267,0.1108,0.1516,0.0903,0.105,0.0882,0.1355,0.2267,0.2267,0.1024,0.1291,0.1355,0.1803,0.1516,0.1291,0.0673,0.1803,0.1291,0.0673,0.2172,0.1108,0.1149,0.1355,0.1355,0.0951,0.0817,0.1425,0.1149,0.105,0.0951,0.0951,0.0951,0.105,0.1227,0.105,0.0951,0.1149,0.105,0.1597,0.1803,0.0951,0.2047,0.0806,0.075,0.105,0.0951,0.0817,0.0951,0.1291,0.1597,0.075,0.1597,0.0951,0.0673,0.0817,0.1149,0.0951,0.075,0.0903,0.105,0.1355,0.0951,0.0951,0.1149,0.105,0.0728,0.1149,0.0903,0.0903,0.0951,0.075,0.0817,0.1597,0.0951,0.0817,0.105,0.105,0.0903,0.1024,0.1291,0.075,0.0564,0.0951,0.0806,0.0817,0.0564,0.0882,0.0817,0.0817,0.0806,0.0634,0.0951,0.0951,0.0606,0.0951,0.0673,0.0564,0.0728,0.075,0.0564,0.0817,0.0951,0.0634,0.0673,0.0673,0.0634],[0.6332,0.7912,0.4898,0.7361,0.6332,0.4673,0.5612,0.5376,0.2363,0.5837,0.4673,0.5837,0.2925,0.3453,0.3083,0.251,0.2099,0.7099,0.1663,0.1663,0.2658,0.2925,null,0.0786,0.2925,0.2099,0.0858,0.3644,0.2234,0.0997,0.2925,0.2099,0.1307,0.0694,0.1883,0.0786,0.1663,0.0858,0.0786,0.3083,0.2658,0.0858,0.0694,0.2099,0.4026,0.1486,0.0694,0.0858,0.0694,0.0694,0.2925,0.0655,0.1663,0.0786,0.0858,0.1144,0.1486,0.2099,0.0858,0.0858,0.0655,0.2001,0.1883,0.053,0.0578,0.0694,0.0858,0.0858,0.0694,0.2099,0.0694,0.0578,0.0694,0.0694,0.0858,0.2363,0.0997,0.1766,0.0786,0.1232,0.0655,0.1307,0.0578,0.1663,0.1307,0.0694,0.0858,0.0578,0.053,0.0858,0.1486,0.1663,0.0694,0.0578,0.1486,0.1663,0.0746,0.1398,0.053,0.0655,0.1307,0.053,0.1766,0.0694,0.1144,0.0786,0.1766,0.1144,0.053,0.0578,0.0997,0.0694,0.1663,0.0694,0.0578,0.0655,0.0578,0.1398,0.053,0.0655,0.1144,0.2363,0.053,0.0578,0.1307,0.0786,0.0694,0.0578,0.2001,0.0655,0.1144,0.0694,0.0858,0.0694,0.0858,0.0694,0.0578,0.053,0.0858,0.0694,0.0694,0.0578,0.0858],[1,3,2,9,23,6,5,26,17,35,38,15,7,10,14,4,49,142,69,75,102,62,188,29,153,31,16,124,12,64,33,21,22,36,11,67,119,143,78,20,18,48,81,28,157,104,57,122,129,141,189,90,13,135,117,25,118,147,86,92,34,39,54,63,41,52,139,120,76,32,152,55,93,30,108,60,126,149,88,8,42,73,19,47,27,121,100,58,146,137,70,45,107,37,46,98,82,164,110,44,177,40,125,99,68,106,43,83,138,148,123,133,179,72,24,156,113,150,53,91,196,115,95,71,182,111,77,61,132,94,130,172,127,145,128,80,140,87,170,144,112,84,160],[2,6,11,10,4,12,13,9,19,16,18,27,34,31,33,50,29,5,20,25,21,41,1,43,14,59,63,26,66,44,65,69,70,55,80,54,40,22,49,91,92,75,52,89,42,47,73,45,37,32,36,56,111,35,51,103,53,57,58,67,87,105,104,81,88,84,60,64,79,120,38,82,74,106,71,119,62,76,86,147,116,122,123,137,141,85,90,124,72,99,139,149,93,127,155,128,109,100,95,121,102,129,136,115,151,113,161,159,110,97,135,130,126,143,166,112,131,156,165,146,132,173,158,154,148,167,160,164,169,157,182,138,184,176,185,174,179,175,168,188,186,192,193],[2,7,15,10,3,12,13,11,20,19,22,41,42,45,40,70,29,5,17,21,24,57,1,35,14,90,81,25,92,36,95,89,79,54,106,50,56,18,46,119,118,72,48,104,60,43,74,44,32,27,39,52,125,28,49,115,51,68,55,62,85,114,123,75,71,76,59,61,77,138,30,73,67,101,66,128,47,109,82,156,112,134,116,149,145,78,83,120,65,113,153,161,84,126,170,133,96,105,86,108,111,121,151,103,157,102,160,169,98,94,141,132,142,136,164,100,122,165,163,135,139,181,155,147,152,167,148,159,173,150,187,131,191,179,189,174,180,171,168,192,184,188,195],[4,5,7,6,8,12,15,9,22,14,11,13,23,20,19,26,43,2,54,42,24,25,1,88,21,28,48,35,44,82,39,55,68,95,45,73,29,70,81,27,34,72,90,53,18,87,79,76,92,94,31,98,47,101,84,61,83,38,114,93,111,59,37,100,120,113,69,86,99,41,112,122,110,107,103,58,131,36,117,63,109,51,125,56,77,115,130,106,127,62,50,57,139,133,52,71,145,65,149,172,60,162,46,144,89,146,108,64,132,140,80,97,49,166,164,153,170,67,158,168,75,74,143,182,78,118,181,187,102,177,85,151,91,104,116,193,126,196,141,128,186,206,175],[9,21,35,35,38,42,46,55,78,84,89,96,106,106,106,150,150,154,160,163,171,185,191,195,202,208,208,210,214,226,232,234,239,240,242,244,244,253,254,257,262,267,271,274,277,281,283,287,290,294,295,296,296,299,301,304,305,310,313,314,317,317,318,319,320,325,327,331,331,331,332,332,344,344,348,365,366,370,373,374,379,380,383,389,390,399,403,408,410,411,412,412,423,423,423,430,432,434,440,445,450,452,458,461,465,467,472,475,478,479,479,492,496,517,518,521,536,538,539,540,542,543,551,554,560,563,566,571,576,578,584,592,593,604,618,621,625,629,647,652,668,670,723]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8-2" class="section level4 hasAnchor" number="3.5.5.8">
<h4><span class="header-section-number">3.5.5.8</span> CV 8<a href="id_03_model_training.html#cv-8-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-bae9c42b32491feccb49" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-bae9c42b32491feccb49">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","XGBoost grid model 24","XGBoost grid model 45","Super learner XGBoost","XGBoost grid model 63","XGBoost grid model 71","XGBoost grid model 2","XGBoost grid model 89","XGBoost model 3","XGBoost grid model 68","Super learner all models","GBM model 3","XGBoost grid model 23","XGBoost grid model 11","GBM grid model 62","GBM grid model 89","XGBoost grid model 16","XGBoost grid model 67","XGBoost grid model 14","Super learner GBM","GBM grid model 12","XGBoost grid model 98","GBM grid model 57","XGBoost grid model 95","XGBoost grid model 4","GBM model 4","XGBoost grid model 86","XGBoost grid model 49","XGBoost grid model 28","GBM grid model 11","GBM grid model 41","GBM grid model 8","GBM grid model 73","XGBoost grid model 9","XGBoost grid model 13","GBM grid model 4","GBM model 2","XGBoost grid model 25","XGBoost grid model 58","GBM grid model 88","GBM grid model 75","GBM grid model 19","GBM grid model 78","XGBoost grid model 1","XGBoost grid model 17","XGBoost grid model 34","XGBoost grid model 79","XGBoost grid model 84","GBM grid model 6","GBM grid model 85","GBM grid model 25","GBM grid model 38","GBM grid model 71","GBM grid model 72","GBM grid model 1","XGBoost grid model 92","XGBoost grid model 75","XGBoost grid model 81","GBM grid model 22","XGBoost grid model 50","GBM grid model 26","XGBoost grid model 36","GBM grid model 53","GBM grid model 52","GBM grid model 37","XGBoost grid model 22","GBM grid model 3","GBM grid model 2","XGBoost grid model 8","GBM grid model 92","XGBoost grid model 82","GBM grid model 87","GBM grid model 32","GBM grid model 36","GBM grid model 96","XGBoost grid model 91","GBM grid model 42","GBM grid model 14","GBM grid model 33","GBM grid model 80","GBM grid model 50","XGBoost grid model 42","XGBoost model 1","GBM grid model 29","GBM grid model 55","GBM grid model 66","XGBoost grid model 80","GBM grid model 49","GBM grid model 95","GBM grid model 39","GBM grid model 82","XGBoost grid model 44","XGBoost grid model 70","GBM grid model 34","GBM grid model 86","GBM grid model 70","GBM model 5","XGBoost grid model 78","GBM grid model 65","GBM grid model 69","XGBoost grid model 5","GBM model 1","GBM grid model 24","GBM grid model 17","XGBoost grid model 60","XGBoost grid model 15","GBM grid model 58","XRT model","GBM grid model 44","XGBoost grid model 88","GBM grid model 68","GBM grid model 99","XGBoost grid model 41","GBM grid model 67","XGBoost grid model 48","GBM grid model 40","GBM grid model 7","GBM grid model 97","GBM grid model 5","GBM grid model 45","GBM grid model 83","Super learner neural network","GBM grid model 84","GBM grid model 47","XGBoost grid model 54","XGBoost grid model 55","GBM grid model 46","GBM grid model 9","GBM grid model 18","GBM grid model 31","GBM grid model 43","GBM grid model 64","GBM grid model 90","GBM grid model 48","XGBoost grid model 52","GBM grid model 74","GBM grid model 79","XGBoost grid model 73","GBM grid model 100","GBM grid model 60","GBM grid model 30","XGBoost grid model 46","XGBoost grid model 97","DRF model","GBM grid model 81","GBM grid model 56","GBM grid model 27","GBM grid model 15","GBM grid model 51","XGBoost grid model 27","XGBoost grid model 94","GBM grid model 28","XGBoost model 2","GBM grid model 35","XGBoost grid model 18","XGBoost grid model 19","GBM grid model 91","XGBoost grid model 21","XGBoost grid model 74","GBM grid model 93","GBM grid model 23","GBM grid model 98","GBM grid model 13","XGBoost grid model 85","GBM grid model 63","XGBoost grid model 53","GBM grid model 76","XGBoost grid model 37","XGBoost grid model 39","XGBoost grid model 61","GBM grid model 21","GBM grid model 16","GBM grid model 54","GBM grid model 61","GBM grid model 59","GBM grid model 94"],[null,0.7384,0.5781,0.4443,0.3706,0.9097,0.408,0.6292,0.2459,0.8528,0.0981,0.4443,0.4882,0.1705,0.2459,0.2459,0.2744,0.1387,0.5781,0.2459,0.1518,0.0588,0.1387,0.0889,0.5324,0.4443,0.0981,0.0889,0.3387,0.1875,0.2459,0.1235,0.1875,0.4443,0.4443,0.2459,0.4443,0.5781,0.2083,0.0981,0.0981,0.2083,0.3061,0.0683,0.408,0.408,0.2459,0.1387,0.3387,0.1875,0.1518,0.1875,0.2459,0.3706,0.3387,0.5324,0.2305,0.2459,0.2305,0.2083,0.2744,0.3387,0.2459,0.1705,0.2459,0.3706,0.2083,0.1235,0.4882,0.1875,0.3706,0.1875,0.1875,0.0889,0.1235,0.1875,0.0588,0.3061,0.1518,0.1235,0.3061,0.3706,0.2083,0.1387,0.2459,0.3061,0.3387,0.2744,0.2459,0.1705,0.2744,0.1235,0.408,0.0683,0.0981,0.1102,0.2459,0.2305,0.1875,0.2459,0.0683,0.3706,0.0683,0.1102,0.0588,0.1518,0.2305,0.1875,0.1518,0.2459,0.1387,0.1518,0.5324,0.0981,0.3706,0.0588,0.2305,0.1235,0.2305,0.1705,0.1518,0.1518,0.0889,0.2083,0.0889,0.1102,0.1705,0.2459,0.1705,0.1387,0.1518,0.1387,0.2305,0.1102,0.2459,0.0981,0.0981,0.2305,0.2305,0.0796,0.1102,0.1235,0.2744,0.1102,0.2083,0.0889,0.0501,0.1875,0.0981,0.1235,0.1102,0.1705,0.2083,0.1102,0.1518,0.1102,0.0683,0.1875,0.0796,0.0501,0.2083,0.0588,0.1235,0.1387,0.1235,0.0796,0.0981,0.0981,0.1518,0.0889,0.0889,0.0796,0.0981,0.1102,0.0501,0.0796],[0.9729,0.8583,0.7236,0.8039,1,0.442,0.4237,0.6713,0.5973,0.3183,0.6973,0.4594,0.327,0.7771,0.498,0.4816,0.4068,0.3906,0.2741,0.3906,0.7504,null,0.6713,0.4237,0.3757,0.2535,0.498,0.6479,0.442,0.3906,0.327,0.442,0.3029,0.2741,0.327,0.2696,0.2741,0.327,0.2741,0.4594,0.5973,0.3906,0.3029,0.498,0.2117,0.2741,0.4068,0.2535,0.1871,0.3574,0.2535,0.2741,0.4594,0.2535,0.4068,0.1938,0.327,0.3183,0.4237,0.3444,0.3906,0.2535,0.1763,0.2535,0.3574,0.3029,0.3444,0.2741,0.2117,0.327,0.1566,0.2351,0.2351,0.4237,0.2535,0.3574,0.4068,0.224,0.1938,0.3574,0.327,0.2741,0.1938,0.3183,0.1871,0.3574,0.1293,0.327,0.224,0.2741,0.2741,0.498,0.1419,0.3029,0.3574,0.2741,0.1566,0.1763,0.1566,0.3029,0.2535,0.2117,0.2351,0.327,0.2535,0.1871,0.2117,0.1763,0.1419,0.224,0.2535,0.2741,0.1293,0.3029,0.2351,0.2117,0.1763,0.3029,0.1938,0.2535,0.3757,0.1763,0.2351,0.1938,0.1419,0.2117,0.2535,0.1528,0.2117,0.2117,0.2117,0.1763,0.1566,0.1566,0.1293,0.1566,0.1938,0.1419,0.1566,0.2117,0.1155,0.1566,0.1938,0.1009,0.1419,0.2117,0.2535,0.0774,0.1938,0.1763,0.1419,0.1293,0.0885,0.1009,0.1249,0.1009,0.1155,0.1009,0.1566,0.1566,0.1293,0.1155,0.1293,0.1419,0.0885,0.0885,0.0676,0.0961,0.0774,0.0774,0.0885,0.1009,0.2117,0.1293,0.1155,0.0774],[null,0.8583,0.777,1,0.8583,0.4626,0.3963,0.6033,0.6033,0.3283,0.6975,0.4626,0.2763,0.7237,0.5316,0.5082,0.4156,0.4297,0.2158,0.4466,0.7503,0.8583,0.6975,0.6033,0.3444,0.2158,0.6522,0.6975,0.3283,0.3963,0.3798,0.3614,0.2472,0.2568,0.291,0.2708,0.2472,0.2568,0.2981,0.4297,0.6522,0.678,0.2763,0.6522,0.1565,0.2472,0.3614,0.2373,0.1853,0.4849,0.3158,0.2763,0.4466,0.3283,0.4297,0.202,0.2763,0.3283,0.3283,0.4626,0.4156,0.2568,0.2107,0.2568,0.4466,0.3614,0.4297,0.2763,0.1853,0.3444,0.2158,0.2763,0.2981,0.4297,0.2981,0.291,0.2568,0.202,0.2981,0.4626,0.2981,0.2294,0.1565,0.2763,0.2107,0.4626,0.0898,0.3963,0.2373,0.2981,0.2981,0.5558,0.202,0.2568,0.3444,0.3798,0.1853,0.2373,0.202,0.4297,0.2763,0.2158,0.2373,0.2981,0.202,0.2373,0.2158,0.1327,0.1639,0.202,0.3283,0.2472,0.0975,0.2763,0.1327,0.291,0.2373,0.2981,0.2158,0.2158,0.2763,0.2373,0.2708,0.2107,0.1009,0.2568,0.2708,0.1639,0.2158,0.2472,0.202,0.1985,0.1853,0.2107,0.1327,0.2373,0.2158,0.1565,0.1565,0.2294,0.1518,0.1422,0.1639,0.0806,0.1422,0.2981,0.2107,0.1093,0.1565,0.1639,0.0898,0.1327,0.1009,0.0806,0.1639,0.1565,0.1327,0.0508,0.202,0.2472,0.1565,0.1853,0.0898,0.0724,0.0898,0.1009,0.0806,0.0806,0.0806,0.0898,0.1009,0.1266,0.2763,0.1171,0.1518,0.1009],[0.748,0.9698,0.7745,0.748,0.9126,0.6181,0.4963,0.4768,0.6436,0.365,0.8582,0.4164,0.4963,0.4359,0.3797,0.4768,0.3343,0.3797,0.4164,0.246,0.5429,null,0.3983,0.4579,0.4768,0.2278,0.5429,0.748,0.3343,0.3209,0.2707,0.3343,0.3209,0.2278,0.3209,0.284,0.2278,0.4164,0.3209,0.3459,0.3797,0.2958,0.1515,0.4963,0.3459,0.3459,0.4359,0.246,0.2407,0.2958,0.2278,0.2958,0.3797,0.1836,0.2617,0.3459,0.2958,0.3343,0.3459,0.284,0.246,0.3209,0.1515,0.3209,0.246,0.3209,0.3983,0.246,0.246,0.2278,0.1836,0.1836,0.1836,0.2958,0.2097,0.3459,0.3343,0.224,0.1836,0.2278,0.2707,0.3209,0.1515,0.284,0.2407,0.2278,0.2707,0.246,0.1814,0.1515,0.1515,0.3459,0.169,0.2707,0.246,0.1836,0.2707,0.1836,0.2278,0.2707,0.2707,0.1836,0.2278,0.169,0.3209,0.3134,0.1515,0.3797,0.1386,0.2407,0.246,0.1836,0.1515,0.2278,0.2707,0.169,0.1515,0.2958,0.1515,0.2278,0.284,0.09,0.1836,0.1386,0.169,0.2278,0.1208,0.1493,0.09,0.169,0.1515,0.169,0.1042,0.1208,0.1386,0.169,0.169,0.1386,0.0596,0.1836,0.1836,0.1836,0.246,0.2097,0.09,0.1515,0.2097,0.1042,0.0796,0.246,0.052,0.1042,0.0796,0.09,0.1304,0.09,0.1208,0.1042,0.0796,0.0596,0.0796,0.09,0.0596,0.09,0.0596,0.1042,0.0596,0.077,0.052,0.0796,0.0596,0.09,0.1208,0.0596,0.0796,0.0712],[1,2,5,9,25,3,17,32,39,4,102,11,6,80,30,70,58,76,7,33,117,171,148,124,19,15,138,160,37,103,48,134,73,21,20,66,8,10,133,181,176,141,31,177,13,43,130,88,34,127,100,72,74,27,28,12,92,36,41,121,105,29,46,155,140,136,85,116,22,135,23,82,64,157,142,131,186,35,161,146,52,26,54,118,60,109,24,45,56,57,42,179,16,151,185,147,44,75,78,68,144,18,143,191,187,106,55,79,97,53,166,163,14,125,172,158,62,195,40,95,213,94,137,38,114,96,59,49,89,108,87,93,51,184,50,183,154,47,67,150,90,192,65,168,61,174,173,84,110,113,112,71,69,104,86,111,156,91,128,169,81,164,83,99,101,132,115,145,107,126,159,152,265,129,194,162],[2,4,8,7,9,19,15,14,16,42,11,38,41,21,31,23,30,27,54,34,12,1,6,22,71,57,24,18,61,28,55,25,50,79,84,52,85,89,32,20,13,29,67,26,94,77,43,56,86,39,45,66,63,87,80,111,65,95,91,53,46,96,76,40,35,60,72,58,113,49,109,78,81,37,51,69,33,100,44,48,101,130,103,74,98,75,139,112,106,105,115,59,131,64,47,68,140,118,116,110,93,129,90,62,88,117,120,145,108,141,82,83,158,99,97,92,125,73,138,122,70,114,107,144,135,134,136,146,127,128,137,143,151,102,163,104,121,161,152,124,154,126,164,148,157,119,123,167,155,162,153,168,178,165,180,166,149,184,159,142,176,147,174,185,179,170,187,173,191,192,171,172,133,188,169,183],[1,5,9,7,10,24,19,14,16,57,11,47,71,18,30,17,35,27,81,34,13,2,3,25,82,66,28,23,76,22,55,21,50,92,101,48,89,106,37,15,12,26,63,29,113,91,49,74,86,39,44,65,58,87,73,128,75,115,93,59,42,110,64,43,32,80,69,61,125,45,119,67,77,33,46,79,31,94,38,40,98,137,107,62,83,60,150,117,102,95,114,72,134,56,41,54,148,123,112,105,99,127,78,51,104,121,109,159,103,147,68,70,168,88,100,84,124,53,135,116,52,96,97,141,140,138,133,142,122,126,132,143,146,85,173,90,111,163,149,120,160,131,167,162,152,108,118,174,151,166,153,161,180,164,183,169,145,191,156,136,172,139,176,188,179,175,185,177,193,194,170,165,129,184,158,178],[8,3,6,10,7,13,12,17,14,23,4,34,15,25,56,38,30,29,19,61,24,1,22,21,28,66,18,11,42,69,70,48,59,40,32,74,58,36,43,31,47,54,91,20,35,44,33,39,62,65,82,71,79,73,96,27,50,37,60,53,94,52,104,57,89,26,77,76,51,84,67,93,99,97,85,46,81,108,101,111,102,63,92,105,118,115,49,90,109,117,103,64,95,110,112,120,68,87,100,124,72,138,106,114,41,80,142,45,121,88,116,119,98,128,75,113,136,126,144,129,127,166,130,149,83,107,148,147,154,134,145,122,156,143,131,141,135,151,158,132,123,78,133,55,168,139,140,150,159,137,161,182,172,169,160,164,162,152,175,174,193,173,191,157,177,163,183,176,181,165,178,190,170,198,188,196],[12,14,28,33,51,59,63,77,85,126,128,130,133,144,147,148,153,159,161,162,166,175,179,192,200,204,208,212,216,222,228,228,232,232,237,240,240,241,245,247,248,250,252,252,255,255,255,257,268,270,271,274,274,274,277,278,282,283,285,286,287,287,290,295,296,302,303,311,311,313,318,320,321,324,324,325,331,337,344,345,353,356,356,359,359,359,362,364,373,374,374,374,376,381,385,389,400,403,406,407,408,412,417,418,420,424,426,428,429,429,432,435,438,440,444,447,447,447,457,462,462,470,471,472,472,475,476,484,492,496,501,501,504,514,517,518,521,522,526,526,527,527,529,533,538,540,554,575,575,578,579,582,599,602,609,610,612,618,618,621,622,623,624,629,636,640,670,671,672,677,678,679,697,699,709,719]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9-2" class="section level4 hasAnchor" number="3.5.5.9">
<h4><span class="header-section-number">3.5.5.9</span> CV 9<a href="id_03_model_training.html#cv-9-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-f5ca0f9f3849010f602e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f5ca0f9f3849010f602e">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner XGBoost","XGBoost grid model 49","XGBoost grid model 24","XGBoost grid model 68","XGBoost grid model 45","XGBoost grid model 89","XGBoost grid model 25","XGBoost grid model 18","XGBoost grid model 13","GBM grid model 75","XGBoost grid model 1","XGBoost grid model 9","XGBoost grid model 71","XGBoost grid model 28","XGBoost grid model 63","XGBoost model 3","XGBoost grid model 2","XGBoost grid model 86","XGBoost grid model 16","XGBoost grid model 3","Super learner all models","GBM grid model 41","XGBoost grid model 92","XGBoost grid model 91","XGBoost grid model 50","XGBoost grid model 11","XGBoost grid model 23","XGBoost grid model 73","XGBoost grid model 79","GBM grid model 69","GBM grid model 74","XGBoost model 1","XGBoost grid model 36","XGBoost grid model 60","GBM grid model 22","XGBoost grid model 22","GBM grid model 12","XGBoost grid model 34","GBM grid model 17","Super learner GBM","XGBoost grid model 17","XGBoost grid model 14","XGBoost grid model 95","GBM grid model 38","XGBoost grid model 84","XGBoost grid model 41","GBM grid model 79","GBM model 2","XGBoost grid model 44","XGBoost grid model 4","XGBoost grid model 67","GBM model 3","GBM grid model 80","GBM grid model 25","GBM grid model 2","XGBoost grid model 80","GBM grid model 68","GBM grid model 37","GBM grid model 88","GBM grid model 72","GBM grid model 26","XGBoost grid model 75","XGBoost grid model 82","XGBoost grid model 48","GBM grid model 83","GBM grid model 78","XGBoost grid model 94","GBM model 5","XGBoost grid model 97","XGBoost grid model 70","XGBoost grid model 15","XGBoost grid model 42","XGBoost grid model 27","XGBoost grid model 21","XGBoost grid model 58","XRT model","DRF model","XGBoost grid model 64","XGBoost grid model 87","XGBoost grid model 6","GBM grid model 46","XGBoost grid model 52","GBM grid model 20","XGBoost grid model 39","XGBoost grid model 88","XGBoost grid model 61","XGBoost grid model 77"],[1,0.2997,0.2441,0.5289,null,0.3239,0.2705,0.6819,0.2441,0.3239,0.2705,0.1806,0.4385,0.6819,0.396,0.1962,0.3239,0.396,0.1186,0.1186,0.109,0.1186,0.2201,0.6312,0.1962,0.1962,0.1611,0.3239,0.396,0.1292,0.1292,0.1806,0.7361,0.1962,0.1806,0.3239,0.1962,0.1806,0.2997,0.1451,0.1611,0.396,0.2705,0.1186,0.1451,0.0999,0.1962,0.0673,0.3595,0.2441,0.5289,0.1292,0.3595,0.2997,0.1186,0.109,0.1292,0.0999,0.2201,0.3239,0.1962,0.1962,0.0873,0.1611,0.2705,0.1611,0.2441,0.0999,0.2441,0.1611,0.109,0.0999,0.2997,0.109,0.2441,0.1186,0.1292,0.1186,0.109,0.077,0.1292,0.109,0.2705,0.1806,0.0583,0.2441,0.0673,0.1806],[0.8528,0.8528,0.6975,0.3271,0.3094,0.4315,0.4108,0.4108,0.7771,0.4108,0.5411,0.6975,0.2826,0.2826,0.3094,0.4108,0.4517,0.239,0.4736,0.7989,null,0.6181,0.2826,0.2074,0.7989,0.4108,0.4108,0.3624,0.3094,0.5192,0.4517,0.3094,0.3823,0.5411,0.2592,0.2592,0.4963,0.2826,0.3435,0.3094,0.3435,0.2592,0.2592,0.4108,0.239,0.4108,0.2592,0.3435,0.2153,0.2994,0.1752,0.239,0.2826,0.2592,0.2592,0.2826,0.2592,0.239,0.1949,0.2153,0.239,0.1577,0.2153,0.2752,0.4108,0.1423,0.1577,0.1522,0.1752,0.112,0.2153,0.1752,0.0785,0.1876,0.121,0.1254,0.112,0.1752,0.1254,0.0889,0.1522,0.1949,0.1029,0.1577,0.1577,0.112,0.0889,0.0853],[0.9126,0.8854,0.5913,0.298,0.3256,0.4403,0.3808,0.3808,0.669,0.3808,0.5482,0.861,0.2647,0.298,0.3256,0.3808,0.5704,0.1952,0.3741,0.6435,null,0.5028,0.3219,0.3075,0.7502,0.4593,0.5028,0.3546,0.3075,0.5704,0.6951,0.3808,0.5482,0.4205,0.2474,0.3808,0.5913,0.3256,0.2647,0.3546,0.4403,0.2647,0.3546,0.5913,0.2868,0.3075,0.3075,0.4205,0.2868,0.298,0.2647,0.2007,0.3808,0.5482,0.4593,0.2647,0.3546,0.3546,0.298,0.2868,0.3256,0.2349,0.2232,0.3219,0.5028,0.2647,0.3075,0.2612,0.182,0.1599,0.2232,0.2007,0.0851,0.2349,0.1526,0.1434,0.1434,0.123,0.182,0.0972,0.2149,0.3546,0.1599,0.2647,0.182,0.1434,0.1434,0.1526],[0.4012,0.3631,0.6841,0.3824,0.233,0.8231,0.233,0.142,0.7099,0.2106,0.142,0.58,0.233,0.4428,0.2956,0.3631,0.3272,0.2106,0.2788,0.4866,null,0.5558,0.08,0.2242,0.5324,0.233,0.1238,0.3115,0.263,0.3115,0.0687,0.0687,0.1621,0.4866,0.2106,0.0687,0.233,0.092,0.3272,0.1238,0.0687,0.092,0.3631,0.263,0.0687,0.4428,0.3272,0.0687,0.0518,0.0993,0.107,0.233,0.0518,0.0687,0.061,0.0518,0.4012,0.08,0.092,0.0687,0.0687,0.0687,0.107,0.1522,0.233,0.061,0.0518,0.0661,0.1855,0.0518,0.1621,0.08,0.0518,0.0862,0.133,0.08,0.1621,0.1855,0.0518,0.061,0.0661,0.0687,0.0687,0.0518,0.092,0.142,0.08,0.0862],[2,14,46,3,1,39,41,4,67,12,52,78,8,5,25,51,32,22,100,142,164,130,64,7,152,117,121,19,13,126,90,80,34,57,44,24,97,76,27,79,74,15,38,132,66,143,26,177,9,48,10,99,6,31,120,147,89,148,35,53,56,28,202,190,182,84,50,136,43,191,118,129,29,102,94,108,171,166,122,161,105,109,110,95,162,114,163,221],[2,5,8,23,25,19,13,32,12,31,9,11,44,48,39,29,34,41,16,4,1,14,30,58,7,18,15,57,59,20,21,28,52,50,54,56,35,37,62,38,40,74,64,27,51,36,80,17,84,72,93,60,87,78,49,45,83,46,94,89,103,109,55,65,67,101,112,91,130,77,107,114,157,121,141,136,119,131,150,134,152,139,169,160,151,175,193,185],[2,4,10,32,29,26,13,38,17,37,7,14,56,58,51,36,42,48,18,3,1,20,24,69,8,19,15,80,70,25,12,21,50,59,62,54,44,31,77,30,35,75,82,27,47,46,108,11,89,95,101,64,90,73,41,39,118,40,94,84,104,110,53,74,78,99,109,111,135,87,119,124,168,132,150,139,138,148,155,136,156,137,179,154,158,187,200,183],[7,11,3,12,15,8,25,28,9,26,39,10,22,20,17,23,33,34,19,16,1,5,52,36,4,18,29,24,41,13,62,56,57,31,37,68,27,61,42,64,67,54,38,43,69,14,32,49,77,46,59,45,90,97,85,72,21,80,107,111,96,114,55,47,51,100,116,53,87,48,65,58,71,76,70,82,40,44,91,94,115,146,106,161,101,110,134,172],[13,34,67,70,70,92,92,102,105,106,107,113,130,131,132,139,141,145,153,165,167,169,170,170,171,172,180,180,183,184,185,185,193,197,197,202,203,205,208,211,216,218,222,229,233,239,246,254,259,261,263,268,273,279,295,303,311,314,330,337,359,361,365,376,378,384,387,391,395,403,409,425,425,431,455,465,468,489,518,525,528,531,564,570,572,586,690,761]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10-2" class="section level4 hasAnchor" number="3.5.5.10">
<h4><span class="header-section-number">3.5.5.10</span> CV 10<a href="id_03_model_training.html#cv-10-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-6b1a732b633ca6d1fa5d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6b1a732b633ca6d1fa5d">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner XGBoost","XGBoost grid model 92","XGBoost grid model 68","XGBoost grid model 34","XGBoost model 3","XGBoost grid model 95","XGBoost grid model 14","XGBoost grid model 63","Super learner all models","XGBoost grid model 82","GBM grid model 4","GBM grid model 41","GBM grid model 19","XGBoost grid model 49","XGBoost grid model 2","GBM grid model 39","GBM grid model 99","GBM grid model 73","XGBoost grid model 23","GBM grid model 88","GBM grid model 83","XGBoost grid model 17","XGBoost grid model 71","XGBoost grid model 91","Super learner neural network","Super learner GBM","GBM grid model 75","XGBoost grid model 79","GBM grid model 12","XGBoost grid model 22","XGBoost grid model 25","XGBoost grid model 75","GBM grid model 25","GBM grid model 92","XGBoost grid model 8","XGBoost grid model 9","GBM grid model 62","XGBoost grid model 58","XGBoost grid model 24","XGBoost grid model 89","GBM grid model 2","GBM grid model 36","GBM grid model 52","GBM grid model 37","XGBoost grid model 36","GBM grid model 8","GBM model 3","GBM grid model 23","XGBoost model 1","GBM grid model 7","GBM grid model 45","GBM grid model 42","GBM grid model 96","XGBoost grid model 11","GBM grid model 69","XGBoost grid model 41","GBM grid model 79","GBM grid model 26","XGBoost grid model 84","GBM grid model 29","GBM grid model 74","GBM grid model 3","GBM grid model 87","GBM grid model 55","GBM grid model 95","GBM grid model 97","XGBoost grid model 51","GBM grid model 38","GBM grid model 53","XGBoost grid model 4","XGBoost grid model 42","XGBoost grid model 45","GBM grid model 17","GBM grid model 5","GBM grid model 56","GBM model 5","GBM grid model 33","GBM grid model 86","GBM grid model 10","GBM grid model 6","GBM grid model 89","XGBoost grid model 50","XGBoost grid model 81","XGBoost grid model 97","GBM grid model 11","GBM grid model 65","XGBoost grid model 46","GBM grid model 40","GBM grid model 68","XGBoost grid model 80","XGBoost grid model 18","GBM grid model 31","XGBoost grid model 28","GBM grid model 71","GBM model 1","GBM model 2","GBM grid model 90","XGBoost grid model 70","GBM grid model 77","XGBoost grid model 15","GBM grid model 84","GBM model 4","GBM grid model 66","GBM grid model 22","GBM grid model 16","XGBoost grid model 44","XGBoost grid model 55","XGBoost grid model 48","GBM grid model 72","GBM grid model 85","GBM grid model 44","GBM grid model 57","GBM grid model 80","XRT model","GBM grid model 82","GBM grid model 43","XGBoost grid model 86","XGBoost grid model 52","GBM grid model 49","GBM grid model 58","GBM grid model 54","XGBoost grid model 60","GBM grid model 91","GBM grid model 51","GBM grid model 18","XGBoost grid model 39","GBM grid model 24","GBM grid model 9","GBM grid model 27","XGBoost grid model 13","GBM grid model 64","GBM grid model 78","GBM grid model 93","GBM grid model 47","XGBoost grid model 94","GBM grid model 50","XGBoost grid model 37","XGBoost grid model 77"],[null,0.3185,0.7913,0.7361,0.3693,0.3399,0.2502,0.7361,0.2935,0.0313,0.3399,0.203,0.3185,0.3399,0.4428,0.5324,0.2935,0.3693,0.2935,0.3693,0.3399,0.4428,0.2729,0.5324,0.2935,0.0504,0.4428,0.4428,0.0923,0.2502,0.2729,0.3185,0.0923,0.1073,0.3399,0.6312,0.3693,0.3399,0.2729,0.3693,0.0923,0.1374,0.0585,0.3185,0.3399,0.1584,0.0677,0.6312,0.2228,0.4866,0.3693,0.2228,0.0923,0.0504,0.0585,0.3399,0.4066,0.0504,0.2935,0.0585,0.3185,0.2935,0.1584,0.1374,0.2729,0.2228,0.3185,0.2228,0.1374,0.2729,0.3399,0.4066,0.3185,0.2502,0.3399,0.0677,0.4066,0.3185,0.1222,0.0504,0.2935,0.2729,0.1374,0.1793,0.4428,0.3399,0.2228,0.0795,0.1222,0.0677,0.3399,0.2228,0.1222,0.4866,0.2228,0.3399,0.6312,0.2228,0.0677,0.0585,0.2729,0.1374,0.6841,0.4066,0.3399,0.2729,0.3185,0.3185,0.1073,0.3693,0.3693,0.0677,0.2935,0.2729,0.1374,0.1073,0.3693,0.1374,0.2935,0.2729,0.4428,0.2228,0.0585,0.0504,0.1793,0.2502,0.0585,0.0504,0.2935,0.1073,0.2228,0.203,0.2729,0.1222,0.1793,0.1374,0.203,0.0677,0.2502],[null,0.9427,0.5993,0.3906,0.3906,0.2654,0.65,0.3906,0.3418,0.9155,0.4237,0.65,0.861,0.503,0.2654,0.3418,0.4237,0.2946,0.6735,0.2546,0.4642,0.503,0.2654,0.1792,0.6975,0.3258,0.2654,0.503,0.4112,0.7237,0.3906,0.3258,0.3418,0.503,0.4237,0.503,0.2654,0.234,0.2946,0.2818,0.214,0.5484,0.7771,0.4237,0.234,0.3258,0.3906,0.1792,0.3906,0.1528,0.2654,0.3587,0.6975,0.3906,0.2546,0.503,0.2212,0.2654,0.234,0.2546,0.2946,0.2946,0.4642,0.5484,0.2546,0.311,0.2546,0.2654,0.3258,0.2654,0.2654,0.1792,0.1792,0.2546,0.2654,0.4237,0.1419,0.234,0.5484,0.4237,0.234,0.2654,0.2212,0.214,0.1611,0.234,0.2654,0.2212,0.2546,0.2546,0.3587,0.1419,0.2546,0.2212,0.2546,0.2212,0.2654,0.2546,0.2654,0.3906,0.2946,0.4237,0.234,0.2654,0.202,0.234,0.1419,0.234,0.234,0.2654,0.2654,0.1611,0.1792,0.2654,0.234,0.234,0.234,0.2212,0.1419,0.1792,0.2546,0.2654,0.1611,0.234,0.0823,0.202,0.2212,0.1419,0.1075,0.234,0.0823,0.0601,0.2212,0.202,0.202,0.0948,0.202,0.0707,0.1075],[null,0.6758,0.4022,0.3711,0.4723,0.3711,0.5973,0.2846,0.3247,0.6998,0.3711,0.6998,0.8258,0.5539,0.5082,0.3579,0.4723,0.3711,0.7237,0.218,0.5082,0.5082,0.2983,0.218,0.5973,0.4359,0.3078,0.4022,0.4578,0.8258,0.4022,0.2614,0.2983,0.65,0.4723,0.5082,0.1802,0.3711,0.2614,0.2395,0.2983,0.5973,0.8258,0.4723,0.3078,0.2846,0.5082,0.2614,0.4359,0.1537,0.2846,0.4723,0.7796,0.4359,0.3078,0.5082,0.1999,0.2614,0.2614,0.2846,0.4359,0.4359,0.5082,0.5973,0.3078,0.3386,0.2614,0.1999,0.4022,0.4022,0.2846,0.1427,0.218,0.3386,0.3078,0.4022,0.162,0.3386,0.5539,0.5539,0.2846,0.3247,0.2395,0.1922,0.1802,0.2846,0.4022,0.2614,0.4022,0.4359,0.2395,0.1802,0.4359,0.1427,0.3078,0.2614,0.2395,0.218,0.1922,0.4723,0.3078,0.5973,0.278,0.3386,0.1999,0.3711,0.0835,0.2129,0.218,0.218,0.3078,0.218,0.1802,0.2846,0.1802,0.2395,0.218,0.2614,0.162,0.162,0.2395,0.2846,0.1427,0.2395,0.093,0.1999,0.1427,0.1999,0.1427,0.2846,0.0629,0.0835,0.218,0.162,0.162,0.093,0.218,0.093,0.0712],[0.9214,0.8365,0.7821,0.6033,0.6825,0.3472,0.5064,0.7044,0.5064,null,0.6565,0.1728,0.461,0.2505,0.8093,0.6033,0.1486,0.1235,0.2252,0.3797,0.1384,0.1985,0.2961,0.3105,0.7553,0.1663,0.1119,0.1384,0.7044,0.2505,0.7044,0.3797,0.2805,0.1119,0.2505,1,0.4389,0.1728,0.266,0.3797,0.2505,0.1559,0.3472,0.1559,0.1119,0.3105,0.2252,0.0596,0.1384,0.1384,0.0898,0.1235,0.1728,0.0782,0.4389,0.1728,0.3105,0.1235,0.0782,0.4193,0.1235,0.1119,0.1384,0.2805,0.0596,0.0898,0.0898,0.4193,0.0898,0.0701,0.3797,0.5539,0.2805,0.0898,0.1003,0.1235,0.1003,0.0701,0.1196,0.1728,0.1559,0.1003,0.365,0.4193,0.3105,0.0517,0.1119,0.1663,0.1384,0.1003,0.5539,0.2388,0.0782,0.1235,0.1384,0.1003,0.1196,0.0701,0.2388,0.1119,0.1728,0.1384,0.1235,0.0517,0.1235,0.0782,0.1384,0.1235,0.2961,0.1003,0.0782,0.0782,0.0596,0.0517,0.2252,0.0782,0.0701,0.1119,0.1559,0.0517,0.0517,0.1235,0.3797,0.0782,0.0517,0.0596,0.1728,0.0782,0.0517,0.0782,0.1119,0.0517,0.1728,0.0517,0.0517,0.1235,0.1003,0.1119,0.1003],[1,12,2,6,29,20,54,3,31,117,15,68,89,25,137,8,65,43,53,9,73,33,49,18,166,105,28,22,165,132,146,60,102,130,40,171,10,67,93,11,100,141,186,41,23,59,147,4,82,19,51,138,175,168,143,106,14,148,39,129,17,87,104,116,46,94,71,92,128,36,24,21,32,57,34,109,42,61,158,183,50,80,107,74,48,37,96,193,220,156,52,62,126,16,114,13,5,85,127,181,78,123,7,66,145,58,26,76,190,45,30,118,55,63,149,119,77,112,72,79,38,120,184,157,91,47,134,159,70,150,64,97,244,113,83,115,268,151,198],[1,6,18,25,17,28,15,40,31,5,41,22,14,33,9,60,29,37,34,68,35,39,52,67,11,20,48,57,12,16,23,55,36,19,46,21,86,50,53,84,45,30,13,63,73,76,32,85,58,97,72,38,27,26,51,47,111,44,80,66,87,64,61,62,79,71,74,91,54,83,120,129,116,88,89,70,113,82,56,42,107,94,101,118,127,105,90,65,49,69,138,126,78,145,93,128,139,98,102,59,119,77,136,100,96,108,162,135,92,131,133,95,122,123,124,114,132,137,164,140,141,110,117,106,142,147,144,112,148,115,176,158,103,151,163,178,104,177,166],[1,5,24,30,23,33,18,67,47,6,62,19,13,32,9,69,27,37,31,88,36,34,63,81,14,15,45,53,16,11,25,73,40,17,41,29,111,49,68,107,54,28,10,55,66,96,26,87,52,104,64,35,22,20,58,42,134,44,72,84,80,56,51,57,74,60,71,115,50,78,137,158,127,82,83,59,119,76,46,39,105,89,123,142,145,102,86,79,48,61,153,132,75,157,97,124,130,93,121,43,125,70,126,94,91,99,170,129,100,120,113,85,106,108,150,110,118,149,174,131,122,98,139,103,133,140,152,109,143,101,177,159,92,147,160,182,90,179,168],[5,7,6,17,12,24,20,15,18,1,21,40,33,60,11,30,54,58,65,22,49,88,32,31,10,63,84,75,14,52,19,26,37,50,89,13,28,70,27,41,44,55,47,97,102,36,69,98,83,59,93,72,64,74,38,96,39,66,117,29,131,109,101,82,120,95,105,23,91,127,61,34,68,123,146,114,85,143,103,106,113,112,45,42,56,138,110,46,67,100,43,73,115,76,92,134,126,125,51,119,81,135,139,150,79,158,80,99,62,149,169,152,167,163,35,124,148,77,71,132,183,157,48,136,137,172,78,140,159,166,116,144,141,171,181,118,156,133,130],[8,30,50,78,81,105,107,125,127,129,139,149,149,150,166,167,175,175,183,187,193,194,196,197,201,203,205,207,207,211,213,214,215,216,216,234,235,236,241,243,243,254,256,256,264,267,274,274,275,279,280,283,288,288,290,291,298,302,308,308,315,316,317,317,319,320,321,321,323,324,342,342,343,350,352,352,359,362,363,370,375,375,376,376,376,382,382,383,384,386,386,393,394,394,396,399,400,401,401,402,403,405,408,410,411,423,438,439,444,445,445,450,450,457,458,467,475,475,481,482,484,485,488,502,503,506,508,520,520,532,533,558,580,582,587,593,618,640,662]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation-2" class="section level3 hasAnchor" number="3.5.6">
<h3><span class="header-section-number">3.5.6</span> Final evaluation<a href="id_03_model_training.html#final-evaluation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb68-1"><a href="id_03_model_training.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits.RData&quot;</span>)</span>
<span id="cb68-2"><a href="id_03_model_training.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx.RData&quot;</span>)</span>
<span id="cb68-3"><a href="id_03_model_training.html#cb68-3" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/toxicity&quot;</span></span>
<span id="cb68-4"><a href="id_03_model_training.html#cb68-4" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb68-5"><a href="id_03_model_training.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner XGBoost&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb68-6"><a href="id_03_model_training.html#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb68-7"><a href="id_03_model_training.html#cb68-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Super learner final&quot;</span></span>
<span id="cb68-8"><a href="id_03_model_training.html#cb68-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-9"><a href="id_03_model_training.html#cb68-9" aria-hidden="true" tabindex="-1"></a>logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-10"><a href="id_03_model_training.html#cb68-10" aria-hidden="true" tabindex="-1"></a>MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-11"><a href="id_03_model_training.html#cb68-11" aria-hidden="true" tabindex="-1"></a>F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-12"><a href="id_03_model_training.html#cb68-12" aria-hidden="true" tabindex="-1"></a>acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-13"><a href="id_03_model_training.html#cb68-13" aria-hidden="true" tabindex="-1"></a>EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-14"><a href="id_03_model_training.html#cb68-14" aria-hidden="true" tabindex="-1"></a>BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb68-15"><a href="id_03_model_training.html#cb68-15" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb68-16"><a href="id_03_model_training.html#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb68-17"><a href="id_03_model_training.html#cb68-17" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb68-18"><a href="id_03_model_training.html#cb68-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb68-19"><a href="id_03_model_training.html#cb68-19" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb68-20"><a href="id_03_model_training.html#cb68-20" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb68-21"><a href="id_03_model_training.html#cb68-21" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb68-22"><a href="id_03_model_training.html#cb68-22" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb68-23"><a href="id_03_model_training.html#cb68-23" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb68-24"><a href="id_03_model_training.html#cb68-24" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb68-25"><a href="id_03_model_training.html#cb68-25" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb68-26"><a href="id_03_model_training.html#cb68-26" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb68-27"><a href="id_03_model_training.html#cb68-27" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb68-28"><a href="id_03_model_training.html#cb68-28" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb68-29"><a href="id_03_model_training.html#cb68-29" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb68-30"><a href="id_03_model_training.html#cb68-30" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb68-31"><a href="id_03_model_training.html#cb68-31" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb68-32"><a href="id_03_model_training.html#cb68-32" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb68-33"><a href="id_03_model_training.html#cb68-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb68-34"><a href="id_03_model_training.html#cb68-34" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb68-35"><a href="id_03_model_training.html#cb68-35" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb68-36"><a href="id_03_model_training.html#cb68-36" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb68-37"><a href="id_03_model_training.html#cb68-37" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb68-38"><a href="id_03_model_training.html#cb68-38" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb68-39"><a href="id_03_model_training.html#cb68-39" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb68-40"><a href="id_03_model_training.html#cb68-40" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb68-41"><a href="id_03_model_training.html#cb68-41" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb68-42"><a href="id_03_model_training.html#cb68-42" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb68-43"><a href="id_03_model_training.html#cb68-43" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb68-44"><a href="id_03_model_training.html#cb68-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb68-45"><a href="id_03_model_training.html#cb68-45" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb68-46"><a href="id_03_model_training.html#cb68-46" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb68-47"><a href="id_03_model_training.html#cb68-47" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb68-48"><a href="id_03_model_training.html#cb68-48" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb68-49"><a href="id_03_model_training.html#cb68-49" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb68-50"><a href="id_03_model_training.html#cb68-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb68-51"><a href="id_03_model_training.html#cb68-51" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>category))</span>
<span id="cb68-52"><a href="id_03_model_training.html#cb68-52" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>category) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb68-53"><a href="id_03_model_training.html#cb68-53" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="dv">3</span>]</span>
<span id="cb68-54"><a href="id_03_model_training.html#cb68-54" aria-hidden="true" tabindex="-1"></a>  y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb68-55"><a href="id_03_model_training.html#cb68-55" aria-hidden="true" tabindex="-1"></a>  logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb68-56"><a href="id_03_model_training.html#cb68-56" aria-hidden="true" tabindex="-1"></a>  MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb68-57"><a href="id_03_model_training.html#cb68-57" aria-hidden="true" tabindex="-1"></a>  F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb68-58"><a href="id_03_model_training.html#cb68-58" aria-hidden="true" tabindex="-1"></a>  acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">balanced_accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb68-59"><a href="id_03_model_training.html#cb68-59" aria-hidden="true" tabindex="-1"></a>  EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb68-60"><a href="id_03_model_training.html#cb68-60" aria-hidden="true" tabindex="-1"></a>  BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb68-61"><a href="id_03_model_training.html#cb68-61" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-62"><a href="id_03_model_training.html#cb68-62" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(logloss, MCC, F1, acc, EF, BEDROC, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_tx.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb69-1"><a href="id_03_model_training.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_tx.RData&quot;</span>)</span>
<span id="cb69-2"><a href="id_03_model_training.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb69-3"><a href="id_03_model_training.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F&lt;sub&gt;1&lt;/sub&gt;&quot;</span>, <span class="st">&quot;Balanced accuracy&quot;</span>, <span class="st">&quot;EF&quot;</span>, <span class="st">&quot;BEDROC&quot;</span>),</span>
<span id="cb69-4"><a href="id_03_model_training.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean  s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb69-5"><a href="id_03_model_training.html#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(logloss), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(logloss), <span class="dv">3</span>)),</span>
<span id="cb69-6"><a href="id_03_model_training.html#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(MCC), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(MCC), <span class="dv">3</span>)),</span>
<span id="cb69-7"><a href="id_03_model_training.html#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(F1), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(F1), <span class="dv">3</span>)),</span>
<span id="cb69-8"><a href="id_03_model_training.html#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(acc), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(acc), <span class="dv">3</span>)),</span>
<span id="cb69-9"><a href="id_03_model_training.html#cb69-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(EF), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(EF), <span class="dv">3</span>)),</span>
<span id="cb69-10"><a href="id_03_model_training.html#cb69-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(BEDROC), <span class="dv">3</span>), <span class="st">&quot;  &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(BEDROC), <span class="dv">3</span>))</span>
<span id="cb69-11"><a href="id_03_model_training.html#cb69-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb69-12"><a href="id_03_model_training.html#cb69-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb69-13"><a href="id_03_model_training.html#cb69-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb69-14"><a href="id_03_model_training.html#cb69-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-2c414dd9799cebe00cc9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2c414dd9799cebe00cc9">{"x":{"filter":"none","vertical":false,"data":[["Log loss","MCC","F<sub>1<\/sub>","Balanced accuracy","EF","BEDROC"],["0.172  0.008","0.879  0.004","0.919  0.002","0.947  0.002","1.519  0.017","0.993  0.005"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean  s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="final-model-selection-2" class="section level3 hasAnchor" number="3.5.7">
<h3><span class="header-section-number">3.5.7</span> Final model selection<a href="id_03_model_training.html#final-model-selection-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb70-1"><a href="id_03_model_training.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx.RData&quot;</span>)</span>
<span id="cb70-2"><a href="id_03_model_training.html#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="id_03_model_training.html#cb70-3" aria-hidden="true" tabindex="-1"></a>holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/toxicity/whole_data_set/cv_holdout_predictions.csv&quot;</span>)</span>
<span id="cb70-4"><a href="id_03_model_training.html#cb70-4" aria-hidden="true" tabindex="-1"></a>fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb70-5"><a href="id_03_model_training.html#cb70-5" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb70-6"><a href="id_03_model_training.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Deep learning grid models</span></span>
<span id="cb70-7"><a href="id_03_model_training.html#cb70-7" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb70-8"><a href="id_03_model_training.html#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb70-9"><a href="id_03_model_training.html#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb70-10"><a href="id_03_model_training.html#cb70-10" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb70-11"><a href="id_03_model_training.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM grid models</span></span>
<span id="cb70-12"><a href="id_03_model_training.html#cb70-12" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb70-13"><a href="id_03_model_training.html#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb70-14"><a href="id_03_model_training.html#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb70-15"><a href="id_03_model_training.html#cb70-15" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb70-16"><a href="id_03_model_training.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM default models</span></span>
<span id="cb70-17"><a href="id_03_model_training.html#cb70-17" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb70-18"><a href="id_03_model_training.html#cb70-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb70-19"><a href="id_03_model_training.html#cb70-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb70-20"><a href="id_03_model_training.html#cb70-20" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb70-21"><a href="id_03_model_training.html#cb70-21" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost grid models</span></span>
<span id="cb70-22"><a href="id_03_model_training.html#cb70-22" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb70-23"><a href="id_03_model_training.html#cb70-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb70-24"><a href="id_03_model_training.html#cb70-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb70-25"><a href="id_03_model_training.html#cb70-25" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb70-26"><a href="id_03_model_training.html#cb70-26" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost default models</span></span>
<span id="cb70-27"><a href="id_03_model_training.html#cb70-27" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb70-28"><a href="id_03_model_training.html#cb70-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb70-29"><a href="id_03_model_training.html#cb70-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb70-30"><a href="id_03_model_training.html#cb70-30" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb70-31"><a href="id_03_model_training.html#cb70-31" aria-hidden="true" tabindex="-1"></a><span class="co"># GLM</span></span>
<span id="cb70-32"><a href="id_03_model_training.html#cb70-32" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb70-33"><a href="id_03_model_training.html#cb70-33" aria-hidden="true" tabindex="-1"></a><span class="co"># DRF</span></span>
<span id="cb70-34"><a href="id_03_model_training.html#cb70-34" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb70-35"><a href="id_03_model_training.html#cb70-35" aria-hidden="true" tabindex="-1"></a><span class="co"># XRT</span></span>
<span id="cb70-36"><a href="id_03_model_training.html#cb70-36" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb70-37"><a href="id_03_model_training.html#cb70-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner all</span></span>
<span id="cb70-38"><a href="id_03_model_training.html#cb70-38" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb70-39"><a href="id_03_model_training.html#cb70-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner final</span></span>
<span id="cb70-40"><a href="id_03_model_training.html#cb70-40" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb70-41"><a href="id_03_model_training.html#cb70-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner deep learning</span></span>
<span id="cb70-42"><a href="id_03_model_training.html#cb70-42" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb70-43"><a href="id_03_model_training.html#cb70-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner GBM</span></span>
<span id="cb70-44"><a href="id_03_model_training.html#cb70-44" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb70-45"><a href="id_03_model_training.html#cb70-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Super learner XGBoost</span></span>
<span id="cb70-46"><a href="id_03_model_training.html#cb70-46" aria-hidden="true" tabindex="-1"></a>data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb70-47"><a href="id_03_model_training.html#cb70-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-48"><a href="id_03_model_training.html#cb70-48" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb70-49"><a href="id_03_model_training.html#cb70-49" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">&quot;./other_data/toxicity/whole_data_set/cv_res.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb71-1"><a href="id_03_model_training.html#cb71-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/toxicity/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb71-2"><a href="id_03_model_training.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">statistical_testing</span>(data,</span>
<span id="cb71-3"><a href="id_03_model_training.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric_vec =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F_1&quot;</span>, <span class="st">&quot;Balanced accuracy&quot;</span>),</span>
<span id="cb71-4"><a href="id_03_model_training.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">decreasing_vec =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb71-5"><a href="id_03_model_training.html#cb71-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="htmlwidget-031ac348777bc2db2084" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-031ac348777bc2db2084">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Super learner all models","Super learner XGBoost","XGBoost grid model 49","XGBoost grid model 2","XGBoost grid model 71","XGBoost grid model 24","XGBoost grid model 68","XGBoost grid model 63","XGBoost grid model 17","XGBoost grid model 81","XGBoost grid model 34","XGBoost grid model 15","XGBoost grid model 45","XGBoost grid model 92","XGBoost grid model 9","XGBoost grid model 28","XGBoost model 1","XGBoost grid model 89","XGBoost grid model 1","XGBoost grid model 13","XGBoost grid model 4","XGBoost grid model 75","XGBoost grid model 36","XGBoost grid model 23","XGBoost grid model 41","XGBoost model 3","XGBoost grid model 77","XGBoost grid model 25","XGBoost grid model 86","XGBoost grid model 79","XGBoost grid model 82","XGBoost grid model 98","GBM grid model 55","XGBoost grid model 11","GBM grid model 1","XGBoost grid model 84","GBM grid model 53","XGBoost grid model 95","XGBoost grid model 22","XGBoost grid model 50","GBM model 3","Super learner GBM","XGBoost grid model 54","XGBoost grid model 60","GBM grid model 41","GBM grid model 57","XGBoost grid model 58","XGBoost grid model 70","GBM grid model 80","XGBoost grid model 88","GBM grid model 72","XGBoost grid model 44","GBM grid model 75","GBM grid model 85","GBM grid model 86","XGBoost grid model 48","XGBoost grid model 14","GBM grid model 58","XGBoost grid model 73","GBM grid model 26","GBM grid model 84","XGBoost grid model 21","GBM grid model 19","XGBoost grid model 97","XGBoost grid model 55","GBM grid model 74","XGBoost grid model 19","GBM grid model 82","GBM grid model 25","XGBoost grid model 42","GBM grid model 95","GBM grid model 52","XGBoost grid model 37","XGBoost grid model 80","XGBoost grid model 74","XGBoost grid model 5","GBM grid model 4","GBM grid model 45","GBM grid model 73","XGBoost grid model 52","XGBoost grid model 51","GBM grid model 69","GBM grid model 42","GBM grid model 68","GBM grid model 11","GBM grid model 89","XGBoost model 2","GBM grid model 12","GBM grid model 48","Super learner neural network","GBM grid model 2","GBM grid model 27","GBM grid model 62","GBM grid model 99","XGBoost grid model 94","GBM model 4","XGBoost grid model 53","GBM grid model 22","GBM grid model 37","GBM grid model 38","GBM grid model 39","GBM grid model 31","GBM grid model 33","XGBoost grid model 38","GBM grid model 50","GBM grid model 46","GBM grid model 54","GBM grid model 92","XGBoost grid model 85","GBM grid model 14","XGBoost grid model 76","XGBoost grid model 93","GBM grid model 64","GBM grid model 97","GBM grid model 3","GBM grid model 17","GBM model 2","GBM grid model 44","GBM grid model 23","GBM model 5","GBM grid model 87","XGBoost grid model 27","GBM grid model 43","GBM grid model 76","GBM grid model 29","XGBoost grid model 18","GBM grid model 81","GBM grid model 24","XGBoost grid model 87","GBM grid model 88","GBM grid model 32","GBM grid model 65","XGBoost grid model 8","GBM grid model 56","GBM grid model 8","GBM grid model 98","XGBoost grid model 61","XGBoost grid model 6","GBM grid model 6","XGBoost grid model 66","GBM grid model 16","GBM grid model 71","XGBoost grid model 39"],[null,0.5837,0.6353,0.6841,0.7939,0.7939,0.5429,0.8501,0.3083,0.461,0.4193,0.5429,0.377,0.5837,0.5429,0.461,0.5837,0.5429,0.377,0.1859,0.6841,0.5429,0.1547,0.2049,0.5837,0.6841,0.5429,0.377,0.5429,0.1705,0.1859,0.2495,0.0043,0.2243,0.2243,0.2784,0.1415,0.1859,0.1415,0.5837,0.0552,0.2243,0.1859,0.1415,0.1705,0.1859,0.2495,0.0552,0.377,0.5429,0.2243,0.2049,0.5082,0.1705,0.3083,0.0552,0.2784,0.3447,0.2049,0.377,0.1547,0.1152,0.1859,0.1705,0.461,0.3447,0.1547,0.2049,0.1705,0.075,0.5837,0.1295,0.2049,0.3083,0.5429,0.1415,0.1152,0.2049,0.1152,0.1705,0.2243,0.2495,0.1415,0.1295,0.0638,0.2243,0.1415,0.377,0.1415,0.1547,0.1152,0.1023,0.0638,0.2495,0.1295,0.3083,0.2243,0.0638,0.1547,0.2243,0.1415,0.1547,0.1295,0.2243,0.1705,0.1415,0.1547,0.1547,0.2495,0.2495,0.2243,0.2784,0.1295,0.2049,0.1859,0.1295,0.1859,0.2243,0.1023,0.1705,0.3083,0.1152,0.2049,0.1547,0.1859,0.2049,0.3083,0.1415,0.0638,0.0552,0.1152,0.1152,0.1415,0.377,0.1547,0.0638,0.0889,0.1152,0.1859,0.1705,0.1023,0.1547,0.1295,0.1859],[0.9457,0.812,0.8666,0.6543,0.7553,0.5224,0.5224,0.5075,0.5224,0.5224,0.6803,0.6013,0.5596,0.5596,0.4802,0.4802,0.4842,0.6013,0.4842,0.4842,0.4552,0.4643,0.4802,0.6013,0.397,0.3772,0.4842,0.5596,0.4326,0.7021,0.4842,0.4326,null,0.5596,0.5596,0.4842,0.5445,0.5224,0.7021,0.5596,0.5445,0.397,0.4842,0.4326,0.5841,0.4842,0.4643,0.6013,0.3235,0.397,0.4643,0.4643,0.4643,0.5224,0.397,0.4842,0.352,0.3772,0.3772,0.3235,0.4643,0.3772,0.4802,0.397,0.3111,0.397,0.4643,0.369,0.397,0.4643,0.352,0.4842,0.3772,0.369,0.3772,0.4643,0.397,0.397,0.3772,0.4842,0.3437,0.369,0.369,0.3772,0.3772,0.369,0.397,0.2968,0.4842,0.4326,0.3235,0.3772,0.397,0.3772,0.3772,0.369,0.4326,0.397,0.397,0.369,0.3772,0.369,0.397,0.397,0.2783,0.4802,0.3235,0.3772,0.4326,0.2002,0.3772,0.3235,0.3235,0.2783,0.3772,0.369,0.3772,0.3772,0.352,0.369,0.3235,0.2512,0.2002,0.369,0.2783,0.369,0.0988,0.2512,0.3772,0.3235,0.369,0.2512,0.352,0.2422,0.3235,0.3235,0.352,0.2149,0.1528,0.2783,0.3235,0.2512,0.2262,0.1528],[0.9488,0.9274,0.9274,0.7068,0.7628,0.5635,0.6543,0.4877,0.5261,0.4877,0.5484,0.5635,0.6094,0.5261,0.4731,0.4203,0.5261,0.5261,0.6094,0.4877,0.4731,0.4258,0.4446,0.5635,0.4203,0.4203,0.4877,0.4731,0.4258,0.7068,0.6094,0.4087,null,0.6543,0.6543,0.4573,0.5484,0.5635,0.6094,0.5261,0.7899,0.3982,0.5261,0.4203,0.4877,0.4573,0.4573,0.6543,0.3763,0.4087,0.3982,0.5261,0.3763,0.5635,0.4087,0.5635,0.3209,0.3384,0.4203,0.3634,0.4573,0.4258,0.4446,0.4087,0.3763,0.4087,0.4573,0.4258,0.4087,0.4258,0.4573,0.4087,0.4087,0.3944,0.3763,0.4731,0.3763,0.4258,0.4087,0.4877,0.3291,0.3634,0.4087,0.4258,0.4446,0.4258,0.4258,0.2757,0.4258,0.4087,0.3634,0.4731,0.3982,0.4087,0.3944,0.3554,0.3982,0.3763,0.3763,0.3982,0.4087,0.3982,0.4087,0.4087,0.3291,0.4203,0.3944,0.4087,0.3634,0.2092,0.4087,0.2092,0.3634,0.3384,0.3763,0.4258,0.3763,0.3634,0.4087,0.3384,0.2598,0.3291,0.2359,0.3763,0.3384,0.3982,0.1439,0.3634,0.3763,0.3209,0.3763,0.295,0.3384,0.3291,0.3982,0.3554,0.3763,0.2508,0.1439,0.3209,0.3209,0.1892,0.3384,0.1892],[0.894,0.9155,0.9155,0.8093,0.7653,0.6677,0.7138,0.6894,0.6677,0.8093,0.6894,0.5674,0.8093,0.8666,0.6458,0.4562,0.4359,0.4757,0.4757,0.4359,0.3812,0.5674,0.4562,0.5674,0.7653,0.3497,0.3628,0.4359,0.2351,0.7138,0.3963,0.3628,null,0.3963,0.4757,0.3308,0.4171,0.2958,0.6677,0.5674,0.7406,0.2958,0.3628,0.1883,0.5484,0.2108,0.1883,0.5243,0.2958,0.1477,0.3628,0.2108,0.2351,0.3963,0.0808,0.2108,0.0898,0.3308,0.1697,0.2958,0.1477,0.1477,0.3812,0.2108,0.1477,0.3628,0.2351,0.2108,0.1883,0.1316,0.3628,0.2351,0.2664,0.2351,0.3963,0.2351,0.2664,0.0898,0.1883,0.1316,0.2829,0.2958,0.0706,0.1477,0.1291,0.1883,0.1697,0.1123,0.1316,0.1316,0.0898,0.1204,0.0808,0.1316,0.1477,0.0767,0.1883,0.1316,0.0898,0.2108,0.2108,0.1883,0.0898,0.1316,0.1883,0.3134,0.0706,0.1316,0.1045,0.1045,0.1316,0.1883,0.1316,0.0706,0.0706,0.1204,0.0603,0.0898,0.1045,0.0706,0.0603,0.0523,0.1477,0.1477,0.0898,0.0808,0.0523,0.0523,0.1316,0.0898,0.1477,0.0808,0.0603,0.1123,0.0523,0.0523,0.0603,0.1291,0.0898,0.0898,0.2351,0.0523,0.0603,0.0808],[1,7,9,4,2,5,14,6,32,19,36,35,38,18,11,13,12,23,44,47,3,17,59,67,15,10,21,25,8,132,117,34,194,58,119,48,85,56,152,20,180,39,76,94,161,74,46,182,24,37,54,93,16,77,51,168,31,27,91,29,101,148,68,80,26,30,75,92,81,151,28,127,118,52,22,134,173,95,135,158,50,45,107,145,164,60,128,41,111,100,109,165,169,98,137,73,43,159,82,144,112,120,133,79,70,186,90,103,84,57,99,55,157,72,83,167,104,33,150,102,42,126,97,123,106,69,40,114,171,143,129,131,122,179,136,166,156,121,71,105,146,87,124,139],[7,6,10,13,14,22,19,26,20,29,24,32,31,36,38,40,37,34,27,30,44,43,35,33,49,56,52,51,57,17,25,50,1,42,23,47,39,45,18,63,15,62,48,46,28,54,67,21,81,73,70,53,97,61,82,41,100,108,71,107,64,55,90,79,116,114,77,85,86,58,119,68,74,112,124,75,59,83,72,66,126,128,87,69,65,104,78,130,92,106,88,80,76,102,93,127,137,95,118,89,115,109,105,120,157,84,122,117,132,166,121,170,123,148,129,103,125,163,110,134,169,131,159,136,144,151,188,143,135,156,152,164,150,153,145,140,141,189,194,168,185,171,162,192],[8,6,10,17,13,23,20,29,22,31,25,32,30,40,43,45,38,33,24,27,50,46,37,36,79,80,57,58,70,16,26,59,1,35,21,42,39,41,18,95,15,65,44,47,28,49,63,19,115,68,104,48,113,56,81,34,102,128,66,122,54,51,121,75,126,134,69,93,98,53,149,62,83,123,152,78,71,82,64,61,148,156,88,60,55,97,72,139,89,107,77,74,67,96,92,135,142,105,112,76,108,101,100,110,171,91,114,109,127,180,111,182,125,154,117,99,116,162,94,119,170,124,161,136,146,145,190,133,137,160,147,168,143,155,141,132,129,195,196,167,194,165,158,197],[5,8,7,6,12,16,14,26,17,18,22,19,20,30,33,29,42,40,38,37,44,39,32,31,28,36,53,51,52,24,23,48,1,66,41,69,43,71,25,47,21,67,65,57,34,76,81,35,46,91,45,86,63,96,99,70,82,54,90,61,107,73,49,98,68,59,119,72,79,84,50,92,75,64,56,74,60,108,101,95,58,55,103,112,102,127,110,89,111,94,134,104,113,130,106,97,114,78,126,139,115,124,118,149,62,100,148,145,131,80,155,83,87,120,166,128,154,152,157,164,143,144,109,137,138,185,135,167,133,121,156,125,175,105,173,159,172,93,140,168,85,190,180,132],[21,27,36,40,41,66,67,87,91,97,107,118,119,124,125,127,129,130,133,141,141,145,163,167,171,182,183,185,187,189,191,191,197,201,204,206,206,213,213,225,231,233,233,244,251,253,257,257,266,269,273,280,289,290,313,313,315,317,318,319,326,327,328,332,336,337,340,342,344,346,346,349,350,351,354,361,363,368,372,380,382,384,385,386,386,388,388,399,403,407,408,423,425,426,428,432,436,437,438,448,450,454,456,458,460,461,474,474,474,483,486,490,492,494,495,497,499,510,511,519,524,525,526,532,534,550,553,557,576,580,584,588,590,592,595,597,598,598,601,608,610,613,624,660]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Balanced accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Balanced accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb72"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb72-1"><a href="id_03_model_training.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># statistical_testing(data, metric_vec=c(&#39;Log loss&#39;, &#39;MCC&#39;, &#39;F_1&#39;, &#39;Balanced accuracy&#39;),</span></span>
<span id="cb72-2"><a href="id_03_model_training.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                     decreasing_vec=c(FALSE, TRUE, TRUE, TRUE),</span></span>
<span id="cb72-3"><a href="id_03_model_training.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                     output_path=&#39;./other_data/toxicity/whole_data_set/cv_res_statistical_testing.csv&#39;)</span></span></code></pre></div>
</div>
<div id="final-reduced-sl-2" class="section level3 hasAnchor" number="3.5.8">
<h3><span class="header-section-number">3.5.8</span> Final reduced SL<a href="id_03_model_training.html#final-reduced-sl-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb73-1"><a href="id_03_model_training.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.init</span>(<span class="at">nthreads =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb73-2"><a href="id_03_model_training.html#cb73-2" aria-hidden="true" tabindex="-1"></a>model_path <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/toxicity/whole_data_set/superlearner_iter_3&quot;</span></span>
<span id="cb73-3"><a href="id_03_model_training.html#cb73-3" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(model_path)</span>
<span id="cb73-4"><a href="id_03_model_training.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx.RData&quot;</span>)</span>
<span id="cb73-5"><a href="id_03_model_training.html#cb73-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/toxicity/whole_data_set/cv_res.csv&quot;</span>, <span class="at">row.names =</span> <span class="dv">1</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb73-6"><a href="id_03_model_training.html#cb73-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(model<span class="sc">@</span>model<span class="sc">$</span>metalearner_model<span class="sc">@</span>model<span class="sc">$</span>coefficients_table)[<span class="fu">c</span>(<span class="st">&quot;names&quot;</span>, <span class="st">&quot;standardized_coefficients&quot;</span>)][<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb73-7"><a href="id_03_model_training.html#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="id_03_model_training.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)) {</span>
<span id="cb73-9"><a href="id_03_model_training.html#cb73-9" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> df<span class="sc">$</span>names[i]</span>
<span id="cb73-10"><a href="id_03_model_training.html#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;DeepLearning_model&quot;</span>)) {</span>
<span id="cb73-11"><a href="id_03_model_training.html#cb73-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dl_grid)) {</span>
<span id="cb73-12"><a href="id_03_model_training.html#cb73-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> dl_grid[[j]]) <span class="cf">break</span></span>
<span id="cb73-13"><a href="id_03_model_training.html#cb73-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb73-14"><a href="id_03_model_training.html#cb73-14" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, j)</span>
<span id="cb73-15"><a href="id_03_model_training.html#cb73-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;GBM_model&quot;</span>)) {</span>
<span id="cb73-16"><a href="id_03_model_training.html#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(gbm_grid)) {</span>
<span id="cb73-17"><a href="id_03_model_training.html#cb73-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> gbm_grid[[j]]) <span class="cf">break</span></span>
<span id="cb73-18"><a href="id_03_model_training.html#cb73-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb73-19"><a href="id_03_model_training.html#cb73-19" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, j)</span>
<span id="cb73-20"><a href="id_03_model_training.html#cb73-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(name, <span class="st">&quot;XGBoost_model&quot;</span>)) {</span>
<span id="cb73-21"><a href="id_03_model_training.html#cb73-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(xgboost_grid)) {</span>
<span id="cb73-22"><a href="id_03_model_training.html#cb73-22" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (name <span class="sc">%in%</span> xgboost_grid[[j]]) <span class="cf">break</span></span>
<span id="cb73-23"><a href="id_03_model_training.html#cb73-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb73-24"><a href="id_03_model_training.html#cb73-24" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, j)</span>
<span id="cb73-25"><a href="id_03_model_training.html#cb73-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb73-26"><a href="id_03_model_training.html#cb73-26" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>names[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">strsplit</span>(name, <span class="st">&quot;_&quot;</span>)[[<span class="dv">1</span>]], <span class="at">collapse =</span> <span class="st">&quot; model &quot;</span>)</span>
<span id="cb73-27"><a href="id_03_model_training.html#cb73-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb73-28"><a href="id_03_model_training.html#cb73-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb73-29"><a href="id_03_model_training.html#cb73-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-30"><a href="id_03_model_training.html#cb73-30" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> df<span class="sc">$</span>names</span>
<span id="cb73-31"><a href="id_03_model_training.html#cb73-31" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df, data[<span class="st">&quot;Balanced accuracy mean&quot;</span>], <span class="at">by =</span> <span class="st">&quot;row.names&quot;</span>)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb73-32"><a href="id_03_model_training.html#cb73-32" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>standardized_coefficients <span class="sc">&gt;</span> <span class="dv">0</span>, ]</span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb74-1"><a href="id_03_model_training.html#cb74-1" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(names, standardized_coefficients), <span class="at">y =</span> standardized_coefficients, <span class="at">fill =</span> <span class="st">`</span><span class="at">Balanced accuracy mean</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb74-2"><a href="id_03_model_training.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb74-3"><a href="id_03_model_training.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>, <span class="at">n.breaks =</span> <span class="dv">4</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">1.00</span>)) <span class="sc">+</span></span>
<span id="cb74-4"><a href="id_03_model_training.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.2f&quot;</span>, <span class="st">`</span><span class="at">Balanced accuracy mean</span><span class="st">`</span>)), <span class="at">nudge_y =</span> <span class="sc">-</span><span class="fl">0.008</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb74-5"><a href="id_03_model_training.html#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.3f&quot;</span>, standardized_coefficients)), <span class="at">nudge_y =</span> <span class="fl">0.01</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb74-6"><a href="id_03_model_training.html#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb74-7"><a href="id_03_model_training.html#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(df<span class="sc">$</span>standardized_coefficients) <span class="sc">+</span> <span class="fl">0.02</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb74-8"><a href="id_03_model_training.html#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb74-9"><a href="id_03_model_training.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb74-10"><a href="id_03_model_training.html#cb74-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb74-11"><a href="id_03_model_training.html#cb74-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb74-12"><a href="id_03_model_training.html#cb74-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb74-13"><a href="id_03_model_training.html#cb74-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb74-14"><a href="id_03_model_training.html#cb74-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb74-15"><a href="id_03_model_training.html#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb74-16"><a href="id_03_model_training.html#cb74-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb74-17"><a href="id_03_model_training.html#cb74-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="st">&quot;pt&quot;</span>),</span>
<span id="cb74-18"><a href="id_03_model_training.html#cb74-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb74-19"><a href="id_03_model_training.html#cb74-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb74-20"><a href="id_03_model_training.html#cb74-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb74-21"><a href="id_03_model_training.html#cb74-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb74-22"><a href="id_03_model_training.html#cb74-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb74-23"><a href="id_03_model_training.html#cb74-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.35</span>)</span>
<span id="cb74-24"><a href="id_03_model_training.html#cb74-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb74-25"><a href="id_03_model_training.html#cb74-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;Balanced accuracy&quot;</span>)) <span class="sc">+</span></span>
<span id="cb74-26"><a href="id_03_model_training.html#cb74-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb74-27"><a href="id_03_model_training.html#cb74-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Coefficient&quot;</span>) <span class="sc">+</span></span>
<span id="cb74-28"><a href="id_03_model_training.html#cb74-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Non-toxic&quot;</span>)</span></code></pre></div>
<p><img src="figures/Supplementary%20Fig%204%20tx%20super%20learner.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb75-1"><a href="id_03_model_training.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Close h2o server</span></span>
<span id="cb75-2"><a href="id_03_model_training.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co"># h2o.shutdown()</span></span>
<span id="cb75-3"><a href="id_03_model_training.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.2.2 (2022-10-31)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur ... 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] reshape2_1.4.4  DT_0.24         digest_0.6.29   stringr_1.4.1  
##  [5] rlist_0.4.6.2   enrichvs_0.0.5  scales_1.2.1    mltools_0.3.5  
##  [9] MLmetrics_1.1.1 h2o_3.38.0.2   
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.9        highr_0.9         plyr_1.8.7        bslib_0.4.0      
##  [5] compiler_4.2.2    jquerylib_0.1.4   R.methodsS3_1.8.2 R.utils_2.12.0   
##  [9] bitops_1.0-7      tools_4.2.2       lifecycle_1.0.1   jsonlite_1.8.0   
## [13] evaluate_0.16     R.cache_0.16.0    lattice_0.20-45   rlang_1.0.4      
## [17] Matrix_1.5-1      cli_3.3.0         rstudioapi_0.14   crosstalk_1.2.0  
## [21] yaml_2.3.5        xfun_0.32         fastmap_1.1.0     styler_1.8.0     
## [25] knitr_1.40        vctrs_0.4.1       htmlwidgets_1.5.4 sass_0.4.2       
## [29] grid_4.2.2        data.table_1.14.2 R6_2.5.1          rmarkdown_2.16   
## [33] bookdown_0.28     purrr_0.3.4       magrittr_2.0.3    codetools_0.2-18 
## [37] htmltools_0.5.3   colorspace_2.0-3  stringi_1.7.8     munsell_0.5.0    
## [41] RCurl_1.98-1.8    cachem_1.0.6      R.oo_1.25.0</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="id_02_variable_reduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="id_04_model_validation_and_interpretation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["main_notebook.pdf", "PDF"]],
"search": false,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
