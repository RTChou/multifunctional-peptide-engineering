<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Adversarial computational control | Multifunctional peptide engineering</title>
  <meta name="description" content="Section 5 Adversarial computational control | Multifunctional peptide engineering" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Adversarial computational control | Multifunctional peptide engineering" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Adversarial computational control | Multifunctional peptide engineering" />
  
  
  

<meta name="author" content="Renee Ti Chou and Henry T. Hsueh" />


<meta name="date" content="2023-02-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="id_04_model_validation_and_interpretation.html"/>
<link rel="next" href="id_06_small_data_set_demo.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.24/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<!-- https://stackoverflow.com/questions/45360998/code-folding-in-bookdown -->
<script type="text/javascript" src="js/transition.js"></script>
<script type="text/javascript" src="js/dropdown.js"></script>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><i>Multifunctional peptide engineering</i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html"><i class="fa fa-check"></i><b>1</b> Melanin binding pilot peptide array</a>
<ul>
<li class="chapter" data-level="1.1" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#generating-ml-input"><i class="fa fa-check"></i><b>1.2</b> Generating ML input</a></li>
<li class="chapter" data-level="1.3" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#training-initial-rf-model"><i class="fa fa-check"></i><b>1.3</b> Training initial RF model</a></li>
<li class="chapter" data-level="1.4" data-path="id_01_pilot_peptide_array.html"><a href="id_01_pilot_peptide_array.html#melanin-binding-variable-importance"><i class="fa fa-check"></i><b>1.4</b> Melanin binding variable importance</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html"><i class="fa fa-check"></i><b>2</b> Variable reduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#methods"><i class="fa fa-check"></i><b>2.1</b> Methods</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#regression"><i class="fa fa-check"></i><b>2.1.1</b> Regression</a></li>
<li class="chapter" data-level="2.1.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#classification"><i class="fa fa-check"></i><b>2.1.2</b> Classification</a>
<ul>
<li class="chapter" data-level="2.1.2.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#extension-to-multi-class-classification"><i class="fa fa-check"></i><b>2.1.2.1</b> Extension to multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#ml-input-generating-function"><i class="fa fa-check"></i><b>2.2</b> ML input generating function</a></li>
<li class="chapter" data-level="2.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#aic-functions"><i class="fa fa-check"></i><b>2.3</b> AIC functions</a></li>
<li class="chapter" data-level="2.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#melanin-binding-regression"><i class="fa fa-check"></i><b>2.4</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-1"><i class="fa fa-check"></i><b>2.4.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.4.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance"><i class="fa fa-check"></i><b>2.4.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.4.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction"><i class="fa fa-check"></i><b>2.4.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.4.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits"><i class="fa fa-check"></i><b>2.4.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#cell-penetration-classification"><i class="fa fa-check"></i><b>2.5</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-2"><i class="fa fa-check"></i><b>2.5.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.5.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance-1"><i class="fa fa-check"></i><b>2.5.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.5.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction-1"><i class="fa fa-check"></i><b>2.5.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.5.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits-1"><i class="fa fa-check"></i><b>2.5.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#toxicity-classification"><i class="fa fa-check"></i><b>2.6</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-ml-input-3"><i class="fa fa-check"></i><b>2.6.1</b> Generating ML input</a></li>
<li class="chapter" data-level="2.6.2" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-importance-2"><i class="fa fa-check"></i><b>2.6.2</b> Variable importance</a></li>
<li class="chapter" data-level="2.6.3" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#variable-reduction-2"><i class="fa fa-check"></i><b>2.6.3</b> Variable reduction</a></li>
<li class="chapter" data-level="2.6.4" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#generating-train-test-splits-2"><i class="fa fa-check"></i><b>2.6.4</b> Generating train-test splits</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="id_02_variable_reduction.html"><a href="id_02_variable_reduction.html#plotting"><i class="fa fa-check"></i><b>2.7</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="id_03_model_training.html"><a href="id_03_model_training.html"><i class="fa fa-check"></i><b>3</b> Model training</a>
<ul>
<li class="chapter" data-level="3.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#general-codefunctions"><i class="fa fa-check"></i><b>3.2</b> General code/functions</a></li>
<li class="chapter" data-level="3.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#melanin-binding-regression-1"><i class="fa fa-check"></i><b>3.3</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training"><i class="fa fa-check"></i><b>3.3.1</b> Model training</a></li>
<li class="chapter" data-level="3.3.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation"><i class="fa fa-check"></i><b>3.3.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.3.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set"><i class="fa fa-check"></i><b>3.3.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.3.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation"><i class="fa fa-check"></i><b>3.3.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.3.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection"><i class="fa fa-check"></i><b>3.3.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.3.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1"><i class="fa fa-check"></i><b>3.3.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.3.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2"><i class="fa fa-check"></i><b>3.3.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.3.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3"><i class="fa fa-check"></i><b>3.3.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.3.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4"><i class="fa fa-check"></i><b>3.3.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.3.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5"><i class="fa fa-check"></i><b>3.3.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.3.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6"><i class="fa fa-check"></i><b>3.3.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.3.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7"><i class="fa fa-check"></i><b>3.3.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.3.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8"><i class="fa fa-check"></i><b>3.3.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.3.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9"><i class="fa fa-check"></i><b>3.3.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.3.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10"><i class="fa fa-check"></i><b>3.3.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.3.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation"><i class="fa fa-check"></i><b>3.3.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.3.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection"><i class="fa fa-check"></i><b>3.3.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.3.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl"><i class="fa fa-check"></i><b>3.3.8</b> Final reduced SL</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cell-penetration-classification-1"><i class="fa fa-check"></i><b>3.4</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training-1"><i class="fa fa-check"></i><b>3.4.1</b> Model training</a></li>
<li class="chapter" data-level="3.4.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation-1"><i class="fa fa-check"></i><b>3.4.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.4.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set-1"><i class="fa fa-check"></i><b>3.4.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.4.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation-1"><i class="fa fa-check"></i><b>3.4.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.4.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection-1"><i class="fa fa-check"></i><b>3.4.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.4.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1-1"><i class="fa fa-check"></i><b>3.4.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.4.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2-1"><i class="fa fa-check"></i><b>3.4.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.4.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3-1"><i class="fa fa-check"></i><b>3.4.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.4.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4-1"><i class="fa fa-check"></i><b>3.4.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.4.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5-1"><i class="fa fa-check"></i><b>3.4.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.4.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6-1"><i class="fa fa-check"></i><b>3.4.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.4.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7-1"><i class="fa fa-check"></i><b>3.4.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.4.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8-1"><i class="fa fa-check"></i><b>3.4.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.4.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9-1"><i class="fa fa-check"></i><b>3.4.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.4.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10-1"><i class="fa fa-check"></i><b>3.4.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.4.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation-1"><i class="fa fa-check"></i><b>3.4.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.4.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection-1"><i class="fa fa-check"></i><b>3.4.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.4.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl-1"><i class="fa fa-check"></i><b>3.4.8</b> Final reduced SL</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#toxicity-classification-1"><i class="fa fa-check"></i><b>3.5</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-training-2"><i class="fa fa-check"></i><b>3.5.1</b> Model training</a></li>
<li class="chapter" data-level="3.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-cross-validation-2"><i class="fa fa-check"></i><b>3.5.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="3.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#training-on-whole-data-set-2"><i class="fa fa-check"></i><b>3.5.3</b> Training on whole data set</a></li>
<li class="chapter" data-level="3.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#model-evaluation-2"><i class="fa fa-check"></i><b>3.5.4</b> Model evaluation</a></li>
<li class="chapter" data-level="3.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#inner-loop-model-selection-2"><i class="fa fa-check"></i><b>3.5.5</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="3.5.5.1" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-1-2"><i class="fa fa-check"></i><b>3.5.5.1</b> CV 1</a></li>
<li class="chapter" data-level="3.5.5.2" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-2-2"><i class="fa fa-check"></i><b>3.5.5.2</b> CV 2</a></li>
<li class="chapter" data-level="3.5.5.3" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-3-2"><i class="fa fa-check"></i><b>3.5.5.3</b> CV 3</a></li>
<li class="chapter" data-level="3.5.5.4" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-4-2"><i class="fa fa-check"></i><b>3.5.5.4</b> CV 4</a></li>
<li class="chapter" data-level="3.5.5.5" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-5-2"><i class="fa fa-check"></i><b>3.5.5.5</b> CV 5</a></li>
<li class="chapter" data-level="3.5.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-6-2"><i class="fa fa-check"></i><b>3.5.5.6</b> CV 6</a></li>
<li class="chapter" data-level="3.5.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-7-2"><i class="fa fa-check"></i><b>3.5.5.7</b> CV 7</a></li>
<li class="chapter" data-level="3.5.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-8-2"><i class="fa fa-check"></i><b>3.5.5.8</b> CV 8</a></li>
<li class="chapter" data-level="3.5.5.9" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-9-2"><i class="fa fa-check"></i><b>3.5.5.9</b> CV 9</a></li>
<li class="chapter" data-level="3.5.5.10" data-path="id_03_model_training.html"><a href="id_03_model_training.html#cv-10-2"><i class="fa fa-check"></i><b>3.5.5.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="3.5.6" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-evaluation-2"><i class="fa fa-check"></i><b>3.5.6</b> Final evaluation</a></li>
<li class="chapter" data-level="3.5.7" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-model-selection-2"><i class="fa fa-check"></i><b>3.5.7</b> Final model selection</a></li>
<li class="chapter" data-level="3.5.8" data-path="id_03_model_training.html"><a href="id_03_model_training.html#final-reduced-sl-2"><i class="fa fa-check"></i><b>3.5.8</b> Final reduced SL</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html"><i class="fa fa-check"></i><b>4</b> Model validation and interpretation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#model-validation"><i class="fa fa-check"></i><b>4.1</b> Model validation</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melaning-binding"><i class="fa fa-check"></i><b>4.1.1</b> Melaning binding</a></li>
<li class="chapter" data-level="4.1.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding-and-cell-penetration"><i class="fa fa-check"></i><b>4.1.2</b> Melanin binding and cell-penetration</a></li>
<li class="chapter" data-level="4.1.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-induced-cells"><i class="fa fa-check"></i><b>4.1.3</b> Melanin-induced cells</a></li>
<li class="chapter" data-level="4.1.4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#non-melanin-induced-cells"><i class="fa fa-check"></i><b>4.1.4</b> Non-melanin induced cells</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#overall-model-interpretation"><i class="fa fa-check"></i><b>4.2</b> Overall model interpretation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding-regression-2"><i class="fa fa-check"></i><b>4.2.1</b> Melanin binding (regression)</a></li>
<li class="chapter" data-level="4.2.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#cell-penetration-classification-2"><i class="fa fa-check"></i><b>4.2.2</b> Cell-penetration (classification)</a></li>
<li class="chapter" data-level="4.2.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#toxicity-classification-2"><i class="fa fa-check"></i><b>4.2.3</b> Toxicity (classification)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#multifunctional-peptide-selection"><i class="fa fa-check"></i><b>4.3</b> Multifunctional peptide selection</a></li>
<li class="chapter" data-level="4.4" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#explanation-of-hr97-predictions"><i class="fa fa-check"></i><b>4.4</b> Explanation of HR97 predictions</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#melanin-binding"><i class="fa fa-check"></i><b>4.4.1</b> Melanin binding</a></li>
<li class="chapter" data-level="4.4.2" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#cell-penetration"><i class="fa fa-check"></i><b>4.4.2</b> Cell-penetration</a></li>
<li class="chapter" data-level="4.4.3" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#toxicity"><i class="fa fa-check"></i><b>4.4.3</b> Toxicity</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="id_04_model_validation_and_interpretation.html"><a href="id_04_model_validation_and_interpretation.html#peptide-design-space-visualization"><i class="fa fa-check"></i><b>4.5</b> Peptide design space visualization</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html"><i class="fa fa-check"></i><b>5</b> Adversarial computational control</a>
<ul>
<li class="chapter" data-level="5.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#general-codefunctions-1"><i class="fa fa-check"></i><b>5.1</b> General code/functions</a></li>
<li class="chapter" data-level="5.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#melanin-binding-regression-3"><i class="fa fa-check"></i><b>5.2</b> Melanin binding (regression)</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-3"><i class="fa fa-check"></i><b>5.2.1</b> Model training</a></li>
<li class="chapter" data-level="5.2.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-3"><i class="fa fa-check"></i><b>5.2.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.2.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-3"><i class="fa fa-check"></i><b>5.2.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.2.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-3"><i class="fa fa-check"></i><b>5.2.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.2.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-3"><i class="fa fa-check"></i><b>5.2.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.2.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-3"><i class="fa fa-check"></i><b>5.2.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.2.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-3"><i class="fa fa-check"></i><b>5.2.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.2.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-3"><i class="fa fa-check"></i><b>5.2.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.2.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-3"><i class="fa fa-check"></i><b>5.2.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.2.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-3"><i class="fa fa-check"></i><b>5.2.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.2.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-3"><i class="fa fa-check"></i><b>5.2.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.2.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-3"><i class="fa fa-check"></i><b>5.2.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.2.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-3"><i class="fa fa-check"></i><b>5.2.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.2.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-3"><i class="fa fa-check"></i><b>5.2.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.2.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-3"><i class="fa fa-check"></i><b>5.2.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cell-penetration-classification-3"><i class="fa fa-check"></i><b>5.3</b> Cell-penetration (classification)</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-4"><i class="fa fa-check"></i><b>5.3.1</b> Model training</a></li>
<li class="chapter" data-level="5.3.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-4"><i class="fa fa-check"></i><b>5.3.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.3.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-4"><i class="fa fa-check"></i><b>5.3.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.3.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-4"><i class="fa fa-check"></i><b>5.3.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.3.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-4"><i class="fa fa-check"></i><b>5.3.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.3.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-4"><i class="fa fa-check"></i><b>5.3.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.3.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-4"><i class="fa fa-check"></i><b>5.3.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.3.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-4"><i class="fa fa-check"></i><b>5.3.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.3.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-4"><i class="fa fa-check"></i><b>5.3.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.3.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-4"><i class="fa fa-check"></i><b>5.3.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.3.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-4"><i class="fa fa-check"></i><b>5.3.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.3.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-4"><i class="fa fa-check"></i><b>5.3.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.3.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-4"><i class="fa fa-check"></i><b>5.3.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.3.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-4"><i class="fa fa-check"></i><b>5.3.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.3.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-4"><i class="fa fa-check"></i><b>5.3.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#toxicity-classification-3"><i class="fa fa-check"></i><b>5.4</b> Toxicity (classification)</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-training-5"><i class="fa fa-check"></i><b>5.4.1</b> Model training</a></li>
<li class="chapter" data-level="5.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-cross-validation-5"><i class="fa fa-check"></i><b>5.4.2</b> Inner cross-validation</a></li>
<li class="chapter" data-level="5.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#model-evaluation-5"><i class="fa fa-check"></i><b>5.4.3</b> Model evaluation</a></li>
<li class="chapter" data-level="5.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-5"><i class="fa fa-check"></i><b>5.4.4</b> Inner loop model selection</a>
<ul>
<li class="chapter" data-level="5.4.4.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-1-5"><i class="fa fa-check"></i><b>5.4.4.1</b> CV 1</a></li>
<li class="chapter" data-level="5.4.4.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-2-5"><i class="fa fa-check"></i><b>5.4.4.2</b> CV 2</a></li>
<li class="chapter" data-level="5.4.4.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-3-5"><i class="fa fa-check"></i><b>5.4.4.3</b> CV 3</a></li>
<li class="chapter" data-level="5.4.4.4" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-4-5"><i class="fa fa-check"></i><b>5.4.4.4</b> CV 4</a></li>
<li class="chapter" data-level="5.4.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-5-5"><i class="fa fa-check"></i><b>5.4.4.5</b> CV 5</a></li>
<li class="chapter" data-level="5.4.4.6" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-6-5"><i class="fa fa-check"></i><b>5.4.4.6</b> CV 6</a></li>
<li class="chapter" data-level="5.4.4.7" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-7-5"><i class="fa fa-check"></i><b>5.4.4.7</b> CV 7</a></li>
<li class="chapter" data-level="5.4.4.8" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-8-5"><i class="fa fa-check"></i><b>5.4.4.8</b> CV 8</a></li>
<li class="chapter" data-level="5.4.4.9" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-9-5"><i class="fa fa-check"></i><b>5.4.4.9</b> CV 9</a></li>
<li class="chapter" data-level="5.4.4.10" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cv-10-5"><i class="fa fa-check"></i><b>5.4.4.10</b> CV 10</a></li>
</ul></li>
<li class="chapter" data-level="5.4.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#final-evaluation-5"><i class="fa fa-check"></i><b>5.4.5</b> Final evaluation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#overall-model-interpretation-1"><i class="fa fa-check"></i><b>5.5</b> Overall model interpretation</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#melanin-binding-regression-4"><i class="fa fa-check"></i><b>5.5.1</b> Melanin binding (regression)</a></li>
<li class="chapter" data-level="5.5.2" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#cell-penetration-classification-4"><i class="fa fa-check"></i><b>5.5.2</b> Cell-penetration (classification)</a></li>
<li class="chapter" data-level="5.5.3" data-path="id_05_adversarial_computational_control.html"><a href="id_05_adversarial_computational_control.html#toxicity-classification-4"><i class="fa fa-check"></i><b>5.5.3</b> Toxicity (classification)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html"><i class="fa fa-check"></i><b>6</b> Small data set demo</a>
<ul>
<li class="chapter" data-level="6.1" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#setup"><i class="fa fa-check"></i><b>6.1</b> Setup</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#load-libraries"><i class="fa fa-check"></i><b>6.1.1</b> Load libraries</a></li>
<li class="chapter" data-level="6.1.2" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#aic-functions-1"><i class="fa fa-check"></i><b>6.1.2</b> AIC functions</a></li>
<li class="chapter" data-level="6.1.3" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#model-parameters"><i class="fa fa-check"></i><b>6.1.3</b> Model parameters</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#variable-reduction-3"><i class="fa fa-check"></i><b>6.2</b> Variable reduction</a></li>
<li class="chapter" data-level="6.3" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#model-training-6"><i class="fa fa-check"></i><b>6.3</b> Model training</a></li>
<li class="chapter" data-level="6.4" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#run-pipeline"><i class="fa fa-check"></i><b>6.4</b> Run pipeline</a></li>
<li class="chapter" data-level="6.5" data-path="id_06_small_data_set_demo.html"><a href="id_06_small_data_set_demo.html#session-info"><i class="fa fa-check"></i><b>6.5</b> Session info</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multifunctional peptide engineering</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="id_05_adversarial_computational_control" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Section 5</span> Adversarial computational control<a href="id_05_adversarial_computational_control.html#id_05_adversarial_computational_control" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb108"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb108-1"><a href="id_05_adversarial_computational_control.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(h2o)</span>
<span id="cb108-2"><a href="id_05_adversarial_computational_control.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MLmetrics)</span>
<span id="cb108-3"><a href="id_05_adversarial_computational_control.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mltools)</span>
<span id="cb108-4"><a href="id_05_adversarial_computational_control.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb108-5"><a href="id_05_adversarial_computational_control.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(enrichvs)</span>
<span id="cb108-6"><a href="id_05_adversarial_computational_control.html#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlist)</span>
<span id="cb108-7"><a href="id_05_adversarial_computational_control.html#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb108-8"><a href="id_05_adversarial_computational_control.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(digest)</span>
<span id="cb108-9"><a href="id_05_adversarial_computational_control.html#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb108-10"><a href="id_05_adversarial_computational_control.html#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb108-11"><a href="id_05_adversarial_computational_control.html#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb108-12"><a href="id_05_adversarial_computational_control.html#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggforce)</span>
<span id="cb108-13"><a href="id_05_adversarial_computational_control.html#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb108-14"><a href="id_05_adversarial_computational_control.html#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="fu">use_condaenv</span>(<span class="st">&quot;/Users/renee/Library/r-miniconda/envs/peptide_engineering/bin/python&quot;</span>)</span></code></pre></div>
<div id="general-codefunctions-1" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> General code/functions<a href="id_05_adversarial_computational_control.html#general-codefunctions-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb109"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb109-1"><a href="id_05_adversarial_computational_control.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># h2o.init(nthreads=-1, max_mem_size=&#39;100G&#39;, port=54321)</span></span>
<span id="cb109-2"><a href="id_05_adversarial_computational_control.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.init</span>(<span class="at">nthreads =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb109-3"><a href="id_05_adversarial_computational_control.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.removeAll</span>()</span>
<span id="cb109-4"><a href="id_05_adversarial_computational_control.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 1</span></span>
<span id="cb109-5"><a href="id_05_adversarial_computational_control.html#cb109-5" aria-hidden="true" tabindex="-1"></a>deeplearning_params_1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb109-6"><a href="id_05_adversarial_computational_control.html#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb109-7"><a href="id_05_adversarial_computational_control.html#cb109-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb109-8"><a href="id_05_adversarial_computational_control.html#cb109-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb109-9"><a href="id_05_adversarial_computational_control.html#cb109-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>)),</span>
<span id="cb109-10"><a href="id_05_adversarial_computational_control.html#cb109-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>), <span class="fu">c</span>(<span class="fl">0.3</span>), <span class="fu">c</span>(<span class="fl">0.4</span>), <span class="fu">c</span>(<span class="fl">0.5</span>)),</span>
<span id="cb109-11"><a href="id_05_adversarial_computational_control.html#cb109-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb109-12"><a href="id_05_adversarial_computational_control.html#cb109-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb109-13"><a href="id_05_adversarial_computational_control.html#cb109-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb109-14"><a href="id_05_adversarial_computational_control.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 2</span></span>
<span id="cb109-15"><a href="id_05_adversarial_computational_control.html#cb109-15" aria-hidden="true" tabindex="-1"></a>deeplearning_params_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb109-16"><a href="id_05_adversarial_computational_control.html#cb109-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb109-17"><a href="id_05_adversarial_computational_control.html#cb109-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb109-18"><a href="id_05_adversarial_computational_control.html#cb109-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb109-19"><a href="id_05_adversarial_computational_control.html#cb109-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb109-20"><a href="id_05_adversarial_computational_control.html#cb109-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(</span>
<span id="cb109-21"><a href="id_05_adversarial_computational_control.html#cb109-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>), <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.3</span>),</span>
<span id="cb109-22"><a href="id_05_adversarial_computational_control.html#cb109-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>), <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)</span>
<span id="cb109-23"><a href="id_05_adversarial_computational_control.html#cb109-23" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb109-24"><a href="id_05_adversarial_computational_control.html#cb109-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb109-25"><a href="id_05_adversarial_computational_control.html#cb109-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb109-26"><a href="id_05_adversarial_computational_control.html#cb109-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb109-27"><a href="id_05_adversarial_computational_control.html#cb109-27" aria-hidden="true" tabindex="-1"></a><span class="co"># DeepLearning Grid 3</span></span>
<span id="cb109-28"><a href="id_05_adversarial_computational_control.html#cb109-28" aria-hidden="true" tabindex="-1"></a>deeplearning_params_3 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb109-29"><a href="id_05_adversarial_computational_control.html#cb109-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">activation =</span> <span class="st">&quot;RectifierWithDropout&quot;</span>,</span>
<span id="cb109-30"><a href="id_05_adversarial_computational_control.html#cb109-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb109-31"><a href="id_05_adversarial_computational_control.html#cb109-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">epsilon =</span> <span class="fu">c</span>(<span class="fl">1e-6</span>, <span class="fl">1e-7</span>, <span class="fl">1e-8</span>, <span class="fl">1e-9</span>),</span>
<span id="cb109-32"><a href="id_05_adversarial_computational_control.html#cb109-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">50</span>), <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">200</span>, <span class="dv">200</span>), <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">500</span>, <span class="dv">500</span>)),</span>
<span id="cb109-33"><a href="id_05_adversarial_computational_control.html#cb109-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_dropout_ratios =</span> <span class="fu">list</span>(</span>
<span id="cb109-34"><a href="id_05_adversarial_computational_control.html#cb109-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>), <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>),</span>
<span id="cb109-35"><a href="id_05_adversarial_computational_control.html#cb109-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>), <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span>),</span>
<span id="cb109-36"><a href="id_05_adversarial_computational_control.html#cb109-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>)</span>
<span id="cb109-37"><a href="id_05_adversarial_computational_control.html#cb109-37" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb109-38"><a href="id_05_adversarial_computational_control.html#cb109-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">input_dropout_ratio =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.15</span>, <span class="fl">0.2</span>),</span>
<span id="cb109-39"><a href="id_05_adversarial_computational_control.html#cb109-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">rho =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.99</span>)</span>
<span id="cb109-40"><a href="id_05_adversarial_computational_control.html#cb109-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb109-41"><a href="id_05_adversarial_computational_control.html#cb109-41" aria-hidden="true" tabindex="-1"></a><span class="co"># GBM</span></span>
<span id="cb109-42"><a href="id_05_adversarial_computational_control.html#cb109-42" aria-hidden="true" tabindex="-1"></a>gbm_params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb109-43"><a href="id_05_adversarial_computational_control.html#cb109-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.7</span>, <span class="fl">1.0</span>),</span>
<span id="cb109-44"><a href="id_05_adversarial_computational_control.html#cb109-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate_per_tree =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.7</span>, <span class="fl">1.0</span>),</span>
<span id="cb109-45"><a href="id_05_adversarial_computational_control.html#cb109-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb109-46"><a href="id_05_adversarial_computational_control.html#cb109-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>),</span>
<span id="cb109-47"><a href="id_05_adversarial_computational_control.html#cb109-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_rows =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">100</span>),</span>
<span id="cb109-48"><a href="id_05_adversarial_computational_control.html#cb109-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_split_improvement =</span> <span class="fu">c</span>(<span class="fl">1e-4</span>, <span class="fl">1e-5</span>),</span>
<span id="cb109-49"><a href="id_05_adversarial_computational_control.html#cb109-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb109-50"><a href="id_05_adversarial_computational_control.html#cb109-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1.0</span>)</span>
<span id="cb109-51"><a href="id_05_adversarial_computational_control.html#cb109-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb109-52"><a href="id_05_adversarial_computational_control.html#cb109-52" aria-hidden="true" tabindex="-1"></a><span class="co"># XGBoost</span></span>
<span id="cb109-53"><a href="id_05_adversarial_computational_control.html#cb109-53" aria-hidden="true" tabindex="-1"></a>xgboost_params <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb109-54"><a href="id_05_adversarial_computational_control.html#cb109-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">booster =</span> <span class="fu">c</span>(<span class="st">&quot;gbtree&quot;</span>, <span class="st">&quot;dart&quot;</span>),</span>
<span id="cb109-55"><a href="id_05_adversarial_computational_control.html#cb109-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb109-56"><a href="id_05_adversarial_computational_control.html#cb109-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_sample_rate_per_tree =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1.0</span>),</span>
<span id="cb109-57"><a href="id_05_adversarial_computational_control.html#cb109-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>),</span>
<span id="cb109-58"><a href="id_05_adversarial_computational_control.html#cb109-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_rows =</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1.0</span>, <span class="fl">3.0</span>, <span class="fl">5.0</span>, <span class="fl">10.0</span>, <span class="fl">15.0</span>, <span class="fl">20.0</span>),</span>
<span id="cb109-59"><a href="id_05_adversarial_computational_control.html#cb109-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="co"># early stopping</span></span>
<span id="cb109-60"><a href="id_05_adversarial_computational_control.html#cb109-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">reg_alpha =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>),</span>
<span id="cb109-61"><a href="id_05_adversarial_computational_control.html#cb109-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">reg_lambda =</span> <span class="fu">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="dv">1</span>),</span>
<span id="cb109-62"><a href="id_05_adversarial_computational_control.html#cb109-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">sample_rate =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>)</span>
<span id="cb109-63"><a href="id_05_adversarial_computational_control.html#cb109-63" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb110-1"><a href="id_05_adversarial_computational_control.html#cb110-1" aria-hidden="true" tabindex="-1"></a>sem <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="fu">sd</span>(x, na.rm) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">length</span>(<span class="fu">na.omit</span>(x)))</span>
<span id="cb110-2"><a href="id_05_adversarial_computational_control.html#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="id_05_adversarial_computational_control.html#cb110-3" aria-hidden="true" tabindex="-1"></a>statistical_testing <span class="ot">&lt;-</span> <span class="cf">function</span>(data, metric_vec, decreasing_vec, <span class="at">p_value_threshold =</span> <span class="fl">0.05</span>, <span class="at">num_entries =</span> <span class="dv">10</span>,</span>
<span id="cb110-4"><a href="id_05_adversarial_computational_control.html#cb110-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">output_path =</span> <span class="cn">NULL</span>) {</span>
<span id="cb110-5"><a href="id_05_adversarial_computational_control.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(metric_vec)) {</span>
<span id="cb110-6"><a href="id_05_adversarial_computational_control.html#cb110-6" aria-hidden="true" tabindex="-1"></a>    metric <span class="ot">&lt;-</span> metric_vec[i]</span>
<span id="cb110-7"><a href="id_05_adversarial_computational_control.html#cb110-7" aria-hidden="true" tabindex="-1"></a>    ranked_models <span class="ot">&lt;-</span> <span class="fu">rownames</span>(data[<span class="fu">order</span>(data[, <span class="fu">paste</span>(metric, <span class="st">&quot;mean&quot;</span>)], <span class="at">decreasing =</span> decreasing_vec[i]), ])</span>
<span id="cb110-8"><a href="id_05_adversarial_computational_control.html#cb110-8" aria-hidden="true" tabindex="-1"></a>    pval <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb110-9"><a href="id_05_adversarial_computational_control.html#cb110-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(ranked_models)) {</span>
<span id="cb110-10"><a href="id_05_adversarial_computational_control.html#cb110-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">sum</span>(<span class="fu">is.na</span>(data[ranked_models[j], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]))) {</span>
<span id="cb110-11"><a href="id_05_adversarial_computational_control.html#cb110-11" aria-hidden="true" tabindex="-1"></a>        pval <span class="ot">&lt;-</span> <span class="fu">c</span>(pval, <span class="cn">NA</span>)</span>
<span id="cb110-12"><a href="id_05_adversarial_computational_control.html#cb110-12" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb110-13"><a href="id_05_adversarial_computational_control.html#cb110-13" aria-hidden="true" tabindex="-1"></a>        pval <span class="ot">&lt;-</span> <span class="fu">c</span>(pval, <span class="fu">wilcox.test</span>(<span class="fu">as.numeric</span>(data[ranked_models[<span class="dv">1</span>], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]),</span>
<span id="cb110-14"><a href="id_05_adversarial_computational_control.html#cb110-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">as.numeric</span>(data[ranked_models[j], <span class="fu">paste</span>(metric, <span class="st">&quot;CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)]),</span>
<span id="cb110-15"><a href="id_05_adversarial_computational_control.html#cb110-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">exact =</span> <span class="cn">FALSE</span></span>
<span id="cb110-16"><a href="id_05_adversarial_computational_control.html#cb110-16" aria-hidden="true" tabindex="-1"></a>        )<span class="sc">$</span>p.value)</span>
<span id="cb110-17"><a href="id_05_adversarial_computational_control.html#cb110-17" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb110-18"><a href="id_05_adversarial_computational_control.html#cb110-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb110-19"><a href="id_05_adversarial_computational_control.html#cb110-19" aria-hidden="true" tabindex="-1"></a>    adj_pval <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">p.adjust</span>(pval, <span class="at">method =</span> <span class="st">&quot;BH&quot;</span>, <span class="at">n =</span> <span class="fu">length</span>(pval)))</span>
<span id="cb110-20"><a href="id_05_adversarial_computational_control.html#cb110-20" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(adj_pval)</span>
<span id="cb110-21"><a href="id_05_adversarial_computational_control.html#cb110-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> ranked_models</span>
<span id="cb110-22"><a href="id_05_adversarial_computational_control.html#cb110-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">paste</span>(metric, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>)</span>
<span id="cb110-23"><a href="id_05_adversarial_computational_control.html#cb110-23" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">merge</span>(data, df, <span class="at">by =</span> <span class="st">&quot;row.names&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-24"><a href="id_05_adversarial_computational_control.html#cb110-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(data) <span class="ot">&lt;-</span> data<span class="sc">$</span>Row.names</span>
<span id="cb110-25"><a href="id_05_adversarial_computational_control.html#cb110-25" aria-hidden="true" tabindex="-1"></a>    data<span class="sc">$</span>Row.names <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb110-26"><a href="id_05_adversarial_computational_control.html#cb110-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb110-27"><a href="id_05_adversarial_computational_control.html#cb110-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(metric_vec)) {</span>
<span id="cb110-28"><a href="id_05_adversarial_computational_control.html#cb110-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (decreasing_vec[i]) {</span>
<span id="cb110-29"><a href="id_05_adversarial_computational_control.html#cb110-29" aria-hidden="true" tabindex="-1"></a>      data[<span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;rank&quot;</span>)] <span class="ot">&lt;-</span> <span class="fu">rank</span>(<span class="sc">-</span>data[, <span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;mean&quot;</span>)], <span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb110-30"><a href="id_05_adversarial_computational_control.html#cb110-30" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb110-31"><a href="id_05_adversarial_computational_control.html#cb110-31" aria-hidden="true" tabindex="-1"></a>      data[<span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;rank&quot;</span>)] <span class="ot">&lt;-</span> <span class="fu">rank</span>(data[, <span class="fu">paste</span>(metric_vec[i], <span class="st">&quot;mean&quot;</span>)], <span class="at">ties.method =</span> <span class="st">&quot;average&quot;</span>)</span>
<span id="cb110-32"><a href="id_05_adversarial_computational_control.html#cb110-32" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb110-33"><a href="id_05_adversarial_computational_control.html#cb110-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb110-34"><a href="id_05_adversarial_computational_control.html#cb110-34" aria-hidden="true" tabindex="-1"></a>  data[<span class="st">&quot;Rank sum&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[(<span class="fu">ncol</span>(data) <span class="sc">-</span> <span class="fu">length</span>(metric_vec) <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">ncol</span>(data)])</span>
<span id="cb110-35"><a href="id_05_adversarial_computational_control.html#cb110-35" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[<span class="fu">order</span>(data<span class="sc">$</span><span class="st">`</span><span class="at">Rank sum</span><span class="st">`</span>), ]</span>
<span id="cb110-36"><a href="id_05_adversarial_computational_control.html#cb110-36" aria-hidden="true" tabindex="-1"></a>  competitive <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(data[<span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>)] <span class="sc">&lt;</span> p_value_threshold) <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb110-37"><a href="id_05_adversarial_computational_control.html#cb110-37" aria-hidden="true" tabindex="-1"></a>  competitive[<span class="fu">is.na</span>(competitive)] <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb110-38"><a href="id_05_adversarial_computational_control.html#cb110-38" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[competitive, ]</span>
<span id="cb110-39"><a href="id_05_adversarial_computational_control.html#cb110-39" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(output_path)) {</span>
<span id="cb110-40"><a href="id_05_adversarial_computational_control.html#cb110-40" aria-hidden="true" tabindex="-1"></a>    data[<span class="fu">c</span>(</span>
<span id="cb110-41"><a href="id_05_adversarial_computational_control.html#cb110-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>), <span class="fu">paste</span>(metric_vec, <span class="st">&quot;rank&quot;</span>), <span class="st">&quot;Rank sum&quot;</span>,</span>
<span id="cb110-42"><a href="id_05_adversarial_computational_control.html#cb110-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">melt</span>(<span class="fu">sapply</span>(metric_vec, <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;s.e.m.&quot;</span>))))<span class="sc">$</span>value</span>
<span id="cb110-43"><a href="id_05_adversarial_computational_control.html#cb110-43" aria-hidden="true" tabindex="-1"></a>    )] <span class="sc">%&gt;%</span></span>
<span id="cb110-44"><a href="id_05_adversarial_computational_control.html#cb110-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-45"><a href="id_05_adversarial_computational_control.html#cb110-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write.csv</span>(., <span class="at">file =</span> output_path)</span>
<span id="cb110-46"><a href="id_05_adversarial_computational_control.html#cb110-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb110-47"><a href="id_05_adversarial_computational_control.html#cb110-47" aria-hidden="true" tabindex="-1"></a>  data[<span class="fu">c</span>(<span class="fu">paste</span>(metric_vec, <span class="st">&quot;adj. &lt;i&gt;p&lt;/i&gt; value&quot;</span>), <span class="fu">paste</span>(metric_vec, <span class="st">&quot;rank&quot;</span>), <span class="st">&quot;Rank sum&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb110-48"><a href="id_05_adversarial_computational_control.html#cb110-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-49"><a href="id_05_adversarial_computational_control.html#cb110-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> num_entries), <span class="at">escape =</span> <span class="cn">FALSE</span>)</span>
<span id="cb110-50"><a href="id_05_adversarial_computational_control.html#cb110-50" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="melanin-binding-regression-3" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Melanin binding (regression)<a href="id_05_adversarial_computational_control.html#melanin-binding-regression-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb111"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb111-1"><a href="id_05_adversarial_computational_control.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits.RData&quot;</span>)</span>
<span id="cb111-2"><a href="id_05_adversarial_computational_control.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">32</span>)</span>
<span id="cb111-3"><a href="id_05_adversarial_computational_control.html#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="id_05_adversarial_computational_control.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of cross-validation training sets</span></span>
<span id="cb111-5"><a href="id_05_adversarial_computational_control.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb111-6"><a href="id_05_adversarial_computational_control.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>log_intensity</span>
<span id="cb111-7"><a href="id_05_adversarial_computational_control.html#cb111-7" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb111-8"><a href="id_05_adversarial_computational_control.html#cb111-8" aria-hidden="true" tabindex="-1"></a>  outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>log_intensity <span class="ot">&lt;-</span> response</span>
<span id="cb111-9"><a href="id_05_adversarial_computational_control.html#cb111-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-10"><a href="id_05_adversarial_computational_control.html#cb111-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-11"><a href="id_05_adversarial_computational_control.html#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of the whole data set</span></span>
<span id="cb111-12"><a href="id_05_adversarial_computational_control.html#cb111-12" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> mb_data<span class="sc">$</span>log_intensity</span>
<span id="cb111-13"><a href="id_05_adversarial_computational_control.html#cb111-13" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb111-14"><a href="id_05_adversarial_computational_control.html#cb111-14" aria-hidden="true" tabindex="-1"></a>mb_data<span class="sc">$</span>log_intensity <span class="ot">&lt;-</span> response</span>
<span id="cb111-15"><a href="id_05_adversarial_computational_control.html#cb111-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-16"><a href="id_05_adversarial_computational_control.html#cb111-16" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mb_data, outer_splits,</span>
<span id="cb111-17"><a href="id_05_adversarial_computational_control.html#cb111-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span></span>
<span id="cb111-18"><a href="id_05_adversarial_computational_control.html#cb111-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="model-training-3" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Model training<a href="id_05_adversarial_computational_control.html#model-training-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb112"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb112-1"><a href="id_05_adversarial_computational_control.html#cb112-1" aria-hidden="true" tabindex="-1"></a>train_mb_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb112-2"><a href="id_05_adversarial_computational_control.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb112-3"><a href="id_05_adversarial_computational_control.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;log_intensity&quot;</span></span>
<span id="cb112-4"><a href="id_05_adversarial_computational_control.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb112-5"><a href="id_05_adversarial_computational_control.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>log_intensity)</span>
<span id="cb112-6"><a href="id_05_adversarial_computational_control.html#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb112-7"><a href="id_05_adversarial_computational_control.html#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb112-8"><a href="id_05_adversarial_computational_control.html#cb112-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb112-9"><a href="id_05_adversarial_computational_control.html#cb112-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-10"><a href="id_05_adversarial_computational_control.html#cb112-10" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb112-11"><a href="id_05_adversarial_computational_control.html#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-12"><a href="id_05_adversarial_computational_control.html#cb112-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb112-13"><a href="id_05_adversarial_computational_control.html#cb112-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-14"><a href="id_05_adversarial_computational_control.html#cb112-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb112-15"><a href="id_05_adversarial_computational_control.html#cb112-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb112-16"><a href="id_05_adversarial_computational_control.html#cb112-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb112-17"><a href="id_05_adversarial_computational_control.html#cb112-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb112-18"><a href="id_05_adversarial_computational_control.html#cb112-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb112-19"><a href="id_05_adversarial_computational_control.html#cb112-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-20"><a href="id_05_adversarial_computational_control.html#cb112-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb112-21"><a href="id_05_adversarial_computational_control.html#cb112-21" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-22"><a href="id_05_adversarial_computational_control.html#cb112-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-23"><a href="id_05_adversarial_computational_control.html#cb112-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 2</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-24"><a href="id_05_adversarial_computational_control.html#cb112-24" aria-hidden="true" tabindex="-1"></a>  deeplearning_2 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb112-25"><a href="id_05_adversarial_computational_control.html#cb112-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-26"><a href="id_05_adversarial_computational_control.html#cb112-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_2,</span>
<span id="cb112-27"><a href="id_05_adversarial_computational_control.html#cb112-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-28"><a href="id_05_adversarial_computational_control.html#cb112-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb112-29"><a href="id_05_adversarial_computational_control.html#cb112-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb112-30"><a href="id_05_adversarial_computational_control.html#cb112-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb112-31"><a href="id_05_adversarial_computational_control.html#cb112-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb112-32"><a href="id_05_adversarial_computational_control.html#cb112-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb112-33"><a href="id_05_adversarial_computational_control.html#cb112-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-34"><a href="id_05_adversarial_computational_control.html#cb112-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_2<span class="sc">@</span>model_ids) {</span>
<span id="cb112-35"><a href="id_05_adversarial_computational_control.html#cb112-35" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-36"><a href="id_05_adversarial_computational_control.html#cb112-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-37"><a href="id_05_adversarial_computational_control.html#cb112-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 3</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-38"><a href="id_05_adversarial_computational_control.html#cb112-38" aria-hidden="true" tabindex="-1"></a>  deeplearning_3 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb112-39"><a href="id_05_adversarial_computational_control.html#cb112-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-40"><a href="id_05_adversarial_computational_control.html#cb112-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_3,</span>
<span id="cb112-41"><a href="id_05_adversarial_computational_control.html#cb112-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-42"><a href="id_05_adversarial_computational_control.html#cb112-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb112-43"><a href="id_05_adversarial_computational_control.html#cb112-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb112-44"><a href="id_05_adversarial_computational_control.html#cb112-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb112-45"><a href="id_05_adversarial_computational_control.html#cb112-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb112-46"><a href="id_05_adversarial_computational_control.html#cb112-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb112-47"><a href="id_05_adversarial_computational_control.html#cb112-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-48"><a href="id_05_adversarial_computational_control.html#cb112-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_3<span class="sc">@</span>model_ids) {</span>
<span id="cb112-49"><a href="id_05_adversarial_computational_control.html#cb112-49" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-50"><a href="id_05_adversarial_computational_control.html#cb112-50" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-51"><a href="id_05_adversarial_computational_control.html#cb112-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-52"><a href="id_05_adversarial_computational_control.html#cb112-52" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb112-53"><a href="id_05_adversarial_computational_control.html#cb112-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-54"><a href="id_05_adversarial_computational_control.html#cb112-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb112-55"><a href="id_05_adversarial_computational_control.html#cb112-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">300</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb112-56"><a href="id_05_adversarial_computational_control.html#cb112-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb112-57"><a href="id_05_adversarial_computational_control.html#cb112-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-58"><a href="id_05_adversarial_computational_control.html#cb112-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb112-59"><a href="id_05_adversarial_computational_control.html#cb112-59" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-60"><a href="id_05_adversarial_computational_control.html#cb112-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-61"><a href="id_05_adversarial_computational_control.html#cb112-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-62"><a href="id_05_adversarial_computational_control.html#cb112-62" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb112-63"><a href="id_05_adversarial_computational_control.html#cb112-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-64"><a href="id_05_adversarial_computational_control.html#cb112-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-65"><a href="id_05_adversarial_computational_control.html#cb112-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb112-66"><a href="id_05_adversarial_computational_control.html#cb112-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-67"><a href="id_05_adversarial_computational_control.html#cb112-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-68"><a href="id_05_adversarial_computational_control.html#cb112-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-69"><a href="id_05_adversarial_computational_control.html#cb112-69" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb112-70"><a href="id_05_adversarial_computational_control.html#cb112-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-71"><a href="id_05_adversarial_computational_control.html#cb112-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-72"><a href="id_05_adversarial_computational_control.html#cb112-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb112-73"><a href="id_05_adversarial_computational_control.html#cb112-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-74"><a href="id_05_adversarial_computational_control.html#cb112-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-75"><a href="id_05_adversarial_computational_control.html#cb112-75" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-76"><a href="id_05_adversarial_computational_control.html#cb112-76" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb112-77"><a href="id_05_adversarial_computational_control.html#cb112-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-78"><a href="id_05_adversarial_computational_control.html#cb112-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-79"><a href="id_05_adversarial_computational_control.html#cb112-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb112-80"><a href="id_05_adversarial_computational_control.html#cb112-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-81"><a href="id_05_adversarial_computational_control.html#cb112-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-82"><a href="id_05_adversarial_computational_control.html#cb112-82" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-83"><a href="id_05_adversarial_computational_control.html#cb112-83" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb112-84"><a href="id_05_adversarial_computational_control.html#cb112-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-85"><a href="id_05_adversarial_computational_control.html#cb112-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-86"><a href="id_05_adversarial_computational_control.html#cb112-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb112-87"><a href="id_05_adversarial_computational_control.html#cb112-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-88"><a href="id_05_adversarial_computational_control.html#cb112-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-89"><a href="id_05_adversarial_computational_control.html#cb112-89" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-90"><a href="id_05_adversarial_computational_control.html#cb112-90" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb112-91"><a href="id_05_adversarial_computational_control.html#cb112-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-92"><a href="id_05_adversarial_computational_control.html#cb112-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-93"><a href="id_05_adversarial_computational_control.html#cb112-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb112-94"><a href="id_05_adversarial_computational_control.html#cb112-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-95"><a href="id_05_adversarial_computational_control.html#cb112-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-96"><a href="id_05_adversarial_computational_control.html#cb112-96" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-97"><a href="id_05_adversarial_computational_control.html#cb112-97" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb112-98"><a href="id_05_adversarial_computational_control.html#cb112-98" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-99"><a href="id_05_adversarial_computational_control.html#cb112-99" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-100"><a href="id_05_adversarial_computational_control.html#cb112-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-101"><a href="id_05_adversarial_computational_control.html#cb112-101" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb112-102"><a href="id_05_adversarial_computational_control.html#cb112-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-103"><a href="id_05_adversarial_computational_control.html#cb112-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb112-104"><a href="id_05_adversarial_computational_control.html#cb112-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">300</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb112-105"><a href="id_05_adversarial_computational_control.html#cb112-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb112-106"><a href="id_05_adversarial_computational_control.html#cb112-106" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-107"><a href="id_05_adversarial_computational_control.html#cb112-107" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb112-108"><a href="id_05_adversarial_computational_control.html#cb112-108" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-109"><a href="id_05_adversarial_computational_control.html#cb112-109" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-110"><a href="id_05_adversarial_computational_control.html#cb112-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-111"><a href="id_05_adversarial_computational_control.html#cb112-111" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb112-112"><a href="id_05_adversarial_computational_control.html#cb112-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-113"><a href="id_05_adversarial_computational_control.html#cb112-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-114"><a href="id_05_adversarial_computational_control.html#cb112-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-115"><a href="id_05_adversarial_computational_control.html#cb112-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb112-116"><a href="id_05_adversarial_computational_control.html#cb112-116" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-117"><a href="id_05_adversarial_computational_control.html#cb112-117" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-118"><a href="id_05_adversarial_computational_control.html#cb112-118" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb112-119"><a href="id_05_adversarial_computational_control.html#cb112-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-120"><a href="id_05_adversarial_computational_control.html#cb112-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-121"><a href="id_05_adversarial_computational_control.html#cb112-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-122"><a href="id_05_adversarial_computational_control.html#cb112-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb112-123"><a href="id_05_adversarial_computational_control.html#cb112-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-124"><a href="id_05_adversarial_computational_control.html#cb112-124" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-125"><a href="id_05_adversarial_computational_control.html#cb112-125" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb112-126"><a href="id_05_adversarial_computational_control.html#cb112-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-127"><a href="id_05_adversarial_computational_control.html#cb112-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb112-128"><a href="id_05_adversarial_computational_control.html#cb112-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb112-129"><a href="id_05_adversarial_computational_control.html#cb112-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb112-130"><a href="id_05_adversarial_computational_control.html#cb112-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-131"><a href="id_05_adversarial_computational_control.html#cb112-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-132"><a href="id_05_adversarial_computational_control.html#cb112-132" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb112-133"><a href="id_05_adversarial_computational_control.html#cb112-133" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-134"><a href="id_05_adversarial_computational_control.html#cb112-134" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-135"><a href="id_05_adversarial_computational_control.html#cb112-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GLM</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-136"><a href="id_05_adversarial_computational_control.html#cb112-136" aria-hidden="true" tabindex="-1"></a>  glm <span class="ot">&lt;-</span> <span class="fu">h2o.glm</span>(</span>
<span id="cb112-137"><a href="id_05_adversarial_computational_control.html#cb112-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GLM&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-138"><a href="id_05_adversarial_computational_control.html#cb112-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">alpha =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb112-139"><a href="id_05_adversarial_computational_control.html#cb112-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-140"><a href="id_05_adversarial_computational_control.html#cb112-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-141"><a href="id_05_adversarial_computational_control.html#cb112-141" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;GLM&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-142"><a href="id_05_adversarial_computational_control.html#cb112-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-143"><a href="id_05_adversarial_computational_control.html#cb112-143" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb112-144"><a href="id_05_adversarial_computational_control.html#cb112-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-145"><a href="id_05_adversarial_computational_control.html#cb112-145" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb112-146"><a href="id_05_adversarial_computational_control.html#cb112-146" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb112-147"><a href="id_05_adversarial_computational_control.html#cb112-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-148"><a href="id_05_adversarial_computational_control.html#cb112-148" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-149"><a href="id_05_adversarial_computational_control.html#cb112-149" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-150"><a href="id_05_adversarial_computational_control.html#cb112-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-151"><a href="id_05_adversarial_computational_control.html#cb112-151" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb112-152"><a href="id_05_adversarial_computational_control.html#cb112-152" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb112-153"><a href="id_05_adversarial_computational_control.html#cb112-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb112-154"><a href="id_05_adversarial_computational_control.html#cb112-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb112-155"><a href="id_05_adversarial_computational_control.html#cb112-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb112-156"><a href="id_05_adversarial_computational_control.html#cb112-156" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-157"><a href="id_05_adversarial_computational_control.html#cb112-157" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-158"><a href="id_05_adversarial_computational_control.html#cb112-158" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb112-159"><a href="id_05_adversarial_computational_control.html#cb112-159" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb112-160"><a href="id_05_adversarial_computational_control.html#cb112-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb112-161"><a href="id_05_adversarial_computational_control.html#cb112-161" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb112-162"><a href="id_05_adversarial_computational_control.html#cb112-162" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb112-163"><a href="id_05_adversarial_computational_control.html#cb112-163" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_2<span class="sc">@</span>model_ids),</span>
<span id="cb112-164"><a href="id_05_adversarial_computational_control.html#cb112-164" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_3<span class="sc">@</span>model_ids),</span>
<span id="cb112-165"><a href="id_05_adversarial_computational_control.html#cb112-165" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb112-166"><a href="id_05_adversarial_computational_control.html#cb112-166" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb112-167"><a href="id_05_adversarial_computational_control.html#cb112-167" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;GLM&quot;</span>,</span>
<span id="cb112-168"><a href="id_05_adversarial_computational_control.html#cb112-168" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb112-169"><a href="id_05_adversarial_computational_control.html#cb112-169" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb112-170"><a href="id_05_adversarial_computational_control.html#cb112-170" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-171"><a href="id_05_adversarial_computational_control.html#cb112-171" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb112-172"><a href="id_05_adversarial_computational_control.html#cb112-172" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-173"><a href="id_05_adversarial_computational_control.html#cb112-173" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb112-174"><a href="id_05_adversarial_computational_control.html#cb112-174" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb112-175"><a href="id_05_adversarial_computational_control.html#cb112-175" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-176"><a href="id_05_adversarial_computational_control.html#cb112-176" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb112-177"><a href="id_05_adversarial_computational_control.html#cb112-177" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb112-178"><a href="id_05_adversarial_computational_control.html#cb112-178" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb112-179"><a href="id_05_adversarial_computational_control.html#cb112-179" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb112-180"><a href="id_05_adversarial_computational_control.html#cb112-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb112-181"><a href="id_05_adversarial_computational_control.html#cb112-181" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb112-182"><a href="id_05_adversarial_computational_control.html#cb112-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb112-183"><a href="id_05_adversarial_computational_control.html#cb112-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb112-184"><a href="id_05_adversarial_computational_control.html#cb112-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb112-185"><a href="id_05_adversarial_computational_control.html#cb112-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb112-186"><a href="id_05_adversarial_computational_control.html#cb112-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb112-187"><a href="id_05_adversarial_computational_control.html#cb112-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb112-188"><a href="id_05_adversarial_computational_control.html#cb112-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-189"><a href="id_05_adversarial_computational_control.html#cb112-189" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-190"><a href="id_05_adversarial_computational_control.html#cb112-190" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-191"><a href="id_05_adversarial_computational_control.html#cb112-191" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb112-192"><a href="id_05_adversarial_computational_control.html#cb112-192" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-193"><a href="id_05_adversarial_computational_control.html#cb112-193" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-194"><a href="id_05_adversarial_computational_control.html#cb112-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb112-195"><a href="id_05_adversarial_computational_control.html#cb112-195" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-196"><a href="id_05_adversarial_computational_control.html#cb112-196" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb112-197"><a href="id_05_adversarial_computational_control.html#cb112-197" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb112-198"><a href="id_05_adversarial_computational_control.html#cb112-198" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb112-199"><a href="id_05_adversarial_computational_control.html#cb112-199" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb112-200"><a href="id_05_adversarial_computational_control.html#cb112-200" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb112-201"><a href="id_05_adversarial_computational_control.html#cb112-201" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb112-202"><a href="id_05_adversarial_computational_control.html#cb112-202" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb112-203"><a href="id_05_adversarial_computational_control.html#cb112-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb112-204"><a href="id_05_adversarial_computational_control.html#cb112-204" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb112-205"><a href="id_05_adversarial_computational_control.html#cb112-205" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb112-206"><a href="id_05_adversarial_computational_control.html#cb112-206" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb112-207"><a href="id_05_adversarial_computational_control.html#cb112-207" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb112-208"><a href="id_05_adversarial_computational_control.html#cb112-208" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb112-209"><a href="id_05_adversarial_computational_control.html#cb112-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb112-210"><a href="id_05_adversarial_computational_control.html#cb112-210" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-211"><a href="id_05_adversarial_computational_control.html#cb112-211" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb112-212"><a href="id_05_adversarial_computational_control.html#cb112-212" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb112-213"><a href="id_05_adversarial_computational_control.html#cb112-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb112-214"><a href="id_05_adversarial_computational_control.html#cb112-214" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-215"><a href="id_05_adversarial_computational_control.html#cb112-215" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb112-216"><a href="id_05_adversarial_computational_control.html#cb112-216" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb112-217"><a href="id_05_adversarial_computational_control.html#cb112-217" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb112-218"><a href="id_05_adversarial_computational_control.html#cb112-218" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb112-219"><a href="id_05_adversarial_computational_control.html#cb112-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb112-220"><a href="id_05_adversarial_computational_control.html#cb112-220" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb112-221"><a href="id_05_adversarial_computational_control.html#cb112-221" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb112-222"><a href="id_05_adversarial_computational_control.html#cb112-222" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb112-223"><a href="id_05_adversarial_computational_control.html#cb112-223" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb112-224"><a href="id_05_adversarial_computational_control.html#cb112-224" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb112-225"><a href="id_05_adversarial_computational_control.html#cb112-225" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb112-226"><a href="id_05_adversarial_computational_control.html#cb112-226" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb112-227"><a href="id_05_adversarial_computational_control.html#cb112-227" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-228"><a href="id_05_adversarial_computational_control.html#cb112-228" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb112-229"><a href="id_05_adversarial_computational_control.html#cb112-229" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-230"><a href="id_05_adversarial_computational_control.html#cb112-230" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb112-231"><a href="id_05_adversarial_computational_control.html#cb112-231" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-232"><a href="id_05_adversarial_computational_control.html#cb112-232" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-233"><a href="id_05_adversarial_computational_control.html#cb112-233" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb112-234"><a href="id_05_adversarial_computational_control.html#cb112-234" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb112-235"><a href="id_05_adversarial_computational_control.html#cb112-235" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb112-236"><a href="id_05_adversarial_computational_control.html#cb112-236" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb112-237"><a href="id_05_adversarial_computational_control.html#cb112-237" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb112-238"><a href="id_05_adversarial_computational_control.html#cb112-238" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb112-239"><a href="id_05_adversarial_computational_control.html#cb112-239" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb112-240"><a href="id_05_adversarial_computational_control.html#cb112-240" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb112-241"><a href="id_05_adversarial_computational_control.html#cb112-241" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb112-242"><a href="id_05_adversarial_computational_control.html#cb112-242" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_2<span class="sc">@</span>model_ids),</span>
<span id="cb112-243"><a href="id_05_adversarial_computational_control.html#cb112-243" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_3<span class="sc">@</span>model_ids)</span>
<span id="cb112-244"><a href="id_05_adversarial_computational_control.html#cb112-244" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-245"><a href="id_05_adversarial_computational_control.html#cb112-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb112-246"><a href="id_05_adversarial_computational_control.html#cb112-246" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb112-247"><a href="id_05_adversarial_computational_control.html#cb112-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb112-248"><a href="id_05_adversarial_computational_control.html#cb112-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb112-249"><a href="id_05_adversarial_computational_control.html#cb112-249" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb112-250"><a href="id_05_adversarial_computational_control.html#cb112-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb112-251"><a href="id_05_adversarial_computational_control.html#cb112-251" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb112-252"><a href="id_05_adversarial_computational_control.html#cb112-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb112-253"><a href="id_05_adversarial_computational_control.html#cb112-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-254"><a href="id_05_adversarial_computational_control.html#cb112-254" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-255"><a href="id_05_adversarial_computational_control.html#cb112-255" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-256"><a href="id_05_adversarial_computational_control.html#cb112-256" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb112-257"><a href="id_05_adversarial_computational_control.html#cb112-257" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-258"><a href="id_05_adversarial_computational_control.html#cb112-258" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-259"><a href="id_05_adversarial_computational_control.html#cb112-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb112-260"><a href="id_05_adversarial_computational_control.html#cb112-260" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-261"><a href="id_05_adversarial_computational_control.html#cb112-261" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb112-262"><a href="id_05_adversarial_computational_control.html#cb112-262" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb112-263"><a href="id_05_adversarial_computational_control.html#cb112-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb112-264"><a href="id_05_adversarial_computational_control.html#cb112-264" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb112-265"><a href="id_05_adversarial_computational_control.html#cb112-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb112-266"><a href="id_05_adversarial_computational_control.html#cb112-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb112-267"><a href="id_05_adversarial_computational_control.html#cb112-267" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb112-268"><a href="id_05_adversarial_computational_control.html#cb112-268" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb112-269"><a href="id_05_adversarial_computational_control.html#cb112-269" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb112-270"><a href="id_05_adversarial_computational_control.html#cb112-270" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb112-271"><a href="id_05_adversarial_computational_control.html#cb112-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-272"><a href="id_05_adversarial_computational_control.html#cb112-272" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-273"><a href="id_05_adversarial_computational_control.html#cb112-273" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-274"><a href="id_05_adversarial_computational_control.html#cb112-274" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb112-275"><a href="id_05_adversarial_computational_control.html#cb112-275" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-276"><a href="id_05_adversarial_computational_control.html#cb112-276" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-277"><a href="id_05_adversarial_computational_control.html#cb112-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb112-278"><a href="id_05_adversarial_computational_control.html#cb112-278" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-279"><a href="id_05_adversarial_computational_control.html#cb112-279" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb112-280"><a href="id_05_adversarial_computational_control.html#cb112-280" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb112-281"><a href="id_05_adversarial_computational_control.html#cb112-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb112-282"><a href="id_05_adversarial_computational_control.html#cb112-282" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb112-283"><a href="id_05_adversarial_computational_control.html#cb112-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb112-284"><a href="id_05_adversarial_computational_control.html#cb112-284" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb112-285"><a href="id_05_adversarial_computational_control.html#cb112-285" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb112-286"><a href="id_05_adversarial_computational_control.html#cb112-286" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb112-287"><a href="id_05_adversarial_computational_control.html#cb112-287" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb112-288"><a href="id_05_adversarial_computational_control.html#cb112-288" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb112-289"><a href="id_05_adversarial_computational_control.html#cb112-289" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(<span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-290"><a href="id_05_adversarial_computational_control.html#cb112-290" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb112-291"><a href="id_05_adversarial_computational_control.html#cb112-291" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-292"><a href="id_05_adversarial_computational_control.html#cb112-292" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb112-293"><a href="id_05_adversarial_computational_control.html#cb112-293" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-294"><a href="id_05_adversarial_computational_control.html#cb112-294" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id)),</span>
<span id="cb112-295"><a href="id_05_adversarial_computational_control.html#cb112-295" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb112-296"><a href="id_05_adversarial_computational_control.html#cb112-296" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb112-297"><a href="id_05_adversarial_computational_control.html#cb112-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb112-298"><a href="id_05_adversarial_computational_control.html#cb112-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb112-299"><a href="id_05_adversarial_computational_control.html#cb112-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb112-300"><a href="id_05_adversarial_computational_control.html#cb112-300" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation-3" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Inner cross-validation<a href="id_05_adversarial_computational_control.html#inner-cross-validation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb113"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb113-1"><a href="id_05_adversarial_computational_control.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb113-2"><a href="id_05_adversarial_computational_control.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb113-3"><a href="id_05_adversarial_computational_control.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb113-4"><a href="id_05_adversarial_computational_control.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb113-5"><a href="id_05_adversarial_computational_control.html#cb113-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding_adversarial/&quot;</span>, prefix)</span>
<span id="cb113-6"><a href="id_05_adversarial_computational_control.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb113-7"><a href="id_05_adversarial_computational_control.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_mb_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb113-8"><a href="id_05_adversarial_computational_control.html#cb113-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb114"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb114-1"><a href="id_05_adversarial_computational_control.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb114-2"><a href="id_05_adversarial_computational_control.html#cb114-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-3"><a href="id_05_adversarial_computational_control.html#cb114-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-4"><a href="id_05_adversarial_computational_control.html#cb114-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-5"><a href="id_05_adversarial_computational_control.html#cb114-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-6"><a href="id_05_adversarial_computational_control.html#cb114-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-7"><a href="id_05_adversarial_computational_control.html#cb114-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb114-8"><a href="id_05_adversarial_computational_control.html#cb114-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb114-9"><a href="id_05_adversarial_computational_control.html#cb114-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb114-10"><a href="id_05_adversarial_computational_control.html#cb114-10" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb114-11"><a href="id_05_adversarial_computational_control.html#cb114-11" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding_adversarial/&quot;</span>, prefix)</span>
<span id="cb114-12"><a href="id_05_adversarial_computational_control.html#cb114-12" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb114-13"><a href="id_05_adversarial_computational_control.html#cb114-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb114-14"><a href="id_05_adversarial_computational_control.html#cb114-14" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb114-15"><a href="id_05_adversarial_computational_control.html#cb114-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb114-16"><a href="id_05_adversarial_computational_control.html#cb114-16" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb114-17"><a href="id_05_adversarial_computational_control.html#cb114-17" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb114-18"><a href="id_05_adversarial_computational_control.html#cb114-18" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb114-19"><a href="id_05_adversarial_computational_control.html#cb114-19" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb114-20"><a href="id_05_adversarial_computational_control.html#cb114-20" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb114-21"><a href="id_05_adversarial_computational_control.html#cb114-21" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb114-22"><a href="id_05_adversarial_computational_control.html#cb114-22" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb114-23"><a href="id_05_adversarial_computational_control.html#cb114-23" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb114-24"><a href="id_05_adversarial_computational_control.html#cb114-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb114-25"><a href="id_05_adversarial_computational_control.html#cb114-25" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb114-26"><a href="id_05_adversarial_computational_control.html#cb114-26" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb114-27"><a href="id_05_adversarial_computational_control.html#cb114-27" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb114-28"><a href="id_05_adversarial_computational_control.html#cb114-28" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb114-29"><a href="id_05_adversarial_computational_control.html#cb114-29" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb114-30"><a href="id_05_adversarial_computational_control.html#cb114-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb114-31"><a href="id_05_adversarial_computational_control.html#cb114-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb114-32"><a href="id_05_adversarial_computational_control.html#cb114-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb114-33"><a href="id_05_adversarial_computational_control.html#cb114-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb114-34"><a href="id_05_adversarial_computational_control.html#cb114-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb114-35"><a href="id_05_adversarial_computational_control.html#cb114-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb114-36"><a href="id_05_adversarial_computational_control.html#cb114-36" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb114-37"><a href="id_05_adversarial_computational_control.html#cb114-37" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb114-38"><a href="id_05_adversarial_computational_control.html#cb114-38" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb114-39"><a href="id_05_adversarial_computational_control.html#cb114-39" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb114-40"><a href="id_05_adversarial_computational_control.html#cb114-40" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb114-41"><a href="id_05_adversarial_computational_control.html#cb114-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb114-42"><a href="id_05_adversarial_computational_control.html#cb114-42" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb114-43"><a href="id_05_adversarial_computational_control.html#cb114-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb114-44"><a href="id_05_adversarial_computational_control.html#cb114-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-45"><a href="id_05_adversarial_computational_control.html#cb114-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb114-46"><a href="id_05_adversarial_computational_control.html#cb114-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb114-47"><a href="id_05_adversarial_computational_control.html#cb114-47" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb114-48"><a href="id_05_adversarial_computational_control.html#cb114-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb114-49"><a href="id_05_adversarial_computational_control.html#cb114-49" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb114-50"><a href="id_05_adversarial_computational_control.html#cb114-50" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb114-51"><a href="id_05_adversarial_computational_control.html#cb114-51" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb114-52"><a href="id_05_adversarial_computational_control.html#cb114-52" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb114-53"><a href="id_05_adversarial_computational_control.html#cb114-53" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb114-54"><a href="id_05_adversarial_computational_control.html#cb114-54" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb114-55"><a href="id_05_adversarial_computational_control.html#cb114-55" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb114-56"><a href="id_05_adversarial_computational_control.html#cb114-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb114-57"><a href="id_05_adversarial_computational_control.html#cb114-57" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb114-58"><a href="id_05_adversarial_computational_control.html#cb114-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb114-59"><a href="id_05_adversarial_computational_control.html#cb114-59" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb114-60"><a href="id_05_adversarial_computational_control.html#cb114-60" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb114-61"><a href="id_05_adversarial_computational_control.html#cb114-61" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb114-62"><a href="id_05_adversarial_computational_control.html#cb114-62" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb114-63"><a href="id_05_adversarial_computational_control.html#cb114-63" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb114-64"><a href="id_05_adversarial_computational_control.html#cb114-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb114-65"><a href="id_05_adversarial_computational_control.html#cb114-65" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb114-66"><a href="id_05_adversarial_computational_control.html#cb114-66" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb114-67"><a href="id_05_adversarial_computational_control.html#cb114-67" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb114-68"><a href="id_05_adversarial_computational_control.html#cb114-68" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb114-69"><a href="id_05_adversarial_computational_control.html#cb114-69" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb114-70"><a href="id_05_adversarial_computational_control.html#cb114-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb114-71"><a href="id_05_adversarial_computational_control.html#cb114-71" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb114-72"><a href="id_05_adversarial_computational_control.html#cb114-72" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb114-73"><a href="id_05_adversarial_computational_control.html#cb114-73" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb114-74"><a href="id_05_adversarial_computational_control.html#cb114-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-75"><a href="id_05_adversarial_computational_control.html#cb114-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb114-76"><a href="id_05_adversarial_computational_control.html#cb114-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb114-77"><a href="id_05_adversarial_computational_control.html#cb114-77" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb114-78"><a href="id_05_adversarial_computational_control.html#cb114-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb114-79"><a href="id_05_adversarial_computational_control.html#cb114-79" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb114-80"><a href="id_05_adversarial_computational_control.html#cb114-80" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb114-81"><a href="id_05_adversarial_computational_control.html#cb114-81" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb114-82"><a href="id_05_adversarial_computational_control.html#cb114-82" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb114-83"><a href="id_05_adversarial_computational_control.html#cb114-83" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb114-84"><a href="id_05_adversarial_computational_control.html#cb114-84" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb114-85"><a href="id_05_adversarial_computational_control.html#cb114-85" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb114-86"><a href="id_05_adversarial_computational_control.html#cb114-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb114-87"><a href="id_05_adversarial_computational_control.html#cb114-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb114-88"><a href="id_05_adversarial_computational_control.html#cb114-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb114-89"><a href="id_05_adversarial_computational_control.html#cb114-89" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb114-90"><a href="id_05_adversarial_computational_control.html#cb114-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb114-91"><a href="id_05_adversarial_computational_control.html#cb114-91" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb114-92"><a href="id_05_adversarial_computational_control.html#cb114-92" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb114-93"><a href="id_05_adversarial_computational_control.html#cb114-93" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb114-94"><a href="id_05_adversarial_computational_control.html#cb114-94" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb114-95"><a href="id_05_adversarial_computational_control.html#cb114-95" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb114-96"><a href="id_05_adversarial_computational_control.html#cb114-96" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb114-97"><a href="id_05_adversarial_computational_control.html#cb114-97" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb114-98"><a href="id_05_adversarial_computational_control.html#cb114-98" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb114-99"><a href="id_05_adversarial_computational_control.html#cb114-99" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb114-100"><a href="id_05_adversarial_computational_control.html#cb114-100" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb114-101"><a href="id_05_adversarial_computational_control.html#cb114-101" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb114-102"><a href="id_05_adversarial_computational_control.html#cb114-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb114-103"><a href="id_05_adversarial_computational_control.html#cb114-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb114-104"><a href="id_05_adversarial_computational_control.html#cb114-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb114-105"><a href="id_05_adversarial_computational_control.html#cb114-105" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb114-106"><a href="id_05_adversarial_computational_control.html#cb114-106" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb114-107"><a href="id_05_adversarial_computational_control.html#cb114-107" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb114-108"><a href="id_05_adversarial_computational_control.html#cb114-108" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb114-109"><a href="id_05_adversarial_computational_control.html#cb114-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb114-110"><a href="id_05_adversarial_computational_control.html#cb114-110" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb114-111"><a href="id_05_adversarial_computational_control.html#cb114-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-112"><a href="id_05_adversarial_computational_control.html#cb114-112" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb114-113"><a href="id_05_adversarial_computational_control.html#cb114-113" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb114-114"><a href="id_05_adversarial_computational_control.html#cb114-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-115"><a href="id_05_adversarial_computational_control.html#cb114-115" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb114-116"><a href="id_05_adversarial_computational_control.html#cb114-116" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb114-117"><a href="id_05_adversarial_computational_control.html#cb114-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-118"><a href="id_05_adversarial_computational_control.html#cb114-118" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb114-119"><a href="id_05_adversarial_computational_control.html#cb114-119" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb114-120"><a href="id_05_adversarial_computational_control.html#cb114-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-121"><a href="id_05_adversarial_computational_control.html#cb114-121" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/melanin_binding_adversarial/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb114-122"><a href="id_05_adversarial_computational_control.html#cb114-122" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/melanin_binding_adversarial/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb114-123"><a href="id_05_adversarial_computational_control.html#cb114-123" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/melanin_binding_adversarial/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb114-124"><a href="id_05_adversarial_computational_control.html#cb114-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-125"><a href="id_05_adversarial_computational_control.html#cb114-125" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb_ad.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation-3" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Model evaluation<a href="id_05_adversarial_computational_control.html#model-evaluation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb115-1"><a href="id_05_adversarial_computational_control.html#cb115-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb115-2"><a href="id_05_adversarial_computational_control.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb115-3"><a href="id_05_adversarial_computational_control.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb115-4"><a href="id_05_adversarial_computational_control.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-5"><a href="id_05_adversarial_computational_control.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb115-6"><a href="id_05_adversarial_computational_control.html#cb115-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb115-7"><a href="id_05_adversarial_computational_control.html#cb115-7" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb115-8"><a href="id_05_adversarial_computational_control.html#cb115-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb115-9"><a href="id_05_adversarial_computational_control.html#cb115-9" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb115-10"><a href="id_05_adversarial_computational_control.html#cb115-10" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb115-11"><a href="id_05_adversarial_computational_control.html#cb115-11" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb115-12"><a href="id_05_adversarial_computational_control.html#cb115-12" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb115-13"><a href="id_05_adversarial_computational_control.html#cb115-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb115-14"><a href="id_05_adversarial_computational_control.html#cb115-14" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb115-15"><a href="id_05_adversarial_computational_control.html#cb115-15" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb115-16"><a href="id_05_adversarial_computational_control.html#cb115-16" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb115-17"><a href="id_05_adversarial_computational_control.html#cb115-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb115-18"><a href="id_05_adversarial_computational_control.html#cb115-18" aria-hidden="true" tabindex="-1"></a>    mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-19"><a href="id_05_adversarial_computational_control.html#cb115-19" aria-hidden="true" tabindex="-1"></a>    rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-20"><a href="id_05_adversarial_computational_control.html#cb115-20" aria-hidden="true" tabindex="-1"></a>    R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-21"><a href="id_05_adversarial_computational_control.html#cb115-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb115-22"><a href="id_05_adversarial_computational_control.html#cb115-22" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;log_intensity&quot;</span>]</span>
<span id="cb115-23"><a href="id_05_adversarial_computational_control.html#cb115-23" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb115-24"><a href="id_05_adversarial_computational_control.html#cb115-24" aria-hidden="true" tabindex="-1"></a>      mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-25"><a href="id_05_adversarial_computational_control.html#cb115-25" aria-hidden="true" tabindex="-1"></a>      rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-26"><a href="id_05_adversarial_computational_control.html#cb115-26" aria-hidden="true" tabindex="-1"></a>      R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-27"><a href="id_05_adversarial_computational_control.html#cb115-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb115-28"><a href="id_05_adversarial_computational_control.html#cb115-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Re-scale to 0-100</span></span>
<span id="cb115-29"><a href="id_05_adversarial_computational_control.html#cb115-29" aria-hidden="true" tabindex="-1"></a>    mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb115-30"><a href="id_05_adversarial_computational_control.html#cb115-30" aria-hidden="true" tabindex="-1"></a>    rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb115-31"><a href="id_05_adversarial_computational_control.html#cb115-31" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb115-32"><a href="id_05_adversarial_computational_control.html#cb115-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(mae, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(mae),</span>
<span id="cb115-33"><a href="id_05_adversarial_computational_control.html#cb115-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(rmse, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(rmse),</span>
<span id="cb115-34"><a href="id_05_adversarial_computational_control.html#cb115-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(R2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(R2),</span>
<span id="cb115-35"><a href="id_05_adversarial_computational_control.html#cb115-35" aria-hidden="true" tabindex="-1"></a>      mae, rmse, R2</span>
<span id="cb115-36"><a href="id_05_adversarial_computational_control.html#cb115-36" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb115-37"><a href="id_05_adversarial_computational_control.html#cb115-37" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb115-38"><a href="id_05_adversarial_computational_control.html#cb115-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb115-39"><a href="id_05_adversarial_computational_control.html#cb115-39" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb115-40"><a href="id_05_adversarial_computational_control.html#cb115-40" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb115-41"><a href="id_05_adversarial_computational_control.html#cb115-41" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb115-42"><a href="id_05_adversarial_computational_control.html#cb115-42" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb115-43"><a href="id_05_adversarial_computational_control.html#cb115-43" aria-hidden="true" tabindex="-1"></a>        mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-44"><a href="id_05_adversarial_computational_control.html#cb115-44" aria-hidden="true" tabindex="-1"></a>        rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-45"><a href="id_05_adversarial_computational_control.html#cb115-45" aria-hidden="true" tabindex="-1"></a>        R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb115-46"><a href="id_05_adversarial_computational_control.html#cb115-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb115-47"><a href="id_05_adversarial_computational_control.html#cb115-47" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;log_intensity&quot;</span>]</span>
<span id="cb115-48"><a href="id_05_adversarial_computational_control.html#cb115-48" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb115-49"><a href="id_05_adversarial_computational_control.html#cb115-49" aria-hidden="true" tabindex="-1"></a>          mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-50"><a href="id_05_adversarial_computational_control.html#cb115-50" aria-hidden="true" tabindex="-1"></a>          rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-51"><a href="id_05_adversarial_computational_control.html#cb115-51" aria-hidden="true" tabindex="-1"></a>          R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb115-52"><a href="id_05_adversarial_computational_control.html#cb115-52" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb115-53"><a href="id_05_adversarial_computational_control.html#cb115-53" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Re-scale to 0-100</span></span>
<span id="cb115-54"><a href="id_05_adversarial_computational_control.html#cb115-54" aria-hidden="true" tabindex="-1"></a>        mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb115-55"><a href="id_05_adversarial_computational_control.html#cb115-55" aria-hidden="true" tabindex="-1"></a>        rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb115-56"><a href="id_05_adversarial_computational_control.html#cb115-56" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb115-57"><a href="id_05_adversarial_computational_control.html#cb115-57" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(mae, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(mae),</span>
<span id="cb115-58"><a href="id_05_adversarial_computational_control.html#cb115-58" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(rmse, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(rmse),</span>
<span id="cb115-59"><a href="id_05_adversarial_computational_control.html#cb115-59" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(R2, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(R2),</span>
<span id="cb115-60"><a href="id_05_adversarial_computational_control.html#cb115-60" aria-hidden="true" tabindex="-1"></a>          mae, rmse, R2</span>
<span id="cb115-61"><a href="id_05_adversarial_computational_control.html#cb115-61" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb115-62"><a href="id_05_adversarial_computational_control.html#cb115-62" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb115-63"><a href="id_05_adversarial_computational_control.html#cb115-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb115-64"><a href="id_05_adversarial_computational_control.html#cb115-64" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb115-65"><a href="id_05_adversarial_computational_control.html#cb115-65" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb115-66"><a href="id_05_adversarial_computational_control.html#cb115-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb115-67"><a href="id_05_adversarial_computational_control.html#cb115-67" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Norm. MAE mean&quot;</span>, <span class="st">&quot;Norm. MAE s.e.m.&quot;</span>, <span class="st">&quot;Norm. RMSE mean&quot;</span>, <span class="st">&quot;Norm. RMSE s.e.m.&quot;</span>,</span>
<span id="cb115-68"><a href="id_05_adversarial_computational_control.html#cb115-68" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;R^2 mean&quot;</span>, <span class="st">&quot;R^2 s.e.m.&quot;</span>,</span>
<span id="cb115-69"><a href="id_05_adversarial_computational_control.html#cb115-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Norm. MAE CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;Norm. RMSE CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;R^2 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb115-70"><a href="id_05_adversarial_computational_control.html#cb115-70" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb115-71"><a href="id_05_adversarial_computational_control.html#cb115-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb115-72"><a href="id_05_adversarial_computational_control.html#cb115-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb115-73"><a href="id_05_adversarial_computational_control.html#cb115-73" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb115-74"><a href="id_05_adversarial_computational_control.html#cb115-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb115-75"><a href="id_05_adversarial_computational_control.html#cb115-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb115-76"><a href="id_05_adversarial_computational_control.html#cb115-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb115-77"><a href="id_05_adversarial_computational_control.html#cb115-77" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection-3" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Inner loop model selection<a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb116"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb116-1"><a href="id_05_adversarial_computational_control.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb_ad.RData&quot;</span>)</span>
<span id="cb116-2"><a href="id_05_adversarial_computational_control.html#cb116-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-3"><a href="id_05_adversarial_computational_control.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb116-4"><a href="id_05_adversarial_computational_control.html#cb116-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb116-5"><a href="id_05_adversarial_computational_control.html#cb116-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb116-6"><a href="id_05_adversarial_computational_control.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb116-7"><a href="id_05_adversarial_computational_control.html#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb116-8"><a href="id_05_adversarial_computational_control.html#cb116-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb116-9"><a href="id_05_adversarial_computational_control.html#cb116-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb116-10"><a href="id_05_adversarial_computational_control.html#cb116-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb116-11"><a href="id_05_adversarial_computational_control.html#cb116-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb116-12"><a href="id_05_adversarial_computational_control.html#cb116-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb116-13"><a href="id_05_adversarial_computational_control.html#cb116-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb116-14"><a href="id_05_adversarial_computational_control.html#cb116-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb116-15"><a href="id_05_adversarial_computational_control.html#cb116-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb116-16"><a href="id_05_adversarial_computational_control.html#cb116-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb116-17"><a href="id_05_adversarial_computational_control.html#cb116-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb116-18"><a href="id_05_adversarial_computational_control.html#cb116-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb116-19"><a href="id_05_adversarial_computational_control.html#cb116-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb116-20"><a href="id_05_adversarial_computational_control.html#cb116-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb116-21"><a href="id_05_adversarial_computational_control.html#cb116-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb116-22"><a href="id_05_adversarial_computational_control.html#cb116-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb116-23"><a href="id_05_adversarial_computational_control.html#cb116-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb116-24"><a href="id_05_adversarial_computational_control.html#cb116-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb116-25"><a href="id_05_adversarial_computational_control.html#cb116-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb116-26"><a href="id_05_adversarial_computational_control.html#cb116-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb116-27"><a href="id_05_adversarial_computational_control.html#cb116-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb116-28"><a href="id_05_adversarial_computational_control.html#cb116-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb116-29"><a href="id_05_adversarial_computational_control.html#cb116-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb116-30"><a href="id_05_adversarial_computational_control.html#cb116-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb116-31"><a href="id_05_adversarial_computational_control.html#cb116-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb116-32"><a href="id_05_adversarial_computational_control.html#cb116-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GLM</span></span>
<span id="cb116-33"><a href="id_05_adversarial_computational_control.html#cb116-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb116-34"><a href="id_05_adversarial_computational_control.html#cb116-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb116-35"><a href="id_05_adversarial_computational_control.html#cb116-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb116-36"><a href="id_05_adversarial_computational_control.html#cb116-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb116-37"><a href="id_05_adversarial_computational_control.html#cb116-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb116-38"><a href="id_05_adversarial_computational_control.html#cb116-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb116-39"><a href="id_05_adversarial_computational_control.html#cb116-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb116-40"><a href="id_05_adversarial_computational_control.html#cb116-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb116-41"><a href="id_05_adversarial_computational_control.html#cb116-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb116-42"><a href="id_05_adversarial_computational_control.html#cb116-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb116-43"><a href="id_05_adversarial_computational_control.html#cb116-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb116-44"><a href="id_05_adversarial_computational_control.html#cb116-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb116-45"><a href="id_05_adversarial_computational_control.html#cb116-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb116-46"><a href="id_05_adversarial_computational_control.html#cb116-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb116-47"><a href="id_05_adversarial_computational_control.html#cb116-47" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb116-48"><a href="id_05_adversarial_computational_control.html#cb116-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-49"><a href="id_05_adversarial_computational_control.html#cb116-49" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb116-50"><a href="id_05_adversarial_computational_control.html#cb116-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb116-51"><a href="id_05_adversarial_computational_control.html#cb116-51" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1-3" class="section level4 hasAnchor" number="5.2.4.1">
<h4><span class="header-section-number">5.2.4.1</span> CV 1<a href="id_05_adversarial_computational_control.html#cv-1-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-6ef413308e76e34086d8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6ef413308e76e34086d8">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 113","Neural network grid model 212","Neural network grid model 155","GBM grid model 188","Neural network grid model 188","Neural network grid model 191","Neural network grid model 149","Neural network grid model 112","Neural network grid model 193","Neural network grid model 139","Neural network grid model 171","Neural network grid model 178","Neural network grid model 174","Neural network grid model 213","GBM grid model 112","Neural network grid model 215","Neural network grid model 180","GBM grid model 190","GBM grid model 281","Neural network grid model 154","Neural network grid model 145","GBM grid model 181","GBM grid model 96","Neural network grid model 172","GBM grid model 58","GBM grid model 149","GBM grid model 12","Neural network grid model 99","GBM grid model 244","GBM grid model 147","Neural network grid model 199","Neural network grid model 210","Neural network grid model 117","Neural network grid model 168","Neural network grid model 187","GBM grid model 167","Neural network grid model 144","GBM grid model 231","GBM grid model 90","Neural network grid model 198","Neural network grid model 189","Neural network grid model 182","Neural network grid model 201","GBM grid model 57","Neural network grid model 158","GBM grid model 28","Neural network grid model 165","GBM grid model 123","GBM grid model 43","Neural network grid model 192","Neural network grid model 169","GBM grid model 68","Neural network grid model 115","GBM grid model 192","GBM grid model 199","GBM grid model 51","Neural network grid model 159","GBM grid model 198","Neural network grid model 62","Neural network grid model 48","Neural network grid model 202","GBM grid model 201","GBM grid model 120","GBM grid model 247","GBM grid model 211","Neural network grid model 194","GBM grid model 233","GBM grid model 200","GBM grid model 240","GBM grid model 136","GBM grid model 205","GBM grid model 110","Neural network grid model 161","Neural network grid model 129","Neural network grid model 89","GBM grid model 220","GBM grid model 195","Neural network grid model 148","GBM grid model 131","GBM grid model 296","GBM grid model 219","GBM grid model 230","GBM grid model 46","Neural network grid model 163","GBM grid model 66","GBM grid model 75","Neural network grid model 173","Neural network grid model 96","GBM grid model 138","GBM grid model 193","GBM grid model 217","Neural network grid model 176","GBM grid model 6","GBM grid model 94","GBM grid model 256","GBM grid model 27","GBM grid model 287","GBM grid model 65","GBM grid model 197","GBM grid model 93","GBM grid model 179","Neural network grid model 2","Neural network grid model 122","GBM grid model 235","GBM grid model 78","GBM grid model 7","GBM grid model 81","GBM grid model 5","Neural network grid model 79","GBM grid model 236","GBM grid model 241","Neural network grid model 204","Neural network grid model 140","GBM grid model 74","Neural network grid model 206","Neural network grid model 220","GBM grid model 76","GBM grid model 191","GBM grid model 298","GBM grid model 69","GBM grid model 186","GBM grid model 26","GBM grid model 37","GBM grid model 214","GBM grid model 157","GBM grid model 209","Neural network grid model 147","GBM grid model 243","Neural network grid model 183","GBM grid model 180","GBM grid model 178","GBM grid model 71","Super learner final","GBM grid model 250","GBM grid model 95","GBM grid model 173","GBM grid model 103","GBM grid model 277","GBM grid model 85","GBM grid model 174","GBM grid model 101","GBM grid model 156","GBM grid model 115","GBM grid model 282","GBM grid model 263","GBM grid model 162","GBM grid model 143","GBM grid model 80","Neural network grid model 138","Neural network grid model 185","XGBoost grid model 159","GBM grid model 245","XGBoost grid model 56","GBM grid model 253","GBM grid model 222","GBM grid model 29","GBM grid model 254","GBM grid model 221","GBM grid model 228","GBM grid model 3","GBM grid model 294","GBM grid model 127","GBM grid model 299","GBM grid model 35","GBM grid model 126","GBM grid model 289","GBM grid model 166","Neural network grid model 151","GBM grid model 292","GBM grid model 1","GBM grid model 125","GBM grid model 18","GBM grid model 284","GBM grid model 118","GBM grid model 206","GBM grid model 275","GBM grid model 128","XGBoost grid model 65","GBM grid model 158","XGBoost grid model 277","GBM grid model 185","GBM grid model 32","GBM grid model 49","GBM grid model 83","GBM grid model 229","Neural network grid model 160","GBM grid model 55","GBM grid model 54","GBM grid model 285","GBM grid model 297","GBM grid model 260","GBM grid model 218","GBM grid model 216","GBM grid model 106","GBM grid model 117","GBM grid model 264","Neural network grid model 190","GBM grid model 278","GBM grid model 64","XGBoost grid model 188","GBM grid model 13","GBM grid model 194","GBM grid model 238","GBM grid model 257","GBM grid model 210","GBM grid model 182","GBM grid model 62","GBM grid model 267","Neural network grid model 156","GBM grid model 146","GBM grid model 274","GBM grid model 133","GBM grid model 280","XGBoost grid model 252","GBM grid model 20","GBM grid model 61","GBM grid model 139","GBM grid model 251","GBM grid model 189","GBM grid model 227","GBM grid model 246","GBM grid model 100","GBM grid model 151","GBM grid model 165","GBM grid model 17","GBM grid model 271","GBM grid model 11","GBM grid model 53","GBM grid model 92","GBM grid model 41","GBM grid model 183","GBM grid model 121","XGBoost grid model 142","GBM grid model 242","GBM grid model 9","GBM grid model 129","GBM grid model 56","GBM grid model 97","GBM grid model 248","GBM grid model 160","GBM grid model 159","GBM grid model 19","GBM grid model 111","Neural network grid model 125","GBM grid model 119","GBM grid model 168","GBM grid model 21","GBM grid model 42","GBM grid model 47","GBM grid model 23","Neural network grid model 114","GBM grid model 172","GBM grid model 39","GBM grid model 184","GBM grid model 213","GBM grid model 77","GBM grid model 262","GBM grid model 272","GBM grid model 15","GBM grid model 225","GBM grid model 207","XGBoost grid model 72","GBM grid model 252","GBM grid model 130","GBM grid model 226","GBM grid model 30","XGBoost grid model 152","XGBoost grid model 198","Neural network grid model 196","GBM grid model 16","GBM grid model 50","GBM grid model 33","GBM grid model 171","GBM grid model 268","GBM grid model 212","GBM grid model 135","GBM grid model 265","GBM grid model 14","GBM grid model 276","XGBoost grid model 43","GBM grid model 234","GBM grid model 63","GBM grid model 116","GBM grid model 113","XGBoost grid model 266","XGBoost grid model 26","GBM grid model 89","Neural network grid model 7","Neural network grid model 127","GBM grid model 124","GBM grid model 161","GBM grid model 258","GBM grid model 203","GBM grid model 279","GBM grid model 293","XGBoost grid model 118"],[0.1888,0.2314,0.1888,0.1452,0.1888,0.1888,0.259,0.1483,0.1595,0.1595,0.1595,0.1452,0.1483,0.1483,0.1452,0.1595,0.1483,0.1595,0.1483,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1483,0.1721,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1595,0.1452,0.2089,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.2089,0.1595,0.1452,0.1452,0.1452,0.1721,0.1452,0.1721,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1721,0.1483,0.1452,0.1452,0.1595,0.1595,0.1452,0.1888,0.1888,0.1452,0.1452,0.1888,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1721,0.1452,0.1452,0.2089,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1721,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.1452,0.1721,0.1452,0.1452,0.1483,0.2314,0.1721,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1888,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1595,0.1452,0.1452,0.1483,0.1452,0.1595,0.1452,0.1452,0.1452,0.1452,0.1452,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1595,0.1452,0.1452,0.1452,0.1452,0.1595,0.1452,0.1452,0.1452,0.1483,0.1452,0.1483,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1721,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,0.1452,null],[null,0.9582,0.9412,1,0.8857,0.9582,0.9839,0.9839,0.9582,0.9412,0.9839,1,0.9582,0.9412,0.9839,1,0.9582,1,0.9582,0.9582,0.9839,0.9839,0.9128,0.9839,0.9839,0.9582,0.9412,0.9128,1,0.9128,0.9839,0.9582,0.9412,0.9839,0.7444,0.9582,0.6032,0.9582,0.9839,0.9412,1,0.9582,0.9839,0.9412,1,0.9582,1,0.9582,0.9582,0.9582,0.9582,0.6032,0.9128,0.9839,0.9412,1,0.8857,0.9839,0.6897,0.8449,0.9582,0.9839,0.8857,1,0.8857,0.6897,0.8449,0.9128,0.8857,0.9412,0.9412,0.9582,0.5568,0.7967,0.8449,0.9128,0.6897,0.9582,0.9412,0.9128,0.9839,0.9582,0.9839,1,0.9412,0.7444,0.9839,0.6897,0.9839,0.9412,0.9582,1,0.7444,0.9839,0.9582,0.9128,0.9582,0.9128,0.9412,0.9839,0.7967,0.9128,0.8857,0.8449,0.9128,0.9412,0.9839,0.9839,0.6897,0.9412,0.9839,0.4214,0.7967,0.9412,0.9582,0.6897,0.9582,0.9582,0.9412,0.6897,0.7444,0.9839,0.9839,0.9839,0.9839,1,0.9128,0.9839,0.4214,0.8857,0.9839,0.6897,0.6471,0.6471,0.8857,0.9582,0.9128,0.9582,0.8449,0.8857,0.9128,0.9128,0.9582,0.9839,0.9412,0.8857,0.6471,0.8449,0.9128,0.6032,0.6471,0.9582,0.5568,0.8857,0.7444,0.9582,0.9582,0.6897,0.9582,0.7444,0.9412,0.6471,0.6897,0.9412,0.3808,0.6471,0.9128,0.7444,0.9412,0.9128,0.9582,0.9839,0.9412,0.8857,0.9582,0.9412,0.8857,0.6032,0.9128,0.6032,0.9128,0.9839,0.9412,0.8449,0.8857,0.7967,0.9128,0.6471,0.9128,0.9128,0.6471,0.9128,0.9582,0.6897,0.6032,0.6897,0.6471,0.9582,0.9582,0.6897,0.9582,0.9128,0.6032,0.8857,0.9582,0.9412,0.9412,0.9128,0.5568,0.8449,0.8449,0.9412,0.9582,0.5568,0.9412,0.9128,0.8449,0.8449,0.507,0.6032,0.8449,0.9128,0.8857,0.8857,0.6471,0.7444,0.8857,0.7967,0.6032,0.8449,0.6897,0.9128,0.6032,0.8449,0.9412,0.3808,0.6032,0.7967,0.9128,0.9412,0.6032,0.6897,0.9128,0.4628,0.9412,0.9412,0.9128,0.507,0.8857,0.6897,0.7967,0.8857,0.6471,0.6897,0.6032,0.4628,0.9128,0.8857,0.8857,0.7967,0.7967,0.507,0.8449,0.9128,0.6897,0.7967,0.4628,0.3066,0.8857,0.8449,0.8449,0.7967,0.6471,0.7967,0.6471,0.8857,0.6471,0.9128,0.7967,0.4214,0.8449,0.7444,0.4628,0.4214,0.3808,0.3808,0.5568,0.6471,0.507,0.2732,0.7444,0.4628,0.3066,0.5568,0.507,0.0006],[null,1,0.7702,0.5721,0.5721,0.4376,0.7702,0.9785,0.8732,0.7187,1,1,0.9281,0.9281,0.9281,0.9785,0.7702,0.4376,1,0.8732,0.9785,0.8732,0.5253,0.8193,0.8732,0.8193,0.2917,0.3976,0.6712,1,1,0.7702,0.7187,0.8193,0.2048,0.9785,0.2622,0.8732,0.6712,0.7187,0.8193,0.324,0.8732,0.4376,0.9785,0.8193,0.8193,0.9785,0.9785,0.7702,0.4376,0.1033,0.4376,0.9281,0.4802,0.5253,0.1033,0.4802,0.064,0.2622,0.8732,0.5721,0.4802,0.9785,0.7187,0.2048,0.2048,0.2327,0.4802,0.3597,0.3597,0.9785,0.1809,0.4376,0.1809,0.4802,0.064,0.6712,0.6712,0.9785,0.6712,0.7702,0.6712,0.4802,0.324,0.2048,0.3597,0.1033,1,0.7187,0.9281,0.7187,0.1809,0.8193,1,0.7187,0.6206,0.1579,0.4802,0.4376,0.2048,0.3976,0.1809,0.4802,0.6206,0.5721,0.7187,0.6206,0.1382,0.324,0.7187,0.2327,0.2917,0.7187,0.5253,0.2917,0.6206,0.9281,0.324,0.2048,0.1579,0.2917,0.2917,0.8193,0.3976,0.8193,0.6206,0.7702,0.0543,0.2917,0.7187,0.0543,0.0887,0.1193,0.0543,0.6206,0.324,0.5721,0.2048,0.5253,0.3976,0.4376,0.7702,0.5721,0.7187,0.5721,0.1033,0.1193,0.324,0.1579,0.1033,0.8193,0.1193,0.324,0.2622,0.6712,0.324,0.2917,0.4376,0.2327,0.1382,0.1809,0.1193,0.5253,0.0543,0.064,0.1382,0.1193,0.8193,0.2917,0.7187,0.4376,0.5253,0.3597,0.2917,0.3597,0.3976,0.2048,0.1579,0.2622,0.4802,0.3976,0.2622,0.2917,0.1193,0.5721,0.5253,0.2327,0.5253,0.5253,0.1579,0.6206,0.324,0.1033,0.2048,0.1382,0.3976,0.3597,0.3597,0.3597,0.6206,0.7702,0.0543,0.3597,0.3597,0.3597,0.2622,0.4376,0.1579,0.1033,0.0887,0.2917,0.8193,0.1193,0.6206,0.2622,0.3976,0.3976,0.0887,0.1579,0.5721,0.1809,0.1809,0.1809,0.2917,0.1193,0.1033,0.2917,0.1382,0.0758,0.1382,0.1579,0.2048,0.3976,0.2917,0.1033,0.0887,0.3976,0.1579,0.2622,0.0543,0.064,0.6712,0.1193,0.324,0.324,0.2048,0.0887,0.324,0.064,0.324,0.2622,0.0543,0.2917,0.1579,0.064,0.2048,0.0543,0.2327,0.4802,0.1579,0.0543,0.2327,0.2917,0.1193,0.1193,0.0543,0.0543,0.1579,0.324,0.0543,0.0758,0.0887,0.1382,0.064,0.2622,0.1193,0.2048,0.0543,0.064,0.0887,0.0887,0.1033,0.0758,0.0758,0.0758,0.064,0.1579,0.2327,0.0887,0.064,0.0887,0.0543,0.0543,0.064,0.0004],[108,50,185,129,168,99,210,265,252,278,266,303,333,321,312,300,355,287,313,361,345,358,199,392,296,297,243,149,350,377,423,442,411,445,147,362,97,430,448,428,476,406,467,341,487,471,472,481,462,383,433,85,167,499,273,454,244,405,88,231,504,455,369,522,367,208,202,332,259,437.5,437.5,515,165,245,308,482,79,483,523,381,558,545,531,555,441,401,530,328,573,525,563,584,238,567,571,268,460,279,440,536,370,311,474,335,469,447,553,587,206,485,619,127,412,408,593,153,516,602,506,190,363,543.5,543.5,605,581,620,489,613,121,285,625,291,135,237,354,588,541,644,426,552,528,517,643,594,507,591,304,546,617,143,200,647,205,575,439,663,564,518,616,255,514,372,446,673,272,359,393,241,659,538,672,656,687,554,665,655,570,267,479,240,583,689,556,624,444,463,540,453,608.5,608.5,368,632,614,404,429,364,342,550.5,550.5,264,674,699,336,623,622,670,611,702,410,569,486,671,631,309,686,700,508.5,508.5,379,596,661,598,577.5,577.5,459,535,629,601,414,435,484,610,330,649,666,290,357,562,547,696,457,491,691,396,650.5,650.5,639,468,727,565,641,677,513,524,497,389,690,636,718,652,658,424,640,719,683,695,413,334,496,703,664,667,626,648,669,604,646,725,704,465,729,740,542,537,493,494,637,694,615,510,720,747,582,660,706,1],[1,37,4,34,47,86,31,9,19,6,25,14,2,8,20,27,3,39,29,5,15,18,101,12,62,63,95,145,44,38,16,7,26,13,168,59,194,30,24,35,11,46,17,82,10,22,23,21,32,77,53,234,193,28,143,54,161,80,239,171,36,65,108,33,112,196,202,139,176,87.5,87.5,52,228,189,158,72,274,76,56,129,41,48,55,45,103,123,60,162,43,69,51,40,214,50,49,198,104,197,118,74,157,190,110,180,113,125,73,57,248,109,42,290,148,149,58,278,102,61,111,268,186,97.5,97.5,68,83,64,134,70,317,237,67,235,314,264,205,90,114,66,175,115,128,133,71,96,140,100,244,124,92,328,301,81,302,119,187,75,127,150,105,283,156,227,191,78,280,238,221,298,89,152,84,93,79,147,91,99,142,292,188,307,137,85,153,122,212,204,164,209,130.5,130.5,253,121,132,236,226,258,270,165.5,165.5,311,107,94,277,135,138,117,151,106,252,173,215,126,146,308,120,116,210.5,210.5,276,170,136,172,182.5,182.5,242,206,159,174,269,263,240,179,319,160,154,342,310,207,216,144,267,254,155,305,177.5,177.5,184,271,141,222,185,167,251,247,261,316,169,200,163,201,199,323,218,181,203,195,336,376,295,192,213,219,241,231,225,260,246,208,223,344,220,217,320,325,350,351,281,255,299,359,257,272,364,338,331,702],[1,37,4,36,45,86,31,9,18,6,25,14,2,8,20,27,3,39,29,5,15,19,101,12,62,63,96,143,44,38,16,7,26,13,164,59,192,30,24,33,11,47,17,82,10,22,23,21,32,77,52,235,194,28,145,54,158,80,239,171,35,65,110,34,114,196,204,139,176,87.5,87.5,53,227,189,159,72,275,75,56,130,42,48,55,46,104,125,60,162,43,68,50,40,215,51,49,203,107,197,119,73,157,191,109,180,113,127,74,57,247,108,41,290,148,152,58,278,102,61,111,270,186,98.5,98.5,69,83,64,129,70,317,236,67,233,313,263,205,90,116,66,175,115,128,134,71,95,142,100,244,123,89,328,301,81,302,118,187,76,126,150,103,286,155,228,190,79,280,237,221,298,92,151,85,93,78,146,91,97,141,294,188,308,138,84,154,121,212,201,165,209,132.5,132.5,253,122,131,238,226,259,273,169.5,169.5,311,106,94,277,135,136,117,149,105,252,173,214,124,147,307,120,112,210.5,210.5,276,167,137,172,182.5,182.5,242,206,160,174,268,264,240,179,319,161,153,343,310,208,216,144,266,255,156,304,177.5,177.5,185,269,140,222,184,168,251,249,262,316,166,198,163,202,200,323,218,181,199,195,337,376,296,193,213,219,241,232,225,260,246,207,223,344,220,217,321,325,351,352,282,254,299,359,256,272,364,339,332,702],[110,124,193,199,260,271,272,283,289,290,316,331,337,337,352,354,361,365,371,371,375,395,401,416,420,423,434,437,438,453,455,456,463,471,479,480,483,490,496,496,498,499,501,505,507,515,518,523,526,537,538,554,554,555,561,562,563,565,566,573,575,585,587,589,593,600,608,610,611,612.5,612.5,620,620,623,625,626,628,634,635,640,641,641,641,646,648,649,650,652,659,662,664,664,667,668,669,669,671,673,677,683,684,692,693,695,695,699,700,701,701,702,702,707,708,709,709,709,720,724,728,728,735,739.5,739.5,742,747,748,752,753,755,758,759,759,762,764,764,768,771,776,776,782,784,784,785,785,789,791,792,793,798,799,802,809,809,812,813,814,817,818,824,824,825,827,827,830,832,834,835,837,840,841,841,842,844,847,847,851,853,853,855,855,858,858,863,867,868,868,869,871,871.5,871.5,874,875,877,878,881,881,885,885.5,885.5,886,887,887,890,893,896,904,911,913,914,915,915,921,924,924,926,928,929.5,929.5,931,933,934,942,942.5,942.5,943,947,948,949,951,962,964,968,968,970,973,975,977,977,979,984,990,1000,1002,1005,1005.5,1005.5,1008,1008,1008,1009,1010,1012,1015,1020,1020,1021,1025,1034,1044,1055,1057,1070,1076,1081,1085,1085,1086,1086,1087,1088,1090,1105,1108,1111,1119,1124,1138,1140,1150,1153,1169,1174,1183,1187,1194,1197,1200,1203,1213,1228,1233,1291,1310,1337,1369,1405]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2-3" class="section level4 hasAnchor" number="5.2.4.2">
<h4><span class="header-section-number">5.2.4.2</span> CV 2<a href="id_05_adversarial_computational_control.html#cv-2-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-d2bae3414785b0778697" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d2bae3414785b0778697">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 187","Neural network grid model 51","GBM grid model 271","Neural network grid model 96","GBM grid model 229","Neural network grid model 199","Neural network grid model 159","Neural network grid model 154","GBM grid model 78","Neural network grid model 145","Neural network grid model 168","Neural network grid model 92","Neural network grid model 215","GBM grid model 151","Neural network grid model 213","GBM grid model 165","Neural network grid model 152","Neural network grid model 138","Neural network grid model 169","GBM grid model 152","Neural network grid model 173","Neural network grid model 139","Neural network grid model 174","GBM grid model 41","Neural network grid model 171","Neural network grid model 165","Neural network grid model 115","GBM grid model 110","Super learner final","Neural network grid model 122","Neural network grid model 202","GBM grid model 85","GBM grid model 12","Neural network grid model 176","GBM grid model 262","GBM grid model 172","Neural network grid model 70","GBM grid model 28","GBM grid model 189","GBM grid model 244","GBM grid model 263","GBM grid model 197","Neural network grid model 210","Neural network grid model 75","Neural network grid model 180","GBM grid model 11","GBM grid model 294","GBM grid model 226","GBM grid model 256","GBM grid model 156","Neural network grid model 163","GBM grid model 124","GBM grid model 212","Neural network grid model 201","Neural network grid model 79","GBM grid model 248","Neural network grid model 158","GBM grid model 201","GBM grid model 88","GBM grid model 193","GBM grid model 287","GBM grid model 162","Neural network grid model 160","Neural network grid model 182","GBM grid model 50","Neural network grid model 198","GBM grid model 240","GBM grid model 27","Neural network grid model 140","GBM grid model 241","Neural network grid model 99","Neural network grid model 193","Neural network grid model 155","GBM grid model 215","GBM grid model 233","GBM grid model 75","Neural network grid model 156","GBM grid model 283","GBM grid model 9","GBM grid model 236","GBM grid model 298","GBM grid model 51","GBM grid model 183","GBM grid model 254","GBM grid model 118","GBM grid model 120","GBM grid model 102","GBM grid model 272","GBM grid model 182","GBM grid model 290","GBM grid model 280","GBM grid model 277","GBM grid model 58","GBM grid model 20","GBM grid model 53","GBM grid model 219","Neural network grid model 89","GBM grid model 18","Neural network grid model 194","GBM grid model 146","GBM grid model 26","GBM grid model 37","GBM grid model 150","GBM grid model 136","GBM grid model 205","GBM grid model 121","GBM grid model 43","Neural network grid model 144","GBM grid model 1","GBM grid model 148","GBM grid model 147","GBM grid model 133","GBM grid model 157","GBM grid model 266","Neural network grid model 129","GBM grid model 30","GBM grid model 245","GBM grid model 3","GBM grid model 221","GBM grid model 101","Neural network grid model 172","GBM grid model 187","GBM grid model 257","GBM grid model 138","GBM grid model 225","GBM grid model 87","Neural network grid model 112","GBM grid model 94","Neural network grid model 123","GBM grid model 119","GBM grid model 168","GBM grid model 93","GBM grid model 145","GBM grid model 108","GBM grid model 125","GBM grid model 232","GBM grid model 281","GBM grid model 289","GBM grid model 32","GBM grid model 6","GBM grid model 56","GBM grid model 143","GBM grid model 100","GBM grid model 171","GBM grid model 284","GBM grid model 131","GBM grid model 202","GBM grid model 188","GBM grid model 46","GBM grid model 95","GBM grid model 107","GBM grid model 252","GBM grid model 81","GBM grid model 265","GBM grid model 228","GBM grid model 173","Neural network grid model 94","GBM grid model 16","GBM grid model 275","GBM grid model 253","GBM grid model 5","GBM grid model 149","GBM grid model 198","GBM grid model 7","GBM grid model 174","GBM grid model 158","GBM grid model 89","GBM grid model 111","GBM grid model 17","GBM grid model 113","GBM grid model 243","Neural network grid model 161","GBM grid model 299","GBM grid model 218","GBM grid model 160","GBM grid model 29","GBM grid model 99","GBM grid model 192","GBM grid model 206","GBM grid model 31","Neural network grid model 188","GBM grid model 161","GBM grid model 258","GBM grid model 132","Neural network grid model 54","GBM grid model 279","GBM grid model 273","GBM grid model 63","GBM grid model 278","GBM grid model 64","GBM grid model 62","GBM grid model 13","GBM grid model 191","GBM grid model 268","GBM grid model 57","GBM grid model 35","GBM grid model 242","GBM grid model 15","GBM grid model 80","Neural network grid model 113","GBM grid model 214","GBM grid model 112","GBM grid model 247","GBM grid model 204","GBM grid model 128","GBM grid model 153","GBM grid model 207","GBM grid model 82","GBM grid model 115","GBM grid model 234","GBM grid model 47","GBM grid model 282","GBM grid model 14","GBM grid model 19","GBM grid model 274","GBM grid model 76","GBM grid model 209","GBM grid model 267","GBM grid model 181","GBM grid model 123","GBM grid model 61","GBM grid model 140","GBM grid model 185","GBM grid model 210","GBM grid model 292","GBM grid model 194","GBM grid model 105","GBM grid model 21","GBM grid model 48","GBM grid model 65","Neural network grid model 48","GBM grid model 135","GBM grid model 216","GBM grid model 227","GBM grid model 55","GBM grid model 276","GBM grid model 178","GBM grid model 39","GBM grid model 83","Neural network grid model 148","Neural network grid model 104","GBM grid model 230","GBM grid model 220","GBM grid model 246","GBM grid model 223","GBM grid model 23","GBM grid model 217","GBM grid model 296","GBM grid model 237","GBM grid model 90","GBM grid model 231","GBM grid model 167","GBM grid model 97","GBM grid model 190","GBM grid model 74","GBM grid model 72","Neural network grid model 62","Neural network grid model 206","GBM grid model 285","GBM grid model 297","GBM grid model 49","Neural network grid model 212","GBM grid model 139","GBM grid model 251","Neural network grid model 149","Neural network grid model 101","GBM grid model 66","Neural network grid model 183","GBM grid model 130","Neural network grid model 191","GBM grid model 22","Neural network grid model 117","Neural network grid model 63","Neural network grid model 178","Neural network grid model 151","XGBoost grid model 160","Neural network grid model 73"],[0.5018,0.5589,0.4955,0.5018,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.5018,0.5018,0.5018,0.4955,0.4955,0.4955,0.4955,0.6424,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5289,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5589,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.5018,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,0.4955,null,0.4955],[1,0.7569,0.9931,1,0.9267,1,0.9683,1,1,null,1,1,1,1,1,1,0.9267,0.8919,1,0.9931,1,1,1,0.9267,1,1,0.8919,1,0.9267,0.8552,0.9931,1,0.9931,1,1,1,0.8078,0.9931,0.8919,1,1,1,1,0.9931,1,1,1,1,1,1,1,0.8919,1,1,0.8919,1,1,1,0.8552,1,1,1,1,0.9267,1,1,0.8078,0.9683,1,1,0.9267,0.8552,1,0.9683,0.9267,1,0.7569,0.9931,1,1,1,1,0.9931,0.9931,1,1,0.8919,1,1,1,1,1,0.9267,1,1,1,0.8919,1,1,1,1,1,0.9683,1,1,1,1,1,1,1,0.9683,1,1,0.9683,0.9683,1,1,0.9683,0.9931,1,1,1,1,1,1,0.6486,0.9683,1,0.6486,1,1,1,0.8552,0.8919,1,1,1,0.8552,1,0.8078,0.8078,0.9267,0.9931,0.9267,1,1,0.8919,1,1,0.8919,0.8919,0.9267,0.9931,0.9931,1,1,0.8078,0.9267,1,0.9683,1,0.9931,0.9931,0.9931,1,0.8919,0.8919,0.9931,0.9267,0.8552,1,1,0.8552,1,1,1,0.9267,1,1,0.6486,0.9683,1,1,0.9683,0.9683,0.6486,0.6486,1,0.9931,0.9931,0.9267,0.9931,0.9931,0.9931,0.9931,1,1,0.9931,0.9267,0.8078,0.9931,0.9683,1,0.6486,0.9267,1,0.9931,0.8552,1,0.9931,0.9931,0.9931,0.9931,0.8552,0.8919,1,1,0.9683,1,1,0.9267,0.8552,1,1,0.9267,1,0.8078,0.9267,0.8078,0.8919,0.8552,0.8078,1,1,0.8919,1,0.9931,0.8919,0.9931,0.9683,0.8552,1,0.8919,0.9683,0.6986,1,1,0.9683,0.8552,0.8552,0.9931,0.9267,0.9267,0.9683,0.9683,1,0.8552,0.9683,0.8919,0.8919,0.8919,0.5509,0.8919,0.8919,0.9931,0.9267,0.9683,0.9267,0.9267,0.9683,0.6486,0.8919,0.6986,0.6486,0.5968,0.0024,0.5039],[0.8102,0.4758,0.9753,0.2281,0.4347,0.8102,0.7082,0.8102,0.8102,null,0.922,0.6099,0.8645,0.7572,0.8645,0.7572,0.6099,0.1011,0.922,0.8102,0.5212,0.5649,0.9753,0.2902,0.8102,0.7082,0.7572,0.9753,0.3592,0.1011,0.6099,0.4758,0.4347,0.7572,0.7572,1,0.0865,0.6099,0.3592,0.7082,0.4758,0.4758,0.8645,0.2281,0.9753,0.8645,0.7082,0.4347,0.662,1,0.7082,0.2026,0.398,0.662,0.2281,0.6099,0.7082,0.7572,0.053,0.9753,0.5649,0.7572,0.4347,0.3592,0.1548,0.7572,0.1011,0.1355,0.2902,0.7572,0.1355,0.074,0.7082,0.2902,0.2591,0.3592,0.2902,0.5212,0.7082,1,1,0.7082,0.2026,0.5649,0.398,0.4347,0.1776,0.6099,0.662,0.4758,0.6099,0.9753,0.2026,0.7082,0.4347,1,0.1548,0.7082,0.5649,0.2281,0.4347,0.4347,0.074,0.6099,0.6099,0.398,0.9753,0.7082,0.5649,0.1171,0.2281,0.5649,0.3244,0.3244,0.1171,0.3244,0.8102,0.2026,0.2902,0.5649,0.8645,0.1776,0.6099,0.7572,0.922,0.053,0.7082,0.7082,0.1011,0.4758,0.4758,0.398,0.063,0.398,0.4347,0.1355,0.2902,0.1171,0.662,0.1548,0.1355,0.2591,0.3592,0.1548,0.5649,0.5212,0.074,0.3592,0.4758,0.1011,0.1548,0.2026,0.3244,0.2281,0.5649,0.6099,0.074,0.2281,0.5212,0.4347,0.5212,0.1776,0.398,0.1548,0.2281,0.2281,0.1171,0.3244,0.063,0.053,0.5212,0.8645,0.0865,0.5649,0.6099,0.4347,0.074,0.5649,0.662,0.053,0.1011,0.2026,0.3244,0.0865,0.4347,0.063,0.063,0.6099,0.3592,0.3592,0.1548,0.4347,0.4758,0.1171,0.3592,0.4758,0.5649,0.398,0.1776,0.074,0.4347,0.4758,0.5649,0.1355,0.1548,0.2281,0.2902,0.1355,0.4758,0.4347,0.3244,0.3244,0.0865,0.053,0.1171,0.2281,0.5212,0.398,0.7572,0.3592,0.1548,0.053,0.3592,0.2902,0.3244,0.4347,0.053,0.2591,0.0865,0.0865,0.1548,0.074,0.2902,0.1776,0.053,0.2591,0.2281,0.1548,0.1355,0.1776,0.0865,0.2281,0.1171,0.1548,0.053,0.1548,0.3592,0.2026,0.074,0.1011,0.2281,0.063,0.074,0.1776,0.1171,0.2902,0.074,0.5212,0.053,0.053,0.1011,0.4347,0.0865,0.0865,0.398,0.074,0.1171,0.2026,0.053,0.2902,0.0865,0.3592,0.1355,0.1171,0.053,0.0004,0.063],[137,107,161,80,154,189,190,228,186,241,287,240,262,234,291,237,58,226,334,280,283,338,362,159,385,397,315,404,28,297,454,281,320,453,432,428,103,469,195,408,414,417,494,201,485,434,418,441,509,445,498,69,391,523,173,317,558,481,64,515,458,478,426,349,356,528,136,203,560,544,312,390,575,255,222,341,293,141,545,504.5,504.5,519,230,499,484,372,277,497,543,223,521,597,370,578,402,583,270,572,468,389,530.5,530.5,286,472.5,472.5,502,561,330,512,346,508,529,589,344,348,493,571,130,437,546,679,238,579,628,483,108,669,620,218,547.5,547.5,602,76,132,619,412,517,216,631,198,220,316,540,392,645,644,374,470,590,311,399,423,633,444,581,616,153,556,630,576,664,456,520,459,559,413,381,621,382,263,658,554,403,586,629,640,325,678,681,224,360,536,527,401,451,321,337,596,612.5,612.5,541,690,687,537,495,694,601,652,574,422,683,592,693,285,598,467,634,439,684,622,703,659,609,431,476,646,695,712,668,705,685,353,653,656,706,711,482,661,416,406,595,522,677,614,555,624,720,513,636,638,491,724,699,714,466,593,721,585,384,710,713,639,672,675,643,600,647,764,717.5,717.5,692,507,715.5,715.5,748,486,732,707,755,627,660,701,700,768,754,1,686],[5,39,12,56,30,19,21,4,26,1,7,33,24,41,13,42,137,59,6,37,40,14,8,115,2,3,64,22,215,90,10,97,81,15,27,31,195,16,154,47,45,49,11,160,17,43,60,51,20,52,28,242,84,18,192,120,9,48,258,34,63,55,82,123,118,35,236,205,29,38,156,119,25,185,204,146,170,248,50,67.5,67.5,62,208,77,85,142,190,78,58,218,73,36,150,46,132,44,203,54,108,148,79.5,79.5,201,106.5,106.5,95,69,183,93,176,96,86,57,179,181,110,72,292,140,88,23,245,76,53,124,314,32,61,264,99.5,99.5,75,336,308,66,172,121,273,65,282,271,223,114,189,70,71,207,161,102,241,200,188,83,178,112,94,325,126,89,116,74,180,151,182,133,206,224,105,225,286,87,141,219,129,111,104,261,91,92,320,256,168,175,238,211,279,272,143,135.5,135.5,173,98,101,177,199,103,149,127,166,246,113,158,109,315,163,227,145,243,125,155,117,139,165,254,235,152,130,122,144,128,138,306,157,159,134,131,252,164,287,293,202,239,162,194,226,193,147,251,191,196,269,153,171,167,294,231,169,240,344,184,186,229,212,213,228,250,232,174,197.5,197.5,210,309,220.5,220.5,216,351,233,257,234,297,296,283,327,311,322,720,420],[4,35,13,57,30,19,20,5,26,1,7,32,24,41,12,42,131,53,6,39,40,14,8,113,2,3,62,23,210,86,10,100,80,15,27,31,193,16,153,47,44,48,11,157,17,43,61,51,21,54,28,246,83,18,195,125,9,50,257,34,63,56,81,120,119,33,237,205,29,38,155,115,25,186,204,143,168,249,49,72.5,72.5,64,209,77,85,141,190,82,59,222,74,36,149,46,137,45,200,55,106,148,78.5,78.5,202,111.5,111.5,95,67,184,93,177,96,88,58,181,178,108,71,292,139,90,22,247,76,52,128,314,37,60,261,97.5,97.5,69,336,310,65,175,121,271,66,282,272,225,116,189,68,70,207,160,102,242,199,187,84,180,110,94,326,123,89,118,75,179,150,182,132,206,223,105,224,283,87,142,218,130,107,104,264,91,92,321,256,169,174,238,215,281,274,144,135.5,135.5,172,99,101,176,203,103,151,126,166,240,114,161,109,318,162,229,146,245,124,159,117,140,165,254,232,154,129,122,145,127,138,307,158,156,133,134,251,164,289,295,201,239,163,196,226,194,147,250,191,192,268,152,171,167,293,234,170,241,344,183,188,228,214,213,230,252,231,173,197.5,197.5,211,308,220.5,220.5,216,351,233,259,235,302,296,290,334,311,322,720,423],[146,181,186,193,214,227,231,237,238,243,301,305,310,316,316,321,326,338,346,356,363,366,378,387,389,403,441,449,453,473,474,478,481,483,486,490,491,501,502,502,503,514,516,518,519,520,539,543,550,551,554,557,558,559,560,562,576,579,579,583,584,589,589,592,593,596,609,613,618,620,623,624,625,626,630,630,631,638,644,644.5,644.5,645,647,653,654,655,657,657,660,663,668,669,669,670,671,672,673,681,682,685,688.5,688.5,689,690.5,690.5,692,697,697,698,699,700,703,704,704,707,711,714,714,716,724,724,730,731,733,735,736,738,741,743,744.5,744.5,746,748,750,750,759,759,760,762,762,763,764,770,770,783,785,788,791,794,794,798,798,800,802,803,804,804,805,808,810,813,815,821,823,824,825,828,831,831,832,832,837,840,845,847,848,850,860,865,865,872,873,876,877,877,881,883,883,883.5,883.5,886,887,889,890,897,900,901,905,906,908,910,911,911,918,923,923,925,927,933,936,937,938,939,939,943,952,954,956,957,960,961,966,968,971,973,976,985,989,992,994,998,1000,1002,1004,1007,1011,1014,1014,1018,1026,1028,1029,1041,1048,1053,1058,1060,1066,1072,1077,1087,1096,1098,1101,1101,1102,1110,1111,1112.5,1112.5,1113,1124,1156.5,1156.5,1180,1188,1198,1223,1224,1226,1252,1274,1361,1390,1398,1441,1529]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3-3" class="section level4 hasAnchor" number="5.2.4.3">
<h4><span class="header-section-number">5.2.4.3</span> CV 3<a href="id_05_adversarial_computational_control.html#cv-3-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-24e4e74f6f710b93456d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-24e4e74f6f710b93456d">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 145","Super learner all models"],[0.0039,null],[null,0.0397],[null,0.0027],[144,1],[1,557],[1,557],[146,1115]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4-3" class="section level4 hasAnchor" number="5.2.4.4">
<h4><span class="header-section-number">5.2.4.4</span> CV 4<a href="id_05_adversarial_computational_control.html#cv-4-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-f424e5c78550458c8930" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f424e5c78550458c8930">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 215","Neural network grid model 145","Neural network grid model 168","Neural network grid model 159","Neural network grid model 210","Neural network grid model 154","Neural network grid model 138","Neural network grid model 155","Neural network grid model 158","Neural network grid model 112","Neural network grid model 213","Neural network grid model 174","Neural network grid model 139","Neural network grid model 201","Neural network grid model 178","Neural network grid model 165","Neural network grid model 180","Neural network grid model 196","GBM grid model 21","Neural network grid model 172","Neural network grid model 176","Neural network grid model 206","Neural network grid model 117","Neural network grid model 171","GBM grid model 43","GBM grid model 66","GBM grid model 63","GBM grid model 51","Neural network grid model 149","GBM grid model 76","Neural network grid model 198","GBM grid model 278","GBM grid model 64","Neural network grid model 189","Neural network grid model 187","Neural network grid model 199","GBM grid model 18","Neural network grid model 134","GBM grid model 100","GBM grid model 93","GBM grid model 157","GBM grid model 296","GBM grid model 32","GBM grid model 256","Neural network grid model 148","GBM grid model 138","GBM grid model 277","Neural network grid model 160","GBM grid model 219","GBM grid model 133","GBM grid model 181","GBM grid model 115","Neural network grid model 173","GBM grid model 107","GBM grid model 193","GBM grid model 228","GBM grid model 47","GBM grid model 282","Neural network grid model 202","GBM grid model 130","GBM grid model 188","GBM grid model 191","GBM grid model 123","GBM grid model 236","GBM grid model 160","GBM grid model 50","GBM grid model 15","GBM grid model 178","GBM grid model 53","GBM grid model 194","GBM grid model 272","GBM grid model 298","GBM grid model 220","GBM grid model 267","GBM grid model 14","Neural network grid model 163","GBM grid model 230","GBM grid model 131","GBM grid model 33","Neural network grid model 122","GBM grid model 251","GBM grid model 254","GBM grid model 139","GBM grid model 289","GBM grid model 28","GBM grid model 201","GBM grid model 242","GBM grid model 35","GBM grid model 90","GBM grid model 214","Neural network grid model 182","GBM grid model 20","GBM grid model 5","GBM grid model 209","GBM grid model 61","GBM grid model 247","GBM grid model 241","GBM grid model 243","GBM grid model 275","Neural network grid model 188","GBM grid model 125","GBM grid model 292","GBM grid model 46","GBM grid model 217","GBM grid model 245","GBM grid model 192","GBM grid model 182","GBM grid model 206","GBM grid model 263","GBM grid model 13","GBM grid model 80","GBM grid model 119","GBM grid model 168","GBM grid model 294","GBM grid model 117","GBM grid model 135","GBM grid model 268","Neural network grid model 109"],[0.159,0.1401,0.1097,0.0805,0.159,0.1097,0.2257,0.1401,0.0739,0.1778,0.1401,0.0805,0.1097,0.0805,0.0769,0.088,0.088,0.088,0.098,0.0739,0.088,0.0805,0.1238,0.098,0.0769,0.0805,0.088,0.0769,0.1097,0.0739,0.0805,0.0739,0.0739,0.0739,0.0805,0.088,0.0739,0.098,0.0739,0.0739,0.0739,0.0769,0.0739,0.0739,0.0739,0.0739,0.0739,0.098,0.0769,0.0739,0.0739,0.0739,0.0739,0.1097,0.0739,0.0739,0.0739,0.0769,0.088,0.0739,0.088,0.0739,0.0739,0.0769,0.0739,0.0805,0.0739,0.0739,0.0739,0.0739,0.0805,0.0769,0.0739,0.0739,0.0739,0.0769,0.0739,0.0739,0.0739,0.1238,0.0805,0.0739,0.0805,0.1097,0.0739,0.0769,0.0739,0.0739,0.0739,0.0739,0.0739,0.0769,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0739,0.0769,0.0805,0.0769,0.0739,null],[0.8037,0.7494,1,0.8037,1,null,0.7015,0.6132,0.9731,0.5699,0.5699,1,0.8037,0.7494,0.8037,0.9731,0.9731,0.5239,0.8595,0.7494,0.6132,0.5699,0.5699,0.4842,0.9178,0.8037,0.7015,0.7494,0.4121,0.8595,0.7494,0.7494,0.7494,0.7494,0.6132,0.5239,0.7494,0.378,0.8595,0.6132,0.6503,0.5239,0.9731,0.6503,0.6132,0.7015,0.9178,0.5239,0.6132,0.6503,0.7494,0.7015,0.6503,0.4458,0.6503,0.6503,0.7494,0.6503,0.6132,0.6503,0.5699,0.7015,0.6503,0.4458,0.7494,0.9731,0.6132,0.6132,0.4842,0.6503,0.4458,0.4121,0.6503,0.6503,0.8595,0.4121,0.4458,0.5239,0.5239,0.3431,0.6503,0.5699,0.6503,0.378,0.7015,0.4842,0.6503,0.7015,0.6503,0.5239,0.6503,0.4842,0.6132,0.6132,0.6503,0.6503,0.6503,0.6503,0.6132,0.4842,0.6132,0.5239,0.5699,0.6132,0.6132,0.5699,0.4842,0.5699,0.4458,0.4121,0.6503,0.6503,0.6503,0.4458,0.378,0.4458,0.4458,0.0091],[0.5733,0.5234,0.7345,0.7913,0.7345,null,0.3126,0.2188,0.4774,0.0963,0.2792,0.4321,0.5234,0.2792,0.2188,0.5234,0.7345,0.2188,0.4321,0.2479,0.1931,0.0963,0.1692,0.1113,0.5234,0.3497,0.1692,0.3126,0.0712,0.1931,0.2188,0.2792,0.2792,0.4321,0.0712,0.0712,0.3497,0.0825,0.1284,0.1931,0.1692,0.1113,0.3126,0.2188,0.1481,0.3126,0.2479,0.1284,0.1692,0.3126,0.1692,0.1931,0.1113,0.1113,0.0825,0.1692,0.2188,0.2479,0.1481,0.1113,0.0514,0.1481,0.1481,0.0712,0.1284,0.1284,0.0514,0.1284,0.0825,0.1284,0.1692,0.0712,0.1284,0.1931,0.0825,0.0963,0.0712,0.0609,0.0514,0.1113,0.0825,0.0963,0.0825,0.0825,0.1284,0.0712,0.0825,0.1113,0.0825,0.1692,0.2188,0.1113,0.0514,0.0825,0.0963,0.0712,0.0712,0.0712,0.0963,0.0609,0.0963,0.0712,0.0609,0.0825,0.0712,0.0825,0.0609,0.0712,0.1113,0.0609,0.0825,0.0825,0.0825,0.0825,0.0514,0.0609,0.1113,0.0004],[44,56,77,81,93,99,76,95,104,23,100,154,150,187,163,200,205,98,208,153,159,148,110,112,227,224,233,240,64,223,236,244.5,244.5,288,161,165,318,82,257,294,303,221,352,335,276,354,355,198,358,333,319,378,279,219,341,344,404,374,385,390,232,412,423,316,403,256,410,420,326,426,336,322,345,448,370,275,415,397,267,268,364,368,365,129,441,380,360,479,428,484,248,452,466,489,450,483,480,481,454,492,502,504,490,494,500,499,476,518,422,508,455,439.5,439.5,406,308,436,477,1],[9,6,2,4,3,1,13,12,11,55,27,8,14,10,25,7,5,61,15,43,45,52,73,72,17,20,26,23,112,35,29,31.5,31.5,16,84,86,19,140,54,38,34,82,18,28,58,22,21,101,24,39,49,37,90,119,59,60,30,47,44,51,130,41,36,91,48,122,46,42,89,40,87,93,83,33,74,125,57,68,132,136,94,92,95,213,62,97,107,50,78,53,171,70,63,56,81,65,69,71,85,66,64,67,75,76,77,80,96,79,127,88,118,128.5,128.5,146,196,189,198,579],[9,6,2,5,3,1,13,12,11,55,28,8,14,10,25,7,4,62,15,43,45,52,72,74,17,20,26,23,112,35,29,31.5,31.5,16,85,86,19,141,54,38,34,82,18,27,60,21,22,101,24,39,48,37,88,120,58,59,30,47,44,51,130,41,36,92,49,122,46,42,89,40,87,95,83,33,73,125,57,68,134,137,93,91,94,213,61,97,108,50,78,53,171,70,63,56,80,65,69,71,84,66,64,67,75,76,77,81,96,79,129,90,117,127.5,127.5,147,196,188,198,578],[62,68,81,90,99,101,102,119,126,133,155,170,178,207,213,214,214,221,238,239,249,252,255,258,261,264,285,286,288,293,294,307.5,307.5,320,330,337,356,363,365,370,371,385,388,390,394,397,398,400,406,411,416,452,457,458,458,463,464,468,473,492,492,494,495,499,500,500,502,504,504,506,510,510,511,514,517,525,529,533,533,541,551,551,554,555,564,574,575,579,584,590,590,592,592,601,611,613,618,623,623,624,630,638,640,646,654,660,668,676,678,686,690,695.5,695.5,699,700,813,873,1158]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5-3" class="section level4 hasAnchor" number="5.2.4.5">
<h4><span class="header-section-number">5.2.4.5</span> CV 5<a href="id_05_adversarial_computational_control.html#cv-5-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ca3d12aba91800f9fe66" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ca3d12aba91800f9fe66">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 137","Neural network grid model 207","Neural network grid model 149","Neural network grid model 213","Neural network grid model 156","Neural network grid model 191","Neural network grid model 134","Neural network grid model 155","Neural network grid model 140","Neural network grid model 202","Neural network grid model 138","Neural network grid model 114","Neural network grid model 122","Neural network grid model 133","Neural network grid model 139","Neural network grid model 101","Neural network grid model 160","Neural network grid model 163","Neural network grid model 169","Neural network grid model 145","Neural network grid model 144","Neural network grid model 2","Neural network grid model 154","Neural network grid model 99","GBM grid model 116","Neural network grid model 117","Neural network grid model 129","Neural network grid model 75","Neural network grid model 158","Neural network grid model 152","Neural network grid model 205","GBM grid model 105","Neural network grid model 51","Neural network grid model 5","Neural network grid model 132","Neural network grid model 165","Neural network grid model 180","Neural network grid model 199","GBM grid model 115","GBM grid model 74","GBM grid model 60","GBM grid model 101","Neural network grid model 171","Neural network grid model 161","Neural network grid model 176","Neural network grid model 147","Neural network grid model 178","GBM grid model 11","Neural network grid model 167","Neural network grid model 151","Neural network grid model 179","Neural network grid model 174","GBM grid model 32","GBM grid model 184","Neural network grid model 206","Neural network grid model 41","Neural network grid model 183","GBM grid model 181","Neural network grid model 198","Neural network grid model 220","Neural network grid model 172","Neural network grid model 182","GBM grid model 227","GBM grid model 78","Neural network grid model 23","Neural network grid model 297","Neural network grid model 126","GBM grid model 221","GBM grid model 111","GBM grid model 81","Neural network grid model 193","GBM grid model 222","GBM grid model 190","GBM grid model 97","GBM grid model 178","Neural network grid model 195","Neural network grid model 173","Neural network grid model 127","GBM grid model 235","Neural network grid model 89","GBM grid model 35","GBM grid model 29","GBM grid model 206","Neural network grid model 146","Neural network grid model 106","Neural network grid model 96","GBM grid model 216","GBM grid model 130","Neural network grid model 189","GBM grid model 120","Neural network grid model 296","GBM grid model 210","Neural network grid model 210","Neural network grid model 150","GBM grid model 84","GBM grid model 83","Neural network grid model 58","GBM grid model 20","GBM grid model 217","Neural network grid model 124","GBM grid model 66","Neural network grid model 162","GBM grid model 110","GBM grid model 58","GBM grid model 138","GBM grid model 14","GBM grid model 76","GBM grid model 86","Neural network grid model 43","Neural network grid model 192","GBM grid model 174","Neural network grid model 123","Neural network grid model 190","GBM grid model 214","GBM grid model 194","GBM grid model 201","GBM grid model 42","Neural network grid model 212","Neural network grid model 7","Neural network grid model 113","Neural network grid model 12","GBM grid model 155","Neural network grid model 187","Neural network grid model 81","Neural network grid model 112","Neural network grid model 68","Neural network grid model 168","GBM grid model 185","Neural network grid model 201","GBM grid model 15","GBM grid model 107","GBM grid model 113","GBM grid model 6","GBM grid model 125","Neural network grid model 217","Neural network grid model 53","GBM grid model 93","Neural network grid model 157","Neural network grid model 166","GBM grid model 121","GBM grid model 219","GBM grid model 228","Neural network grid model 143","GBM grid model 180","Neural network grid model 37","GBM grid model 126","GBM grid model 192","GBM grid model 4","Neural network grid model 148","Neural network grid model 79","GBM grid model 51","Neural network grid model 136","GBM grid model 13","Neural network grid model 46","GBM grid model 238","GBM grid model 9","GBM grid model 173","GBM grid model 54","Neural network grid model 135","GBM grid model 41","Neural network grid model 82","GBM grid model 157","Neural network grid model 211","GBM grid model 94","Neural network grid model 177","GBM grid model 179","GBM grid model 149","Neural network grid model 92","Neural network grid model 196","GBM grid model 22","Neural network grid model 65","GBM grid model 119","GBM grid model 168","GBM grid model 50","GBM grid model 80","Neural network grid model 35","Neural network grid model 61","Neural network grid model 188","GBM grid model 129","GBM grid model 18","GBM grid model 23","Neural network grid model 115","GBM grid model 5","GBM grid model 63","GBM grid model 47","GBM grid model 128","GBM grid model 133","GBM grid model 209","GBM grid model 62","GBM grid model 191","GBM grid model 1","GBM grid model 28","GBM grid model 118","GBM grid model 27","Neural network grid model 17","Neural network grid model 63","Neural network grid model 215","GBM grid model 156","GBM grid model 160","GBM grid model 147","Neural network grid model 40","GBM grid model 21","GBM grid model 19","GBM grid model 16","GBM grid model 152","GBM grid model 53","GBM grid model 207","GBM grid model 102","GBM grid model 106","GBM grid model 123","GBM grid model 49","GBM grid model 200","GBM grid model 127","Neural network grid model 48","GBM grid model 197","GBM grid model 158","GBM grid model 199","Neural network grid model 125","GBM grid model 31","Neural network grid model 32","Neural network grid model 128","Neural network grid model 194","GBM grid model 61","GBM grid model 103","GBM grid model 183","GBM grid model 136","GBM grid model 205","GBM grid model 12","GBM grid model 162","GBM grid model 43","GBM grid model 135","GBM grid model 220","GBM grid model 131","GBM grid model 161","GBM grid model 187","GBM grid model 90","GBM grid model 56","Neural network grid model 34","GBM grid model 189","Neural network grid model 185","GBM grid model 182","GBM grid model 202","Neural network grid model 84","GBM grid model 193","GBM grid model 17","GBM grid model 218","Neural network grid model 85","GBM grid model 89","Neural network grid model 159","GBM grid model 139","GBM grid model 46","GBM grid model 112","GBM grid model 166","GBM grid model 39","GBM grid model 33","GBM grid model 26","GBM grid model 37","GBM grid model 30","Neural network grid model 170","GBM grid model 100","GBM grid model 212","GBM grid model 172","Neural network grid model 204","GBM grid model 7","GBM grid model 211","GBM grid model 236","GBM grid model 146","Neural network grid model 73","GBM grid model 198","GBM grid model 57","GBM grid model 225","GBM grid model 95","GBM grid model 64","GBM grid model 55","Neural network grid model 118","GBM grid model 226","GBM grid model 85","GBM grid model 75","Neural network grid model 181","GBM grid model 72","GBM grid model 167","Super learner all models","GBM grid model 234","Neural network grid model 209"],[0.8501,0.15,0.2035,0.1288,0.1371,0.1371,0.1844,0.1671,0.1288,0.1276,0.1276,0.1288,0.1371,0.1276,0.1844,0.1371,0.1276,0.15,0.1276,0.1276,0.1371,0.1276,0.15,0.1288,0.2266,0.2035,0.1276,0.1276,0.15,0.1288,0.1371,0.1288,0.1671,0.1276,0.15,0.1288,0.1276,0.1288,0.1276,0.1288,0.1288,0.2842,0.1288,0.1276,0.15,0.1276,0.1276,0.1276,0.1288,0.1288,0.1276,0.1671,0.1276,0.1276,0.1371,0.1276,0.1671,0.1276,0.1288,0.1276,0.1276,0.1276,0.1288,0.1288,0.1288,0.1844,0.2035,0.1371,0.1276,0.1276,0.1276,0.1288,0.1371,0.1371,0.1276,0.1276,0.1276,0.1276,0.1276,0.1288,0.1288,0.1276,0.1276,0.1276,0.1276,0.2035,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1288,0.1371,0.1276,0.1371,0.1276,0.1276,0.1844,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1288,0.15,0.2035,0.1371,0.1276,0.1276,0.1288,0.1276,0.1276,0.1276,0.15,0.1371,0.1276,0.1276,0.1844,0.1276,0.15,0.1276,0.1276,0.1671,0.1276,0.1288,0.1276,0.1276,0.1671,0.2035,0.1276,0.1276,0.1276,0.1371,0.1276,0.1276,0.1276,0.1288,0.1276,0.1276,0.1276,0.1671,0.1288,0.1844,0.1276,0.1288,0.1276,0.1276,0.1276,0.1276,0.1276,0.1371,0.1671,0.1276,0.1276,0.1288,0.1671,0.1276,0.1371,0.1276,0.1276,0.1276,0.1276,0.1276,0.1288,0.1276,0.1276,0.1371,0.1671,0.1276,0.1276,0.1288,0.1276,0.1276,0.1276,0.1276,0.2035,0.1276,0.1276,0.15,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1288,0.1276,0.1276,0.1276,0.1276,0.1844,0.15,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.15,0.1276,0.1288,0.1276,0.1276,0.1371,0.1288,0.1276,0.1276,0.1288,0.1371,0.1276,0.1276,0.1276,0.1276,0.1288,0.15,0.1288,0.1276,0.1276,0.1276,0.1288,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1371,0.1288,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1371,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,0.1276,null,0.1276,0.1276],[null,0.7738,0.7629,0.8585,0.7629,0.7738,0.7629,0.8095,0.7738,0.7738,0.8585,0.7738,0.7738,0.8095,0.8095,0.8095,0.8095,0.7738,0.911,0.7629,0.7629,0.8095,0.7629,0.8095,0.7366,0.7738,0.7629,0.7738,0.6692,0.9698,0.7539,0.7539,0.7738,0.7539,0.7738,0.7629,0.8585,0.7629,0.7738,0.7738,0.911,0.7539,0.8095,0.7629,0.7539,0.7738,0.7629,0.911,0.7738,0.7629,0.7629,0.6692,0.7738,0.8585,0.7738,0.7629,0.7103,0.7539,0.8585,0.8095,0.8095,0.7629,0.911,0.7629,0.7738,0.6692,0.63,0.7103,0.7539,0.8095,0.7738,0.7539,0.7366,0.7738,0.7738,0.7539,0.7539,0.7738,0.7738,0.911,0.7366,0.8095,0.7629,0.7738,0.7539,0.5564,0.7366,0.7738,0.7738,0.8095,0.7539,0.7629,0.7738,0.7738,0.7366,0.7539,0.7738,0.7539,0.7629,0.8095,0.63,0.7629,0.7738,0.8585,0.7366,0.7738,0.7738,0.8585,0.6692,0.63,0.6692,0.8095,0.7539,0.7539,0.7738,0.7629,0.7629,0.7103,0.63,0.7629,0.8095,0.7366,0.63,0.7539,0.7366,0.7629,0.482,0.7629,0.8095,0.7629,0.8095,0.7539,0.7103,0.5564,0.7738,0.5564,0.63,0.7629,0.7103,0.7629,0.7539,0.7539,0.7738,0.7539,0.7366,0.7629,0.5222,0.911,0.7539,0.7103,0.63,0.7629,0.7366,0.7629,0.5564,0.63,0.8095,0.7539,0.63,0.7539,0.5564,0.5564,0.7629,0.6692,0.7738,0.7366,0.7629,0.7539,0.7366,0.6692,0.63,0.5953,0.7738,0.7738,0.7539,0.7539,0.5564,0.63,0.7539,0.482,0.7629,0.6692,0.5564,0.7539,0.7629,0.8095,0.7629,0.7539,0.8585,0.7539,0.7539,0.7103,0.7539,0.6692,0.8585,0.5564,0.63,0.7366,0.7103,0.7738,0.7738,0.7103,0.6692,0.7103,0.7539,0.8095,0.7629,0.7103,0.5222,0.7366,0.7738,0.7103,0.6692,0.7366,0.5564,0.7629,0.5953,0.5222,0.7366,0.482,0.6692,0.7103,0.5953,0.7366,0.7366,0.63,0.7629,0.7629,0.63,0.7539,0.7539,0.63,0.7366,0.7738,0.6692,0.7103,0.7539,0.5953,0.6692,0.7366,0.7366,0.7629,0.6692,0.5222,0.7103,0.5953,0.5953,0.4482,0.7103,0.5953,0.7629,0.7366,0.63,0.5953,0.63,0.7103,0.7366,0.7366,0.7103,0.7366,0.5222,0.7366,0.7366,0.5953,0.6692,0.7629,0.6692,0.6692,0.5953,0.7629,0.7738,0.7366,0.4482,0.63,0.7366,0.5953,0.63,0.5953,0.7103,0.63,0.482,0.5564,0.0238,0.63,0.3786],[null,0.3879,0.3879,0.6776,0.3168,0.4286,0.4286,0.3506,0.4733,0.4286,0.3168,0.4286,0.3879,0.3506,0.2353,0.3168,0.3168,0.2113,0.3506,0.2858,0.3879,0.3168,0.3506,0.3506,0.1699,0.3506,0.2564,0.2858,0.2564,0.3879,0.2113,0.3506,0.2858,0.3168,0.2564,0.2564,0.3168,0.2564,0.3168,0.3506,0.2858,0.15,0.2858,0.2564,0.15,0.2858,0.2564,0.3168,0.2858,0.2353,0.2353,0.1327,0.3506,0.3879,0.2113,0.2858,0.1911,0.2353,0.2564,0.3168,0.2564,0.2564,0.2564,0.2564,0.2113,0.15,0.1048,0.15,0.2113,0.2353,0.2564,0.2353,0.1699,0.2564,0.2564,0.2564,0.2113,0.2564,0.2353,0.2353,0.1911,0.2858,0.2564,0.2564,0.2353,0.0593,0.2113,0.2113,0.2353,0.2564,0.2353,0.1911,0.2113,0.3168,0.1182,0.1182,0.2113,0.1911,0.2564,0.2564,0.1327,0.2564,0.1699,0.2113,0.1911,0.2564,0.1699,0.2564,0.079,0.0505,0.1182,0.2113,0.2113,0.1911,0.2353,0.2564,0.2564,0.0681,0.079,0.1327,0.2858,0.0906,0.1182,0.1327,0.2113,0.1911,0.0906,0.2113,0.2113,0.2353,0.2564,0.15,0.1327,0.0681,0.2353,0.1182,0.0906,0.1911,0.1048,0.2113,0.2113,0.2113,0.2353,0.15,0.15,0.1327,0.0505,0.2353,0.1327,0.1182,0.0906,0.2113,0.15,0.2113,0.0681,0.1182,0.1699,0.1911,0.1182,0.1048,0.0681,0.079,0.2113,0.15,0.1911,0.1327,0.1182,0.1182,0.1699,0.0906,0.0906,0.0681,0.15,0.15,0.1327,0.1327,0.0906,0.079,0.1911,0.0593,0.15,0.0906,0.0593,0.2113,0.1699,0.1699,0.1699,0.15,0.1699,0.1327,0.1911,0.15,0.1911,0.1327,0.1048,0.0681,0.0593,0.1327,0.1182,0.15,0.1182,0.0681,0.1699,0.0681,0.1699,0.1327,0.1182,0.1911,0.0906,0.079,0.1699,0.1327,0.1182,0.0593,0.0681,0.15,0.079,0.0906,0.079,0.0505,0.1182,0.1182,0.1911,0.1327,0.1048,0.0593,0.1048,0.1048,0.0906,0.15,0.1327,0.079,0.1182,0.1327,0.0906,0.0681,0.1327,0.0505,0.1048,0.0681,0.1182,0.1182,0.0593,0.0681,0.1182,0.0681,0.0906,0.0505,0.0906,0.1327,0.1048,0.1327,0.079,0.0681,0.0505,0.079,0.1327,0.1327,0.0906,0.1048,0.0906,0.1048,0.1182,0.1182,0.0681,0.079,0.0906,0.0681,0.0593,0.079,0.0681,0.079,0.0505,0.0681,0.079,0.0593,0.0593,0.0505,0.0593,0.0593,0.0505,0.0681,0.0094,0.0681,0.0505],[4,82,62,108,96,129,118,124,162,170,182,181,177,190,60,186,169,114,209,174,214,204,175,240,42,57,230,205,197,278,158,263,117,227,183,145,282,259,296,287,200,19,246,281,178,274,267,319,231,221,290,59,308,321,159,329,95,268,280,344,272,334,233,255,207,90,56,140,228,302,307,266,165,224,257,343,332,370,336,213,223,356,331,355,375,24,243,256,324,394,249,338,265,405,193,115,303,229,368,372,73,313,242,333,252,367,339,328,100,35,144,309,351,184,382,385,342,130,133,244,427,93,202,220,362,420,41,474,330,458,408,235,70,102,422,292,185,378,179,423,314,435,390,360,92,264,43,418,173,275,156,364,250,441,128,112,387,429,226,163,176,218,417,348,442,323,273,283,363,166,167,78,388.5,388.5,298,396,206,262,454,86,436,304,101,488,444,476,425,445,468,409,469,411,459,412,180,189,300,446,397,482,415,217,421,236,450,365,391,453,210,295,495,380,279,239,315,439,340,241,361,123,291,403,433,504,424,238,413.5,413.5,373,487,490,320,455,521,400,297,479,196,428,277,581,510,386,305,507,318,515,261,346,503,480,525,462,416,354,465,518.5,518.5,508,558,499,461,514,611,470,494,505,516,452,496,437,483,383,524,485,530,526,467,492,535,512,544,1,599,644],[1,6,23,2,14,4,10,9,3,5,7,8,13,12,78,16,29,61,17,37,19,27,50,20,122,117,31,42,48,11,72,22,99,44,67,90,21,33,15,24,68,157,52,35,87,39,45,18,63,74,41,156,32,28,111,26,144,58,53,25,62,30,83,73,97,160,176,136,93,57,56,77,129,101,86,46,51,34,54,116,114,47,60,49,40,216,107,103,71,38,112,69,106,36,142,183,96,134,65,64,213,95,128,85,126,70,84,91,209,243,189,109,89,174,76,75,98,206,204,149,59,226,172,166,94,66,257,43,118,55,82,170,252,238,79,143,197,102,202,80,140,81,105,120,254,169,280,92,218,165,225,121,180,88,246,255,119,100,201,233,228,208,110,148,104,164,191,186,146,245,248,293,138.5,138.5,185,137,235,207,113,300,125,192,294,108,132,115,145,135,124,153,123,154,131,155,272,269,214,141,167,127,162,260,161,256,150,193,182,152,274,232,133,190,242,266,229,171,221,271,212,333,250,196,181,147,188,282,194.5,194.5,215,159,158,244,179,151,211,264,173,316,203,281,130,168,231,276,177,273,175,302,262,187,200,178,220,247,279,224,198.5,198.5,205,184,217,236,210,163,237,227,222,219,251,234,263,241,291,223,249,230,239,277,267,253,265,259,541,261,286],[1,6,22,2,14,4,10,9,3,5,7,8,13,11,78,17,29,62,16,37,18,27,50,20,121,117,30,44,48,12,72,23,100,46,69,89,21,32,15,24,67,162,53,35,87,39,43,19,63,74,40,157,33,28,111,26,144,58,52,25,60,31,83,73,98,159,177,136,92,57,55,77,131,101,86,45,51,34,54,116,112,47,61,49,41,219,109,104,71,38,114,68,106,36,143,184,97,134,65,64,214,94,132,85,126,70,84,91,209,240,190,107,90,172,75,76,96,205,204,149,59,226,173,164,95,66,256,42,119,56,82,170,253,238,79,145,199,103,202,80,138,81,105,120,255,169,280,93,215,166,225,122,180,88,245,254,118,99,201,234,229,208,110,148,102,165,189,186,146,246,248,293,139.5,139.5,185,137,235,207,113,300,125,192,295,108,129,115,142,135,123,153,124,155,130,154,272,269,213,141,167,127,160,260,161,257,150,193,182,152,274,232,133,191,244,267,228,171,221,271,211,333,250,196,181,147,187,282,194.5,194.5,216,158,156,243,178,151,212,264,174,317,203,281,128,168,231,276,176,273,175,302,262,188,200,179,220,247,279,224,197.5,197.5,206,183,217,236,210,163,237,227,222,218,252,233,263,242,292,223,249,230,239,277,266,251,265,259,542,261,286],[6,94,107,112,124,137,138,142,168,180,196,197,203,213,216,219,227,237,242,248,251,258,275,280,285,291,291,291,293,301,302,308,316,317,319,324,324,324,326,335,335,338,351,351,352,352,355,356,357,369,371,372,373,377,381,381,383,384,385,394,394,395,399,401,402,409,409,412,413,416,418,420,425,426,429,434,434,438,444,445,449,450,452,453,456,459,459,463,466,470,475,475,477,477,478,482,496,497,498,500,500,502,502,503,504,507,507,510,518,518,523,525,530,530,533,536,536,541,541,542,545,545,547,550,551,552,554,559,567,569,572,575,575,578,580,580,581,583,583,583,592,597,600,600,601,602,603,603,606,606,606,607,610,617,619,621,624,628,628,630,633,634,637,644,648,652,653,655,655,657,663,664,666.5,666.5,668,670,676,676,680,686,686,688,690,704,705,706,712,715,715,715,716,720,720,721,724,727,727,728,731,736,737,737,743,749,750,751,755,757,758,759,761,761,765,772,772,781,782,783,784,789,791,795,795,798,799,802,802.5,802.5,804,804,804,807,812,823,823,825,826,829,834,839,839,846,848,857,860,864,865,865,870,878,880,882,902,910,912,913,914.5,914.5,919,925,933,933,934,937,944,948,949,953,955,963,963,966,966,970,983,990,1004,1021,1025,1039,1042,1062,1084,1121,1216]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6-3" class="section level4 hasAnchor" number="5.2.4.6">
<h4><span class="header-section-number">5.2.4.6</span> CV 6<a href="id_05_adversarial_computational_control.html#cv-6-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-898453405bc80ffd22c3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-898453405bc80ffd22c3">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 188","Neural network grid model 34","Neural network grid model 148","Neural network grid model 194","Neural network grid model 201","Neural network grid model 165","Neural network grid model 145","Neural network grid model 112","Neural network grid model 177","Neural network grid model 117","Neural network grid model 159","Neural network grid model 113","Neural network grid model 156","Neural network grid model 199","Neural network grid model 37","Neural network grid model 160","Neural network grid model 147","Neural network grid model 51","Neural network grid model 127","Neural network grid model 206","Neural network grid model 133","Neural network grid model 137","Neural network grid model 146","Neural network grid model 171","Neural network grid model 168","Neural network grid model 207","Neural network grid model 198","Neural network grid model 172","Neural network grid model 212","Neural network grid model 297","Neural network grid model 149","Neural network grid model 174","Neural network grid model 128","Neural network grid model 115","Neural network grid model 163","Neural network grid model 190","Neural network grid model 214","Neural network grid model 205","Neural network grid model 122","Neural network grid model 79","Neural network grid model 220","Neural network grid model 124","Neural network grid model 144","Neural network grid model 180","Neural network grid model 213","Neural network grid model 140","Neural network grid model 176","Neural network grid model 169","Neural network grid model 202","Neural network grid model 139","Neural network grid model 154","Neural network grid model 92","Neural network grid model 155","Neural network grid model 173","Neural network grid model 134","Neural network grid model 129","Neural network grid model 48","Neural network grid model 54","Neural network grid model 158","Neural network grid model 151","Neural network grid model 210","Neural network grid model 135","Neural network grid model 58","GBM grid model 174","Neural network grid model 216","Neural network grid model 62","Neural network grid model 161","Neural network grid model 73","Neural network grid model 178","Neural network grid model 167","Neural network grid model 123","Neural network grid model 215","Neural network grid model 138","Neural network grid model 182","Neural network grid model 101","Neural network grid model 63","Neural network grid model 78","Neural network grid model 96","Neural network grid model 114","Neural network grid model 193","Neural network grid model 35","Neural network grid model 23","GBM grid model 111","Neural network grid model 53","GBM grid model 178","Neural network grid model 21","Neural network grid model 187","GBM grid model 125","GBM grid model 133","GBM grid model 9","Neural network grid model 125","GBM grid model 234","Neural network grid model 61","Neural network grid model 39","Neural network grid model 68","Neural network grid model 12","GBM grid model 228","Neural network grid model 170","Neural network grid model 136","Neural network grid model 126","Neural network grid model 7","GBM grid model 121","GBM grid model 119","GBM grid model 168","Neural network grid model 32","Neural network grid model 191","Neural network grid model 204","GBM grid model 155","Neural network grid model 118","Neural network grid model 192","GBM grid model 236","Neural network grid model 179","Neural network grid model 99","GBM grid model 97","Neural network grid model 106","Neural network grid model 152","GBM grid model 85","GBM grid model 153","Neural network grid model 102","XGBoost grid model 117"],[0.1155,0.2603,0.1847,0.1284,0.1284,0.1284,0.1284,0.144,0.2337,0.144,0.144,0.0926,0.1034,0.0818,0.1284,0.1155,0.0926,0.1034,0.0926,0.0818,0.1284,0.0926,0.0818,0.0662,0.0662,0.1155,0.0926,0.055,0.0926,0.1639,0.0926,0.1155,0.144,0.0818,0.0731,0.1639,0.1639,0.0926,0.0818,0.1155,0.1034,0.1034,0.1034,0.0926,0.1284,0.0731,0.0818,0.0818,0.0818,0.0662,0.1155,0.0598,0.0731,0.0818,0.0731,0.0731,0.1034,0.0598,0.0598,0.0818,0.0662,0.0818,0.1639,0.0731,0.1155,0.0818,0.1284,0.144,0.055,0.1034,0.055,0.0598,0.0731,0.055,0.3587,0.0503,0.0818,0.0731,0.055,0.1639,0.1034,0.1639,0.0503,0.1284,0.0503,0.4395,0.0731,0.0503,0.0503,0.055,0.0731,0.0598,0.0731,0.0731,0.144,0.0731,0.0598,0.0926,0.0818,0.0598,0.0662,0.0598,0.0503,0.0503,0.0818,0.0731,0.0818,0.0598,0.144,0.0731,0.055,0.5285,0.0598,0.0662,0.0926,0.0731,0.0503,0.055,null,0.0598],[0.9698,0.7654,0.7181,0.9698,0.8653,null,0.9698,0.9698,0.9201,0.817,0.9201,0.8653,0.8653,0.9201,0.7181,0.7654,0.9698,0.6757,0.7654,0.9698,0.7181,0.7654,0.7181,0.7181,0.9698,0.6757,0.5656,0.9698,0.7654,0.5398,0.8653,0.9698,0.7181,0.5978,0.6757,0.5398,0.5978,0.817,0.9201,0.638,0.7181,0.6757,0.638,0.7181,0.9201,0.7181,0.7654,0.7181,0.8653,0.8653,0.817,0.8653,0.7654,0.8653,0.7181,0.6757,0.7654,0.5656,0.6757,0.817,0.817,0.6757,0.5656,0.8653,0.5978,0.7654,0.482,0.817,0.7181,0.7181,0.6757,0.6757,0.8653,0.5978,0.7181,0.817,0.5978,0.482,0.5978,0.638,0.511,0.5656,0.638,0.5398,0.8653,0.6757,0.7654,0.6757,0.638,0.5978,0.5978,0.5978,0.5656,0.638,0.6757,0.5398,0.5978,0.5656,0.5398,0.638,0.5398,0.5656,0.5398,0.5398,0.5398,0.511,0.7181,0.5398,0.638,0.5656,0.5656,0.5656,0.5656,0.5398,0.5656,0.511,0.4424,0.5398,0.0458,0.1782],[0.9711,0.4476,0.3259,0.8576,0.9711,null,0.9155,0.6442,0.2283,1,0.4476,0.6986,0.6986,0.8576,0.2582,0.8576,0.9711,0.8576,0.7516,0.5931,0.1336,0.405,0.8576,0.8034,0.8034,0.201,0.5931,0.8034,0.3259,0.0543,0.9155,0.8034,0.0737,0.0737,0.7516,0.0543,0.0632,0.6442,0.8034,0.2582,0.3639,0.0632,0.201,0.3639,0.2582,0.7516,0.9711,0.4476,0.5931,0.4944,0.6442,0.6442,0.5931,0.7516,0.2283,0.4476,0.1766,0.201,0.8034,0.3259,0.7516,0.1766,0.201,0.1766,0.0632,0.201,0.1336,0.1,0.8034,0.1766,0.3639,0.1,0.2905,0.086,0.1336,0.2905,0.0632,0.0543,0.0543,0.1336,0.086,0.0543,0.2283,0.1766,0.405,0.116,0.0737,0.201,0.0632,0.0737,0.0737,0.0632,0.0737,0.086,0.116,0.116,0.1,0.0632,0.1336,0.2905,0.1,0.0632,0.1766,0.1766,0.0737,0.086,0.1336,0.116,0.086,0.1,0.086,0.0737,0.0632,0.0632,0.2905,0.0737,0.0543,0.0543,0.0006,0.0543],[138,54,88,110,164,180,171,115,101,185,142,190,209,237,80,222,240,215,238,263,146,232,214,255,266,167,236,294,183,63,302,268,147,189,258,166,131,311,316,113,254,207,233,284,261,322,332,300,357,314,321,299,345,327,297,293,202,206,380,320,359,289,130,317,133,227,193,96,392,220,372,333,374,308,62,301,155,288,315,174,225,112,405,109,420,30,365,446,419,435,396,402,208,250,141,243,459,253,205,270,347,433,428.5,428.5,210,458,229,283,181,441,494,13,464,497,244,350,439,434,1,281],[4,55,42,32,7,1,6,37,47,10,36,20,14,3,84,15,8,27,16,5,66,23,35,17,13,63,29,2,57,129,11,28,89,71,38,88,107,19,18,119,52,76,64,39,50,24,22,41,12,34,30,43,21,31,48,51,97,95,9,44,25,61,142,54,147,102,121,172,26,114,40,65,46,80,205,87,160,94,83,157,132,192,49,197,45,244,85,60,75,70,92,93,201,184,239,189,82,186,214,185,155,112,117.5,117.5,230,115,232,221,282,156,143,389,167,161,288,242,240,247,491,406],[4,55,42,32,7,1,6,37,46,10,36,20,13,3,85,15,8,27,16,5,66,24,35,17,14,63,29,2,58,129,11,28,89,71,38,87,109,19,18,120,52,77,64,39,51,22,23,40,12,34,31,43,21,30,48,50,97,95,9,44,25,61,142,54,145,103,122,172,26,113,41,65,47,80,206,88,161,94,82,157,135,196,49,198,45,242,84,60,75,70,90,93,200,184,239,189,83,186,213,185,155,114,116.5,116.5,231,115,232,220,282,153,143,389,167,160,288,243,240,247,490,409],[146,164,172,174,178,182,183,189,194,205,214,230,236,243,249,252,256,269,270,273,278,279,284,289,293,293,294,298,298,321,324,324,325,331,334,341,347,349,352,352,358,360,361,362,362,368,377,381,381,382,382,385,387,388,393,394,396,396,398,408,409,411,414,425,425,432,436,440,444,447,453,463,467,468,473,476,476,476,480,488,492,500,503,504,510,516,534,566,569,575,578,588,609,618,619,621,624,625,632,640,657,659,662.5,662.5,671,688,693,724,745,750,780,791,798,818,820,835,919,928,982,1096]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7-3" class="section level4 hasAnchor" number="5.2.4.7">
<h4><span class="header-section-number">5.2.4.7</span> CV 7<a href="id_05_adversarial_computational_control.html#cv-7-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-fa40fb4301f06dc9619c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-fa40fb4301f06dc9619c">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 176","Neural network grid model 138","Neural network grid model 155","Neural network grid model 48","Neural network grid model 122","Neural network grid model 135","Neural network grid model 137","Neural network grid model 99","Neural network grid model 174","Neural network grid model 5","Neural network grid model 113","Neural network grid model 151","Neural network grid model 160","Neural network grid model 134","Neural network grid model 172","Neural network grid model 180","Neural network grid model 190","Neural network grid model 163","Neural network grid model 92","Neural network grid model 182","Neural network grid model 79","Neural network grid model 129","Neural network grid model 178","Neural network grid model 177","Neural network grid model 173","Neural network grid model 189","Neural network grid model 165","Neural network grid model 132","Neural network grid model 62","Neural network grid model 158","Neural network grid model 145","Neural network grid model 123","Neural network grid model 150","Neural network grid model 146","Neural network grid model 101","Neural network grid model 140","Neural network grid model 154","Neural network grid model 162","Neural network grid model 156","Neural network grid model 171","Neural network grid model 139","Neural network grid model 169","Neural network grid model 63","GBM grid model 277","Neural network grid model 89","Neural network grid model 127","Neural network grid model 191","Neural network grid model 37","GBM grid model 251","GBM grid model 139","GBM grid model 206","GBM grid model 100","Neural network grid model 104","Super learner final","GBM grid model 201","GBM grid model 94","Neural network grid model 188","GBM grid model 61","GBM grid model 115","GBM grid model 13","Neural network grid model 183","Neural network grid model 148","GBM grid model 275","Neural network grid model 117","GBM grid model 112","Neural network grid model 41","GBM grid model 123","GBM grid model 217","Neural network grid model 53","Neural network grid model 70","GBM grid model 157","GBM grid model 63","GBM grid model 49","GBM grid model 32","GBM grid model 82","GBM grid model 281","Neural network grid model 114","GBM grid model 276","GBM grid model 272","GBM grid model 197","Neural network grid model 58","GBM grid model 15","GBM grid model 187","GBM grid model 213","GBM grid model 22","Super learner all models"],[0.3253,0.3569,0.3569,0.3009,0.3253,0.6784,0.3569,0.4759,0.3253,0.3932,0.3009,0.3253,0.3009,0.3569,0.249,0.2782,0.3253,0.3009,0.249,0.3253,0.3569,0.2782,0.2642,0.3009,0.249,0.2782,0.2481,0.249,0.4759,0.2481,0.2642,0.2782,0.3253,0.249,0.4323,0.2642,0.2782,0.249,0.2642,0.2642,0.249,0.2782,0.2782,0.2481,0.249,0.2642,0.3009,0.3253,0.2481,0.2481,0.249,0.249,0.3009,0.3932,0.249,0.2481,0.2481,0.2481,0.249,0.2481,0.2782,0.249,0.2481,0.2481,0.2642,0.2782,0.249,0.2481,0.249,0.3009,0.2481,0.2481,0.2481,0.2481,0.2782,0.2481,0.2481,0.2481,0.2642,0.2481,0.2481,0.2481,0.2782,0.2642,0.2481,null],[0.857,0.857,0.7438,0.9128,null,0.767,0.7438,0.9128,0.767,0.857,0.857,0.767,0.8051,0.7438,0.9698,0.9128,0.767,0.767,0.8051,0.8051,0.7192,0.767,0.857,0.767,0.767,0.857,0.767,0.7438,0.7438,0.8051,0.767,0.7438,0.7438,0.7192,0.767,0.767,0.767,0.7438,0.8051,0.767,0.767,0.767,0.767,0.9698,0.767,0.7192,0.7032,0.767,0.7192,0.7192,0.9128,0.8051,0.7032,0.6806,0.9698,0.8051,0.7438,0.8051,0.8051,0.767,0.7032,0.767,0.767,0.7032,0.767,0.7032,0.857,0.767,0.7192,0.6806,0.8051,0.7438,0.7032,0.8051,0.7438,0.7032,0.7032,0.7438,0.7438,0.767,0.6806,0.8051,0.7192,0.6614,0.6614,0.0235],[1,0.477,0.5241,0.3909,null,0.0589,0.2198,0.4328,0.4328,0.1465,0.6799,0.0949,0.1932,0.1276,0.7931,0.477,0.626,0.2493,0.3909,0.5241,0.0589,0.477,0.971,0.1465,0.3147,0.626,0.3147,0.11,0.0589,0.2807,0.2807,0.3909,0.069,0.3909,0.0812,0.11,0.2198,0.0949,0.2807,0.4328,0.1932,0.3909,0.1276,0.3909,0.3147,0.11,0.11,0.069,0.1465,0.1465,0.2493,0.2807,0.0589,0.0589,0.1932,0.3147,0.1465,0.1276,0.11,0.069,0.0812,0.0949,0.0949,0.069,0.069,0.069,0.11,0.069,0.11,0.069,0.11,0.0589,0.2198,0.0589,0.069,0.1465,0.0949,0.069,0.0589,0.0812,0.1465,0.069,0.1465,0.069,0.0589,0.0004],[28,21,30,20,62,2,29,12,67,11,82,17,44,75,111,109,57,68,83,84,47,122,133,89,132,161,148,135,3,151,147,128,58,136,5,163,192,141,203,201,202,78,112,200,149,159,42,34,176,177,223,175,35,31,212,244,174,227,253,249,145,288,272,235,230,119,313,286,94,59,275,251,234,340,131,241,382,252,231,292,291,381,190,197,267,1],[4,8,7,13,1,32,28,36,10,43,9,45,33,18,2,3,29,27,23,24,47,11,6,40,19,5,12,21,89,16,20,30,65,31,100,25,14,42,15,17,22,86,70,26,52,56,115,121,57,58,35,64,134,139,54,38,73,49,41,48,102,34,46,69,78,138,51,76,170,189,83,98,114,63,174,122,59,128,140,125,129,104,267,288,292,595],[4,8,6,15,1,32,28,37,9,43,10,44,33,18,2,3,29,27,23,24,47,11,7,39,19,5,12,22,90,16,20,30,66,31,101,25,13,42,14,17,21,87,69,26,54,56,116,123,57,58,35,64,135,140,52,38,76,49,41,48,102,34,46,70,78,143,51,75,174,191,83,100,114,63,172,121,60,127,138,126,132,106,269,288,292,595],[36,37,43,48,64,66,85,85,86,97,101,106,110,111,115,115,115,122,129,132,141,144,146,168,170,171,172,178,182,183,187,188,189,198,206,213,219,225,232,235,245,251,251,252,255,271,273,278,290,293,293,303,304,310,318,320,323,325,335,345,349,356,364,374,386,400,415,437,438,439,441,449,462,466,477,484,501,507,509,543,552,591,726,773,851,1191]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8-3" class="section level4 hasAnchor" number="5.2.4.8">
<h4><span class="header-section-number">5.2.4.8</span> CV 8<a href="id_05_adversarial_computational_control.html#cv-8-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-b530921b4260929c19dc" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b530921b4260929c19dc">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 201","Neural network grid model 212","Neural network grid model 170","Neural network grid model 151","Neural network grid model 123","Neural network grid model 89","Neural network grid model 182","Neural network grid model 152","Neural network grid model 144","Neural network grid model 63","Neural network grid model 53","Neural network grid model 190","Neural network grid model 112","Neural network grid model 138","Neural network grid model 149","Neural network grid model 148","Neural network grid model 176","Neural network grid model 96","Neural network grid model 81","Neural network grid model 187","Neural network grid model 198","Neural network grid model 146","Neural network grid model 158","Neural network grid model 172","GBM grid model 150","Neural network grid model 202","Neural network grid model 129","Neural network grid model 48","Neural network grid model 206","Neural network grid model 220","Neural network grid model 106","Neural network grid model 73","Neural network grid model 99","Neural network grid model 85","Neural network grid model 92","GBM grid model 222","Neural network grid model 113","Neural network grid model 43","GBM grid model 187","Neural network grid model 159","Neural network grid model 79","Neural network grid model 62","Neural network grid model 61","Neural network grid model 188","Neural network grid model 95","Super learner final","Neural network grid model 91","Neural network grid model 121","GBM grid model 48","Neural network grid model 23","Neural network grid model 37","Neural network grid model 41","Neural network grid model 58","Neural network grid model 84","Neural network grid model 68","Neural network grid model 46","Neural network grid model 54","Neural network grid model 29","Neural network grid model 5","GBM grid model 170","GBM grid model 38","Neural network grid model 97","Neural network grid model 69","Neural network grid model 76","XGBoost grid model 197","Super learner all models"],[0.1795,0.0747,0.0971,0.0658,0.1419,0.1419,0.1104,0.1251,0.0658,0.1251,0.0971,0.0582,0.0658,0.0658,0.0747,0.0971,0.0854,0.1104,0.0747,0.0854,0.0582,0.0854,0.0658,0.0582,0.0503,0.0582,0.0658,0.1419,0.0658,0.0747,0.2018,0.2018,0.0971,0.1592,0.1104,0.0658,0.1251,0.1419,0.0971,0.0503,0.2872,0.2571,0.1592,0.0503,0.2872,0.1795,0.5784,0.0658,0.1104,0.4404,0.1795,0.0971,0.0971,0.0854,0.2571,0.2018,0.0747,0.2571,0.0747,0.0582,0.0747,0.3987,0.852,0.1795,0.0503,null],[null,0.9698,0.8682,0.9698,0.9698,0.8277,0.9698,0.7602,0.7873,0.8277,0.8277,0.8682,0.7873,0.9698,0.8682,0.7873,0.9168,0.8682,0.8682,0.8682,0.9168,0.8682,0.7873,0.7873,0.8682,0.7873,0.8682,0.7873,0.7602,0.8277,0.7602,0.9168,0.7873,0.8277,0.7602,0.8277,0.7602,0.8277,0.7602,0.8682,0.7602,0.7873,0.7873,0.7873,0.8277,0.7262,0.7363,0.7602,0.7602,0.7407,0.7363,0.747,0.747,0.7407,0.7602,0.6759,0.747,0.5005,0.7873,0.7602,0.7407,0.6269,0.5005,0.4571,0.5794,0.0156],[null,0.4758,0.1476,0.3497,0.4758,0.2782,0.572,0.0531,0.1286,0.1126,0.3126,0.0973,0.1286,0.9097,0.2185,0.1126,0.4316,0.1126,0.1684,0.2782,0.4758,0.3126,0.1684,0.0723,0.1476,0.0839,0.3497,0.1126,0.1126,0.0839,0.0723,0.2782,0.5228,0.1286,0.1126,0.2185,0.0622,0.2476,0.1924,0.0622,0.1684,0.2476,0.0973,0.0839,0.0973,0.0723,0.0973,0.4316,0.1286,0.0622,0.0531,0.0973,0.1476,0.0839,0.1476,0.0531,0.1684,0.0723,0.0839,0.1476,0.0723,0.2782,0.0839,0.1286,0.0531,0.0026],[148,156,146,157,168,119,173,63,169,88,155,196,229,290,268,187,282,133,154,205,322,221,287,265,245,303,297,167,345,250,47,80,260,57,218,272,242,101,172,361,26,64,113,481,42,82,6,122,201,35,76,232,175,231,131,81,215,50,255,359,275,18,3,96,291,1],[1,4,11,13,8,56,31,88,39,80,48,37,21,3,18,62,15,91,79,60,2,55,24,41,52,25,29,112,26,76,184,166,85,191,118,99,114,195,160,73,255,250,229,49,278,272,319,273,235,332,312,236,286,269,324,350,294,395,298,263,317,445,486,469,434,640],[1,4,12,13,8,56,31,88,39,79,48,36,21,3,18,61,15,91,85,59,2,55,24,41,52,25,29,112,26,75,178,165,80,191,117,98,114,192,160,73,254,250,227,49,277,270,319,275,236,333,312,235,286,269,323,351,294,395,296,262,316,445,485,469,436,640],[150,164,169,183,184,231,235,239,247,247,251,269,271,296,304,310,312,315,318,324,326,331,335,347,349,353,355,391,397,401,409,411,425,439,453,469,470,488,492,507,535,564,569,579,597,624,644,670,672,700,700,703,747,769,778,782,803,840,849,884,908,908,974,1034,1161,1281]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9-3" class="section level4 hasAnchor" number="5.2.4.9">
<h4><span class="header-section-number">5.2.4.9</span> CV 9<a href="id_05_adversarial_computational_control.html#cv-9-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-922de078d7157e14c290" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-922de078d7157e14c290">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 139","Neural network grid model 182","Neural network grid model 137","Neural network grid model 2","Neural network grid model 188","Neural network grid model 129","Neural network grid model 41","Neural network grid model 113","Neural network grid model 123","Neural network grid model 220","Neural network grid model 37","Neural network grid model 146","Neural network grid model 144","Neural network grid model 207","Neural network grid model 173","Neural network grid model 96","Neural network grid model 212","GBM grid model 110","Neural network grid model 62","GBM grid model 166","Neural network grid model 58","Neural network grid model 61","Neural network grid model 34","Neural network grid model 159","Neural network grid model 35","Neural network grid model 79","Neural network grid model 78","Neural network grid model 46","Neural network grid model 53","Neural network grid model 127","GBM grid model 223","Neural network grid model 68","Neural network grid model 99","Neural network grid model 48","GBM grid model 266","GBM grid model 58","Neural network grid model 3","GBM grid model 75","Neural network grid model 174","Neural network grid model 54","Neural network grid model 152","GBM grid model 184","Neural network grid model 65","GBM grid model 274","XGBoost grid model 56","Neural network grid model 233","GBM grid model 233","Neural network grid model 7","GBM grid model 87","Neural network grid model 71","GBM grid model 265","GBM grid model 296","XGBoost grid model 63"],[0.1085,0.1553,0.0778,0.0869,0.0687,0.0687,0.1085,0.0623,0.0623,0.0869,0.0979,0.0687,0.0623,0.0687,0.0506,0.1085,0.0506,0.0506,0.1085,0.0547,0.0623,0.0778,0.0506,0.0687,0.0623,0.0687,0.0778,0.0547,0.0506,0.0506,0.0506,0.0979,0.0506,0.0547,0.0687,0.0547,0.1227,0.0506,0.0506,0.0623,0.0869,0.0687,0.0778,0.0547,0.0778,0.1553,0.0778,0.0623,0.1085,0.0979,0.0547,0.0547,null],[0.7419,0.9097,0.7419,0.6518,0.9097,null,0.7419,0.852,0.7419,0.6227,0.6227,0.6967,0.6518,0.5622,0.7419,0.5622,0.6967,0.6967,0.5898,0.6227,0.6227,0.5304,0.5898,0.852,0.5057,0.5622,0.5057,0.5057,0.5304,0.5898,0.5622,0.4744,0.5898,0.5304,0.6518,0.6967,0.4377,0.6518,0.5622,0.5304,0.5057,0.5304,0.2136,0.5898,0.3312,0.3658,0.5304,0.4377,0.3002,0.4018,0.5622,0.5304,0.0009],[0.354,0.9698,0.9698,0.3911,0.9698,null,0.2536,0.6259,0.3911,0.2254,0.354,0.1748,0.2536,0.1748,0.3183,0.3911,0.1748,0.3183,0.524,0.1987,0.2849,0.1545,0.2536,0.0742,0.0742,0.3183,0.2254,0.1168,0.1748,0.1987,0.0542,0.2849,0.1168,0.354,0.1748,0.0742,0.134,0.0634,0.0634,0.2536,0.0542,0.0634,0.1168,0.1987,0.0542,0.0542,0.134,0.134,0.0542,0.0542,0.134,0.134,0.0004],[104,133,134,96,190,207,115,257,212,221,82,284,330,179,405,151,372,409,74,225,139,114,230,294,169,189,99,186,233,342,223,97,334,278,248,322,44,353,429,247,283,241,66,315,162,42,266,236,92,143,473,443,1],[10,2,5,32,3,1,64,4,30,41,119,22,16,106,9,136,34,17,186,112,158,170,129,99,176,168,217,174,156,105,182,253,141,172,194,162,304,152,122,213,205,241,337,218,308,383,276,292,374,360,207,260,736],[10,2,5,31,3,1,64,4,30,42,119,22,16,106,9,136,34,17,187,113,157,170,129,99,177,168,217,174,156,105,184,254,141,173,195,162,304,152,122,213,205,241,339,218,309,384,276,291,374,358,207,258,736],[124,137,144,159,196,209,243,265,272,304,320,328,362,391,423,423,440,443,447,450,454,454,488,492,522,525,533,534,545,552,589,604,616,623,637,646,652,657,673,673,693,723,742,751,779,809,818,819,840,861,887,961,1473]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10-3" class="section level4 hasAnchor" number="5.2.4.10">
<h4><span class="header-section-number">5.2.4.10</span> CV 10<a href="id_05_adversarial_computational_control.html#cv-10-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-95f1014957e29bd59d66" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-95f1014957e29bd59d66">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 160","Neural network grid model 189","Neural network grid model 169","Neural network grid model 207","Neural network grid model 176","Neural network grid model 198","Neural network grid model 123","Neural network grid model 129","Neural network grid model 163","Neural network grid model 168","Neural network grid model 213","Neural network grid model 201","GBM grid model 107","Neural network grid model 174","Neural network grid model 82","Neural network grid model 159","Neural network grid model 135","Neural network grid model 193","Neural network grid model 178","GBM grid model 173","GBM grid model 161","Neural network grid model 134","Neural network grid model 190","Neural network grid model 297","Neural network grid model 145","Neural network grid model 210","GBM grid model 212","Neural network grid model 205","Neural network grid model 156","GBM grid model 136","GBM grid model 205","GBM grid model 13","Neural network grid model 122","Neural network grid model 81","Neural network grid model 180","Neural network grid model 146","Neural network grid model 182","GBM grid model 223","GBM grid model 180","Neural network grid model 212","Neural network grid model 155","Neural network grid model 195","Neural network grid model 147","Neural network grid model 220","Neural network grid model 99","GBM grid model 131","Neural network grid model 12","GBM grid model 51","Neural network grid model 215","Neural network grid model 113","Neural network grid model 112","GBM grid model 228","GBM grid model 5","GBM grid model 182","Neural network grid model 138","Neural network grid model 154","Neural network grid model 139","Neural network grid model 130","Neural network grid model 148","GBM grid model 76","GBM grid model 206","Neural network grid model 78","GBM grid model 118","GBM grid model 156","GBM grid model 210","GBM grid model 115","GBM grid model 130","GBM grid model 28","Neural network grid model 58","GBM grid model 267","GBM grid model 29","GBM grid model 47","GBM grid model 14","Neural network grid model 89","Neural network grid model 158","GBM grid model 62","GBM grid model 227","Neural network grid model 149","GBM grid model 20","GBM grid model 201","Neural network grid model 136","GBM grid model 192","GBM grid model 244","GBM grid model 138","Neural network grid model 191","Neural network grid model 30","Neural network grid model 124","Neural network grid model 202","GBM grid model 179","Neural network grid model 165","GBM grid model 83","GBM grid model 132","GBM grid model 220","Neural network grid model 92","Neural network grid model 127","Neural network grid model 70","GBM grid model 15","GBM grid model 127","Neural network grid model 137","Neural network grid model 188","GBM grid model 245","GBM grid model 292","GBM grid model 170","GBM grid model 257","GBM grid model 166","Neural network grid model 68","GBM grid model 41","Neural network grid model 171","GBM grid model 217","GBM grid model 211","GBM grid model 80","Neural network grid model 32","Neural network grid model 204","Neural network grid model 199","Neural network grid model 172","GBM grid model 35","GBM grid model 128","Neural network grid model 46","Neural network grid model 104","GBM grid model 33","GBM grid model 230","Neural network grid model 54","Neural network grid model 206","Neural network grid model 94","Neural network grid model 144","Neural network grid model 194","Neural network grid model 40","Neural network grid model 101","Neural network grid model 173","Neural network grid model 7","GBM grid model 167","Neural network grid model 85","Neural network grid model 53","Neural network grid model 140","Neural network grid model 48","GBM grid model 152","GBM grid model 183","Neural network grid model 114","GBM grid model 68","GBM grid model 12","Neural network grid model 37","GBM grid model 117","GBM grid model 235","GBM grid model 159","Super learner all models","Neural network grid model 74"],[0.3142,0.2221,0.2597,0.2221,0.2221,0.3142,0.2407,0.2597,0.2407,0.2097,0.2221,0.2597,0.3803,0.2407,0.3459,0.2097,0.2097,0.2221,0.1987,0.2097,0.2597,0.1997,0.1987,0.286,0.2097,0.2097,0.2221,0.2221,0.2048,0.2221,0.2221,0.2097,0.2097,0.286,0.2097,0.2048,0.1997,0.2597,0.6351,0.2097,0.1987,0.2221,0.1982,0.1982,0.2097,0.1997,0.4956,0.2221,0.2048,0.2097,0.2048,0.1982,0.2048,0.1982,0.1997,0.2048,0.1987,0.3803,0.2407,0.1997,0.1987,0.2407,0.2597,0.2048,0.2097,0.1997,0.1987,0.1982,0.2221,0.1982,0.1982,0.1982,0.1987,0.1987,0.1982,0.1997,0.1982,0.1982,0.1982,0.1982,0.2097,0.1982,0.1997,0.1982,0.1982,0.286,0.1982,0.1982,0.2597,0.1982,0.1997,0.2221,0.1997,0.1987,0.2048,0.3803,0.1987,0.286,0.1982,0.1982,0.1982,0.1982,0.2597,0.1982,0.2048,0.2407,0.2221,0.1982,0.1987,0.1987,0.1982,0.2407,0.1982,0.1982,0.1982,0.1982,0.1987,0.2097,0.2597,0.2097,0.1982,0.1982,0.1982,0.2097,0.1982,0.1982,0.2048,0.2097,0.1982,0.1982,0.1982,0.1997,0.1982,0.1982,0.1982,0.1982,0.2407,0.1982,0.1997,0.1982,0.1997,0.1982,0.1987,0.1982,null,0.1982],[0.8091,0.8091,0.8091,0.8586,1,0.8091,1,0.9148,0.8091,0.8091,0.8091,0.972,0.972,0.8586,0.8586,0.8091,0.7657,0.7657,null,0.9148,0.8586,0.7657,0.7229,0.6592,0.7229,0.7657,0.8091,0.7229,0.7229,0.7229,0.7229,0.8586,0.8586,0.6925,0.8091,0.7229,0.6925,0.7229,0.8091,0.7229,0.972,0.7229,0.7229,0.6925,0.6925,0.7657,0.7657,0.8091,0.6925,0.8586,0.7657,0.7657,0.7657,0.8091,0.7229,0.7657,0.8586,0.5976,0.6592,0.7657,0.7229,0.6592,0.7657,0.6925,0.7657,0.8586,0.6925,0.7229,0.7229,0.6925,0.7229,0.8091,0.7657,0.7229,0.8091,0.6317,0.6592,0.9148,0.6592,0.6925,0.5976,0.7657,0.7229,0.7229,0.6925,0.6592,0.6925,0.8091,0.6925,0.7657,0.6317,0.6317,0.5976,0.7229,0.7657,0.5976,0.8091,0.5976,0.8586,0.9148,0.6925,0.7229,0.6317,0.7229,0.5976,0.7229,0.5721,0.8586,0.7229,0.6592,0.5721,0.5721,0.6317,0.7657,0.8091,0.7657,0.6317,0.5976,0.5721,0.6317,0.6592,0.6592,0.7229,0.6317,0.6317,0.7229,0.6925,0.6925,0.7229,0.7229,0.5976,0.6317,0.6925,0.5721,0.6592,0.6317,0.5721,0.6592,0.4309,0.5421,0.5721,0.5721,0.5095,0.4682,0.0024,0.3587],[0.5281,0.9107,0.0849,0.5281,0.628,0.283,0.9107,0.794,0.4365,0.4365,0.1967,0.283,0.794,0.3545,0.1518,0.4817,0.283,0.2223,null,0.794,0.1732,0.1967,0.1518,0.1148,0.0849,0.283,0.5771,0.1329,0.0728,0.1518,0.1518,0.4365,0.283,0.1518,0.9698,0.2223,0.0849,0.4365,0.2223,0.1518,0.794,0.0728,0.2223,0.5281,0.0728,0.1967,0.3545,0.2223,0.2516,0.1967,0.099,0.1967,0.2516,0.2223,0.1518,0.3176,0.628,0.0626,0.053,0.3545,0.1967,0.0626,0.2223,0.1732,0.1518,0.2516,0.1732,0.1967,0.3545,0.3176,0.1518,0.053,0.1732,0.0728,0.5771,0.1732,0.0728,0.5771,0.1148,0.053,0.099,0.0849,0.1518,0.1518,0.0728,0.1967,0.1732,0.4365,0.1518,0.5281,0.0728,0.099,0.2223,0.1148,0.0728,0.0626,0.1732,0.1148,0.4817,0.628,0.0626,0.0626,0.053,0.053,0.099,0.0849,0.0626,0.3176,0.0728,0.053,0.1148,0.2223,0.1329,0.2516,0.3951,0.099,0.0728,0.1148,0.0728,0.1732,0.0626,0.1329,0.0849,0.053,0.0849,0.1329,0.0728,0.0849,0.0728,0.053,0.053,0.053,0.1732,0.1329,0.0626,0.1967,0.099,0.0728,0.099,0.0849,0.1148,0.0849,0.0849,0.0728,0.0004,0.0728],[95,134,123,114,151,91,144,108,170,186,161,202,82,185,62,209,81,201,288,260,166,222,245,77,290,313,194,308,240,231.5,231.5,287,334,163,340,289,274,127,63,258,386,212,366,335,277,336,49,318,388,413,421,350,375,378,395,450,445,119,204,319,381,129,322,303,324,400,352,398,196,422,411,433,342,405,500,306,293,488,430,365,206,431,343,452,486,121,470,550,200,544,326,149,408,490,471,57,442,125,593,622,451,504,141,467,266,193,137,641,484,376,427,239,596,679,681,534,455,242,157,355,523,409,695,454,684,666,192,577,718,606,424,513,701,710,658,515,316,740,198,505,677,532,558,614,1,691],[3,5,11,25,7,38,13,32,10,4,18,2,66,17,98,27,94,44,1,16,65,40,36,124,23,14,76,21,55,59.5,59.5,33,9,96,8,43,51,125,161,69,6,99,26,42,71,49,196,61,30,22,19,58,45,47,39,12,15,179,137,80,50,177,86,100,91,54,79,57,163,56,64,53,103,75,28,126,135,41,72,108,188,78,121,68,52,235,62,24,201,35,145,243,115,74,89,296,104,267,34,20,107,82,271,109,216,258,287,37,116,171,146,240,67,29,31,106,149,256,303,206,127,186,48,185,77,87,329,144,84,152,257,215,142,151,182,259,368,162,433,284,222,326,333,363,688,414],[3,5,11,24,8,38,14,33,10,4,18,2,65,17,98,27,94,44,1,16,66,40,35,123,23,13,79,20,55,59.5,59.5,32,9,95,7,43,51,126,161,69,6,100,26,41,71,49,194,61,30,22,19,57,45,47,39,12,15,178,137,80,50,177,86,99,91,54,78,58,163,56,64,53,102,75,28,125,136,42,72,108,189,76,121,68,52,236,62,25,199,36,145,238,115,74,88,295,104,267,34,21,107,82,271,109,216,258,287,37,116,171,146,246,67,29,31,106,150,256,301,205,128,187,48,185,77,89,329,144,84,151,257,215,142,152,183,259,367,162,434,284,223,326,333,363,688,415],[101,144,145,163,166,167,171,173,190,194,197,206,213,219,258,263,269,289,290,292,297,302,316,324,336,340,349,349,350,350.5,350.5,352,352,354,355,375,376,378,385,396,398,411,418,418,419,434,439,440,448,457,459,465,465,472,473,474,475,476,478,479,481,483,494,502,506,508,509,513,522,534,539,539,547,555,556,557,564,571,574,581,583,585,585,588,590,592,594,599,600,615,616,630,638,638,648,648,650,659,661,663,665,668,683,685,698,709,711,715,716,718,719,725,730,737,743,746,754,754,761,766,778,782,791,824,838,842,850,865,886,909,938,943,985,1013,1023,1033,1051,1064,1065,1073,1122,1184,1224,1340,1377,1520]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Norm. MAE adj. <i>p<\/i> value<\/th>\n      <th>Norm. RMSE adj. <i>p<\/i> value<\/th>\n      <th>R^2 adj. <i>p<\/i> value<\/th>\n      <th>Norm. MAE rank<\/th>\n      <th>Norm. RMSE rank<\/th>\n      <th>R^2 rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation-3" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Final evaluation<a href="id_05_adversarial_computational_control.html#final-evaluation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb117-1"><a href="id_05_adversarial_computational_control.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb117-2"><a href="id_05_adversarial_computational_control.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_mb_ad.RData&quot;</span>)</span>
<span id="cb117-3"><a href="id_05_adversarial_computational_control.html#cb117-3" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/melanin_binding_adversarial&quot;</span></span>
<span id="cb117-4"><a href="id_05_adversarial_computational_control.html#cb117-4" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb117-5"><a href="id_05_adversarial_computational_control.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Neural network grid model 113&quot;</span>, <span class="st">&quot;Neural network grid model 187&quot;</span>,</span>
<span id="cb117-6"><a href="id_05_adversarial_computational_control.html#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Neural network grid model 145&quot;</span>, <span class="st">&quot;Neural network grid model 215&quot;</span>,</span>
<span id="cb117-7"><a href="id_05_adversarial_computational_control.html#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner final&quot;</span>, <span class="st">&quot;Neural network grid model 188&quot;</span>,</span>
<span id="cb117-8"><a href="id_05_adversarial_computational_control.html#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Neural network grid model 176&quot;</span>, <span class="st">&quot;Neural network grid model 201&quot;</span>,</span>
<span id="cb117-9"><a href="id_05_adversarial_computational_control.html#cb117-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Neural network grid model 139&quot;</span>, <span class="st">&quot;Neural network grid model 160&quot;</span></span>
<span id="cb117-10"><a href="id_05_adversarial_computational_control.html#cb117-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb117-11"><a href="id_05_adversarial_computational_control.html#cb117-11" aria-hidden="true" tabindex="-1"></a>mae <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb117-12"><a href="id_05_adversarial_computational_control.html#cb117-12" aria-hidden="true" tabindex="-1"></a>rmse <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb117-13"><a href="id_05_adversarial_computational_control.html#cb117-13" aria-hidden="true" tabindex="-1"></a>R2 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb117-14"><a href="id_05_adversarial_computational_control.html#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb117-15"><a href="id_05_adversarial_computational_control.html#cb117-15" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/melanin_binding_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb117-16"><a href="id_05_adversarial_computational_control.html#cb117-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb117-17"><a href="id_05_adversarial_computational_control.html#cb117-17" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb117-18"><a href="id_05_adversarial_computational_control.html#cb117-18" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb117-19"><a href="id_05_adversarial_computational_control.html#cb117-19" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb117-20"><a href="id_05_adversarial_computational_control.html#cb117-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb117-21"><a href="id_05_adversarial_computational_control.html#cb117-21" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb117-22"><a href="id_05_adversarial_computational_control.html#cb117-22" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb117-23"><a href="id_05_adversarial_computational_control.html#cb117-23" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb117-24"><a href="id_05_adversarial_computational_control.html#cb117-24" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb117-25"><a href="id_05_adversarial_computational_control.html#cb117-25" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb117-26"><a href="id_05_adversarial_computational_control.html#cb117-26" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb117-27"><a href="id_05_adversarial_computational_control.html#cb117-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb117-28"><a href="id_05_adversarial_computational_control.html#cb117-28" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb117-29"><a href="id_05_adversarial_computational_control.html#cb117-29" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb117-30"><a href="id_05_adversarial_computational_control.html#cb117-30" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb117-31"><a href="id_05_adversarial_computational_control.html#cb117-31" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb117-32"><a href="id_05_adversarial_computational_control.html#cb117-32" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb117-33"><a href="id_05_adversarial_computational_control.html#cb117-33" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb117-34"><a href="id_05_adversarial_computational_control.html#cb117-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb117-35"><a href="id_05_adversarial_computational_control.html#cb117-35" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb117-36"><a href="id_05_adversarial_computational_control.html#cb117-36" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb117-37"><a href="id_05_adversarial_computational_control.html#cb117-37" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb117-38"><a href="id_05_adversarial_computational_control.html#cb117-38" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb117-39"><a href="id_05_adversarial_computational_control.html#cb117-39" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb117-40"><a href="id_05_adversarial_computational_control.html#cb117-40" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb117-41"><a href="id_05_adversarial_computational_control.html#cb117-41" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb117-42"><a href="id_05_adversarial_computational_control.html#cb117-42" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb117-43"><a href="id_05_adversarial_computational_control.html#cb117-43" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb117-44"><a href="id_05_adversarial_computational_control.html#cb117-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb117-45"><a href="id_05_adversarial_computational_control.html#cb117-45" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb117-46"><a href="id_05_adversarial_computational_control.html#cb117-46" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb117-47"><a href="id_05_adversarial_computational_control.html#cb117-47" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb117-48"><a href="id_05_adversarial_computational_control.html#cb117-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb117-49"><a href="id_05_adversarial_computational_control.html#cb117-49" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>log_intensity))</span>
<span id="cb117-50"><a href="id_05_adversarial_computational_control.html#cb117-50" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>log_intensity</span>
<span id="cb117-51"><a href="id_05_adversarial_computational_control.html#cb117-51" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="dv">1</span>]</span>
<span id="cb117-52"><a href="id_05_adversarial_computational_control.html#cb117-52" aria-hidden="true" tabindex="-1"></a>  mae <span class="ot">&lt;-</span> <span class="fu">c</span>(mae, <span class="fu">MAE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb117-53"><a href="id_05_adversarial_computational_control.html#cb117-53" aria-hidden="true" tabindex="-1"></a>  rmse <span class="ot">&lt;-</span> <span class="fu">c</span>(rmse, <span class="fu">RMSE</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb117-54"><a href="id_05_adversarial_computational_control.html#cb117-54" aria-hidden="true" tabindex="-1"></a>  R2 <span class="ot">&lt;-</span> <span class="fu">c</span>(R2, <span class="fu">R2_Score</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb117-55"><a href="id_05_adversarial_computational_control.html#cb117-55" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb117-56"><a href="id_05_adversarial_computational_control.html#cb117-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-57"><a href="id_05_adversarial_computational_control.html#cb117-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-scale to 0-100</span></span>
<span id="cb117-58"><a href="id_05_adversarial_computational_control.html#cb117-58" aria-hidden="true" tabindex="-1"></a>mae <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mae, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb117-59"><a href="id_05_adversarial_computational_control.html#cb117-59" aria-hidden="true" tabindex="-1"></a>rmse <span class="ot">&lt;-</span> <span class="fu">rescale</span>(rmse, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity))</span>
<span id="cb117-60"><a href="id_05_adversarial_computational_control.html#cb117-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-61"><a href="id_05_adversarial_computational_control.html#cb117-61" aria-hidden="true" tabindex="-1"></a><span class="fu">h2o.removeAll</span>()</span>
<span id="cb117-62"><a href="id_05_adversarial_computational_control.html#cb117-62" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(mae, rmse, R2, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_mb_ad.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb118-1"><a href="id_05_adversarial_computational_control.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_mb_ad.RData&quot;</span>)</span>
<span id="cb118-2"><a href="id_05_adversarial_computational_control.html#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb118-3"><a href="id_05_adversarial_computational_control.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Norm. MAE&quot;</span>, <span class="st">&quot;Norm. RMSE&quot;</span>, <span class="st">&quot;R&lt;sup&gt;2&lt;/sup&gt;&quot;</span>),</span>
<span id="cb118-4"><a href="id_05_adversarial_computational_control.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean ± s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb118-5"><a href="id_05_adversarial_computational_control.html#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(mae), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(mae), <span class="dv">3</span>)),</span>
<span id="cb118-6"><a href="id_05_adversarial_computational_control.html#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(rmse), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(rmse), <span class="dv">3</span>)),</span>
<span id="cb118-7"><a href="id_05_adversarial_computational_control.html#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(R2), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(R2), <span class="dv">3</span>))</span>
<span id="cb118-8"><a href="id_05_adversarial_computational_control.html#cb118-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb118-9"><a href="id_05_adversarial_computational_control.html#cb118-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb118-10"><a href="id_05_adversarial_computational_control.html#cb118-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb118-11"><a href="id_05_adversarial_computational_control.html#cb118-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-1bbed4fb3299395cf4d6" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1bbed4fb3299395cf4d6">{"x":{"filter":"none","vertical":false,"data":[["Norm. MAE","Norm. RMSE","R<sup>2<\/sup>"],["32.857 ± 0.173","34.344 ± 0.226","-0.038 ± 0.015"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean ± s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="cell-penetration-classification-3" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Cell-penetration (classification)<a href="id_05_adversarial_computational_control.html#cell-penetration-classification-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb119"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb119-1"><a href="id_05_adversarial_computational_control.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits.RData&quot;</span>)</span>
<span id="cb119-2"><a href="id_05_adversarial_computational_control.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">32</span>)</span>
<span id="cb119-3"><a href="id_05_adversarial_computational_control.html#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="id_05_adversarial_computational_control.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of cross-validation training sets</span></span>
<span id="cb119-5"><a href="id_05_adversarial_computational_control.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb119-6"><a href="id_05_adversarial_computational_control.html#cb119-6" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>category</span>
<span id="cb119-7"><a href="id_05_adversarial_computational_control.html#cb119-7" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb119-8"><a href="id_05_adversarial_computational_control.html#cb119-8" aria-hidden="true" tabindex="-1"></a>  outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>category <span class="ot">&lt;-</span> response</span>
<span id="cb119-9"><a href="id_05_adversarial_computational_control.html#cb119-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb119-10"><a href="id_05_adversarial_computational_control.html#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="id_05_adversarial_computational_control.html#cb119-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of the whole data set</span></span>
<span id="cb119-12"><a href="id_05_adversarial_computational_control.html#cb119-12" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> cpp_data<span class="sc">$</span>category</span>
<span id="cb119-13"><a href="id_05_adversarial_computational_control.html#cb119-13" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb119-14"><a href="id_05_adversarial_computational_control.html#cb119-14" aria-hidden="true" tabindex="-1"></a>cpp_data<span class="sc">$</span>category <span class="ot">&lt;-</span> response</span>
<span id="cb119-15"><a href="id_05_adversarial_computational_control.html#cb119-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-16"><a href="id_05_adversarial_computational_control.html#cb119-16" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(cpp_data, outer_splits,</span>
<span id="cb119-17"><a href="id_05_adversarial_computational_control.html#cb119-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits_y_shuffled.RData&quot;</span></span>
<span id="cb119-18"><a href="id_05_adversarial_computational_control.html#cb119-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="model-training-4" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Model training<a href="id_05_adversarial_computational_control.html#model-training-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb120-1"><a href="id_05_adversarial_computational_control.html#cb120-1" aria-hidden="true" tabindex="-1"></a>train_cpp_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb120-2"><a href="id_05_adversarial_computational_control.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb120-3"><a href="id_05_adversarial_computational_control.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  tmp[<span class="st">&quot;category&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tmp[<span class="st">&quot;category&quot;</span>])</span>
<span id="cb120-4"><a href="id_05_adversarial_computational_control.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;category&quot;</span></span>
<span id="cb120-5"><a href="id_05_adversarial_computational_control.html#cb120-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb120-6"><a href="id_05_adversarial_computational_control.html#cb120-6" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>category)</span>
<span id="cb120-7"><a href="id_05_adversarial_computational_control.html#cb120-7" aria-hidden="true" tabindex="-1"></a>  samp_factors <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">mean</span>(<span class="fu">table</span>(train_set<span class="sc">$</span>category)) <span class="sc">/</span> <span class="fu">table</span>(train_set<span class="sc">$</span>category))</span>
<span id="cb120-8"><a href="id_05_adversarial_computational_control.html#cb120-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb120-9"><a href="id_05_adversarial_computational_control.html#cb120-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb120-10"><a href="id_05_adversarial_computational_control.html#cb120-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb120-11"><a href="id_05_adversarial_computational_control.html#cb120-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-12"><a href="id_05_adversarial_computational_control.html#cb120-12" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb120-13"><a href="id_05_adversarial_computational_control.html#cb120-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-14"><a href="id_05_adversarial_computational_control.html#cb120-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb120-15"><a href="id_05_adversarial_computational_control.html#cb120-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-16"><a href="id_05_adversarial_computational_control.html#cb120-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb120-17"><a href="id_05_adversarial_computational_control.html#cb120-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb120-18"><a href="id_05_adversarial_computational_control.html#cb120-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb120-19"><a href="id_05_adversarial_computational_control.html#cb120-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb120-20"><a href="id_05_adversarial_computational_control.html#cb120-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb120-21"><a href="id_05_adversarial_computational_control.html#cb120-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-22"><a href="id_05_adversarial_computational_control.html#cb120-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb120-23"><a href="id_05_adversarial_computational_control.html#cb120-23" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-24"><a href="id_05_adversarial_computational_control.html#cb120-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-25"><a href="id_05_adversarial_computational_control.html#cb120-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-26"><a href="id_05_adversarial_computational_control.html#cb120-26" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb120-27"><a href="id_05_adversarial_computational_control.html#cb120-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-28"><a href="id_05_adversarial_computational_control.html#cb120-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb120-29"><a href="id_05_adversarial_computational_control.html#cb120-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-30"><a href="id_05_adversarial_computational_control.html#cb120-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb120-31"><a href="id_05_adversarial_computational_control.html#cb120-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb120-32"><a href="id_05_adversarial_computational_control.html#cb120-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-33"><a href="id_05_adversarial_computational_control.html#cb120-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb120-34"><a href="id_05_adversarial_computational_control.html#cb120-34" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-35"><a href="id_05_adversarial_computational_control.html#cb120-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-36"><a href="id_05_adversarial_computational_control.html#cb120-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-37"><a href="id_05_adversarial_computational_control.html#cb120-37" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb120-38"><a href="id_05_adversarial_computational_control.html#cb120-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-39"><a href="id_05_adversarial_computational_control.html#cb120-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-40"><a href="id_05_adversarial_computational_control.html#cb120-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-41"><a href="id_05_adversarial_computational_control.html#cb120-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb120-42"><a href="id_05_adversarial_computational_control.html#cb120-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-43"><a href="id_05_adversarial_computational_control.html#cb120-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-44"><a href="id_05_adversarial_computational_control.html#cb120-44" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-45"><a href="id_05_adversarial_computational_control.html#cb120-45" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb120-46"><a href="id_05_adversarial_computational_control.html#cb120-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-47"><a href="id_05_adversarial_computational_control.html#cb120-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-48"><a href="id_05_adversarial_computational_control.html#cb120-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-49"><a href="id_05_adversarial_computational_control.html#cb120-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb120-50"><a href="id_05_adversarial_computational_control.html#cb120-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-51"><a href="id_05_adversarial_computational_control.html#cb120-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-52"><a href="id_05_adversarial_computational_control.html#cb120-52" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-53"><a href="id_05_adversarial_computational_control.html#cb120-53" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb120-54"><a href="id_05_adversarial_computational_control.html#cb120-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-55"><a href="id_05_adversarial_computational_control.html#cb120-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-56"><a href="id_05_adversarial_computational_control.html#cb120-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-57"><a href="id_05_adversarial_computational_control.html#cb120-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb120-58"><a href="id_05_adversarial_computational_control.html#cb120-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-59"><a href="id_05_adversarial_computational_control.html#cb120-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-60"><a href="id_05_adversarial_computational_control.html#cb120-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-61"><a href="id_05_adversarial_computational_control.html#cb120-61" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb120-62"><a href="id_05_adversarial_computational_control.html#cb120-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-63"><a href="id_05_adversarial_computational_control.html#cb120-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-64"><a href="id_05_adversarial_computational_control.html#cb120-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-65"><a href="id_05_adversarial_computational_control.html#cb120-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb120-66"><a href="id_05_adversarial_computational_control.html#cb120-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-67"><a href="id_05_adversarial_computational_control.html#cb120-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-68"><a href="id_05_adversarial_computational_control.html#cb120-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-69"><a href="id_05_adversarial_computational_control.html#cb120-69" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb120-70"><a href="id_05_adversarial_computational_control.html#cb120-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-71"><a href="id_05_adversarial_computational_control.html#cb120-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-72"><a href="id_05_adversarial_computational_control.html#cb120-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-73"><a href="id_05_adversarial_computational_control.html#cb120-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb120-74"><a href="id_05_adversarial_computational_control.html#cb120-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-75"><a href="id_05_adversarial_computational_control.html#cb120-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-76"><a href="id_05_adversarial_computational_control.html#cb120-76" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-77"><a href="id_05_adversarial_computational_control.html#cb120-77" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb120-78"><a href="id_05_adversarial_computational_control.html#cb120-78" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-79"><a href="id_05_adversarial_computational_control.html#cb120-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-80"><a href="id_05_adversarial_computational_control.html#cb120-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-81"><a href="id_05_adversarial_computational_control.html#cb120-81" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb120-82"><a href="id_05_adversarial_computational_control.html#cb120-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-83"><a href="id_05_adversarial_computational_control.html#cb120-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb120-84"><a href="id_05_adversarial_computational_control.html#cb120-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb120-85"><a href="id_05_adversarial_computational_control.html#cb120-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb120-86"><a href="id_05_adversarial_computational_control.html#cb120-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-87"><a href="id_05_adversarial_computational_control.html#cb120-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb120-88"><a href="id_05_adversarial_computational_control.html#cb120-88" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-89"><a href="id_05_adversarial_computational_control.html#cb120-89" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-90"><a href="id_05_adversarial_computational_control.html#cb120-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-91"><a href="id_05_adversarial_computational_control.html#cb120-91" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb120-92"><a href="id_05_adversarial_computational_control.html#cb120-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-93"><a href="id_05_adversarial_computational_control.html#cb120-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-94"><a href="id_05_adversarial_computational_control.html#cb120-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-95"><a href="id_05_adversarial_computational_control.html#cb120-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb120-96"><a href="id_05_adversarial_computational_control.html#cb120-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-97"><a href="id_05_adversarial_computational_control.html#cb120-97" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-98"><a href="id_05_adversarial_computational_control.html#cb120-98" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb120-99"><a href="id_05_adversarial_computational_control.html#cb120-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-100"><a href="id_05_adversarial_computational_control.html#cb120-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-101"><a href="id_05_adversarial_computational_control.html#cb120-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-102"><a href="id_05_adversarial_computational_control.html#cb120-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb120-103"><a href="id_05_adversarial_computational_control.html#cb120-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-104"><a href="id_05_adversarial_computational_control.html#cb120-104" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-105"><a href="id_05_adversarial_computational_control.html#cb120-105" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb120-106"><a href="id_05_adversarial_computational_control.html#cb120-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-107"><a href="id_05_adversarial_computational_control.html#cb120-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb120-108"><a href="id_05_adversarial_computational_control.html#cb120-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb120-109"><a href="id_05_adversarial_computational_control.html#cb120-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb120-110"><a href="id_05_adversarial_computational_control.html#cb120-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-111"><a href="id_05_adversarial_computational_control.html#cb120-111" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-112"><a href="id_05_adversarial_computational_control.html#cb120-112" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb120-113"><a href="id_05_adversarial_computational_control.html#cb120-113" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-114"><a href="id_05_adversarial_computational_control.html#cb120-114" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-115"><a href="id_05_adversarial_computational_control.html#cb120-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-116"><a href="id_05_adversarial_computational_control.html#cb120-116" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb120-117"><a href="id_05_adversarial_computational_control.html#cb120-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-118"><a href="id_05_adversarial_computational_control.html#cb120-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb120-119"><a href="id_05_adversarial_computational_control.html#cb120-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb120-120"><a href="id_05_adversarial_computational_control.html#cb120-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-121"><a href="id_05_adversarial_computational_control.html#cb120-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-122"><a href="id_05_adversarial_computational_control.html#cb120-122" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-123"><a href="id_05_adversarial_computational_control.html#cb120-123" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-124"><a href="id_05_adversarial_computational_control.html#cb120-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-125"><a href="id_05_adversarial_computational_control.html#cb120-125" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb120-126"><a href="id_05_adversarial_computational_control.html#cb120-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb120-127"><a href="id_05_adversarial_computational_control.html#cb120-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb120-128"><a href="id_05_adversarial_computational_control.html#cb120-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb120-129"><a href="id_05_adversarial_computational_control.html#cb120-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb120-130"><a href="id_05_adversarial_computational_control.html#cb120-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb120-131"><a href="id_05_adversarial_computational_control.html#cb120-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-132"><a href="id_05_adversarial_computational_control.html#cb120-132" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-133"><a href="id_05_adversarial_computational_control.html#cb120-133" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb120-134"><a href="id_05_adversarial_computational_control.html#cb120-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb120-135"><a href="id_05_adversarial_computational_control.html#cb120-135" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb120-136"><a href="id_05_adversarial_computational_control.html#cb120-136" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb120-137"><a href="id_05_adversarial_computational_control.html#cb120-137" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb120-138"><a href="id_05_adversarial_computational_control.html#cb120-138" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb120-139"><a href="id_05_adversarial_computational_control.html#cb120-139" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb120-140"><a href="id_05_adversarial_computational_control.html#cb120-140" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb120-141"><a href="id_05_adversarial_computational_control.html#cb120-141" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb120-142"><a href="id_05_adversarial_computational_control.html#cb120-142" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb120-143"><a href="id_05_adversarial_computational_control.html#cb120-143" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb120-144"><a href="id_05_adversarial_computational_control.html#cb120-144" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-145"><a href="id_05_adversarial_computational_control.html#cb120-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb120-146"><a href="id_05_adversarial_computational_control.html#cb120-146" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb120-147"><a href="id_05_adversarial_computational_control.html#cb120-147" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-148"><a href="id_05_adversarial_computational_control.html#cb120-148" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb120-149"><a href="id_05_adversarial_computational_control.html#cb120-149" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb120-150"><a href="id_05_adversarial_computational_control.html#cb120-150" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb120-151"><a href="id_05_adversarial_computational_control.html#cb120-151" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-152"><a href="id_05_adversarial_computational_control.html#cb120-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb120-153"><a href="id_05_adversarial_computational_control.html#cb120-153" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb120-154"><a href="id_05_adversarial_computational_control.html#cb120-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb120-155"><a href="id_05_adversarial_computational_control.html#cb120-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb120-156"><a href="id_05_adversarial_computational_control.html#cb120-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb120-157"><a href="id_05_adversarial_computational_control.html#cb120-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb120-158"><a href="id_05_adversarial_computational_control.html#cb120-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb120-159"><a href="id_05_adversarial_computational_control.html#cb120-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-160"><a href="id_05_adversarial_computational_control.html#cb120-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb120-161"><a href="id_05_adversarial_computational_control.html#cb120-161" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-162"><a href="id_05_adversarial_computational_control.html#cb120-162" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb120-163"><a href="id_05_adversarial_computational_control.html#cb120-163" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb120-164"><a href="id_05_adversarial_computational_control.html#cb120-164" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-165"><a href="id_05_adversarial_computational_control.html#cb120-165" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-166"><a href="id_05_adversarial_computational_control.html#cb120-166" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb120-167"><a href="id_05_adversarial_computational_control.html#cb120-167" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-168"><a href="id_05_adversarial_computational_control.html#cb120-168" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-169"><a href="id_05_adversarial_computational_control.html#cb120-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb120-170"><a href="id_05_adversarial_computational_control.html#cb120-170" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb120-171"><a href="id_05_adversarial_computational_control.html#cb120-171" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb120-172"><a href="id_05_adversarial_computational_control.html#cb120-172" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb120-173"><a href="id_05_adversarial_computational_control.html#cb120-173" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb120-174"><a href="id_05_adversarial_computational_control.html#cb120-174" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb120-175"><a href="id_05_adversarial_computational_control.html#cb120-175" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb120-176"><a href="id_05_adversarial_computational_control.html#cb120-176" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb120-177"><a href="id_05_adversarial_computational_control.html#cb120-177" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb120-178"><a href="id_05_adversarial_computational_control.html#cb120-178" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb120-179"><a href="id_05_adversarial_computational_control.html#cb120-179" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb120-180"><a href="id_05_adversarial_computational_control.html#cb120-180" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb120-181"><a href="id_05_adversarial_computational_control.html#cb120-181" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb120-182"><a href="id_05_adversarial_computational_control.html#cb120-182" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb120-183"><a href="id_05_adversarial_computational_control.html#cb120-183" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb120-184"><a href="id_05_adversarial_computational_control.html#cb120-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb120-185"><a href="id_05_adversarial_computational_control.html#cb120-185" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-186"><a href="id_05_adversarial_computational_control.html#cb120-186" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb120-187"><a href="id_05_adversarial_computational_control.html#cb120-187" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb120-188"><a href="id_05_adversarial_computational_control.html#cb120-188" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb120-189"><a href="id_05_adversarial_computational_control.html#cb120-189" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-190"><a href="id_05_adversarial_computational_control.html#cb120-190" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb120-191"><a href="id_05_adversarial_computational_control.html#cb120-191" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb120-192"><a href="id_05_adversarial_computational_control.html#cb120-192" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb120-193"><a href="id_05_adversarial_computational_control.html#cb120-193" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb120-194"><a href="id_05_adversarial_computational_control.html#cb120-194" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb120-195"><a href="id_05_adversarial_computational_control.html#cb120-195" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb120-196"><a href="id_05_adversarial_computational_control.html#cb120-196" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb120-197"><a href="id_05_adversarial_computational_control.html#cb120-197" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb120-198"><a href="id_05_adversarial_computational_control.html#cb120-198" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb120-199"><a href="id_05_adversarial_computational_control.html#cb120-199" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb120-200"><a href="id_05_adversarial_computational_control.html#cb120-200" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb120-201"><a href="id_05_adversarial_computational_control.html#cb120-201" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-202"><a href="id_05_adversarial_computational_control.html#cb120-202" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb120-203"><a href="id_05_adversarial_computational_control.html#cb120-203" aria-hidden="true" tabindex="-1"></a>        <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-204"><a href="id_05_adversarial_computational_control.html#cb120-204" aria-hidden="true" tabindex="-1"></a>        <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb120-205"><a href="id_05_adversarial_computational_control.html#cb120-205" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb120-206"><a href="id_05_adversarial_computational_control.html#cb120-206" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb120-207"><a href="id_05_adversarial_computational_control.html#cb120-207" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-208"><a href="id_05_adversarial_computational_control.html#cb120-208" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb120-209"><a href="id_05_adversarial_computational_control.html#cb120-209" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-210"><a href="id_05_adversarial_computational_control.html#cb120-210" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-211"><a href="id_05_adversarial_computational_control.html#cb120-211" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb120-212"><a href="id_05_adversarial_computational_control.html#cb120-212" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb120-213"><a href="id_05_adversarial_computational_control.html#cb120-213" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb120-214"><a href="id_05_adversarial_computational_control.html#cb120-214" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb120-215"><a href="id_05_adversarial_computational_control.html#cb120-215" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb120-216"><a href="id_05_adversarial_computational_control.html#cb120-216" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb120-217"><a href="id_05_adversarial_computational_control.html#cb120-217" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb120-218"><a href="id_05_adversarial_computational_control.html#cb120-218" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> deeplearning_1<span class="sc">@</span>model_ids</span>
<span id="cb120-219"><a href="id_05_adversarial_computational_control.html#cb120-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb120-220"><a href="id_05_adversarial_computational_control.html#cb120-220" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb120-221"><a href="id_05_adversarial_computational_control.html#cb120-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb120-222"><a href="id_05_adversarial_computational_control.html#cb120-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb120-223"><a href="id_05_adversarial_computational_control.html#cb120-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb120-224"><a href="id_05_adversarial_computational_control.html#cb120-224" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb120-225"><a href="id_05_adversarial_computational_control.html#cb120-225" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb120-226"><a href="id_05_adversarial_computational_control.html#cb120-226" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-227"><a href="id_05_adversarial_computational_control.html#cb120-227" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb120-228"><a href="id_05_adversarial_computational_control.html#cb120-228" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-229"><a href="id_05_adversarial_computational_control.html#cb120-229" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb120-230"><a href="id_05_adversarial_computational_control.html#cb120-230" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb120-231"><a href="id_05_adversarial_computational_control.html#cb120-231" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-232"><a href="id_05_adversarial_computational_control.html#cb120-232" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-233"><a href="id_05_adversarial_computational_control.html#cb120-233" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb120-234"><a href="id_05_adversarial_computational_control.html#cb120-234" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-235"><a href="id_05_adversarial_computational_control.html#cb120-235" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-236"><a href="id_05_adversarial_computational_control.html#cb120-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb120-237"><a href="id_05_adversarial_computational_control.html#cb120-237" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb120-238"><a href="id_05_adversarial_computational_control.html#cb120-238" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb120-239"><a href="id_05_adversarial_computational_control.html#cb120-239" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb120-240"><a href="id_05_adversarial_computational_control.html#cb120-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb120-241"><a href="id_05_adversarial_computational_control.html#cb120-241" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb120-242"><a href="id_05_adversarial_computational_control.html#cb120-242" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb120-243"><a href="id_05_adversarial_computational_control.html#cb120-243" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb120-244"><a href="id_05_adversarial_computational_control.html#cb120-244" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb120-245"><a href="id_05_adversarial_computational_control.html#cb120-245" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb120-246"><a href="id_05_adversarial_computational_control.html#cb120-246" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb120-247"><a href="id_05_adversarial_computational_control.html#cb120-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-248"><a href="id_05_adversarial_computational_control.html#cb120-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb120-249"><a href="id_05_adversarial_computational_control.html#cb120-249" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-250"><a href="id_05_adversarial_computational_control.html#cb120-250" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb120-251"><a href="id_05_adversarial_computational_control.html#cb120-251" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb120-252"><a href="id_05_adversarial_computational_control.html#cb120-252" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-253"><a href="id_05_adversarial_computational_control.html#cb120-253" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-254"><a href="id_05_adversarial_computational_control.html#cb120-254" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb120-255"><a href="id_05_adversarial_computational_control.html#cb120-255" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-256"><a href="id_05_adversarial_computational_control.html#cb120-256" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-257"><a href="id_05_adversarial_computational_control.html#cb120-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb120-258"><a href="id_05_adversarial_computational_control.html#cb120-258" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb120-259"><a href="id_05_adversarial_computational_control.html#cb120-259" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb120-260"><a href="id_05_adversarial_computational_control.html#cb120-260" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb120-261"><a href="id_05_adversarial_computational_control.html#cb120-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb120-262"><a href="id_05_adversarial_computational_control.html#cb120-262" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb120-263"><a href="id_05_adversarial_computational_control.html#cb120-263" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb120-264"><a href="id_05_adversarial_computational_control.html#cb120-264" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb120-265"><a href="id_05_adversarial_computational_control.html#cb120-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb120-266"><a href="id_05_adversarial_computational_control.html#cb120-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb120-267"><a href="id_05_adversarial_computational_control.html#cb120-267" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb120-268"><a href="id_05_adversarial_computational_control.html#cb120-268" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-269"><a href="id_05_adversarial_computational_control.html#cb120-269" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb120-270"><a href="id_05_adversarial_computational_control.html#cb120-270" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb120-271"><a href="id_05_adversarial_computational_control.html#cb120-271" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors</span>
<span id="cb120-272"><a href="id_05_adversarial_computational_control.html#cb120-272" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb120-273"><a href="id_05_adversarial_computational_control.html#cb120-273" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-274"><a href="id_05_adversarial_computational_control.html#cb120-274" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-275"><a href="id_05_adversarial_computational_control.html#cb120-275" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb120-276"><a href="id_05_adversarial_computational_control.html#cb120-276" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-277"><a href="id_05_adversarial_computational_control.html#cb120-277" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="st">&quot;penetrating&quot;</span>],</span>
<span id="cb120-278"><a href="id_05_adversarial_computational_control.html#cb120-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb120-279"><a href="id_05_adversarial_computational_control.html#cb120-279" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb120-280"><a href="id_05_adversarial_computational_control.html#cb120-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-281"><a href="id_05_adversarial_computational_control.html#cb120-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb120-282"><a href="id_05_adversarial_computational_control.html#cb120-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb120-283"><a href="id_05_adversarial_computational_control.html#cb120-283" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation-4" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Inner cross-validation<a href="id_05_adversarial_computational_control.html#inner-cross-validation-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb121-1"><a href="id_05_adversarial_computational_control.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb121-2"><a href="id_05_adversarial_computational_control.html#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb121-3"><a href="id_05_adversarial_computational_control.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb121-4"><a href="id_05_adversarial_computational_control.html#cb121-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb121-5"><a href="id_05_adversarial_computational_control.html#cb121-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration_adversarial/&quot;</span>, prefix)</span>
<span id="cb121-6"><a href="id_05_adversarial_computational_control.html#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb121-7"><a href="id_05_adversarial_computational_control.html#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_cpp_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb121-8"><a href="id_05_adversarial_computational_control.html#cb121-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb122"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb122-1"><a href="id_05_adversarial_computational_control.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb122-2"><a href="id_05_adversarial_computational_control.html#cb122-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-3"><a href="id_05_adversarial_computational_control.html#cb122-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-4"><a href="id_05_adversarial_computational_control.html#cb122-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-5"><a href="id_05_adversarial_computational_control.html#cb122-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-6"><a href="id_05_adversarial_computational_control.html#cb122-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-7"><a href="id_05_adversarial_computational_control.html#cb122-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-8"><a href="id_05_adversarial_computational_control.html#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb122-9"><a href="id_05_adversarial_computational_control.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb122-10"><a href="id_05_adversarial_computational_control.html#cb122-10" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb122-11"><a href="id_05_adversarial_computational_control.html#cb122-11" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration_adversarial/&quot;</span>, prefix)</span>
<span id="cb122-12"><a href="id_05_adversarial_computational_control.html#cb122-12" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb122-13"><a href="id_05_adversarial_computational_control.html#cb122-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb122-14"><a href="id_05_adversarial_computational_control.html#cb122-14" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb122-15"><a href="id_05_adversarial_computational_control.html#cb122-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb122-16"><a href="id_05_adversarial_computational_control.html#cb122-16" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb122-17"><a href="id_05_adversarial_computational_control.html#cb122-17" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb122-18"><a href="id_05_adversarial_computational_control.html#cb122-18" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb122-19"><a href="id_05_adversarial_computational_control.html#cb122-19" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb122-20"><a href="id_05_adversarial_computational_control.html#cb122-20" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb122-21"><a href="id_05_adversarial_computational_control.html#cb122-21" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb122-22"><a href="id_05_adversarial_computational_control.html#cb122-22" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb122-23"><a href="id_05_adversarial_computational_control.html#cb122-23" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb122-24"><a href="id_05_adversarial_computational_control.html#cb122-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb122-25"><a href="id_05_adversarial_computational_control.html#cb122-25" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb122-26"><a href="id_05_adversarial_computational_control.html#cb122-26" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb122-27"><a href="id_05_adversarial_computational_control.html#cb122-27" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb122-28"><a href="id_05_adversarial_computational_control.html#cb122-28" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb122-29"><a href="id_05_adversarial_computational_control.html#cb122-29" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb122-30"><a href="id_05_adversarial_computational_control.html#cb122-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb122-31"><a href="id_05_adversarial_computational_control.html#cb122-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb122-32"><a href="id_05_adversarial_computational_control.html#cb122-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb122-33"><a href="id_05_adversarial_computational_control.html#cb122-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb122-34"><a href="id_05_adversarial_computational_control.html#cb122-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb122-35"><a href="id_05_adversarial_computational_control.html#cb122-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb122-36"><a href="id_05_adversarial_computational_control.html#cb122-36" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb122-37"><a href="id_05_adversarial_computational_control.html#cb122-37" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb122-38"><a href="id_05_adversarial_computational_control.html#cb122-38" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb122-39"><a href="id_05_adversarial_computational_control.html#cb122-39" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb122-40"><a href="id_05_adversarial_computational_control.html#cb122-40" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb122-41"><a href="id_05_adversarial_computational_control.html#cb122-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb122-42"><a href="id_05_adversarial_computational_control.html#cb122-42" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb122-43"><a href="id_05_adversarial_computational_control.html#cb122-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb122-44"><a href="id_05_adversarial_computational_control.html#cb122-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb122-45"><a href="id_05_adversarial_computational_control.html#cb122-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb122-46"><a href="id_05_adversarial_computational_control.html#cb122-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb122-47"><a href="id_05_adversarial_computational_control.html#cb122-47" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb122-48"><a href="id_05_adversarial_computational_control.html#cb122-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb122-49"><a href="id_05_adversarial_computational_control.html#cb122-49" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb122-50"><a href="id_05_adversarial_computational_control.html#cb122-50" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb122-51"><a href="id_05_adversarial_computational_control.html#cb122-51" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb122-52"><a href="id_05_adversarial_computational_control.html#cb122-52" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb122-53"><a href="id_05_adversarial_computational_control.html#cb122-53" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb122-54"><a href="id_05_adversarial_computational_control.html#cb122-54" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb122-55"><a href="id_05_adversarial_computational_control.html#cb122-55" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb122-56"><a href="id_05_adversarial_computational_control.html#cb122-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb122-57"><a href="id_05_adversarial_computational_control.html#cb122-57" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb122-58"><a href="id_05_adversarial_computational_control.html#cb122-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb122-59"><a href="id_05_adversarial_computational_control.html#cb122-59" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb122-60"><a href="id_05_adversarial_computational_control.html#cb122-60" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb122-61"><a href="id_05_adversarial_computational_control.html#cb122-61" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb122-62"><a href="id_05_adversarial_computational_control.html#cb122-62" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb122-63"><a href="id_05_adversarial_computational_control.html#cb122-63" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb122-64"><a href="id_05_adversarial_computational_control.html#cb122-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb122-65"><a href="id_05_adversarial_computational_control.html#cb122-65" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb122-66"><a href="id_05_adversarial_computational_control.html#cb122-66" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb122-67"><a href="id_05_adversarial_computational_control.html#cb122-67" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb122-68"><a href="id_05_adversarial_computational_control.html#cb122-68" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb122-69"><a href="id_05_adversarial_computational_control.html#cb122-69" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb122-70"><a href="id_05_adversarial_computational_control.html#cb122-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb122-71"><a href="id_05_adversarial_computational_control.html#cb122-71" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb122-72"><a href="id_05_adversarial_computational_control.html#cb122-72" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb122-73"><a href="id_05_adversarial_computational_control.html#cb122-73" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb122-74"><a href="id_05_adversarial_computational_control.html#cb122-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb122-75"><a href="id_05_adversarial_computational_control.html#cb122-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb122-76"><a href="id_05_adversarial_computational_control.html#cb122-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb122-77"><a href="id_05_adversarial_computational_control.html#cb122-77" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb122-78"><a href="id_05_adversarial_computational_control.html#cb122-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb122-79"><a href="id_05_adversarial_computational_control.html#cb122-79" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb122-80"><a href="id_05_adversarial_computational_control.html#cb122-80" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb122-81"><a href="id_05_adversarial_computational_control.html#cb122-81" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb122-82"><a href="id_05_adversarial_computational_control.html#cb122-82" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb122-83"><a href="id_05_adversarial_computational_control.html#cb122-83" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb122-84"><a href="id_05_adversarial_computational_control.html#cb122-84" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb122-85"><a href="id_05_adversarial_computational_control.html#cb122-85" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb122-86"><a href="id_05_adversarial_computational_control.html#cb122-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb122-87"><a href="id_05_adversarial_computational_control.html#cb122-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb122-88"><a href="id_05_adversarial_computational_control.html#cb122-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb122-89"><a href="id_05_adversarial_computational_control.html#cb122-89" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb122-90"><a href="id_05_adversarial_computational_control.html#cb122-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb122-91"><a href="id_05_adversarial_computational_control.html#cb122-91" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb122-92"><a href="id_05_adversarial_computational_control.html#cb122-92" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb122-93"><a href="id_05_adversarial_computational_control.html#cb122-93" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb122-94"><a href="id_05_adversarial_computational_control.html#cb122-94" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb122-95"><a href="id_05_adversarial_computational_control.html#cb122-95" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb122-96"><a href="id_05_adversarial_computational_control.html#cb122-96" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb122-97"><a href="id_05_adversarial_computational_control.html#cb122-97" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb122-98"><a href="id_05_adversarial_computational_control.html#cb122-98" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb122-99"><a href="id_05_adversarial_computational_control.html#cb122-99" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb122-100"><a href="id_05_adversarial_computational_control.html#cb122-100" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb122-101"><a href="id_05_adversarial_computational_control.html#cb122-101" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb122-102"><a href="id_05_adversarial_computational_control.html#cb122-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb122-103"><a href="id_05_adversarial_computational_control.html#cb122-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb122-104"><a href="id_05_adversarial_computational_control.html#cb122-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb122-105"><a href="id_05_adversarial_computational_control.html#cb122-105" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb122-106"><a href="id_05_adversarial_computational_control.html#cb122-106" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb122-107"><a href="id_05_adversarial_computational_control.html#cb122-107" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb122-108"><a href="id_05_adversarial_computational_control.html#cb122-108" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb122-109"><a href="id_05_adversarial_computational_control.html#cb122-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb122-110"><a href="id_05_adversarial_computational_control.html#cb122-110" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-111"><a href="id_05_adversarial_computational_control.html#cb122-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-112"><a href="id_05_adversarial_computational_control.html#cb122-112" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb122-113"><a href="id_05_adversarial_computational_control.html#cb122-113" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb122-114"><a href="id_05_adversarial_computational_control.html#cb122-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-115"><a href="id_05_adversarial_computational_control.html#cb122-115" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb122-116"><a href="id_05_adversarial_computational_control.html#cb122-116" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb122-117"><a href="id_05_adversarial_computational_control.html#cb122-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-118"><a href="id_05_adversarial_computational_control.html#cb122-118" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb122-119"><a href="id_05_adversarial_computational_control.html#cb122-119" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb122-120"><a href="id_05_adversarial_computational_control.html#cb122-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-121"><a href="id_05_adversarial_computational_control.html#cb122-121" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/cell_penetration_adversarial/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb122-122"><a href="id_05_adversarial_computational_control.html#cb122-122" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/cell_penetration_adversarial/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb122-123"><a href="id_05_adversarial_computational_control.html#cb122-123" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/cell_penetration_adversarial/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb122-124"><a href="id_05_adversarial_computational_control.html#cb122-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-125"><a href="id_05_adversarial_computational_control.html#cb122-125" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp_ad.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation-4" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Model evaluation<a href="id_05_adversarial_computational_control.html#model-evaluation-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb123-1"><a href="id_05_adversarial_computational_control.html#cb123-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb123-2"><a href="id_05_adversarial_computational_control.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb123-3"><a href="id_05_adversarial_computational_control.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-4"><a href="id_05_adversarial_computational_control.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb123-5"><a href="id_05_adversarial_computational_control.html#cb123-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb123-6"><a href="id_05_adversarial_computational_control.html#cb123-6" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb123-7"><a href="id_05_adversarial_computational_control.html#cb123-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb123-8"><a href="id_05_adversarial_computational_control.html#cb123-8" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb123-9"><a href="id_05_adversarial_computational_control.html#cb123-9" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb123-10"><a href="id_05_adversarial_computational_control.html#cb123-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb123-11"><a href="id_05_adversarial_computational_control.html#cb123-11" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb123-12"><a href="id_05_adversarial_computational_control.html#cb123-12" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb123-13"><a href="id_05_adversarial_computational_control.html#cb123-13" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb123-14"><a href="id_05_adversarial_computational_control.html#cb123-14" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb123-15"><a href="id_05_adversarial_computational_control.html#cb123-15" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb123-16"><a href="id_05_adversarial_computational_control.html#cb123-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb123-17"><a href="id_05_adversarial_computational_control.html#cb123-17" aria-hidden="true" tabindex="-1"></a>    logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-18"><a href="id_05_adversarial_computational_control.html#cb123-18" aria-hidden="true" tabindex="-1"></a>    MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-19"><a href="id_05_adversarial_computational_control.html#cb123-19" aria-hidden="true" tabindex="-1"></a>    F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-20"><a href="id_05_adversarial_computational_control.html#cb123-20" aria-hidden="true" tabindex="-1"></a>    acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-21"><a href="id_05_adversarial_computational_control.html#cb123-21" aria-hidden="true" tabindex="-1"></a>    EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-22"><a href="id_05_adversarial_computational_control.html#cb123-22" aria-hidden="true" tabindex="-1"></a>    BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-23"><a href="id_05_adversarial_computational_control.html#cb123-23" aria-hidden="true" tabindex="-1"></a>    threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb123-24"><a href="id_05_adversarial_computational_control.html#cb123-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb123-25"><a href="id_05_adversarial_computational_control.html#cb123-25" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>], <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb123-26"><a href="id_05_adversarial_computational_control.html#cb123-26" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb123-27"><a href="id_05_adversarial_computational_control.html#cb123-27" aria-hidden="true" tabindex="-1"></a>      y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb123-28"><a href="id_05_adversarial_computational_control.html#cb123-28" aria-hidden="true" tabindex="-1"></a>      logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-29"><a href="id_05_adversarial_computational_control.html#cb123-29" aria-hidden="true" tabindex="-1"></a>      MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb123-30"><a href="id_05_adversarial_computational_control.html#cb123-30" aria-hidden="true" tabindex="-1"></a>      F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-31"><a href="id_05_adversarial_computational_control.html#cb123-31" aria-hidden="true" tabindex="-1"></a>      acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-32"><a href="id_05_adversarial_computational_control.html#cb123-32" aria-hidden="true" tabindex="-1"></a>      EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb123-33"><a href="id_05_adversarial_computational_control.html#cb123-33" aria-hidden="true" tabindex="-1"></a>      BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb123-34"><a href="id_05_adversarial_computational_control.html#cb123-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb123-35"><a href="id_05_adversarial_computational_control.html#cb123-35" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb123-36"><a href="id_05_adversarial_computational_control.html#cb123-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb123-37"><a href="id_05_adversarial_computational_control.html#cb123-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb123-38"><a href="id_05_adversarial_computational_control.html#cb123-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb123-39"><a href="id_05_adversarial_computational_control.html#cb123-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb123-40"><a href="id_05_adversarial_computational_control.html#cb123-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb123-41"><a href="id_05_adversarial_computational_control.html#cb123-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb123-42"><a href="id_05_adversarial_computational_control.html#cb123-42" aria-hidden="true" tabindex="-1"></a>      logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb123-43"><a href="id_05_adversarial_computational_control.html#cb123-43" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb123-44"><a href="id_05_adversarial_computational_control.html#cb123-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb123-45"><a href="id_05_adversarial_computational_control.html#cb123-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb123-46"><a href="id_05_adversarial_computational_control.html#cb123-46" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb123-47"><a href="id_05_adversarial_computational_control.html#cb123-47" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb123-48"><a href="id_05_adversarial_computational_control.html#cb123-48" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb123-49"><a href="id_05_adversarial_computational_control.html#cb123-49" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb123-50"><a href="id_05_adversarial_computational_control.html#cb123-50" aria-hidden="true" tabindex="-1"></a>        logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-51"><a href="id_05_adversarial_computational_control.html#cb123-51" aria-hidden="true" tabindex="-1"></a>        MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-52"><a href="id_05_adversarial_computational_control.html#cb123-52" aria-hidden="true" tabindex="-1"></a>        F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-53"><a href="id_05_adversarial_computational_control.html#cb123-53" aria-hidden="true" tabindex="-1"></a>        acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-54"><a href="id_05_adversarial_computational_control.html#cb123-54" aria-hidden="true" tabindex="-1"></a>        EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-55"><a href="id_05_adversarial_computational_control.html#cb123-55" aria-hidden="true" tabindex="-1"></a>        BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb123-56"><a href="id_05_adversarial_computational_control.html#cb123-56" aria-hidden="true" tabindex="-1"></a>        threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb123-57"><a href="id_05_adversarial_computational_control.html#cb123-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb123-58"><a href="id_05_adversarial_computational_control.html#cb123-58" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>], <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb123-59"><a href="id_05_adversarial_computational_control.html#cb123-59" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb123-60"><a href="id_05_adversarial_computational_control.html#cb123-60" aria-hidden="true" tabindex="-1"></a>          y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb123-61"><a href="id_05_adversarial_computational_control.html#cb123-61" aria-hidden="true" tabindex="-1"></a>          logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-62"><a href="id_05_adversarial_computational_control.html#cb123-62" aria-hidden="true" tabindex="-1"></a>          MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb123-63"><a href="id_05_adversarial_computational_control.html#cb123-63" aria-hidden="true" tabindex="-1"></a>          F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-64"><a href="id_05_adversarial_computational_control.html#cb123-64" aria-hidden="true" tabindex="-1"></a>          acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb123-65"><a href="id_05_adversarial_computational_control.html#cb123-65" aria-hidden="true" tabindex="-1"></a>          EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb123-66"><a href="id_05_adversarial_computational_control.html#cb123-66" aria-hidden="true" tabindex="-1"></a>          BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb123-67"><a href="id_05_adversarial_computational_control.html#cb123-67" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb123-68"><a href="id_05_adversarial_computational_control.html#cb123-68" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb123-69"><a href="id_05_adversarial_computational_control.html#cb123-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb123-70"><a href="id_05_adversarial_computational_control.html#cb123-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb123-71"><a href="id_05_adversarial_computational_control.html#cb123-71" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb123-72"><a href="id_05_adversarial_computational_control.html#cb123-72" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb123-73"><a href="id_05_adversarial_computational_control.html#cb123-73" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb123-74"><a href="id_05_adversarial_computational_control.html#cb123-74" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb123-75"><a href="id_05_adversarial_computational_control.html#cb123-75" aria-hidden="true" tabindex="-1"></a>          logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb123-76"><a href="id_05_adversarial_computational_control.html#cb123-76" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb123-77"><a href="id_05_adversarial_computational_control.html#cb123-77" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb123-78"><a href="id_05_adversarial_computational_control.html#cb123-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb123-79"><a href="id_05_adversarial_computational_control.html#cb123-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb123-80"><a href="id_05_adversarial_computational_control.html#cb123-80" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb123-81"><a href="id_05_adversarial_computational_control.html#cb123-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb123-82"><a href="id_05_adversarial_computational_control.html#cb123-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Log loss mean&quot;</span>, <span class="st">&quot;Log loss s.e.m.&quot;</span>, <span class="st">&quot;MCC mean&quot;</span>, <span class="st">&quot;MCC s.e.m.&quot;</span>, <span class="st">&quot;F_1 mean&quot;</span>, <span class="st">&quot;F_1 s.e.m.&quot;</span>,</span>
<span id="cb123-83"><a href="id_05_adversarial_computational_control.html#cb123-83" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Accuracy mean&quot;</span>, <span class="st">&quot;Accuracy s.e.m.&quot;</span>, <span class="st">&quot;EF mean&quot;</span>, <span class="st">&quot;EF s.e.m.&quot;</span>, <span class="st">&quot;BEDROC mean&quot;</span>, <span class="st">&quot;BEDROC s.e.m.&quot;</span>,</span>
<span id="cb123-84"><a href="id_05_adversarial_computational_control.html#cb123-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Log loss CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;MCC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;F_1 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb123-85"><a href="id_05_adversarial_computational_control.html#cb123-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Accuracy CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;EF CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;BEDROC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb123-86"><a href="id_05_adversarial_computational_control.html#cb123-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb123-87"><a href="id_05_adversarial_computational_control.html#cb123-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb123-88"><a href="id_05_adversarial_computational_control.html#cb123-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb123-89"><a href="id_05_adversarial_computational_control.html#cb123-89" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb123-90"><a href="id_05_adversarial_computational_control.html#cb123-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb123-91"><a href="id_05_adversarial_computational_control.html#cb123-91" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb123-92"><a href="id_05_adversarial_computational_control.html#cb123-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb123-93"><a href="id_05_adversarial_computational_control.html#cb123-93" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection-4" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Inner loop model selection<a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb124-1"><a href="id_05_adversarial_computational_control.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp_ad.RData&quot;</span>)</span>
<span id="cb124-2"><a href="id_05_adversarial_computational_control.html#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="id_05_adversarial_computational_control.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb124-4"><a href="id_05_adversarial_computational_control.html#cb124-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb124-5"><a href="id_05_adversarial_computational_control.html#cb124-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb124-6"><a href="id_05_adversarial_computational_control.html#cb124-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb124-7"><a href="id_05_adversarial_computational_control.html#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb124-8"><a href="id_05_adversarial_computational_control.html#cb124-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb124-9"><a href="id_05_adversarial_computational_control.html#cb124-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb124-10"><a href="id_05_adversarial_computational_control.html#cb124-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb124-11"><a href="id_05_adversarial_computational_control.html#cb124-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb124-12"><a href="id_05_adversarial_computational_control.html#cb124-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb124-13"><a href="id_05_adversarial_computational_control.html#cb124-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb124-14"><a href="id_05_adversarial_computational_control.html#cb124-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb124-15"><a href="id_05_adversarial_computational_control.html#cb124-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb124-16"><a href="id_05_adversarial_computational_control.html#cb124-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb124-17"><a href="id_05_adversarial_computational_control.html#cb124-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb124-18"><a href="id_05_adversarial_computational_control.html#cb124-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb124-19"><a href="id_05_adversarial_computational_control.html#cb124-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb124-20"><a href="id_05_adversarial_computational_control.html#cb124-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb124-21"><a href="id_05_adversarial_computational_control.html#cb124-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb124-22"><a href="id_05_adversarial_computational_control.html#cb124-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb124-23"><a href="id_05_adversarial_computational_control.html#cb124-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb124-24"><a href="id_05_adversarial_computational_control.html#cb124-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb124-25"><a href="id_05_adversarial_computational_control.html#cb124-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb124-26"><a href="id_05_adversarial_computational_control.html#cb124-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb124-27"><a href="id_05_adversarial_computational_control.html#cb124-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb124-28"><a href="id_05_adversarial_computational_control.html#cb124-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb124-29"><a href="id_05_adversarial_computational_control.html#cb124-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb124-30"><a href="id_05_adversarial_computational_control.html#cb124-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb124-31"><a href="id_05_adversarial_computational_control.html#cb124-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb124-32"><a href="id_05_adversarial_computational_control.html#cb124-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb124-33"><a href="id_05_adversarial_computational_control.html#cb124-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb124-34"><a href="id_05_adversarial_computational_control.html#cb124-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb124-35"><a href="id_05_adversarial_computational_control.html#cb124-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb124-36"><a href="id_05_adversarial_computational_control.html#cb124-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb124-37"><a href="id_05_adversarial_computational_control.html#cb124-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb124-38"><a href="id_05_adversarial_computational_control.html#cb124-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb124-39"><a href="id_05_adversarial_computational_control.html#cb124-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb124-40"><a href="id_05_adversarial_computational_control.html#cb124-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb124-41"><a href="id_05_adversarial_computational_control.html#cb124-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb124-42"><a href="id_05_adversarial_computational_control.html#cb124-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb124-43"><a href="id_05_adversarial_computational_control.html#cb124-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb124-44"><a href="id_05_adversarial_computational_control.html#cb124-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb124-45"><a href="id_05_adversarial_computational_control.html#cb124-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb124-46"><a href="id_05_adversarial_computational_control.html#cb124-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-47"><a href="id_05_adversarial_computational_control.html#cb124-47" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb124-48"><a href="id_05_adversarial_computational_control.html#cb124-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb124-49"><a href="id_05_adversarial_computational_control.html#cb124-49" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1-4" class="section level4 hasAnchor" number="5.3.4.1">
<h4><span class="header-section-number">5.3.4.1</span> CV 1<a href="id_05_adversarial_computational_control.html#cv-1-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-735e081a3167dd4f35e1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-735e081a3167dd4f35e1">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 68","GBM grid model 89","GBM grid model 3","GBM grid model 53","GBM grid model 63","GBM grid model 96","GBM grid model 11","Super learner final","GBM grid model 50","GBM grid model 45","GBM grid model 70","GBM grid model 61","GBM grid model 54","GBM grid model 76","Neural network grid model 76","Neural network grid model 20","GBM grid model 12","GBM grid model 92","GBM grid model 79","GBM grid model 14","GBM grid model 83","Super learner GBM","GBM grid model 52","GBM grid model 24","Neural network grid model 37","GBM grid model 78","GBM grid model 21","GBM grid model 64","GBM grid model 93","GBM grid model 95","XGBoost grid model 66","Neural network grid model 34","GBM grid model 30","GBM grid model 77","GBM grid model 18","GBM grid model 23","GBM grid model 31","GBM grid model 90","GBM grid model 6","GBM grid model 7","GBM grid model 98","Neural network grid model 21","GBM grid model 15","GBM grid model 94","XGBoost grid model 8","GBM grid model 5","GBM grid model 46","Neural network grid model 99","GBM grid model 51","Neural network grid model 28","GBM grid model 60","GBM grid model 88","XGBoost grid model 14","GBM grid model 16","GBM grid model 100","GBM grid model 82","Neural network grid model 71","GBM grid model 20","GBM grid model 13","GBM grid model 47","Neural network grid model 33","Neural network grid model 24","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","GBM grid model 28","GBM grid model 87","Neural network grid model 3"],[0.4165,0.9698,0.5781,null,0.3388,0.228,0.6797,0.4803,0.2515,0.1641,0.0966,0.2755,0.3062,0.3062,0.3062,0.3388,0.2755,0.3062,0.144,0.4165,0.2515,0.0859,0.2755,0.1845,0.0008,0.1247,0.2755,0.2755,0.2755,0.1641,0.0859,0.11,0.4165,0.0535,0.228,0.1641,0.11,0.2076,0.0859,0.1845,0.1247,0.11,0.2755,0.2515,0.0535,0.228,0.1845,0.3388,0.2755,0.0966,0.228,0.0966,0.2076,0.1247,0.2755,0.11,0.0157,0.228,0.0738,0.3388,0.0462,0.0535,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.453,0.0966,0.0625,0.0039],[null,0.6864,0.7335,0.8531,0.9729,0.8666,0.6354,0.773,0.7335,0.773,0.8254,0.3053,1,0.5557,0.8666,0.8666,0.5557,0.5469,0.5557,0.4177,0.4398,0.5878,0.9729,0.5878,0.773,0.2418,0.3555,0.3555,0.3053,0.3555,0.4177,0.3825,0.3053,0.2887,0.5878,0.2081,0.5878,0.2535,0.2703,0.3825,0.3825,0.3825,0.2081,0.2866,0.4177,0.2081,0.2535,0.2535,0.2866,0.773,0.333,0.3555,0.333,0.3555,0.2081,0.2887,0.2081,0.2887,0.3053,0.2535,0.3825,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.1287,0.3053,0.1877,0.1287],[0.1956,0.2194,0.2755,0.1956,null,0.2451,0.0682,0.2336,0.4209,0.1416,0.3051,0.4901,0.2071,0.5118,0.2755,0.1416,0.1018,0.1416,0.0878,0.1169,0.0588,0.064,0.1956,0.0878,0.7559,0.0682,0.1956,0.1956,0.1329,0.078,0.1517,0.4209,0.34,0.0588,0.0878,0.0682,0.1169,0.1253,0.0588,0.0513,0.0841,0.3051,0.2909,0.0941,0.0588,0.0941,0.1169,0.1956,0.0878,0.078,0.0513,0.0878,0.0513,0.34,0.1625,0.0682,null,0.34,0.1517,0.11,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0737,0.0588,null],[0.6403,0.803,0.9425,0.5232,0.4398,0.6195,0.3094,0.8605,0.3243,0.4226,0.6195,0.1749,0.3375,0.2042,0.5048,0.9151,0.3243,0.2513,0.3243,0.2301,0.1981,0.4055,0.4398,0.3703,null,0.1749,0.1816,0.1816,0.1504,0.1873,0.3243,0.3526,0.1566,0.2123,0.1749,0.1611,0.3094,0.1873,0.1684,0.1816,0.2394,0.4226,0.1504,0.1504,0.2708,0.1504,0.1504,0.2394,0.1504,0.571,0.2301,0.1981,0.2951,0.192,0.1504,0.1504,0.2951,0.1504,0.1504,0.1504,0.2513,0.1611,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504,0.1504],[5,6,4,1,31,67,7,66,36,79,107,37,63,34,82,154,59,30,104,9,56,128,134,126,261,78,38.5,38.5,27,52,138,124,33,122,43,72,116,54,81,84,123,141,47,46,265,57,64,114,35,184,98,105,71,83,41,75,202,68,87,32,164,196,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,77,127,203],[1,3,4,13,7,8,26,20,27,21,14,40,38,39,12,16,32,58,25,56,53,45,47,59,5,99,96.5,96.5,81,83,64,70,116,93,100,130,72,120,126,115,95,110,155,151,73,164,165,175,152,37,125,146,79,150,171,177,214,203,169,224,122,250,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,288,277,311],[17,8,19,18,1,14,44,21,4,11,10,2,15,3,66,12,48,24,40,60,27,61,38,39,41,20,25.5,25.5,16,76,65,115,9,37,59,32,91,54,36,51,53,111,6,42,50,31,7,98,35,229,119,46,222,23,22,28,62,5,33,78,273,56,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,81,154,292],[4,10.5,5.5,19,22,13.5,38.5,8.5,49.5,24.5,17,82.5,53,93,13.5,5.5,53,82.5,29.5,82.5,82.5,26,58.5,69,1,113.5,150.5,150.5,196,113.5,58.5,29.5,196,102.5,158,131,102.5,158,145,139,122.5,34.5,203,210.5,63.5,210.5,229,82.5,249,22,131,177,102.5,221,244,221,45.5,259.5,259.5,282.5,69,131,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,302,274.5,302],[27,27.5,32.5,51,61,102.5,115.5,115.5,116.5,135.5,148,161.5,169,169,173.5,187.5,192,194.5,198.5,207.5,218.5,260,277.5,293,308,310.5,311,311,320,324.5,325.5,338.5,354,354.5,360,365,381.5,386,388,389,393.5,396.5,411,449.5,451.5,462.5,465,469.5,471,472,473,474,474.5,477,478,501,523.5,535.5,548.5,616.5,628,633,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,748,832.5,1108]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2-4" class="section level4 hasAnchor" number="5.3.4.2">
<h4><span class="header-section-number">5.3.4.2</span> CV 2<a href="id_05_adversarial_computational_control.html#cv-2-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-47dd9bd80114b2229694" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-47dd9bd80114b2229694">{"x":{"filter":"none","vertical":false,"data":[["Super learner XGBoost","Super learner all models","XGBoost grid model 66","Neural network grid model 20","Neural network grid model 24","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 71"],[null,0.5726,0.177,0.1244,0.0078,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.4486,0.001],[null,0.3847,0.0776,0.0663,0.0401,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.0068,0.01],[null,0.6633,0.0785,0.118,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,0.595,0.0501,0.0753,0.0201,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0072,0.0133],[1,3,151,163,196,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,233],[1,2,20,8,82,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,198,219],[1,2,15,79,37,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,190],[1,2,28,4.5,42.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,169.5,108],[4,9,214,254.5,357.5,678.5,679.5,680.5,681.5,682.5,683.5,684.5,685.5,686.5,687.5,688.5,689.5,690.5,691.5,692.5,693.5,694.5,750]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3-4" class="section level4 hasAnchor" number="5.3.4.3">
<h4><span class="header-section-number">5.3.4.3</span> CV 3<a href="id_05_adversarial_computational_control.html#cv-3-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-936f4efef8142e9d360b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-936f4efef8142e9d360b">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 75","GBM grid model 3","GBM grid model 41","GBM grid model 56","Neural network grid model 91","GBM grid model 99","Super learner GBM","GBM grid model 60","GBM grid model 31","GBM grid model 54","Neural network grid model 8","Neural network grid model 5","GBM grid model 69","Neural network grid model 81","Neural network grid model 23","GBM grid model 10","Super learner final","Neural network grid model 33","GBM grid model 20","Neural network grid model 21","GBM grid model 29","GBM grid model 45","Super learner neural network","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 54"],[0.9618,0.9618,0.7836,0.3563,0.3223,0.3563,0.9618,0.2892,0.1877,0.5715,0.0603,0.0513,0.2614,0.2067,0.0948,0.1453,0.2892,0.1662,0.5715,0.1453,null,0.127,0.127,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.0007],[0.5239,0.1405,0.2237,0.1079,0.3537,0.1564,null,0.3537,0.1564,0.2517,0.0459,0.6232,0.1079,0.0943,0.3003,0.2237,0.1162,0.0659,0.1748,0.1748,0.0189,0.2237,0.0841,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0141,0.0841],[0.9716,0.851,0.6136,0.7162,0.5686,0.5901,1,0.1837,0.34,0.1837,null,0.5901,0.2861,0.689,0.34,0.1926,0.6378,null,0.3893,0.34,0.3295,0.2274,0.5007,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.225,0.0627,0.1247,0.053,0.1247,0.0753,null,0.0712,0.0881,0.0714,0.0349,0.1016,0.0716,0.0823,0.0932,0.1247,0.0823,0.176,0.0585,0.1846,0.0116,0.1171,0.1021,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0282,0.0307],[2,4,5,61,40,42,97,58,93,9,134,197,81,131,149,132,101,162,29,141,1,110,125,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,286],[2,12,18,9,21,19,1,6,31,34,43,3,69,80,40,44,130,102,111,58,206,156,217,168,168,168,168,168,168,168,168,168,168,168,168,168,168,168,168,168,152],[6,8,16,5,13,9,2,62,25,93,1,4,26,36,68,51,24,35,22,220,53,140,230,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,166],[3.5,11.5,25.5,7,16.5,21.5,1,16.5,40,65.5,48.5,29,72,32.5,40,72,48.5,5.5,197.5,32.5,264,159,72,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,159],[13.5,35.5,64.5,82,90.5,91.5,101,142.5,189,201.5,226.5,233,248,279.5,297,299,303.5,304.5,359.5,451.5,524,565,644,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,763]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4-4" class="section level4 hasAnchor" number="5.3.4.4">
<h4><span class="header-section-number">5.3.4.4</span> CV 4<a href="id_05_adversarial_computational_control.html#cv-4-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ad10a0c83f01431a772e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ad10a0c83f01431a772e">{"x":{"filter":"none","vertical":false,"data":[["Super learner XGBoost","GBM grid model 94","Neural network grid model 86","Neural network grid model 71","Neural network grid model 94","Neural network grid model 47","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 9"],[0.1272,null,0.1118,0.0005,0.1374,0.0005,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.1321,0.0005],[0.4531,0.4627,0.3563,null,0.3907,0.0952,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.063,0.067],[0.0848,0.0039,0.0627,0.1143,0.0848,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.4406,0.3633,0.6106,null,0.3633,0.0818,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0894,0.0743],[109,1,127,204,125,179,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,261],[11,15,19,1,48,195,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,164,201],[44,131,52,7,37,1,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,40],[10,27.5,9,1,30.5,213.5,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,192.5],[174,174.5,207,213,240.5,588.5,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,694.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5-4" class="section level4 hasAnchor" number="5.3.4.5">
<h4><span class="header-section-number">5.3.4.5</span> CV 5<a href="id_05_adversarial_computational_control.html#cv-5-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ecfa1abb6aaab24bdece" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ecfa1abb6aaab24bdece">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 21","GBM grid model 64","GBM grid model 15","GBM grid model 63","GBM grid model 51","Neural network grid model 82","Neural network grid model 55","Neural network grid model 8","Neural network grid model 33","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99"],[0.9618,0.9618,0.3866,null,0.5171,0.1926,0.0005,0.4253,0.005,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0.6841,0.6841,0.5838,0.2977,0.1919,0.5359,null,0.2977,0.0671,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564,0.0564],[0.0845,0.0845,0.0521,0.0274,0.0611,0.1548,0.2946,0.125,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.5123,0.5123,0.5123,0.237,0.129,0.6087,null,0.328,0.0708,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407,0.0407],[3.5,3.5,9,1,31,107,208,59,244,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[4.5,4.5,7,32,47,20,1,44,83,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138],[15.5,15.5,12,38,27,40,35,196,1,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315],[8,8,10,36,72,15,1,30.5,79.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5,125.5],[31.5,31.5,38,107,177,182,245,329.5,407.5,581.5,582.5,583.5,584.5,585.5,586.5,587.5,588.5,589.5,590.5,591.5,592.5,593.5,594.5,595.5,596.5,597.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6-4" class="section level4 hasAnchor" number="5.3.4.6">
<h4><span class="header-section-number">5.3.4.6</span> CV 6<a href="id_05_adversarial_computational_control.html#cv-6-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-8cb6f98acf4bb4236015" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8cb6f98acf4bb4236015">{"x":{"filter":"none","vertical":false,"data":[["Super learner final","Neural network grid model 89","GBM grid model 9","Neural network grid model 31","Neural network grid model 86","Neural network grid model 21","Neural network grid model 60","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99"],[0.4829,0.2412,null,0.4524,0.0296,0.0139,0.0059,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829,0.4829],[0.2775,0.2493,0.0761,0.1331,0.0428,null,0.0685,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202,0.0202],[0.0567,0.1405,0.0026,0.1405,null,0.091,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.2885,0.0885,0.0261,0.2108,0.0172,null,0.0146,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086,0.0086],[24,126,1,113,152,158,195,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[10,21,49,58,99,1,96,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217],[54,25,154,162,92,255,1,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315],[3,36.5,66.5,16,51.5,1,123,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5,173.5],[91,208.5,270.5,349,394.5,415,415,725.5,726.5,727.5,728.5,729.5,730.5,731.5,732.5,733.5,734.5,735.5,736.5,737.5,738.5,739.5,740.5,741.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7-4" class="section level4 hasAnchor" number="5.3.4.7">
<h4><span class="header-section-number">5.3.4.7</span> CV 7<a href="id_05_adversarial_computational_control.html#cv-7-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-a9779b3bc17f310a24c0" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a9779b3bc17f310a24c0">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 15","GBM grid model 94","GBM grid model 81","Neural network grid model 31","Neural network grid model 28","Neural network grid model 86","Neural network grid model 21","Neural network grid model 89","Neural network grid model 8","Neural network grid model 7","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 39"],[0.4605,0.3893,null,0.2262,0.006,0.0355,0.2262,0.0926,0.5763,0.1385,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.4605,0.0006],[0.4329,0.3549,0.2877,0.1243,null,0.2027,0.6776,0.0958,0.071,0.1604,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0209],[0.1477,0.0772,0.0363,0.373,0.5558,null,0.2083,null,0.2674,0.2217,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.2049,0.1486,0.1486,0.2162,null,0.0944,0.259,0.3054,0.1009,0.0605,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.012,0.0133],[7,9,1,124,195,147,136,134,87,129,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,225],[3,5,13,35,1,53,33,103,162,159,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,274],[31,26,45,7,4,1,16,2,10,24,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,282],[6.5,27.5,40,4,1,5,27.5,3,63.5,105,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,259.5,210.5],[47.5,67.5,99,170,201,206,212.5,242,322.5,417,838.5,839.5,840.5,841.5,842.5,843.5,844.5,845.5,846.5,847.5,848.5,849.5,850.5,851.5,852.5,853.5,854.5,991.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8-4" class="section level4 hasAnchor" number="5.3.4.8">
<h4><span class="header-section-number">5.3.4.8</span> CV 8<a href="id_05_adversarial_computational_control.html#cv-8-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-3f319c07fd6b893a122e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3f319c07fd6b893a122e">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 6","GBM grid model 71","Neural network grid model 20","Neural network grid model 28","Neural network grid model 99","Neural network grid model 27","Neural network grid model 5","Neural network grid model 59","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Super learner GBM","Neural network grid model 33"],[null,0.2849,0.5136,0.0642,0.0545,0.0545,0.0867,0.0006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.0545,0.0006],[0.5324,0.9097,null,0.6272,0.3669,0.0905,0.1941,0.0612,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0203,0.0739,0.0445],[0.0182,0.0824,0.2603,0.1096,0.1793,0.0528,0.246,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0714,null],[0.2003,0.3357,null,0.5994,0.3181,0.0509,0.5033,0.022,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.1246,0.2003,0.022],[1,69,157,185,103,113,118,259,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,153,214],[15,13,1,6,22,140,88,145,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,259,287],[46,19,23,42,116,74,263,1,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,148,53],[28.5,24.5,1,5,11.5,53.5,8,192.5,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,89,264.5],[90.5,125.5,182,238,252.5,380.5,477,597.5,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,649,818.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9-4" class="section level4 hasAnchor" number="5.3.4.9">
<h4><span class="header-section-number">5.3.4.9</span> CV 9<a href="id_05_adversarial_computational_control.html#cv-9-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-815b1226684bf7790d24" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-815b1226684bf7790d24">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 76","GBM grid model 81","GBM grid model 33","GBM grid model 46","GBM grid model 16","Neural network grid model 72","GBM grid model 63","Neural network grid model 64","Neural network grid model 15","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 87"],[0.8215,0.8727,null,0.9602,1,0.4988,0.9169,0.0832,0.189,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.0187],[0.1933,0.2193,0.3847,0.068,0.1151,null,0.0606,0.0897,0.068,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0012,0.0317],[null,0.1311,0.0422,0.0982,0.0598,0.0059,0.1741,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.3421,0.0532,0.3425,0.1013,0.1351,null,0.0952,0.0647,0.0175,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0201,0.0575],[8,7,1,52,2,111,6,155,151,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,250],[3,20,13,45,82,1,150,64,91,188,188,188,188,188,188,188,188,188,188,188,188,188,188,188,188,188,134],[1,8,35,15,23,150,5,281,221,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,283],[3,26.5,13.5,39.5,67.5,1,120.5,50.5,109,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,251.5,120.5],[15,61.5,62.5,151.5,174.5,263,281.5,550.5,572,767.5,768.5,769.5,770.5,771.5,772.5,773.5,774.5,775.5,776.5,777.5,778.5,779.5,780.5,781.5,782.5,783.5,787.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10-4" class="section level4 hasAnchor" number="5.3.4.10">
<h4><span class="header-section-number">5.3.4.10</span> CV 10<a href="id_05_adversarial_computational_control.html#cv-10-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-ab08f5362e0a50ebaaf5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ab08f5362e0a50ebaaf5">{"x":{"filter":"none","vertical":false,"data":[["Neural network grid model 86","Super learner XGBoost","XGBoost grid model 88","Neural network grid model 93","Neural network grid model 96","Super learner GBM","Super learner all models","Neural network grid model 61","Neural network grid model 72","Neural network grid model 55","Neural network grid model 21","Neural network grid model 85","Neural network grid model 71","XGBoost grid model 10","XGBoost grid model 100","XGBoost grid model 26","XGBoost grid model 29","XGBoost grid model 31","XGBoost grid model 32","XGBoost grid model 40","XGBoost grid model 43","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 62","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 83","XGBoost grid model 90","XGBoost grid model 96","XGBoost grid model 99","Neural network grid model 31","Neural network grid model 77","Neural network grid model 38","Neural network grid model 66"],[0.1252,0.1252,0.4683,0.4683,0.1252,0.1252,0.0021,0.1252,0.1252,0.1252,0.4683,0.0002,0.1252,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.4683,0.4683,0.1252,0.0021],[0.7432,0.6953,null,0.6953,0.5522,0.8501,0.799,0.2543,0.4628,0.3044,0.2779,0.4261,0.2779,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.488,0.2478,0.4628,0.2779,0.1738],[0.1261,0.1347,0.007,0.4723,0.1086,0.0945,0.2136,0.3422,0.3049,0.1882,0.165,null,0.9396,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0945,0.058,0.2136,null],[0.8027,0.7472,0.8906,1,0.5579,0.5764,null,0.9426,0.9182,0.5579,0.5385,0.3108,0.6224,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.4207,0.3874,0.4064,0.1699],[78,105,22,130,109,128,201,110,129,140,87,268,121,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,79,212,188,210],[6,4,1,18,27,15,2,79,66,116,109,43,165,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,188,120,220,265],[49,31,145,25,30,39,23,40,61,77,155,1,101,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,76,85,106,267],[6.5,8,3,4,29,13.5,1,6.5,5,34,23,94.5,25.5,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,113.5,58,123.5,146.5],[139.5,148,171,177,195,195.5,227,235.5,261,367,374,406.5,412.5,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,456.5,475,637.5,888.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation-4" class="section level3 hasAnchor" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Final evaluation<a href="id_05_adversarial_computational_control.html#final-evaluation-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb125"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb125-1"><a href="id_05_adversarial_computational_control.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb125-2"><a href="id_05_adversarial_computational_control.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_cpp_ad.RData&quot;</span>)</span>
<span id="cb125-3"><a href="id_05_adversarial_computational_control.html#cb125-3" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/cell_penetration_adversarial&quot;</span></span>
<span id="cb125-4"><a href="id_05_adversarial_computational_control.html#cb125-4" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb125-5"><a href="id_05_adversarial_computational_control.html#cb125-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 68&quot;</span>, <span class="st">&quot;Super learner XGBoost&quot;</span>, <span class="st">&quot;GBM grid model 75&quot;</span>,</span>
<span id="cb125-6"><a href="id_05_adversarial_computational_control.html#cb125-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Super learner XGBoost&quot;</span>, <span class="st">&quot;GBM grid model 21&quot;</span>, <span class="st">&quot;Super learner final&quot;</span>,</span>
<span id="cb125-7"><a href="id_05_adversarial_computational_control.html#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 15&quot;</span>, <span class="st">&quot;GBM grid model 6&quot;</span>, <span class="st">&quot;GBM grid model 76&quot;</span>,</span>
<span id="cb125-8"><a href="id_05_adversarial_computational_control.html#cb125-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Neural network grid model 86&quot;</span></span>
<span id="cb125-9"><a href="id_05_adversarial_computational_control.html#cb125-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb125-10"><a href="id_05_adversarial_computational_control.html#cb125-10" aria-hidden="true" tabindex="-1"></a>logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-11"><a href="id_05_adversarial_computational_control.html#cb125-11" aria-hidden="true" tabindex="-1"></a>MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-12"><a href="id_05_adversarial_computational_control.html#cb125-12" aria-hidden="true" tabindex="-1"></a>F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-13"><a href="id_05_adversarial_computational_control.html#cb125-13" aria-hidden="true" tabindex="-1"></a>acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-14"><a href="id_05_adversarial_computational_control.html#cb125-14" aria-hidden="true" tabindex="-1"></a>EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-15"><a href="id_05_adversarial_computational_control.html#cb125-15" aria-hidden="true" tabindex="-1"></a>BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb125-16"><a href="id_05_adversarial_computational_control.html#cb125-16" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb125-17"><a href="id_05_adversarial_computational_control.html#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb125-18"><a href="id_05_adversarial_computational_control.html#cb125-18" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/cell_penetration_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb125-19"><a href="id_05_adversarial_computational_control.html#cb125-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb125-20"><a href="id_05_adversarial_computational_control.html#cb125-20" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb125-21"><a href="id_05_adversarial_computational_control.html#cb125-21" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb125-22"><a href="id_05_adversarial_computational_control.html#cb125-22" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb125-23"><a href="id_05_adversarial_computational_control.html#cb125-23" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb125-24"><a href="id_05_adversarial_computational_control.html#cb125-24" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb125-25"><a href="id_05_adversarial_computational_control.html#cb125-25" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb125-26"><a href="id_05_adversarial_computational_control.html#cb125-26" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb125-27"><a href="id_05_adversarial_computational_control.html#cb125-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb125-28"><a href="id_05_adversarial_computational_control.html#cb125-28" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb125-29"><a href="id_05_adversarial_computational_control.html#cb125-29" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb125-30"><a href="id_05_adversarial_computational_control.html#cb125-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb125-31"><a href="id_05_adversarial_computational_control.html#cb125-31" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb125-32"><a href="id_05_adversarial_computational_control.html#cb125-32" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb125-33"><a href="id_05_adversarial_computational_control.html#cb125-33" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb125-34"><a href="id_05_adversarial_computational_control.html#cb125-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb125-35"><a href="id_05_adversarial_computational_control.html#cb125-35" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb125-36"><a href="id_05_adversarial_computational_control.html#cb125-36" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb125-37"><a href="id_05_adversarial_computational_control.html#cb125-37" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb125-38"><a href="id_05_adversarial_computational_control.html#cb125-38" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb125-39"><a href="id_05_adversarial_computational_control.html#cb125-39" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb125-40"><a href="id_05_adversarial_computational_control.html#cb125-40" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb125-41"><a href="id_05_adversarial_computational_control.html#cb125-41" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb125-42"><a href="id_05_adversarial_computational_control.html#cb125-42" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb125-43"><a href="id_05_adversarial_computational_control.html#cb125-43" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb125-44"><a href="id_05_adversarial_computational_control.html#cb125-44" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb125-45"><a href="id_05_adversarial_computational_control.html#cb125-45" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb125-46"><a href="id_05_adversarial_computational_control.html#cb125-46" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb125-47"><a href="id_05_adversarial_computational_control.html#cb125-47" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb125-48"><a href="id_05_adversarial_computational_control.html#cb125-48" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb125-49"><a href="id_05_adversarial_computational_control.html#cb125-49" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb125-50"><a href="id_05_adversarial_computational_control.html#cb125-50" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb125-51"><a href="id_05_adversarial_computational_control.html#cb125-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb125-52"><a href="id_05_adversarial_computational_control.html#cb125-52" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>category))</span>
<span id="cb125-53"><a href="id_05_adversarial_computational_control.html#cb125-53" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> <span class="fu">sapply</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>category, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">==</span> <span class="st">&quot;penetrating&quot;</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb125-54"><a href="id_05_adversarial_computational_control.html#cb125-54" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="st">&quot;penetrating&quot;</span>]</span>
<span id="cb125-55"><a href="id_05_adversarial_computational_control.html#cb125-55" aria-hidden="true" tabindex="-1"></a>  y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb125-56"><a href="id_05_adversarial_computational_control.html#cb125-56" aria-hidden="true" tabindex="-1"></a>  logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb125-57"><a href="id_05_adversarial_computational_control.html#cb125-57" aria-hidden="true" tabindex="-1"></a>  MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb125-58"><a href="id_05_adversarial_computational_control.html#cb125-58" aria-hidden="true" tabindex="-1"></a>  F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb125-59"><a href="id_05_adversarial_computational_control.html#cb125-59" aria-hidden="true" tabindex="-1"></a>  acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb125-60"><a href="id_05_adversarial_computational_control.html#cb125-60" aria-hidden="true" tabindex="-1"></a>  EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb125-61"><a href="id_05_adversarial_computational_control.html#cb125-61" aria-hidden="true" tabindex="-1"></a>  BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb125-62"><a href="id_05_adversarial_computational_control.html#cb125-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb125-63"><a href="id_05_adversarial_computational_control.html#cb125-63" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(logloss, MCC, F1, acc, EF, BEDROC, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_cpp_ad.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb126"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb126-1"><a href="id_05_adversarial_computational_control.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_cpp_ad.RData&quot;</span>)</span>
<span id="cb126-2"><a href="id_05_adversarial_computational_control.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb126-3"><a href="id_05_adversarial_computational_control.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F&lt;sub&gt;1&lt;/sub&gt;&quot;</span>, <span class="st">&quot;Accuracy&quot;</span>, <span class="st">&quot;EF&quot;</span>, <span class="st">&quot;BEDROC&quot;</span>),</span>
<span id="cb126-4"><a href="id_05_adversarial_computational_control.html#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean ± s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb126-5"><a href="id_05_adversarial_computational_control.html#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(logloss), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(logloss), <span class="dv">3</span>)),</span>
<span id="cb126-6"><a href="id_05_adversarial_computational_control.html#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(MCC), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(MCC), <span class="dv">3</span>)),</span>
<span id="cb126-7"><a href="id_05_adversarial_computational_control.html#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(F1), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(F1), <span class="dv">3</span>)),</span>
<span id="cb126-8"><a href="id_05_adversarial_computational_control.html#cb126-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(acc), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(acc), <span class="dv">3</span>)),</span>
<span id="cb126-9"><a href="id_05_adversarial_computational_control.html#cb126-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(EF), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(EF), <span class="dv">3</span>)),</span>
<span id="cb126-10"><a href="id_05_adversarial_computational_control.html#cb126-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(BEDROC), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(BEDROC), <span class="dv">3</span>))</span>
<span id="cb126-11"><a href="id_05_adversarial_computational_control.html#cb126-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb126-12"><a href="id_05_adversarial_computational_control.html#cb126-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb126-13"><a href="id_05_adversarial_computational_control.html#cb126-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb126-14"><a href="id_05_adversarial_computational_control.html#cb126-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-394ff3a3e9bdd4d0e477" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-394ff3a3e9bdd4d0e477">{"x":{"filter":"none","vertical":false,"data":[["Log loss","MCC","F<sub>1<\/sub>","Accuracy","EF","BEDROC"],["0.715 ± 0.013","-0.002 ± 0.054","0.522 ± 0.031","0.49 ± 0.025","1.09 ± 0.159","0.529 ± 0.058"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean ± s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="toxicity-classification-3" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Toxicity (classification)<a href="id_05_adversarial_computational_control.html#toxicity-classification-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb127"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb127-1"><a href="id_05_adversarial_computational_control.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits.RData&quot;</span>)</span>
<span id="cb127-2"><a href="id_05_adversarial_computational_control.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">32</span>)</span>
<span id="cb127-3"><a href="id_05_adversarial_computational_control.html#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="id_05_adversarial_computational_control.html#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of cross-validation training sets</span></span>
<span id="cb127-5"><a href="id_05_adversarial_computational_control.html#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb127-6"><a href="id_05_adversarial_computational_control.html#cb127-6" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>category</span>
<span id="cb127-7"><a href="id_05_adversarial_computational_control.html#cb127-7" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb127-8"><a href="id_05_adversarial_computational_control.html#cb127-8" aria-hidden="true" tabindex="-1"></a>  outer_splits[[i]]<span class="sc">$</span>train<span class="sc">$</span>category <span class="ot">&lt;-</span> response</span>
<span id="cb127-9"><a href="id_05_adversarial_computational_control.html#cb127-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb127-10"><a href="id_05_adversarial_computational_control.html#cb127-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-11"><a href="id_05_adversarial_computational_control.html#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the response variable of the whole data set</span></span>
<span id="cb127-12"><a href="id_05_adversarial_computational_control.html#cb127-12" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> tx_data<span class="sc">$</span>category</span>
<span id="cb127-13"><a href="id_05_adversarial_computational_control.html#cb127-13" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">sample</span>(response)</span>
<span id="cb127-14"><a href="id_05_adversarial_computational_control.html#cb127-14" aria-hidden="true" tabindex="-1"></a>tx_data<span class="sc">$</span>category <span class="ot">&lt;-</span> response</span>
<span id="cb127-15"><a href="id_05_adversarial_computational_control.html#cb127-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-16"><a href="id_05_adversarial_computational_control.html#cb127-16" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(tx_data, outer_splits,</span>
<span id="cb127-17"><a href="id_05_adversarial_computational_control.html#cb127-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits_y_shuffled.RData&quot;</span></span>
<span id="cb127-18"><a href="id_05_adversarial_computational_control.html#cb127-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="model-training-5" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Model training<a href="id_05_adversarial_computational_control.html#model-training-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb128"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb128-1"><a href="id_05_adversarial_computational_control.html#cb128-1" aria-hidden="true" tabindex="-1"></a>train_tx_models <span class="ot">&lt;-</span> <span class="cf">function</span>(train_set, exp_dir, prefix, <span class="at">nfolds =</span> <span class="dv">10</span>, <span class="at">grid_seed =</span> <span class="dv">1</span>) {</span>
<span id="cb128-2"><a href="id_05_adversarial_computational_control.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_set, <span class="at">destination_frame =</span> prefix)</span>
<span id="cb128-3"><a href="id_05_adversarial_computational_control.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  tmp[<span class="st">&quot;category&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tmp[<span class="st">&quot;category&quot;</span>])</span>
<span id="cb128-4"><a href="id_05_adversarial_computational_control.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">&quot;category&quot;</span></span>
<span id="cb128-5"><a href="id_05_adversarial_computational_control.html#cb128-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(tmp), y)</span>
<span id="cb128-6"><a href="id_05_adversarial_computational_control.html#cb128-6" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmp<span class="sc">$</span>category)</span>
<span id="cb128-7"><a href="id_05_adversarial_computational_control.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  samp_factors <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">mean</span>(<span class="fu">table</span>(train_set<span class="sc">$</span>category)) <span class="sc">/</span> <span class="fu">table</span>(train_set<span class="sc">$</span>category))</span>
<span id="cb128-8"><a href="id_05_adversarial_computational_control.html#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb128-9"><a href="id_05_adversarial_computational_control.html#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># base model training</span></span>
<span id="cb128-10"><a href="id_05_adversarial_computational_control.html#cb128-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -------------------</span></span>
<span id="cb128-11"><a href="id_05_adversarial_computational_control.html#cb128-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Deep learning grid 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-12"><a href="id_05_adversarial_computational_control.html#cb128-12" aria-hidden="true" tabindex="-1"></a>  deeplearning_1 <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb128-13"><a href="id_05_adversarial_computational_control.html#cb128-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;deeplearning&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-14"><a href="id_05_adversarial_computational_control.html#cb128-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> deeplearning_params_1,</span>
<span id="cb128-15"><a href="id_05_adversarial_computational_control.html#cb128-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-16"><a href="id_05_adversarial_computational_control.html#cb128-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-17"><a href="id_05_adversarial_computational_control.html#cb128-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(</span>
<span id="cb128-18"><a href="id_05_adversarial_computational_control.html#cb128-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>,</span>
<span id="cb128-19"><a href="id_05_adversarial_computational_control.html#cb128-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed</span>
<span id="cb128-20"><a href="id_05_adversarial_computational_control.html#cb128-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb128-21"><a href="id_05_adversarial_computational_control.html#cb128-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb128-22"><a href="id_05_adversarial_computational_control.html#cb128-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-23"><a href="id_05_adversarial_computational_control.html#cb128-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> deeplearning_1<span class="sc">@</span>model_ids) {</span>
<span id="cb128-24"><a href="id_05_adversarial_computational_control.html#cb128-24" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-25"><a href="id_05_adversarial_computational_control.html#cb128-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-26"><a href="id_05_adversarial_computational_control.html#cb128-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-27"><a href="id_05_adversarial_computational_control.html#cb128-27" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb128-28"><a href="id_05_adversarial_computational_control.html#cb128-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;gbm&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-29"><a href="id_05_adversarial_computational_control.html#cb128-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> gbm_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb128-30"><a href="id_05_adversarial_computational_control.html#cb128-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-31"><a href="id_05_adversarial_computational_control.html#cb128-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb128-32"><a href="id_05_adversarial_computational_control.html#cb128-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb128-33"><a href="id_05_adversarial_computational_control.html#cb128-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-34"><a href="id_05_adversarial_computational_control.html#cb128-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> gbm<span class="sc">@</span>model_ids) {</span>
<span id="cb128-35"><a href="id_05_adversarial_computational_control.html#cb128-35" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-36"><a href="id_05_adversarial_computational_control.html#cb128-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-37"><a href="id_05_adversarial_computational_control.html#cb128-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GBM 5 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-38"><a href="id_05_adversarial_computational_control.html#cb128-38" aria-hidden="true" tabindex="-1"></a>  gbm_1 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb128-39"><a href="id_05_adversarial_computational_control.html#cb128-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-40"><a href="id_05_adversarial_computational_control.html#cb128-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-41"><a href="id_05_adversarial_computational_control.html#cb128-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-42"><a href="id_05_adversarial_computational_control.html#cb128-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb128-43"><a href="id_05_adversarial_computational_control.html#cb128-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">6</span>, <span class="at">min_rows =</span> <span class="dv">1</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-44"><a href="id_05_adversarial_computational_control.html#cb128-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-45"><a href="id_05_adversarial_computational_control.html#cb128-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-46"><a href="id_05_adversarial_computational_control.html#cb128-46" aria-hidden="true" tabindex="-1"></a>  gbm_2 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb128-47"><a href="id_05_adversarial_computational_control.html#cb128-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-48"><a href="id_05_adversarial_computational_control.html#cb128-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-49"><a href="id_05_adversarial_computational_control.html#cb128-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-50"><a href="id_05_adversarial_computational_control.html#cb128-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb128-51"><a href="id_05_adversarial_computational_control.html#cb128-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">7</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-52"><a href="id_05_adversarial_computational_control.html#cb128-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-53"><a href="id_05_adversarial_computational_control.html#cb128-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-54"><a href="id_05_adversarial_computational_control.html#cb128-54" aria-hidden="true" tabindex="-1"></a>  gbm_3 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb128-55"><a href="id_05_adversarial_computational_control.html#cb128-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-56"><a href="id_05_adversarial_computational_control.html#cb128-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-57"><a href="id_05_adversarial_computational_control.html#cb128-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-58"><a href="id_05_adversarial_computational_control.html#cb128-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb128-59"><a href="id_05_adversarial_computational_control.html#cb128-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">8</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-60"><a href="id_05_adversarial_computational_control.html#cb128-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-61"><a href="id_05_adversarial_computational_control.html#cb128-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-62"><a href="id_05_adversarial_computational_control.html#cb128-62" aria-hidden="true" tabindex="-1"></a>  gbm_4 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb128-63"><a href="id_05_adversarial_computational_control.html#cb128-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_4&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-64"><a href="id_05_adversarial_computational_control.html#cb128-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-65"><a href="id_05_adversarial_computational_control.html#cb128-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-66"><a href="id_05_adversarial_computational_control.html#cb128-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb128-67"><a href="id_05_adversarial_computational_control.html#cb128-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-68"><a href="id_05_adversarial_computational_control.html#cb128-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-69"><a href="id_05_adversarial_computational_control.html#cb128-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-70"><a href="id_05_adversarial_computational_control.html#cb128-70" aria-hidden="true" tabindex="-1"></a>  gbm_5 <span class="ot">&lt;-</span> <span class="fu">h2o.gbm</span>(</span>
<span id="cb128-71"><a href="id_05_adversarial_computational_control.html#cb128-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GBM_5&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-72"><a href="id_05_adversarial_computational_control.html#cb128-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-73"><a href="id_05_adversarial_computational_control.html#cb128-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-74"><a href="id_05_adversarial_computational_control.html#cb128-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>, <span class="at">learn_rate =</span> <span class="fl">0.1</span>,</span>
<span id="cb128-75"><a href="id_05_adversarial_computational_control.html#cb128-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">15</span>, <span class="at">min_rows =</span> <span class="dv">100</span>, <span class="at">min_split_improvement =</span> <span class="fl">1e-5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">sample_rate =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-76"><a href="id_05_adversarial_computational_control.html#cb128-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-77"><a href="id_05_adversarial_computational_control.html#cb128-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-78"><a href="id_05_adversarial_computational_control.html#cb128-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb128-79"><a href="id_05_adversarial_computational_control.html#cb128-79" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-80"><a href="id_05_adversarial_computational_control.html#cb128-80" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-81"><a href="id_05_adversarial_computational_control.html#cb128-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost grid</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-82"><a href="id_05_adversarial_computational_control.html#cb128-82" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> <span class="fu">h2o.grid</span>(</span>
<span id="cb128-83"><a href="id_05_adversarial_computational_control.html#cb128-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">algorithm =</span> <span class="st">&quot;xgboost&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-84"><a href="id_05_adversarial_computational_control.html#cb128-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">hyper_params =</span> xgboost_params, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb128-85"><a href="id_05_adversarial_computational_control.html#cb128-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">search_criteria =</span> <span class="fu">list</span>(<span class="at">strategy =</span> <span class="st">&quot;RandomDiscrete&quot;</span>, <span class="at">max_models =</span> <span class="dv">100</span>, <span class="at">seed =</span> grid_seed),</span>
<span id="cb128-86"><a href="id_05_adversarial_computational_control.html#cb128-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span>, <span class="at">parallelism =</span> <span class="dv">0</span></span>
<span id="cb128-87"><a href="id_05_adversarial_computational_control.html#cb128-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-88"><a href="id_05_adversarial_computational_control.html#cb128-88" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> xgboost<span class="sc">@</span>model_ids) {</span>
<span id="cb128-89"><a href="id_05_adversarial_computational_control.html#cb128-89" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-90"><a href="id_05_adversarial_computational_control.html#cb128-90" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-91"><a href="id_05_adversarial_computational_control.html#cb128-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XGBoost 3 default models</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-92"><a href="id_05_adversarial_computational_control.html#cb128-92" aria-hidden="true" tabindex="-1"></a>  xgboost_1 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb128-93"><a href="id_05_adversarial_computational_control.html#cb128-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_1&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-94"><a href="id_05_adversarial_computational_control.html#cb128-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-95"><a href="id_05_adversarial_computational_control.html#cb128-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-96"><a href="id_05_adversarial_computational_control.html#cb128-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">10</span>, <span class="at">min_rows =</span> <span class="dv">5</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb128-97"><a href="id_05_adversarial_computational_control.html#cb128-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-98"><a href="id_05_adversarial_computational_control.html#cb128-98" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-99"><a href="id_05_adversarial_computational_control.html#cb128-99" aria-hidden="true" tabindex="-1"></a>  xgboost_2 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb128-100"><a href="id_05_adversarial_computational_control.html#cb128-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_2&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-101"><a href="id_05_adversarial_computational_control.html#cb128-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-102"><a href="id_05_adversarial_computational_control.html#cb128-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-103"><a href="id_05_adversarial_computational_control.html#cb128-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">20</span>, <span class="at">min_rows =</span> <span class="dv">10</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb128-104"><a href="id_05_adversarial_computational_control.html#cb128-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.6</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-105"><a href="id_05_adversarial_computational_control.html#cb128-105" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-106"><a href="id_05_adversarial_computational_control.html#cb128-106" aria-hidden="true" tabindex="-1"></a>  xgboost_3 <span class="ot">&lt;-</span> <span class="fu">h2o.xgboost</span>(</span>
<span id="cb128-107"><a href="id_05_adversarial_computational_control.html#cb128-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XGBoost_3&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-108"><a href="id_05_adversarial_computational_control.html#cb128-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>, <span class="at">score_tree_interval =</span> <span class="dv">5</span>,</span>
<span id="cb128-109"><a href="id_05_adversarial_computational_control.html#cb128-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster =</span> <span class="st">&quot;gbtree&quot;</span>, <span class="at">col_sample_rate =</span> <span class="fl">0.8</span>, <span class="at">col_sample_rate_per_tree =</span> <span class="fl">0.8</span>,</span>
<span id="cb128-110"><a href="id_05_adversarial_computational_control.html#cb128-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="dv">5</span>, <span class="at">min_rows =</span> <span class="dv">3</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">reg_alpha =</span> <span class="dv">0</span>, <span class="at">reg_lambda =</span> <span class="dv">1</span>,</span>
<span id="cb128-111"><a href="id_05_adversarial_computational_control.html#cb128-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_rate =</span> <span class="fl">0.8</span>, <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-112"><a href="id_05_adversarial_computational_control.html#cb128-112" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-113"><a href="id_05_adversarial_computational_control.html#cb128-113" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb128-114"><a href="id_05_adversarial_computational_control.html#cb128-114" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-115"><a href="id_05_adversarial_computational_control.html#cb128-115" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-116"><a href="id_05_adversarial_computational_control.html#cb128-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;GLM</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-117"><a href="id_05_adversarial_computational_control.html#cb128-117" aria-hidden="true" tabindex="-1"></a>  glm <span class="ot">&lt;-</span> <span class="fu">h2o.glm</span>(</span>
<span id="cb128-118"><a href="id_05_adversarial_computational_control.html#cb128-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;GLM&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-119"><a href="id_05_adversarial_computational_control.html#cb128-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">alpha =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span>, <span class="fl">1.0</span>),</span>
<span id="cb128-120"><a href="id_05_adversarial_computational_control.html#cb128-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-121"><a href="id_05_adversarial_computational_control.html#cb128-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-122"><a href="id_05_adversarial_computational_control.html#cb128-122" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-123"><a href="id_05_adversarial_computational_control.html#cb128-123" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;GLM&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-124"><a href="id_05_adversarial_computational_control.html#cb128-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;DRF</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-125"><a href="id_05_adversarial_computational_control.html#cb128-125" aria-hidden="true" tabindex="-1"></a>  drf <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb128-126"><a href="id_05_adversarial_computational_control.html#cb128-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;DRF&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-127"><a href="id_05_adversarial_computational_control.html#cb128-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>,</span>
<span id="cb128-128"><a href="id_05_adversarial_computational_control.html#cb128-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb128-129"><a href="id_05_adversarial_computational_control.html#cb128-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-130"><a href="id_05_adversarial_computational_control.html#cb128-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-131"><a href="id_05_adversarial_computational_control.html#cb128-131" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-132"><a href="id_05_adversarial_computational_control.html#cb128-132" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;DRF&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-133"><a href="id_05_adversarial_computational_control.html#cb128-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;XRT</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-134"><a href="id_05_adversarial_computational_control.html#cb128-134" aria-hidden="true" tabindex="-1"></a>  xrt <span class="ot">&lt;-</span> <span class="fu">h2o.randomForest</span>(</span>
<span id="cb128-135"><a href="id_05_adversarial_computational_control.html#cb128-135" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_id =</span> <span class="st">&quot;XRT&quot;</span>, <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> nfolds,</span>
<span id="cb128-136"><a href="id_05_adversarial_computational_control.html#cb128-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>, <span class="at">ntrees =</span> <span class="dv">10000</span>, <span class="at">histogram_type =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb128-137"><a href="id_05_adversarial_computational_control.html#cb128-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_tree_interval =</span> <span class="dv">5</span>, <span class="at">stopping_rounds =</span> <span class="dv">3</span>,</span>
<span id="cb128-138"><a href="id_05_adversarial_computational_control.html#cb128-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors, <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span>,</span>
<span id="cb128-139"><a href="id_05_adversarial_computational_control.html#cb128-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_cross_validation_models =</span> <span class="cn">FALSE</span>, <span class="at">fold_assignment =</span> <span class="st">&quot;Modulo&quot;</span></span>
<span id="cb128-140"><a href="id_05_adversarial_computational_control.html#cb128-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-141"><a href="id_05_adversarial_computational_control.html#cb128-141" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;XRT&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-142"><a href="id_05_adversarial_computational_control.html#cb128-142" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb128-143"><a href="id_05_adversarial_computational_control.html#cb128-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get holdout predictions</span></span>
<span id="cb128-144"><a href="id_05_adversarial_computational_control.html#cb128-144" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------</span></span>
<span id="cb128-145"><a href="id_05_adversarial_computational_control.html#cb128-145" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(</span>
<span id="cb128-146"><a href="id_05_adversarial_computational_control.html#cb128-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(deeplearning_1<span class="sc">@</span>model_ids),</span>
<span id="cb128-147"><a href="id_05_adversarial_computational_control.html#cb128-147" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb128-148"><a href="id_05_adversarial_computational_control.html#cb128-148" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb128-149"><a href="id_05_adversarial_computational_control.html#cb128-149" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;GLM&quot;</span>,</span>
<span id="cb128-150"><a href="id_05_adversarial_computational_control.html#cb128-150" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DRF&quot;</span>,</span>
<span id="cb128-151"><a href="id_05_adversarial_computational_control.html#cb128-151" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;XRT&quot;</span></span>
<span id="cb128-152"><a href="id_05_adversarial_computational_control.html#cb128-152" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb128-153"><a href="id_05_adversarial_computational_control.html#cb128-153" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (model_id <span class="cf">in</span> base_models) {</span>
<span id="cb128-154"><a href="id_05_adversarial_computational_control.html#cb128-154" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-155"><a href="id_05_adversarial_computational_control.html#cb128-155" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> model_id</span>
<span id="cb128-156"><a href="id_05_adversarial_computational_control.html#cb128-156" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb128-157"><a href="id_05_adversarial_computational_control.html#cb128-157" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-158"><a href="id_05_adversarial_computational_control.html#cb128-158" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb128-159"><a href="id_05_adversarial_computational_control.html#cb128-159" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner training</span></span>
<span id="cb128-160"><a href="id_05_adversarial_computational_control.html#cb128-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------</span></span>
<span id="cb128-161"><a href="id_05_adversarial_computational_control.html#cb128-161" aria-hidden="true" tabindex="-1"></a>  sl_iter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb128-162"><a href="id_05_adversarial_computational_control.html#cb128-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb128-163"><a href="id_05_adversarial_computational_control.html#cb128-163" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb128-164"><a href="id_05_adversarial_computational_control.html#cb128-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb128-165"><a href="id_05_adversarial_computational_control.html#cb128-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb128-166"><a href="id_05_adversarial_computational_control.html#cb128-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb128-167"><a href="id_05_adversarial_computational_control.html#cb128-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb128-168"><a href="id_05_adversarial_computational_control.html#cb128-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb128-169"><a href="id_05_adversarial_computational_control.html#cb128-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-170"><a href="id_05_adversarial_computational_control.html#cb128-170" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb128-171"><a href="id_05_adversarial_computational_control.html#cb128-171" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-172"><a href="id_05_adversarial_computational_control.html#cb128-172" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-173"><a href="id_05_adversarial_computational_control.html#cb128-173" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb128-174"><a href="id_05_adversarial_computational_control.html#cb128-174" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-175"><a href="id_05_adversarial_computational_control.html#cb128-175" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-176"><a href="id_05_adversarial_computational_control.html#cb128-176" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-177"><a href="id_05_adversarial_computational_control.html#cb128-177" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb128-178"><a href="id_05_adversarial_computational_control.html#cb128-178" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-179"><a href="id_05_adversarial_computational_control.html#cb128-179" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-180"><a href="id_05_adversarial_computational_control.html#cb128-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb128-181"><a href="id_05_adversarial_computational_control.html#cb128-181" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb128-182"><a href="id_05_adversarial_computational_control.html#cb128-182" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb128-183"><a href="id_05_adversarial_computational_control.html#cb128-183" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner base model reduction</span></span>
<span id="cb128-184"><a href="id_05_adversarial_computational_control.html#cb128-184" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ----------------------------------</span></span>
<span id="cb128-185"><a href="id_05_adversarial_computational_control.html#cb128-185" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="cn">TRUE</span>) {</span>
<span id="cb128-186"><a href="id_05_adversarial_computational_control.html#cb128-186" aria-hidden="true" tabindex="-1"></a>    meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_1&quot;</span>))</span>
<span id="cb128-187"><a href="id_05_adversarial_computational_control.html#cb128-187" aria-hidden="true" tabindex="-1"></a>    names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb128-188"><a href="id_05_adversarial_computational_control.html#cb128-188" aria-hidden="true" tabindex="-1"></a>    coeffs <span class="ot">&lt;-</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb128-189"><a href="id_05_adversarial_computational_control.html#cb128-189" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>nfolds) {</span>
<span id="cb128-190"><a href="id_05_adversarial_computational_control.html#cb128-190" aria-hidden="true" tabindex="-1"></a>      meta <span class="ot">&lt;-</span> <span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter, <span class="st">&quot;_cv_&quot;</span>, j))</span>
<span id="cb128-191"><a href="id_05_adversarial_computational_control.html#cb128-191" aria-hidden="true" tabindex="-1"></a>      names <span class="ot">&lt;-</span> meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;names&quot;</span>]</span>
<span id="cb128-192"><a href="id_05_adversarial_computational_control.html#cb128-192" aria-hidden="true" tabindex="-1"></a>      coeffs <span class="ot">&lt;-</span> coeffs <span class="sc">+</span> (meta<span class="sc">@</span>model<span class="sc">$</span>coefficients_table[, <span class="st">&quot;standardized_coefficients&quot;</span>] <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb128-193"><a href="id_05_adversarial_computational_control.html#cb128-193" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb128-194"><a href="id_05_adversarial_computational_control.html#cb128-194" aria-hidden="true" tabindex="-1"></a>    base_models_ <span class="ot">&lt;-</span> <span class="fu">as.list</span>(names[coeffs <span class="sc">&gt;=</span> <span class="fu">ceiling</span>(nfolds <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">&amp;</span> names <span class="sc">!=</span> <span class="st">&quot;Intercept&quot;</span>])</span>
<span id="cb128-195"><a href="id_05_adversarial_computational_control.html#cb128-195" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(base_models_) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb128-196"><a href="id_05_adversarial_computational_control.html#cb128-196" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No base models passing the threshold</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-197"><a href="id_05_adversarial_computational_control.html#cb128-197" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb128-198"><a href="id_05_adversarial_computational_control.html#cb128-198" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb128-199"><a href="id_05_adversarial_computational_control.html#cb128-199" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">sum</span>(base_models <span class="sc">%in%</span> base_models_) <span class="sc">==</span> <span class="fu">length</span>(base_models)) {</span>
<span id="cb128-200"><a href="id_05_adversarial_computational_control.html#cb128-200" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;No further reduction of base models</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-201"><a href="id_05_adversarial_computational_control.html#cb128-201" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span>
<span id="cb128-202"><a href="id_05_adversarial_computational_control.html#cb128-202" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb128-203"><a href="id_05_adversarial_computational_control.html#cb128-203" aria-hidden="true" tabindex="-1"></a>    sl_iter <span class="ot">&lt;-</span> sl_iter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb128-204"><a href="id_05_adversarial_computational_control.html#cb128-204" aria-hidden="true" tabindex="-1"></a>    base_models <span class="ot">&lt;-</span> base_models_</span>
<span id="cb128-205"><a href="id_05_adversarial_computational_control.html#cb128-205" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner iteration &quot;</span>, sl_iter, <span class="st">&quot; (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb128-206"><a href="id_05_adversarial_computational_control.html#cb128-206" aria-hidden="true" tabindex="-1"></a>    sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb128-207"><a href="id_05_adversarial_computational_control.html#cb128-207" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter),</span>
<span id="cb128-208"><a href="id_05_adversarial_computational_control.html#cb128-208" aria-hidden="true" tabindex="-1"></a>      <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb128-209"><a href="id_05_adversarial_computational_control.html#cb128-209" aria-hidden="true" tabindex="-1"></a>      <span class="at">base_models =</span> base_models,</span>
<span id="cb128-210"><a href="id_05_adversarial_computational_control.html#cb128-210" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb128-211"><a href="id_05_adversarial_computational_control.html#cb128-211" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb128-212"><a href="id_05_adversarial_computational_control.html#cb128-212" aria-hidden="true" tabindex="-1"></a>      <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-213"><a href="id_05_adversarial_computational_control.html#cb128-213" aria-hidden="true" tabindex="-1"></a>      <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb128-214"><a href="id_05_adversarial_computational_control.html#cb128-214" aria-hidden="true" tabindex="-1"></a>        <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-215"><a href="id_05_adversarial_computational_control.html#cb128-215" aria-hidden="true" tabindex="-1"></a>        <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-216"><a href="id_05_adversarial_computational_control.html#cb128-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb128-217"><a href="id_05_adversarial_computational_control.html#cb128-217" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb128-218"><a href="id_05_adversarial_computational_control.html#cb128-218" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-219"><a href="id_05_adversarial_computational_control.html#cb128-219" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="fu">paste0</span>(<span class="st">&quot;superlearner_iter_&quot;</span>, sl_iter)), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-220"><a href="id_05_adversarial_computational_control.html#cb128-220" aria-hidden="true" tabindex="-1"></a>    model_id <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;metalearner_glm_superlearner_iter_&quot;</span>, sl_iter)</span>
<span id="cb128-221"><a href="id_05_adversarial_computational_control.html#cb128-221" aria-hidden="true" tabindex="-1"></a>    tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-222"><a href="id_05_adversarial_computational_control.html#cb128-222" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-223"><a href="id_05_adversarial_computational_control.html#cb128-223" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb128-224"><a href="id_05_adversarial_computational_control.html#cb128-224" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb128-225"><a href="id_05_adversarial_computational_control.html#cb128-225" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb128-226"><a href="id_05_adversarial_computational_control.html#cb128-226" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb128-227"><a href="id_05_adversarial_computational_control.html#cb128-227" aria-hidden="true" tabindex="-1"></a>  <span class="co"># super learner for homogeneous base models</span></span>
<span id="cb128-228"><a href="id_05_adversarial_computational_control.html#cb128-228" aria-hidden="true" tabindex="-1"></a>  <span class="co"># -----------------------------------------</span></span>
<span id="cb128-229"><a href="id_05_adversarial_computational_control.html#cb128-229" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DeepLearning</span></span>
<span id="cb128-230"><a href="id_05_adversarial_computational_control.html#cb128-230" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> deeplearning_1<span class="sc">@</span>model_ids</span>
<span id="cb128-231"><a href="id_05_adversarial_computational_control.html#cb128-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner deep learning (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb128-232"><a href="id_05_adversarial_computational_control.html#cb128-232" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb128-233"><a href="id_05_adversarial_computational_control.html#cb128-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_deeplearning&quot;</span>,</span>
<span id="cb128-234"><a href="id_05_adversarial_computational_control.html#cb128-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb128-235"><a href="id_05_adversarial_computational_control.html#cb128-235" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb128-236"><a href="id_05_adversarial_computational_control.html#cb128-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb128-237"><a href="id_05_adversarial_computational_control.html#cb128-237" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb128-238"><a href="id_05_adversarial_computational_control.html#cb128-238" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-239"><a href="id_05_adversarial_computational_control.html#cb128-239" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb128-240"><a href="id_05_adversarial_computational_control.html#cb128-240" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-241"><a href="id_05_adversarial_computational_control.html#cb128-241" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-242"><a href="id_05_adversarial_computational_control.html#cb128-242" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb128-243"><a href="id_05_adversarial_computational_control.html#cb128-243" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-244"><a href="id_05_adversarial_computational_control.html#cb128-244" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-245"><a href="id_05_adversarial_computational_control.html#cb128-245" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_deeplearning&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-246"><a href="id_05_adversarial_computational_control.html#cb128-246" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span></span>
<span id="cb128-247"><a href="id_05_adversarial_computational_control.html#cb128-247" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-248"><a href="id_05_adversarial_computational_control.html#cb128-248" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-249"><a href="id_05_adversarial_computational_control.html#cb128-249" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb128-250"><a href="id_05_adversarial_computational_control.html#cb128-250" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb128-251"><a href="id_05_adversarial_computational_control.html#cb128-251" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb128-252"><a href="id_05_adversarial_computational_control.html#cb128-252" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(gbm<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb128-253"><a href="id_05_adversarial_computational_control.html#cb128-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner GBM (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb128-254"><a href="id_05_adversarial_computational_control.html#cb128-254" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb128-255"><a href="id_05_adversarial_computational_control.html#cb128-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_gbm&quot;</span>,</span>
<span id="cb128-256"><a href="id_05_adversarial_computational_control.html#cb128-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb128-257"><a href="id_05_adversarial_computational_control.html#cb128-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb128-258"><a href="id_05_adversarial_computational_control.html#cb128-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb128-259"><a href="id_05_adversarial_computational_control.html#cb128-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb128-260"><a href="id_05_adversarial_computational_control.html#cb128-260" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-261"><a href="id_05_adversarial_computational_control.html#cb128-261" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb128-262"><a href="id_05_adversarial_computational_control.html#cb128-262" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-263"><a href="id_05_adversarial_computational_control.html#cb128-263" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-264"><a href="id_05_adversarial_computational_control.html#cb128-264" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb128-265"><a href="id_05_adversarial_computational_control.html#cb128-265" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-266"><a href="id_05_adversarial_computational_control.html#cb128-266" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-267"><a href="id_05_adversarial_computational_control.html#cb128-267" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_gbm&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-268"><a href="id_05_adversarial_computational_control.html#cb128-268" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span></span>
<span id="cb128-269"><a href="id_05_adversarial_computational_control.html#cb128-269" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-270"><a href="id_05_adversarial_computational_control.html#cb128-270" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-271"><a href="id_05_adversarial_computational_control.html#cb128-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb128-272"><a href="id_05_adversarial_computational_control.html#cb128-272" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb128-273"><a href="id_05_adversarial_computational_control.html#cb128-273" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb128-274"><a href="id_05_adversarial_computational_control.html#cb128-274" aria-hidden="true" tabindex="-1"></a>  base_models <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">c</span>(<span class="fu">unlist</span>(xgboost<span class="sc">@</span>model_ids), <span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)))</span>
<span id="cb128-275"><a href="id_05_adversarial_computational_control.html#cb128-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Super learner XGBoost (&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot; models)</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb128-276"><a href="id_05_adversarial_computational_control.html#cb128-276" aria-hidden="true" tabindex="-1"></a>  sl <span class="ot">&lt;-</span> <span class="fu">h2o.stackedEnsemble</span>(</span>
<span id="cb128-277"><a href="id_05_adversarial_computational_control.html#cb128-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">model_id =</span> <span class="st">&quot;superlearner_xgboost&quot;</span>,</span>
<span id="cb128-278"><a href="id_05_adversarial_computational_control.html#cb128-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">training_frame =</span> tmp, <span class="at">seed =</span> <span class="dv">1</span>,</span>
<span id="cb128-279"><a href="id_05_adversarial_computational_control.html#cb128-279" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_models =</span> base_models,</span>
<span id="cb128-280"><a href="id_05_adversarial_computational_control.html#cb128-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_algorithm =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb128-281"><a href="id_05_adversarial_computational_control.html#cb128-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_nfolds =</span> nfolds,</span>
<span id="cb128-282"><a href="id_05_adversarial_computational_control.html#cb128-282" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_levelone_frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-283"><a href="id_05_adversarial_computational_control.html#cb128-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">metalearner_params =</span> <span class="fu">list</span>(</span>
<span id="cb128-284"><a href="id_05_adversarial_computational_control.html#cb128-284" aria-hidden="true" tabindex="-1"></a>      <span class="at">standardize =</span> <span class="cn">TRUE</span>, <span class="at">keep_cross_validation_predictions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb128-285"><a href="id_05_adversarial_computational_control.html#cb128-285" aria-hidden="true" tabindex="-1"></a>      <span class="at">balance_classes =</span> <span class="cn">TRUE</span>, <span class="at">class_sampling_factors =</span> samp_factors,</span>
<span id="cb128-286"><a href="id_05_adversarial_computational_control.html#cb128-286" aria-hidden="true" tabindex="-1"></a>      <span class="at">max_after_balance_size =</span> <span class="fl">0.5</span></span>
<span id="cb128-287"><a href="id_05_adversarial_computational_control.html#cb128-287" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-288"><a href="id_05_adversarial_computational_control.html#cb128-288" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb128-289"><a href="id_05_adversarial_computational_control.html#cb128-289" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(<span class="st">&quot;superlearner_xgboost&quot;</span>), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-290"><a href="id_05_adversarial_computational_control.html#cb128-290" aria-hidden="true" tabindex="-1"></a>  model_id <span class="ot">&lt;-</span> <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span></span>
<span id="cb128-291"><a href="id_05_adversarial_computational_control.html#cb128-291" aria-hidden="true" tabindex="-1"></a>  tmp_path <span class="ot">&lt;-</span> <span class="fu">h2o.saveModel</span>(<span class="fu">h2o.getModel</span>(model_id), <span class="at">path =</span> exp_dir, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb128-292"><a href="id_05_adversarial_computational_control.html#cb128-292" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">cbind</span>(res, <span class="fu">as.data.frame</span>(<span class="fu">h2o.getFrame</span>(<span class="fu">paste0</span>(<span class="st">&quot;cv_holdout_prediction_&quot;</span>, model_id))[<span class="dv">3</span>],</span>
<span id="cb128-293"><a href="id_05_adversarial_computational_control.html#cb128-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">paste0</span>(model_id, <span class="st">&quot;_&quot;</span>, <span class="fu">length</span>(base_models), <span class="st">&quot;_models&quot;</span>)</span>
<span id="cb128-294"><a href="id_05_adversarial_computational_control.html#cb128-294" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb128-295"><a href="id_05_adversarial_computational_control.html#cb128-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(res, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb128-296"><a href="id_05_adversarial_computational_control.html#cb128-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb128-297"><a href="id_05_adversarial_computational_control.html#cb128-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb128-298"><a href="id_05_adversarial_computational_control.html#cb128-298" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-cross-validation-5" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Inner cross-validation<a href="id_05_adversarial_computational_control.html#inner-cross-validation-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb129-1"><a href="id_05_adversarial_computational_control.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb129-2"><a href="id_05_adversarial_computational_control.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb129-3"><a href="id_05_adversarial_computational_control.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb129-4"><a href="id_05_adversarial_computational_control.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb129-5"><a href="id_05_adversarial_computational_control.html#cb129-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity_adversarial/&quot;</span>, prefix)</span>
<span id="cb129-6"><a href="id_05_adversarial_computational_control.html#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(exp_dir)</span>
<span id="cb129-7"><a href="id_05_adversarial_computational_control.html#cb129-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">train_tx_models</span>(<span class="at">train_set =</span> outer_splits[[i]][[<span class="st">&quot;train&quot;</span>]], <span class="at">exp_dir =</span> exp_dir, <span class="at">prefix =</span> prefix)</span>
<span id="cb129-8"><a href="id_05_adversarial_computational_control.html#cb129-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb130-1"><a href="id_05_adversarial_computational_control.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep track of grid models</span></span>
<span id="cb130-2"><a href="id_05_adversarial_computational_control.html#cb130-2" aria-hidden="true" tabindex="-1"></a>dl_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-3"><a href="id_05_adversarial_computational_control.html#cb130-3" aria-hidden="true" tabindex="-1"></a>gbm_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-4"><a href="id_05_adversarial_computational_control.html#cb130-4" aria-hidden="true" tabindex="-1"></a>xgboost_grid <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-5"><a href="id_05_adversarial_computational_control.html#cb130-5" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-6"><a href="id_05_adversarial_computational_control.html#cb130-6" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-7"><a href="id_05_adversarial_computational_control.html#cb130-7" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb130-8"><a href="id_05_adversarial_computational_control.html#cb130-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb130-9"><a href="id_05_adversarial_computational_control.html#cb130-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;Outer training set &quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb130-10"><a href="id_05_adversarial_computational_control.html#cb130-10" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb130-11"><a href="id_05_adversarial_computational_control.html#cb130-11" aria-hidden="true" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity_adversarial/&quot;</span>, prefix)</span>
<span id="cb130-12"><a href="id_05_adversarial_computational_control.html#cb130-12" aria-hidden="true" tabindex="-1"></a>  files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir)</span>
<span id="cb130-13"><a href="id_05_adversarial_computational_control.html#cb130-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning</span></span>
<span id="cb130-14"><a href="id_05_adversarial_computational_control.html#cb130-14" aria-hidden="true" tabindex="-1"></a>  dl <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;DeepLearning_model&quot;</span>)]</span>
<span id="cb130-15"><a href="id_05_adversarial_computational_control.html#cb130-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> dl) {</span>
<span id="cb130-16"><a href="id_05_adversarial_computational_control.html#cb130-16" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb130-17"><a href="id_05_adversarial_computational_control.html#cb130-17" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb130-18"><a href="id_05_adversarial_computational_control.html#cb130-18" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb130-19"><a href="id_05_adversarial_computational_control.html#cb130-19" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden,</span>
<span id="cb130-20"><a href="id_05_adversarial_computational_control.html#cb130-20" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb130-21"><a href="id_05_adversarial_computational_control.html#cb130-21" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb130-22"><a href="id_05_adversarial_computational_control.html#cb130-22" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb130-23"><a href="id_05_adversarial_computational_control.html#cb130-23" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb130-24"><a href="id_05_adversarial_computational_control.html#cb130-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(dl_grid)) {</span>
<span id="cb130-25"><a href="id_05_adversarial_computational_control.html#cb130-25" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(dl_grid[[hs]], m)</span>
<span id="cb130-26"><a href="id_05_adversarial_computational_control.html#cb130-26" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb130-27"><a href="id_05_adversarial_computational_control.html#cb130-27" aria-hidden="true" tabindex="-1"></a>      dl_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb130-28"><a href="id_05_adversarial_computational_control.html#cb130-28" aria-hidden="true" tabindex="-1"></a>      dl_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb130-29"><a href="id_05_adversarial_computational_control.html#cb130-29" aria-hidden="true" tabindex="-1"></a>        dl_grid_params,</span>
<span id="cb130-30"><a href="id_05_adversarial_computational_control.html#cb130-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb130-31"><a href="id_05_adversarial_computational_control.html#cb130-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;epsilon&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>epsilon,</span>
<span id="cb130-32"><a href="id_05_adversarial_computational_control.html#cb130-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="st">&quot;[&quot;</span>, <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>), <span class="st">&quot;]&quot;</span>),</span>
<span id="cb130-33"><a href="id_05_adversarial_computational_control.html#cb130-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;hidden_dropout_ratios&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb130-34"><a href="id_05_adversarial_computational_control.html#cb130-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;[&quot;</span>,</span>
<span id="cb130-35"><a href="id_05_adversarial_computational_control.html#cb130-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(model<span class="sc">@</span>allparameters<span class="sc">$</span>hidden_dropout_ratios,</span>
<span id="cb130-36"><a href="id_05_adversarial_computational_control.html#cb130-36" aria-hidden="true" tabindex="-1"></a>              <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb130-37"><a href="id_05_adversarial_computational_control.html#cb130-37" aria-hidden="true" tabindex="-1"></a>            ), <span class="st">&quot;]&quot;</span></span>
<span id="cb130-38"><a href="id_05_adversarial_computational_control.html#cb130-38" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb130-39"><a href="id_05_adversarial_computational_control.html#cb130-39" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;input_dropout_ratio&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>input_dropout_ratio,</span>
<span id="cb130-40"><a href="id_05_adversarial_computational_control.html#cb130-40" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;rho&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>rho</span>
<span id="cb130-41"><a href="id_05_adversarial_computational_control.html#cb130-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb130-42"><a href="id_05_adversarial_computational_control.html#cb130-42" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb130-43"><a href="id_05_adversarial_computational_control.html#cb130-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb130-44"><a href="id_05_adversarial_computational_control.html#cb130-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb130-45"><a href="id_05_adversarial_computational_control.html#cb130-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb130-46"><a href="id_05_adversarial_computational_control.html#cb130-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM</span></span>
<span id="cb130-47"><a href="id_05_adversarial_computational_control.html#cb130-47" aria-hidden="true" tabindex="-1"></a>  gbm <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;GBM_model&quot;</span>)]</span>
<span id="cb130-48"><a href="id_05_adversarial_computational_control.html#cb130-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> gbm) {</span>
<span id="cb130-49"><a href="id_05_adversarial_computational_control.html#cb130-49" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb130-50"><a href="id_05_adversarial_computational_control.html#cb130-50" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb130-51"><a href="id_05_adversarial_computational_control.html#cb130-51" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb130-52"><a href="id_05_adversarial_computational_control.html#cb130-52" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb130-53"><a href="id_05_adversarial_computational_control.html#cb130-53" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb130-54"><a href="id_05_adversarial_computational_control.html#cb130-54" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb130-55"><a href="id_05_adversarial_computational_control.html#cb130-55" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb130-56"><a href="id_05_adversarial_computational_control.html#cb130-56" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb130-57"><a href="id_05_adversarial_computational_control.html#cb130-57" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb130-58"><a href="id_05_adversarial_computational_control.html#cb130-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(gbm_grid)) {</span>
<span id="cb130-59"><a href="id_05_adversarial_computational_control.html#cb130-59" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(gbm_grid[[hs]], m)</span>
<span id="cb130-60"><a href="id_05_adversarial_computational_control.html#cb130-60" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb130-61"><a href="id_05_adversarial_computational_control.html#cb130-61" aria-hidden="true" tabindex="-1"></a>      gbm_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb130-62"><a href="id_05_adversarial_computational_control.html#cb130-62" aria-hidden="true" tabindex="-1"></a>      gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb130-63"><a href="id_05_adversarial_computational_control.html#cb130-63" aria-hidden="true" tabindex="-1"></a>        gbm_grid_params,</span>
<span id="cb130-64"><a href="id_05_adversarial_computational_control.html#cb130-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb130-65"><a href="id_05_adversarial_computational_control.html#cb130-65" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb130-66"><a href="id_05_adversarial_computational_control.html#cb130-66" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb130-67"><a href="id_05_adversarial_computational_control.html#cb130-67" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb130-68"><a href="id_05_adversarial_computational_control.html#cb130-68" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb130-69"><a href="id_05_adversarial_computational_control.html#cb130-69" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_split_improvement&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_split_improvement,</span>
<span id="cb130-70"><a href="id_05_adversarial_computational_control.html#cb130-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb130-71"><a href="id_05_adversarial_computational_control.html#cb130-71" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb130-72"><a href="id_05_adversarial_computational_control.html#cb130-72" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb130-73"><a href="id_05_adversarial_computational_control.html#cb130-73" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb130-74"><a href="id_05_adversarial_computational_control.html#cb130-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb130-75"><a href="id_05_adversarial_computational_control.html#cb130-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb130-76"><a href="id_05_adversarial_computational_control.html#cb130-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost</span></span>
<span id="cb130-77"><a href="id_05_adversarial_computational_control.html#cb130-77" aria-hidden="true" tabindex="-1"></a>  xgboost <span class="ot">&lt;-</span> files[<span class="fu">str_detect</span>(files, <span class="st">&quot;XGBoost_model&quot;</span>)]</span>
<span id="cb130-78"><a href="id_05_adversarial_computational_control.html#cb130-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (m <span class="cf">in</span> xgboost) {</span>
<span id="cb130-79"><a href="id_05_adversarial_computational_control.html#cb130-79" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb130-80"><a href="id_05_adversarial_computational_control.html#cb130-80" aria-hidden="true" tabindex="-1"></a>    hs <span class="ot">&lt;-</span> <span class="fu">sha1</span>(<span class="fu">paste</span>(<span class="fu">c</span>(</span>
<span id="cb130-81"><a href="id_05_adversarial_computational_control.html#cb130-81" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb130-82"><a href="id_05_adversarial_computational_control.html#cb130-82" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb130-83"><a href="id_05_adversarial_computational_control.html#cb130-83" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb130-84"><a href="id_05_adversarial_computational_control.html#cb130-84" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb130-85"><a href="id_05_adversarial_computational_control.html#cb130-85" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb130-86"><a href="id_05_adversarial_computational_control.html#cb130-86" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb130-87"><a href="id_05_adversarial_computational_control.html#cb130-87" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb130-88"><a href="id_05_adversarial_computational_control.html#cb130-88" aria-hidden="true" tabindex="-1"></a>      model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb130-89"><a href="id_05_adversarial_computational_control.html#cb130-89" aria-hidden="true" tabindex="-1"></a>    ), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb130-90"><a href="id_05_adversarial_computational_control.html#cb130-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hs <span class="sc">%in%</span> <span class="fu">names</span>(xgboost_grid)) {</span>
<span id="cb130-91"><a href="id_05_adversarial_computational_control.html#cb130-91" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(xgboost_grid[[hs]], m)</span>
<span id="cb130-92"><a href="id_05_adversarial_computational_control.html#cb130-92" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb130-93"><a href="id_05_adversarial_computational_control.html#cb130-93" aria-hidden="true" tabindex="-1"></a>      xgboost_grid[[hs]] <span class="ot">&lt;-</span> <span class="fu">c</span>(m)</span>
<span id="cb130-94"><a href="id_05_adversarial_computational_control.html#cb130-94" aria-hidden="true" tabindex="-1"></a>      xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">list.append</span>(</span>
<span id="cb130-95"><a href="id_05_adversarial_computational_control.html#cb130-95" aria-hidden="true" tabindex="-1"></a>        xgboost_grid_params,</span>
<span id="cb130-96"><a href="id_05_adversarial_computational_control.html#cb130-96" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb130-97"><a href="id_05_adversarial_computational_control.html#cb130-97" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;booster&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>booster,</span>
<span id="cb130-98"><a href="id_05_adversarial_computational_control.html#cb130-98" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate,</span>
<span id="cb130-99"><a href="id_05_adversarial_computational_control.html#cb130-99" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;col_sample_rate_per_tree&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>col_sample_rate_per_tree,</span>
<span id="cb130-100"><a href="id_05_adversarial_computational_control.html#cb130-100" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;max_depth&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>max_depth,</span>
<span id="cb130-101"><a href="id_05_adversarial_computational_control.html#cb130-101" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;min_rows&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>min_rows,</span>
<span id="cb130-102"><a href="id_05_adversarial_computational_control.html#cb130-102" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_alpha&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_alpha,</span>
<span id="cb130-103"><a href="id_05_adversarial_computational_control.html#cb130-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;reg_lambda&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>reg_lambda,</span>
<span id="cb130-104"><a href="id_05_adversarial_computational_control.html#cb130-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;sample_rate&quot;</span> <span class="ot">=</span> model<span class="sc">@</span>allparameters<span class="sc">$</span>sample_rate</span>
<span id="cb130-105"><a href="id_05_adversarial_computational_control.html#cb130-105" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb130-106"><a href="id_05_adversarial_computational_control.html#cb130-106" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb130-107"><a href="id_05_adversarial_computational_control.html#cb130-107" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb130-108"><a href="id_05_adversarial_computational_control.html#cb130-108" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb130-109"><a href="id_05_adversarial_computational_control.html#cb130-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">h2o.removeAll</span>()</span>
<span id="cb130-110"><a href="id_05_adversarial_computational_control.html#cb130-110" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb130-111"><a href="id_05_adversarial_computational_control.html#cb130-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-112"><a href="id_05_adversarial_computational_control.html#cb130-112" aria-hidden="true" tabindex="-1"></a>dl_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(dl_grid_params)))</span>
<span id="cb130-113"><a href="id_05_adversarial_computational_control.html#cb130-113" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dl_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Neural network grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dl_grid_params))</span>
<span id="cb130-114"><a href="id_05_adversarial_computational_control.html#cb130-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-115"><a href="id_05_adversarial_computational_control.html#cb130-115" aria-hidden="true" tabindex="-1"></a>gbm_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(gbm_grid_params)))</span>
<span id="cb130-116"><a href="id_05_adversarial_computational_control.html#cb130-116" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gbm_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;GBM grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gbm_grid_params))</span>
<span id="cb130-117"><a href="id_05_adversarial_computational_control.html#cb130-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-118"><a href="id_05_adversarial_computational_control.html#cb130-118" aria-hidden="true" tabindex="-1"></a>xgboost_grid_params <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(xgboost_grid_params)))</span>
<span id="cb130-119"><a href="id_05_adversarial_computational_control.html#cb130-119" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(xgboost_grid_params) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;XGBoost grid model&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(xgboost_grid_params))</span>
<span id="cb130-120"><a href="id_05_adversarial_computational_control.html#cb130-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-121"><a href="id_05_adversarial_computational_control.html#cb130-121" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dl_grid_params, <span class="st">&quot;./other_data/toxicity_adversarial/neural_network_grid_params.csv&quot;</span>)</span>
<span id="cb130-122"><a href="id_05_adversarial_computational_control.html#cb130-122" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gbm_grid_params, <span class="st">&quot;./other_data/toxicity_adversarial/gbm_grid_params.csv&quot;</span>)</span>
<span id="cb130-123"><a href="id_05_adversarial_computational_control.html#cb130-123" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(xgboost_grid_params, <span class="st">&quot;./other_data/toxicity_adversarial/xgboost_grid_params.csv&quot;</span>)</span>
<span id="cb130-124"><a href="id_05_adversarial_computational_control.html#cb130-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-125"><a href="id_05_adversarial_computational_control.html#cb130-125" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dl_grid, gbm_grid, xgboost_grid, <span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx_ad.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="model-evaluation-5" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Model evaluation<a href="id_05_adversarial_computational_control.html#model-evaluation-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb131-1"><a href="id_05_adversarial_computational_control.html#cb131-1" aria-hidden="true" tabindex="-1"></a>model_evaluation <span class="ot">&lt;-</span> <span class="cf">function</span>(holdout_pred, fold_asign, grid_name, <span class="at">grid_meta =</span> <span class="cn">NULL</span>) {</span>
<span id="cb131-2"><a href="id_05_adversarial_computational_control.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  res_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb131-3"><a href="id_05_adversarial_computational_control.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  model_num <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-4"><a href="id_05_adversarial_computational_control.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(grid_name, <span class="st">&quot;Super learner&quot;</span>)) {</span>
<span id="cb131-5"><a href="id_05_adversarial_computational_control.html#cb131-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb131-6"><a href="id_05_adversarial_computational_control.html#cb131-6" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter_0&quot;</span>)]</span>
<span id="cb131-7"><a href="id_05_adversarial_computational_control.html#cb131-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb131-8"><a href="id_05_adversarial_computational_control.html#cb131-8" aria-hidden="true" tabindex="-1"></a>      sl_models <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_iter&quot;</span>)]</span>
<span id="cb131-9"><a href="id_05_adversarial_computational_control.html#cb131-9" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> sl_models[<span class="fu">length</span>(sl_models)]</span>
<span id="cb131-10"><a href="id_05_adversarial_computational_control.html#cb131-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb131-11"><a href="id_05_adversarial_computational_control.html#cb131-11" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_deeplearning&quot;</span>)]</span>
<span id="cb131-12"><a href="id_05_adversarial_computational_control.html#cb131-12" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb131-13"><a href="id_05_adversarial_computational_control.html#cb131-13" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_gbm&quot;</span>)]</span>
<span id="cb131-14"><a href="id_05_adversarial_computational_control.html#cb131-14" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (grid_name <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb131-15"><a href="id_05_adversarial_computational_control.html#cb131-15" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">colnames</span>(holdout_pred)[<span class="fu">startsWith</span>(<span class="fu">colnames</span>(holdout_pred), <span class="st">&quot;metalearner_glm_superlearner_xgboost&quot;</span>)]</span>
<span id="cb131-16"><a href="id_05_adversarial_computational_control.html#cb131-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb131-17"><a href="id_05_adversarial_computational_control.html#cb131-17" aria-hidden="true" tabindex="-1"></a>    logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-18"><a href="id_05_adversarial_computational_control.html#cb131-18" aria-hidden="true" tabindex="-1"></a>    MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-19"><a href="id_05_adversarial_computational_control.html#cb131-19" aria-hidden="true" tabindex="-1"></a>    F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-20"><a href="id_05_adversarial_computational_control.html#cb131-20" aria-hidden="true" tabindex="-1"></a>    acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-21"><a href="id_05_adversarial_computational_control.html#cb131-21" aria-hidden="true" tabindex="-1"></a>    EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-22"><a href="id_05_adversarial_computational_control.html#cb131-22" aria-hidden="true" tabindex="-1"></a>    BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-23"><a href="id_05_adversarial_computational_control.html#cb131-23" aria-hidden="true" tabindex="-1"></a>    threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb131-24"><a href="id_05_adversarial_computational_control.html#cb131-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb131-25"><a href="id_05_adversarial_computational_control.html#cb131-25" aria-hidden="true" tabindex="-1"></a>      y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>]</span>
<span id="cb131-26"><a href="id_05_adversarial_computational_control.html#cb131-26" aria-hidden="true" tabindex="-1"></a>      y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb131-27"><a href="id_05_adversarial_computational_control.html#cb131-27" aria-hidden="true" tabindex="-1"></a>      y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb131-28"><a href="id_05_adversarial_computational_control.html#cb131-28" aria-hidden="true" tabindex="-1"></a>      logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-29"><a href="id_05_adversarial_computational_control.html#cb131-29" aria-hidden="true" tabindex="-1"></a>      MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb131-30"><a href="id_05_adversarial_computational_control.html#cb131-30" aria-hidden="true" tabindex="-1"></a>      F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-31"><a href="id_05_adversarial_computational_control.html#cb131-31" aria-hidden="true" tabindex="-1"></a>      acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-32"><a href="id_05_adversarial_computational_control.html#cb131-32" aria-hidden="true" tabindex="-1"></a>      EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb131-33"><a href="id_05_adversarial_computational_control.html#cb131-33" aria-hidden="true" tabindex="-1"></a>      BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb131-34"><a href="id_05_adversarial_computational_control.html#cb131-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb131-35"><a href="id_05_adversarial_computational_control.html#cb131-35" aria-hidden="true" tabindex="-1"></a>    res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb131-36"><a href="id_05_adversarial_computational_control.html#cb131-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb131-37"><a href="id_05_adversarial_computational_control.html#cb131-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb131-38"><a href="id_05_adversarial_computational_control.html#cb131-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb131-39"><a href="id_05_adversarial_computational_control.html#cb131-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb131-40"><a href="id_05_adversarial_computational_control.html#cb131-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb131-41"><a href="id_05_adversarial_computational_control.html#cb131-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb131-42"><a href="id_05_adversarial_computational_control.html#cb131-42" aria-hidden="true" tabindex="-1"></a>      logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb131-43"><a href="id_05_adversarial_computational_control.html#cb131-43" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb131-44"><a href="id_05_adversarial_computational_control.html#cb131-44" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb131-45"><a href="id_05_adversarial_computational_control.html#cb131-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(grid_meta)) {</span>
<span id="cb131-46"><a href="id_05_adversarial_computational_control.html#cb131-46" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span> grid_meta[[j]]</span>
<span id="cb131-47"><a href="id_05_adversarial_computational_control.html#cb131-47" aria-hidden="true" tabindex="-1"></a>      m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), g)</span>
<span id="cb131-48"><a href="id_05_adversarial_computational_control.html#cb131-48" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">length</span>(m) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb131-49"><a href="id_05_adversarial_computational_control.html#cb131-49" aria-hidden="true" tabindex="-1"></a>        model_num <span class="ot">&lt;-</span> <span class="fu">c</span>(model_num, j)</span>
<span id="cb131-50"><a href="id_05_adversarial_computational_control.html#cb131-50" aria-hidden="true" tabindex="-1"></a>        logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-51"><a href="id_05_adversarial_computational_control.html#cb131-51" aria-hidden="true" tabindex="-1"></a>        MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-52"><a href="id_05_adversarial_computational_control.html#cb131-52" aria-hidden="true" tabindex="-1"></a>        F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-53"><a href="id_05_adversarial_computational_control.html#cb131-53" aria-hidden="true" tabindex="-1"></a>        acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-54"><a href="id_05_adversarial_computational_control.html#cb131-54" aria-hidden="true" tabindex="-1"></a>        EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-55"><a href="id_05_adversarial_computational_control.html#cb131-55" aria-hidden="true" tabindex="-1"></a>        BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb131-56"><a href="id_05_adversarial_computational_control.html#cb131-56" aria-hidden="true" tabindex="-1"></a>        threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb131-57"><a href="id_05_adversarial_computational_control.html#cb131-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb131-58"><a href="id_05_adversarial_computational_control.html#cb131-58" aria-hidden="true" tabindex="-1"></a>          y_true <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, <span class="st">&quot;category&quot;</span>]</span>
<span id="cb131-59"><a href="id_05_adversarial_computational_control.html#cb131-59" aria-hidden="true" tabindex="-1"></a>          y_pred <span class="ot">&lt;-</span> holdout_pred[fold_assign <span class="sc">==</span> k, m]</span>
<span id="cb131-60"><a href="id_05_adversarial_computational_control.html#cb131-60" aria-hidden="true" tabindex="-1"></a>          y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb131-61"><a href="id_05_adversarial_computational_control.html#cb131-61" aria-hidden="true" tabindex="-1"></a>          logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-62"><a href="id_05_adversarial_computational_control.html#cb131-62" aria-hidden="true" tabindex="-1"></a>          MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb131-63"><a href="id_05_adversarial_computational_control.html#cb131-63" aria-hidden="true" tabindex="-1"></a>          F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-64"><a href="id_05_adversarial_computational_control.html#cb131-64" aria-hidden="true" tabindex="-1"></a>          acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb131-65"><a href="id_05_adversarial_computational_control.html#cb131-65" aria-hidden="true" tabindex="-1"></a>          EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb131-66"><a href="id_05_adversarial_computational_control.html#cb131-66" aria-hidden="true" tabindex="-1"></a>          BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb131-67"><a href="id_05_adversarial_computational_control.html#cb131-67" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb131-68"><a href="id_05_adversarial_computational_control.html#cb131-68" aria-hidden="true" tabindex="-1"></a>        res_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(res_, <span class="fu">c</span>(</span>
<span id="cb131-69"><a href="id_05_adversarial_computational_control.html#cb131-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(logloss, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(logloss),</span>
<span id="cb131-70"><a href="id_05_adversarial_computational_control.html#cb131-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(MCC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(MCC),</span>
<span id="cb131-71"><a href="id_05_adversarial_computational_control.html#cb131-71" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(F1),</span>
<span id="cb131-72"><a href="id_05_adversarial_computational_control.html#cb131-72" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(acc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(acc),</span>
<span id="cb131-73"><a href="id_05_adversarial_computational_control.html#cb131-73" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(EF, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(EF),</span>
<span id="cb131-74"><a href="id_05_adversarial_computational_control.html#cb131-74" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mean</span>(BEDROC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">sem</span>(BEDROC),</span>
<span id="cb131-75"><a href="id_05_adversarial_computational_control.html#cb131-75" aria-hidden="true" tabindex="-1"></a>          logloss, MCC, F1, acc, EF, BEDROC</span>
<span id="cb131-76"><a href="id_05_adversarial_computational_control.html#cb131-76" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb131-77"><a href="id_05_adversarial_computational_control.html#cb131-77" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb131-78"><a href="id_05_adversarial_computational_control.html#cb131-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb131-79"><a href="id_05_adversarial_computational_control.html#cb131-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb131-80"><a href="id_05_adversarial_computational_control.html#cb131-80" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">data.frame</span>(res_)))</span>
<span id="cb131-81"><a href="id_05_adversarial_computational_control.html#cb131-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb131-82"><a href="id_05_adversarial_computational_control.html#cb131-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Log loss mean&quot;</span>, <span class="st">&quot;Log loss s.e.m.&quot;</span>, <span class="st">&quot;MCC mean&quot;</span>, <span class="st">&quot;MCC s.e.m.&quot;</span>, <span class="st">&quot;F_1 mean&quot;</span>, <span class="st">&quot;F_1 s.e.m.&quot;</span>,</span>
<span id="cb131-83"><a href="id_05_adversarial_computational_control.html#cb131-83" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Accuracy mean&quot;</span>, <span class="st">&quot;Accuracy s.e.m.&quot;</span>, <span class="st">&quot;EF mean&quot;</span>, <span class="st">&quot;EF s.e.m.&quot;</span>, <span class="st">&quot;BEDROC mean&quot;</span>, <span class="st">&quot;BEDROC s.e.m.&quot;</span>,</span>
<span id="cb131-84"><a href="id_05_adversarial_computational_control.html#cb131-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Log loss CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;MCC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;F_1 CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb131-85"><a href="id_05_adversarial_computational_control.html#cb131-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Accuracy CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;EF CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="fu">paste</span>(<span class="st">&quot;BEDROC CV&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb131-86"><a href="id_05_adversarial_computational_control.html#cb131-86" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb131-87"><a href="id_05_adversarial_computational_control.html#cb131-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(res) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb131-88"><a href="id_05_adversarial_computational_control.html#cb131-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> grid_name</span>
<span id="cb131-89"><a href="id_05_adversarial_computational_control.html#cb131-89" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb131-90"><a href="id_05_adversarial_computational_control.html#cb131-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">paste</span>(grid_name, model_num)</span>
<span id="cb131-91"><a href="id_05_adversarial_computational_control.html#cb131-91" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb131-92"><a href="id_05_adversarial_computational_control.html#cb131-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb131-93"><a href="id_05_adversarial_computational_control.html#cb131-93" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="inner-loop-model-selection-5" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Inner loop model selection<a href="id_05_adversarial_computational_control.html#inner-loop-model-selection-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb132-1"><a href="id_05_adversarial_computational_control.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx_ad.RData&quot;</span>)</span>
<span id="cb132-2"><a href="id_05_adversarial_computational_control.html#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="id_05_adversarial_computational_control.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb132-4"><a href="id_05_adversarial_computational_control.html#cb132-4" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb132-5"><a href="id_05_adversarial_computational_control.html#cb132-5" aria-hidden="true" tabindex="-1"></a>  fold_assign <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(holdout_pred) <span class="sc">/</span> <span class="dv">10</span>))[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(holdout_pred)]</span>
<span id="cb132-6"><a href="id_05_adversarial_computational_control.html#cb132-6" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb132-7"><a href="id_05_adversarial_computational_control.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deep learning grid models</span></span>
<span id="cb132-8"><a href="id_05_adversarial_computational_control.html#cb132-8" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb132-9"><a href="id_05_adversarial_computational_control.html#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;Neural network grid model&quot;</span>,</span>
<span id="cb132-10"><a href="id_05_adversarial_computational_control.html#cb132-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> dl_grid</span>
<span id="cb132-11"><a href="id_05_adversarial_computational_control.html#cb132-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb132-12"><a href="id_05_adversarial_computational_control.html#cb132-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM grid models</span></span>
<span id="cb132-13"><a href="id_05_adversarial_computational_control.html#cb132-13" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb132-14"><a href="id_05_adversarial_computational_control.html#cb132-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM grid model&quot;</span>,</span>
<span id="cb132-15"><a href="id_05_adversarial_computational_control.html#cb132-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> gbm_grid</span>
<span id="cb132-16"><a href="id_05_adversarial_computational_control.html#cb132-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb132-17"><a href="id_05_adversarial_computational_control.html#cb132-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GBM default models</span></span>
<span id="cb132-18"><a href="id_05_adversarial_computational_control.html#cb132-18" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb132-19"><a href="id_05_adversarial_computational_control.html#cb132-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;GBM model&quot;</span>,</span>
<span id="cb132-20"><a href="id_05_adversarial_computational_control.html#cb132-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;GBM_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb132-21"><a href="id_05_adversarial_computational_control.html#cb132-21" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb132-22"><a href="id_05_adversarial_computational_control.html#cb132-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost grid models</span></span>
<span id="cb132-23"><a href="id_05_adversarial_computational_control.html#cb132-23" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb132-24"><a href="id_05_adversarial_computational_control.html#cb132-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost grid model&quot;</span>,</span>
<span id="cb132-25"><a href="id_05_adversarial_computational_control.html#cb132-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> xgboost_grid</span>
<span id="cb132-26"><a href="id_05_adversarial_computational_control.html#cb132-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb132-27"><a href="id_05_adversarial_computational_control.html#cb132-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XGBoost default models</span></span>
<span id="cb132-28"><a href="id_05_adversarial_computational_control.html#cb132-28" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign,</span>
<span id="cb132-29"><a href="id_05_adversarial_computational_control.html#cb132-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_name =</span> <span class="st">&quot;XGBoost model&quot;</span>,</span>
<span id="cb132-30"><a href="id_05_adversarial_computational_control.html#cb132-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid_meta =</span> <span class="fu">as.list</span>(<span class="fu">paste0</span>(<span class="st">&quot;XGBoost_&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb132-31"><a href="id_05_adversarial_computational_control.html#cb132-31" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb132-32"><a href="id_05_adversarial_computational_control.html#cb132-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># GLM</span></span>
<span id="cb132-33"><a href="id_05_adversarial_computational_control.html#cb132-33" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;GLM model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;GLM&quot;</span>)))</span>
<span id="cb132-34"><a href="id_05_adversarial_computational_control.html#cb132-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># DRF</span></span>
<span id="cb132-35"><a href="id_05_adversarial_computational_control.html#cb132-35" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;DRF model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;DRF&quot;</span>)))</span>
<span id="cb132-36"><a href="id_05_adversarial_computational_control.html#cb132-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># XRT</span></span>
<span id="cb132-37"><a href="id_05_adversarial_computational_control.html#cb132-37" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;XRT model&quot;</span>, <span class="at">grid_meta =</span> <span class="fu">list</span>(<span class="st">&quot;XRT&quot;</span>)))</span>
<span id="cb132-38"><a href="id_05_adversarial_computational_control.html#cb132-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner all</span></span>
<span id="cb132-39"><a href="id_05_adversarial_computational_control.html#cb132-39" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner all models&quot;</span>))</span>
<span id="cb132-40"><a href="id_05_adversarial_computational_control.html#cb132-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner final</span></span>
<span id="cb132-41"><a href="id_05_adversarial_computational_control.html#cb132-41" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner final&quot;</span>))</span>
<span id="cb132-42"><a href="id_05_adversarial_computational_control.html#cb132-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner deep learning</span></span>
<span id="cb132-43"><a href="id_05_adversarial_computational_control.html#cb132-43" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner neural network&quot;</span>))</span>
<span id="cb132-44"><a href="id_05_adversarial_computational_control.html#cb132-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner GBM</span></span>
<span id="cb132-45"><a href="id_05_adversarial_computational_control.html#cb132-45" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner GBM&quot;</span>))</span>
<span id="cb132-46"><a href="id_05_adversarial_computational_control.html#cb132-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Super learner XGBoost</span></span>
<span id="cb132-47"><a href="id_05_adversarial_computational_control.html#cb132-47" aria-hidden="true" tabindex="-1"></a>  data_ <span class="ot">&lt;-</span> <span class="fu">list.append</span>(data_, <span class="fu">model_evaluation</span>(holdout_pred, fold_assign, <span class="at">grid_name =</span> <span class="st">&quot;Super learner XGBoost&quot;</span>))</span>
<span id="cb132-48"><a href="id_05_adversarial_computational_control.html#cb132-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-49"><a href="id_05_adversarial_computational_control.html#cb132-49" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, data_)</span>
<span id="cb132-50"><a href="id_05_adversarial_computational_control.html#cb132-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(data, <span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_res.csv&quot;</span>))</span>
<span id="cb132-51"><a href="id_05_adversarial_computational_control.html#cb132-51" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="cv-1-5" class="section level4 hasAnchor" number="5.4.4.1">
<h4><span class="header-section-number">5.4.4.1</span> CV 1<a href="id_05_adversarial_computational_control.html#cv-1-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-0a5c0207345a9ef7f415" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0a5c0207345a9ef7f415">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 52","GBM grid model 83","GBM grid model 4","GBM grid model 55","GBM grid model 95","GBM grid model 73","GBM grid model 97","GBM grid model 23","GBM grid model 56","GBM grid model 1","GBM grid model 99","GBM grid model 67","GBM grid model 31","GBM grid model 100","GBM grid model 20","GBM grid model 60","GBM grid model 32","GBM grid model 69","GBM grid model 11","GBM grid model 13","GBM grid model 28","GBM grid model 42","GBM grid model 43","GBM grid model 46","GBM grid model 16","GBM grid model 15","GBM grid model 68","GBM grid model 14","GBM grid model 30","GBM grid model 35","GBM grid model 18","GBM grid model 47","GBM grid model 39","GBM grid model 51","GBM grid model 59","GBM grid model 6","GBM grid model 29","GBM grid model 5","GBM grid model 21","GBM grid model 61","GBM grid model 33","GBM grid model 63","GBM grid model 26","GBM grid model 38","GBM grid model 93","GBM grid model 37","GBM grid model 48","GBM grid model 84","GBM grid model 90","GBM grid model 49","Super learner neural network","GBM grid model 76","GBM grid model 9","GBM grid model 19","GBM grid model 64","GBM grid model 81","GBM grid model 50","GBM grid model 80","GBM grid model 94","GBM model 5","GBM grid model 57","GBM grid model 7","GBM grid model 72","GBM grid model 58","GBM grid model 53","XGBoost grid model 80","GBM grid model 96","Super learner final","GBM grid model 75","GBM grid model 54","XGBoost grid model 26","XGBoost grid model 31","GBM grid model 78","GBM grid model 91","GBM grid model 85","XGBoost grid model 43","GBM grid model 82","GBM grid model 45","XGBoost grid model 72","XGBoost grid model 99","XGBoost grid model 56","XGBoost grid model 65","XGBoost grid model 57","XGBoost grid model 90","XGBoost grid model 29","XGBoost grid model 100","GBM grid model 74","Neural network grid model 23","XGBoost grid model 32","XGBoost grid model 62","XGBoost grid model 83","GBM grid model 88","XGBoost grid model 40","GBM grid model 12","XGBoost grid model 96","XGBoost grid model 10","GBM grid model 22","GBM grid model 17","GBM grid model 87","GBM grid model 27","GBM grid model 66","GBM grid model 77","GBM grid model 44","GBM grid model 3","GBM grid model 86","Neural network grid model 21","XGBoost grid model 64","GBM grid model 36","XGBoost grid model 18","GBM grid model 2","GBM grid model 92","GBM grid model 41","GBM grid model 65","Neural network grid model 44","GBM grid model 62","XGBoost grid model 88","GBM grid model 89","GBM grid model 98","GBM grid model 24","XGBoost grid model 38","GBM grid model 71","GBM grid model 79","GLM model","GBM grid model 10","XGBoost grid model 61","XGBoost grid model 51","GBM grid model 34","GBM grid model 25","XGBoost grid model 66","XGBoost grid model 4","Super learner XGBoost","XGBoost grid model 76","XGBoost grid model 81","XGBoost grid model 21","Neural network grid model 6","XGBoost grid model 52","XGBoost grid model 49","Neural network grid model 92","XGBoost grid model 36","Neural network grid model 10","Neural network grid model 67"],[0.5615,0.9214,0.3844,0.5206,0.1784,0.4488,0.4488,0.234,0.4488,0.5206,0.2626,0.052,0.2626,0.9729,0.9729,0.0374,0.9729,0.3844,0.5615,0.7504,0.8041,0.3844,null,0.7044,0.7504,0.5615,0.234,0.8041,0.7044,0.6053,0.6053,0.6543,0.486,0.7504,0.0438,0.3194,0.5206,0.7504,0.4129,0.7044,0.5615,0.6543,0.4129,0.1784,1,0.4129,0.3539,0.2626,0.7504,0.4488,0.0993,0.6053,0.6053,0.3194,0.4129,0.5206,0.4488,0.5206,0.6053,0.4129,0.486,0.6543,0.5206,0.5615,0.4488,0.0617,0.3194,0.3539,0.5206,0.3194,0.486,0.486,0.3194,0.4129,0.3194,0.486,0.4129,0.2048,0.4488,0.5206,0.4129,0.4129,0.2985,0.486,0.3194,0.3844,0.5615,0.0023,0.3194,0.3539,0.3194,0.1341,0.3539,0.3844,0.3844,0.1554,0.5206,0.3844,0.2626,0.4129,0.486,0.4129,0.2626,0.3194,0.3539,0.0029,0.0374,0.1341,0.0617,0.1157,0.3844,0.3194,0.3194,0.0006,0.3844,0.0845,0.3194,0.052,0.1157,0.0438,0.3194,0.0722,0.2048,0.0722,0.1784,0.0255,0.0845,0.0722,0.1341,0.052,0.0438,0.0309,0.0722,0.0617,0.0011,0.017,0.0309,0.0006,0.0139,0.0006,0.0006],[0.6223,0.5238,0.503,0.5704,0.503,0.6296,0.5238,0.5238,0.4878,0.4878,0.5238,null,0.3752,0.4878,0.4878,0.4028,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.5238,0.4878,0.4028,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4344,0.4878,0.4878,0.3956,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.3484,0.4878,0.4878,0.4878,0.4878,0.4878,0.4917,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.3484,0.4878,0.4878,0.4878,0.4028,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.4878,0.3471,0.4878,0.4028,0.4878,0.4878,0.4795,0.4878,0.4344,0.3484,0.4795,0.3336,0.3416,0.4878,0.3484,0.4344,0.3752,0.3471,0.3416,0.3752,0.4795,0.3891,0.3471,0.47,0.3891,0.3484,0.4795,0.3752,0.3416,0.2963,0.3891,0.301,0.2963,0.3956,0.301,0.3336,0.3471,0.301,0.2963,0.3471,0.2963,0.2963,0.2963,0.2963,0.3471,0.2963,0.2963,0.2963,0.2963,0.301,0.301],[null,null,null,null,null,null,null,null,null,null,null,0.0005,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,0.976,null,0.976,0.976,1,0.976,0.976,0.976,0.9702,0.976,0.5814,0.9702,0.9702,0.9702,0.976,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.7938,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.7618,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.4612,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.6645,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.291,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.9702,0.0601,0.5056,0.6069,0.3932,0.9702,0.9702,0.9702,0.9702,0.0012,0.9702,0.5588,0.9702,0.9408,0.7316,0.6645,0.9702,0.5056,0.9702,0.4612,0.9702,0.5588,0.5588,0.8672,0.6645,0.3932,0.4612,0.4841,0.5814,0.3302,0.0977,0.3715,0.2236,0.0557,0.1316,0.0051,0.0159],[62,14,66,42,85,76,56,69,81,30,80,123,102,5,7,106,4,93,19,18,8,83,1,3,20,24,110,27,16,13,25,9,70,6,132,100,23,17,32.5,11,28,12,34.5,95,2,34.5,88,90,10,36,125,22,15,57,32.5,26,45,29,21,92,46,40,38,47,51,144,89,31,49,65,39,37,54,108,53,41,59,104,52,50,60,58,67,63,75,79,43,216,78,74,72,107,84,61,77,101,55,64,98,68,44,94,105,82,99,209,129,112,126,111,71,73,91,314,48,127,87,121,109,117,86,119,97,124,96,120,130,114,103,146,116,128,115,138,232,140,151,222,147,254,268],[49,67,29,53,32,30,57,54,27,82,59,1.5,48,144,144,34,144,110,144,144,144,65,144,144,144,144,36,144,144,144,144,144,98,144,21,61,144,144,144,144,144,144,144,77,144,144,108,88,144,144,64,144,144,144,144,144,144,144,144,99,144,144,144,144,144,62,96,144,144,144,144,144,144,103,144,144,144,93,144,144,144,144,144,144,144,144,202,60,144,144,144,209,144,194,144,144,200,197,183,212,200,231,178,195,177,104,198,184,188,182,200,220,223,28,238,232,203,210,225,245,222,242,265,249,271,258,253,269,280,247,290,283,297,291,226,311,314,264,316,284,299],[158,217,212,228,219,234,241.5,237.5,184,237.5,246,165.5,196,247,255,223,262,162,248,249,259,226,267,268,252,251,209,250,261,264,253,269,218,273,202,232,260,271,256,278,263,280,258,216,297,265,211,229,295,270,187,287,294,254,281,290,272,289,298,210,276,283,285,277,274,171,227,299,286,275,302,304,288,201,292,307,291,236,312,316,308,311,309,314,303,301,235,132,305,310,313,163,306,231,315,300,257,244,215,230,282,180,224,243,240,100,173,208,177,239,296,266,241.5,1,279,178,293,225,222,197,284,199,233,195,245,213,204,220,221,190,198,206,214,189,142,207,192,133,205,127,117],[1.5,6.5,1.5,6.5,3,6.5,6.5,6.5,78.5,41.5,6.5,115.5,83.5,41.5,41.5,87,41.5,87,41.5,41.5,41.5,78.5,41.5,41.5,41.5,41.5,107,41.5,41.5,41.5,41.5,41.5,78.5,41.5,111,74,41.5,41.5,41.5,41.5,41.5,41.5,41.5,96,41.5,41.5,78.5,83.5,41.5,41.5,117,41.5,41.5,41.5,41.5,41.5,41.5,41.5,41.5,105,41.5,41.5,41.5,41.5,41.5,134,100.5,41.5,41.5,41.5,41.5,41.5,41.5,118,41.5,41.5,41.5,106,41.5,41.5,41.5,41.5,41.5,41.5,41.5,41.5,87,160,41.5,41.5,41.5,95,41.5,91.5,41.5,41.5,78.5,91.5,100.5,91.5,78.5,104,103,91.5,99,206,122,120,136.5,108.5,78.5,87,97,315,94,124,78.5,108.5,112,110,87,123,102,133,98,121,125.5,113,114,136.5,135,129.5,125.5,144,176,131,148,187,154,191,211],[270.5,304.5,308.5,329.5,339,346.5,361,367,370.5,391,391.5,405.5,429.5,437.5,447.5,450,451.5,452,452.5,452.5,452.5,452.5,453.5,456.5,457.5,460.5,462,462.5,462.5,462.5,463.5,463.5,464.5,464.5,466,467,468.5,473.5,474,474.5,476.5,477.5,478,484,484.5,485,485.5,490.5,490.5,491.5,493,494.5,494.5,496.5,499,501.5,502.5,503.5,504.5,506,507.5,508.5,508.5,509.5,510.5,511,512.5,515.5,520.5,525.5,526.5,526.5,527.5,530,530.5,533.5,535.5,539,549.5,551.5,553.5,554.5,561.5,562.5,563.5,565.5,567,568,568.5,569.5,570.5,574,575.5,577.5,577.5,586.5,590.5,596.5,596.5,601.5,604.5,609,610,611.5,615,619,622,624,627.5,640.5,645.5,646,652.5,658,659,661,661.5,664.5,668,669,679,683,697,701,710,712,712.5,716,718,719.5,739,746.5,751.5,762,776,789,805,806,822,856,895]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-2-5" class="section level4 hasAnchor" number="5.4.4.2">
<h4><span class="header-section-number">5.4.4.2</span> CV 2<a href="id_05_adversarial_computational_control.html#cv-2-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-16335a8a16622af76795" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-16335a8a16622af76795">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 95","GBM grid model 23","GBM grid model 68","GBM grid model 1","GBM grid model 78","GBM grid model 12","GBM grid model 53","GBM grid model 55","GBM grid model 80","GBM grid model 62","XGBoost grid model 61","GBM grid model 42","GBM grid model 16","GBM grid model 99","GBM grid model 41","GBM grid model 83","GBM grid model 7","XGBoost grid model 35","Neural network grid model 76","GBM grid model 31","GBM grid model 2","GBM grid model 21","GBM grid model 100","GBM grid model 29","GBM model 5","GBM grid model 30","GBM grid model 4","GBM grid model 13","GBM grid model 32","GBM grid model 35","GBM grid model 43","GBM grid model 26","GBM grid model 77","GBM grid model 11","GBM grid model 5","GBM grid model 52","GBM grid model 47","GBM grid model 64","GBM grid model 18","GBM grid model 37","GBM grid model 28","GBM grid model 14","GBM grid model 54","GBM grid model 46","GBM grid model 15","GBM grid model 44","GBM grid model 61","GBM grid model 63","GBM grid model 20","GBM grid model 90","GBM grid model 76","GBM grid model 51","GBM grid model 97","GBM grid model 93","GBM grid model 57","Super learner final","Neural network grid model 6","GBM grid model 50","GBM grid model 19","XGBoost grid model 14","GBM grid model 49","GBM grid model 9","GBM grid model 38","XGBoost grid model 72","GBM grid model 94","GBM grid model 33","GBM grid model 58","GBM grid model 98","XGBoost grid model 43","XGBoost grid model 26","GBM grid model 65","GBM grid model 81","GBM grid model 72","GBM grid model 85","GBM grid model 92","XGBoost grid model 31","GLM model","GBM grid model 22","GBM grid model 75","XGBoost grid model 99","XGBoost grid model 64","GBM grid model 66","XGBoost grid model 62","GBM grid model 82","XGBoost grid model 65","XGBoost grid model 90","XGBoost grid model 100","XGBoost grid model 32","XGBoost grid model 83","XGBoost grid model 56","XGBoost grid model 57","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 40","XGBoost grid model 96","GBM grid model 88","GBM grid model 6","GBM grid model 27","GBM grid model 96","GBM grid model 36","GBM grid model 45","GBM grid model 89","GBM grid model 74","GBM grid model 3","GBM grid model 73","GBM grid model 71","Neural network grid model 45","GBM grid model 17","GBM grid model 39","XGBoost grid model 66","GBM grid model 69","XGBoost grid model 38","GBM grid model 48","XGBoost grid model 88","Super learner GBM","GBM grid model 56","GBM grid model 86","GBM grid model 60","GBM grid model 25","XGBoost grid model 76","GBM grid model 84","GBM grid model 87","GBM grid model 59","XGBoost grid model 21","GBM grid model 91","Super learner neural network"],[0.8926,0.755,0.1909,0.8225,0.6153,0.8926,0.8566,0.7876,0.976,0.9365,0.6611,0.3892,0.8225,0.7106,0.5178,0.8225,0.7106,0.0596,0.0016,0.3892,0.3503,null,0.8926,0.976,0.3892,0.976,0.3503,0.8926,0.976,1,0.8926,0.8566,0.3503,0.8566,0.9365,0.6153,0.8926,1,0.9365,0.8566,0.8926,0.8566,0.8566,0.7876,0.7876,0.4343,0.9365,0.9365,0.7876,0.976,0.9365,0.8926,0.755,0.8566,0.976,0.976,0.0016,0.8566,0.8566,0.0799,0.8225,0.7876,0.3503,0.7876,0.8926,0.7876,0.8566,0.1254,0.8225,0.8225,0.5178,0.8225,0.755,0.8225,0.755,0.8225,0.2801,0.4805,0.8225,0.7876,0.3503,0.6611,0.755,0.5178,0.755,0.7876,0.7106,0.6611,0.7876,0.7106,0.6153,0.6153,0.6611,0.5178,0.755,0.2489,0.5178,0.4343,0.6153,0.3169,0.1673,0.7876,0.4805,0.5178,0.7106,0.6611,0.001,0.6153,0.6611,0.4805,0.2489,0.1909,0.5728,0.2201,0.2489,0.3892,0.2801,0.5178,0.3169,0.1452,0.5178,0.2801,0.0938,0.0799,0.0416,0.1078],[0.1085,0.3095,0.3095,0.0182,0.0264,0.0116,0.0153,0.0153,0.01,0.0146,0.0744,0.0157,0.01,0.0146,0.0131,0.0146,0.0146,0.0474,null,0.1123,0.0646,0.0063,0.0063,0.0063,0.0264,0.0063,0.01,0.0063,0.0063,0.0063,0.0063,0.0063,0.0646,0.0063,0.0063,0.0146,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0157,0.0063,0.0063,0.0198,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0068,0.0063,0.0063,0.0063,0.1123,0.0063,0.0063,0.1299,0.0063,0.0063,0.0179,0.0063,0.0063,0.0063,0.0063,0.0198,0.0063,0.0063,0.0152,0.0063,0.0063,0.0063,0.0063,0.0063,0.0198,0.0063,0.0063,0.0063,0.0316,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0063,0.0362,0.0152,0.0198,0.0159,0.0182,0.0474,0.0063,0.0063,0.0146,0.0063,0.0063,0.0362,0.0065,0.0063,0.0083,0.0068,0.0159,0.0063,0.0411,0.0146,0.0146,0.0198,0.0068,0.011,0.0133,0.0063,0.0063,0.0159,0.0362,0.0198,0.0068],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0016,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.3112,0.0318,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.0406,1,1,0.3112,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.8352,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.5785,0.8637,1,1,1,1,1,0.0015,1,1,0.8637,1,0.327,1,0.2953,0.4413,1,1,0.7699,1,0.1661,1,1,0.6053,0.278,0.2621,0.3707],[46,62,118,39,70,57,38,48,21,23,72,93,36,83,80,33,52,148,197,105,100,1.5,13,3,92,4,89,20,9,8,7,16.5,107,27,5,76,10,1.5,28,16.5,25,34,55,22,42,98,19,18,41,6,14,26,60,11,31,12,216,37,58,146,43,29,103,15,30,61,49,124,24,32,90,45,50,47,44,40,102,84,63,35,99,71,51,75,56,53,68,65,59,66,69,79,77,74,67,109,91,94,86,110,116,54,81,88,73,78,314,85,64,101,108,113,82,117,133,97,112,87,111,121,96,115,143,142,138,132],[17,8,13,68,58,87,81.5,81.5,106,98,33,93,114,101,89,110,107,25,1,45,44,165.5,165.5,165.5,66,165.5,102,165.5,165.5,165.5,165.5,165.5,57,165.5,165.5,100,165.5,165.5,165.5,165.5,165.5,165.5,129,165.5,165.5,84,165.5,165.5,165.5,165.5,165.5,165.5,133,165.5,165.5,165.5,34,165.5,165.5,74,165.5,165.5,115,165.5,165.5,165.5,165.5,86,165.5,165.5,131,165.5,165.5,165.5,165.5,165.5,120,165.5,165.5,165.5,130,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,165.5,197,196,208,202,207,213,226,238,230,225,223,41,252,261,262,249,258,269,263,253,287,246,300,267,276,294,308,282,274,286,302],[201,229,213,242,226,220,249,249,221,237.5,217,231,239,206,223,249,246,166,82,216,215,261,253,265,232,266,207,255,267,269,272,263,225,254,276,237.5,274,283,258,270,264,256,233,273,257,235,281,282,260,295,289,278,240,297,279,299,70,277,259,175,275,294,234,312,298,268,280,228,307,302,230,290,286,292,296,304,227,262,288,316,224,284,310,291,311,314,301,305,313,308,309,300,303,306,315,198,219,212,222,202,200,293,251,236,287,285,1,245,271,211,247,209,252,186,193,218,244,214,241,183,243,210,208,196,197,199],[1,2,4,7,3,5,7,7,43,43,89,9,43,43,43,43,43,117,178,94,104,43,43,43,86.5,43,80.5,43,43,43,43,43,99,43,43,77,43,43,43,43,43,43,85,43,43,91,43,43,43,43,43,43,80.5,43,43,43,200,43,43,131,43,43,80.5,43,43,43,43,100,43,43,92,43,43,43,43,43,105,43,43,43,109,43,43,43,43,43,43,43,43,43,43,43,43,43,43,93,95.5,98,106,118,108,80.5,84,101,80.5,80.5,311,86.5,89,112,89,116,95.5,134,123,103,107,110,97,141,102,111,115,136,130,132],[265,301,348,356,357,369,375.5,385.5,391,401.5,411,426,432,433,435,435,448,456,458,460,463,471,474.5,476.5,476.5,478.5,478.5,483.5,484.5,485.5,487.5,488,488,489.5,489.5,490.5,492.5,493,494.5,495,497.5,498.5,502,503.5,507.5,508,508.5,508.5,509.5,509.5,511.5,512.5,513.5,516.5,518.5,519.5,520,522.5,525.5,526,526.5,531.5,532.5,535.5,536.5,537.5,537.5,538,539.5,542.5,543,543.5,544.5,547.5,548.5,552.5,554,554.5,559.5,559.5,562,563.5,569.5,574.5,575.5,575.5,577.5,578.5,580.5,582.5,586.5,587.5,588.5,588.5,590.5,597,601.5,612,616,637,637,653.5,654,655,665.5,666.5,667,668.5,685,686,693,696,698.5,700,702,705,709,711,716,721,735,744,748,748,751,765]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-3-5" class="section level4 hasAnchor" number="5.4.4.3">
<h4><span class="header-section-number">5.4.4.3</span> CV 3<a href="id_05_adversarial_computational_control.html#cv-3-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-0e133320ae9c65982cd1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0e133320ae9c65982cd1">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 48","GBM grid model 42","GBM grid model 60","GBM grid model 34","GBM grid model 88","GBM grid model 41","GBM grid model 66","GBM grid model 83","GBM grid model 4","GBM grid model 33","GBM grid model 54","GBM grid model 17","GBM grid model 74","GBM grid model 77","GBM grid model 26","GBM grid model 37","GBM grid model 97","GBM grid model 99","GBM grid model 89","GBM grid model 85","GBM grid model 23","XGBoost grid model 61","GBM grid model 15","GBM grid model 18","GBM grid model 35","GBM grid model 1","GBM grid model 100","GBM grid model 14","GBM grid model 32","GBM grid model 51","GBM grid model 47","GBM grid model 87","GBM grid model 25","GBM grid model 21","GBM grid model 43","GBM grid model 39","GBM grid model 13","GBM grid model 5","GBM grid model 11","GBM grid model 19","GBM grid model 61","GBM grid model 63","GBM grid model 76","GBM grid model 49","GBM grid model 30","GBM grid model 16","GBM grid model 3","GBM grid model 64","GBM grid model 95","GBM grid model 28","GBM grid model 29","GBM grid model 9","GBM grid model 45","GBM grid model 52","GBM grid model 93","GBM grid model 80","GBM grid model 81","XGBoost grid model 64","GBM grid model 53","GBM grid model 46","GBM grid model 50","GBM grid model 96","GBM grid model 94","GBM grid model 57","Neural network grid model 37","GBM grid model 75","GBM grid model 90","GBM grid model 22","GBM grid model 27","GBM grid model 72","GBM grid model 82","GBM grid model 92","GBM model 5","XGBoost grid model 21","GBM grid model 79","XGBoost grid model 29","XGBoost grid model 26","XGBoost grid model 38","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 43","GBM grid model 31","XGBoost grid model 31","GBM grid model 20","XGBoost grid model 57","XGBoost grid model 56","GBM grid model 65","GBM grid model 2","GBM grid model 7","XGBoost grid model 10","XGBoost grid model 62","XGBoost grid model 90","GBM grid model 86","XGBoost grid model 100","GBM grid model 71","XGBoost grid model 99","XGBoost grid model 96","XGBoost grid model 83","GBM grid model 12","XGBoost grid model 40","XGBoost grid model 32","GBM grid model 55","GBM grid model 62","GBM grid model 78","GLM model","GBM grid model 58","GBM grid model 84","GBM grid model 44","GBM grid model 38","GBM grid model 6","Neural network grid model 1","Super learner final","GBM grid model 73","GBM grid model 56","GBM grid model 69","Super learner neural network","GBM grid model 68","XGBoost grid model 4"],[0.7521,0.7905,0.4526,0.2884,0.5338,0.6256,0.8596,0.8254,0.5338,0.7521,0.7521,0.8254,0.8596,0.5338,0.8751,0.8751,0.9214,0.7521,0.8254,0.8596,0.8751,0.5338,0.9698,0.9214,0.9698,0.9698,0.8751,0.8751,0.8751,null,0.8751,0.5778,0.5338,0.8751,0.8751,0.9214,0.8596,0.8751,0.8596,0.8751,0.8751,0.8751,0.9214,0.8596,0.8254,0.7521,0.369,0.8751,0.7905,0.8751,0.7905,0.9214,0.1523,0.7521,0.8751,0.8596,0.8254,0.4981,0.7521,0.7521,0.7521,0.5338,0.8596,0.8254,0.0009,0.8254,0.7521,0.7905,0.5778,0.7308,0.7308,0.6832,0.4057,0.0842,0.2281,0.7521,0.7521,0.3278,0.8254,0.7905,0.7308,0.8254,0.7521,0.7905,0.7905,0.7521,0.6256,0.2281,0.8596,0.5338,0.7308,0.6256,0.7308,0.5338,0.6256,0.6832,0.5778,0.5778,0.7521,0.4526,0.4057,0.9698,0.8254,0.8596,0.369,0.7905,0.5338,0.4981,0.5778,0.7308,0.0009,0.6256,0.7905,0.4981,0.5778,0.2031,0.4057,0.0607],[0.1078,0.1171,0.4742,0.3871,0.0903,0.0764,0.0559,0.0559,0.0824,0.0637,0.0637,0.0688,0.0903,0.1345,0.0393,0.0393,0.0656,0.0393,0.0559,0.0393,0.0515,0.0797,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0797,0.0362,0.0362,0.0362,0.0458,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0707,0.0362,0.0393,0.0362,0.0362,0.0362,0.1345,0.0521,0.0362,0.0362,0.0362,0.0456,0.0362,0.0362,0.0362,0.0456,0.0362,0.0362,null,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0641,0.0515,0.0399,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0393,0.0641,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0559,0.0362,0.0362,0.0362,0.0362,0.0362,0.0797,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362,0.0362],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.8452,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.002,1,1,1,1,1,1,1,1,0.6685,0.8323,1,1,0.863,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.002,1,1,1,0.9666,0.6066,0.9666,0.6066],[46,49,103,119,85,76,25,33,82,47,50,54,37,100,4.5,4.5,11,68,42,44,26,87,3,10,2,22,21,19,8,1,6,91,95,16.5,13,69,30,18,39,34,14,12,7,23,31,40,108,16.5,55,36,35,9,140,80,15,29,28,107,45,53,51,93,32,52,302,48,41,74,99,59,60,61,106,138,127,62,65,113,57,56,66,64,70,24,67,72,84,128,27,89,81,77,75,92,79,78,83,88,63,97,101,20,38,43,112,58,98,102,94,86,316,73,71,105,90,130,110,151],[55,75,6,9,78,98,142,141,90,136.5,136.5,132,101,34,165,165,149,151,140,165,158,102,213.5,213.5,213.5,213.5,213.5,213.5,213.5,213.5,213.5,114,133,213.5,213.5,156,213.5,213.5,213.5,213.5,213.5,213.5,213.5,213.5,213.5,213.5,124,213.5,174,213.5,213.5,213.5,84,153,213.5,213.5,213.5,146,213.5,213.5,213.5,170,213.5,213.5,1,213.5,213.5,213.5,162,213.5,213.5,213.5,177,160,183,213.5,213.5,178,213.5,213.5,213.5,251,213.5,261.5,213.5,213.5,243,173,286,213.5,213.5,213.5,259,213.5,298,213.5,213.5,213.5,256.5,213.5,213.5,277,261.5,260,252,263,268,249,266,308,73,256.5,276,292,309,293,304,290],[200,232,212,172,210,235,247.5,242.5,252,238.5,238.5,207,227,214,247.5,247.5,221,222,228,247.5,240,224,259,261,270,253,254,258,269,277,273,218,203,264,271,242.5,257,275,255,262,282,284,289,274,268,260,229,285,251,266,267,294,217,244,297,291,292,220,278,272,276,225,298,280,5,288,295,265,233,286,293,296,234,191,187,303,302,208,311,312,307,198,304,263,309,308,223,226,237,300,310,314,219,301,165,316,315,313,256,306,305,279,283,290,216,281,231,250,245,204,1,299,287,241,236,194,230,193],[1,3,74.5,112,39.5,8,4,6,2,6,6,39.5,72,98,39.5,39.5,79,39.5,72,39.5,79,94.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,109,102,39.5,39.5,72,39.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,39.5,92,39.5,74.5,39.5,39.5,39.5,116,85,39.5,39.5,39.5,100,39.5,39.5,39.5,94.5,39.5,39.5,279,39.5,39.5,39.5,103,39.5,39.5,39.5,96.5,127,120,39.5,39.5,121,39.5,39.5,39.5,114,39.5,79,39.5,39.5,87,113,90.5,39.5,39.5,39.5,93,39.5,105,39.5,39.5,39.5,79,39.5,39.5,85,79,79,99,83,90.5,89,88,101,314,79,85,96.5,104,133,106.5,131],[302,359,395.5,412,412.5,417,418.5,422.5,426,428,431,432.5,437,446,456.5,456.5,460,480.5,482,496,503,507.5,515,524,525,528,528,530,530,531,532,532,533,533.5,537,539.5,540,546,547,549,549,549,549,550,552,553,553,554.5,554.5,555,555,556,557,562,565,573,573,573,576,578,580,582.5,583,585,587,589,589,592,597,598,606,610,613.5,616,617,618,620,620,621,621,626,627,627,627.5,629,633,637,640,640.5,642,644,644,646,646,647,647,651,654,654.5,656,659,661,661.5,672,679,685,687.5,690,693,699,704,707.5,719,734.5,739,750,750.5,765]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-4-5" class="section level4 hasAnchor" number="5.4.4.4">
<h4><span class="header-section-number">5.4.4.4</span> CV 4<a href="id_05_adversarial_computational_control.html#cv-4-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-4126406c2a7fc1dc8f9a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4126406c2a7fc1dc8f9a">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 98","GBM grid model 31","GBM grid model 83","GBM grid model 39","GBM grid model 13","GBM grid model 26","GBM grid model 37","GBM grid model 3","GBM grid model 84","GBM grid model 23","GBM grid model 1","GBM grid model 54","GBM grid model 19","GBM grid model 88","GBM grid model 41","GBM grid model 45","XGBoost grid model 79","GBM grid model 71","GLM model","GBM grid model 18","GBM grid model 17","GBM grid model 15","GBM grid model 11","GBM grid model 30","GBM grid model 6","Super learner neural network","GBM grid model 100","GBM grid model 32","GBM grid model 65","GBM grid model 47","GBM grid model 36","GBM grid model 86","GBM grid model 43","GBM grid model 21","GBM grid model 35","GBM grid model 5","GBM grid model 63","GBM grid model 73","GBM grid model 92","GBM grid model 51","GBM grid model 61","GBM grid model 7","GBM grid model 76","GBM grid model 59","GBM grid model 20","GBM grid model 93","GBM grid model 94","GBM grid model 46","GBM grid model 77","GBM grid model 81","GBM grid model 49","GBM grid model 50","GBM grid model 64","XGBoost grid model 61","GBM grid model 42","GBM grid model 9","GBM grid model 90","Neural network grid model 31","GBM grid model 62","GBM grid model 70","GBM model 5","GBM grid model 82","GBM grid model 85","GBM grid model 75","GBM grid model 33","GBM grid model 57","GBM grid model 22","GBM grid model 66","XGBoost grid model 31","GBM grid model 72","GBM grid model 52","GBM grid model 55","XGBoost grid model 56","XGBoost grid model 43","XGBoost grid model 66","Neural network grid model 65","GBM grid model 29","XGBoost grid model 72","XGBoost grid model 26","XGBoost grid model 62","GBM grid model 14","GBM grid model 48","XGBoost grid model 90","XGBoost grid model 57","XGBoost grid model 65","XGBoost grid model 29","Neural network grid model 35","GBM grid model 95","XGBoost grid model 10","XGBoost grid model 99","XGBoost grid model 100","XGBoost grid model 83","GBM grid model 28","XGBoost grid model 32","GBM grid model 4","XGBoost grid model 96","XGBoost grid model 40","GBM grid model 53","GBM grid model 74","GBM grid model 16","GBM grid model 12","GBM grid model 69","Super learner final","GBM grid model 89","XGBoost grid model 64","XGBoost grid model 38","GBM grid model 80","GBM grid model 97","GBM grid model 78","GBM grid model 87","GBM grid model 38","GBM grid model 58","XGBoost grid model 4","GBM grid model 68","GBM grid model 96","GBM grid model 27","GBM grid model 99","GBM grid model 2","GBM grid model 60","GBM grid model 25","Neural network grid model 1","XGBoost grid model 51","GBM grid model 56","GBM grid model 44","Neural network grid model 21","XGBoost grid model 37","Neural network grid model 6","Neural network grid model 57","XGBoost grid model 30","Neural network grid model 12"],[0.5007,0.4621,0.8041,0.4267,0.7211,0.6816,0.6816,0.3927,0.4621,0.5816,0.6816,0.6816,0.5816,0.3927,0.4267,0.3927,0.1968,0.5007,0.3569,0.8041,0.5007,0.8041,0.6816,null,0.6514,0.3927,0.6816,0.8528,0.5007,0.7679,0.2856,0.5816,0.8041,0.7679,0.6816,0.8041,0.9698,0.4621,0.7211,0.6816,0.8041,0.5816,0.8041,0.2212,0.5816,0.8528,0.8528,0.6514,0.2212,0.8041,0.6258,0.6258,0.7679,0.4621,0.6816,0.6816,0.6816,0.0009,0.6258,0.1295,0.5007,0.6514,0.6514,0.6258,0.6514,0.5816,0.6514,0.6258,0.8528,0.5007,0.5816,0.545,0.7211,0.6514,0.1295,0.1133,0.8041,0.7679,0.5816,0.7211,0.6258,0.4621,0.6514,0.7211,0.7211,0.5007,0.0017,0.5816,0.4621,0.545,0.32,0.4267,0.7211,0.4267,0.4621,0.4621,0.4267,0.6514,0.6514,0.6816,0.6514,0.4267,0.7679,0.545,0.1968,0.2526,0.7211,0.6514,0.6514,0.32,0.3927,0.545,0.1491,0.32,0.6514,0.545,0.4267,0.2212,0.2212,0.3569,0.0009,0.1717,0.4267,0.2856,0.0028,0.0723,0.0009,0.1133,0.0305,0.0017],[0.8528,0.257,0.111,0.175,0.111,0.111,0.111,0.1915,0.1915,0.1173,0.111,0.1915,0.111,0.2074,0.111,0.5358,0.4487,0.1915,0.3139,0.0697,0.1491,0.0697,0.0697,0.0697,0.1317,0.1915,0.0697,0.0697,0.1132,0.0697,0.3484,0.2074,0.0697,0.0697,0.0697,0.0697,0.0697,0.1615,0.0719,0.0697,0.0697,0.1132,0.0697,0.2296,0.0697,0.0697,0.0697,0.0697,0.1915,0.0697,0.0697,0.0697,0.0697,0.1915,0.1193,0.0697,0.0697,null,0.0697,0.3139,0.1615,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.1615,0.2074,0.0719,0.0697,0.0697,0.0697,0.0719,0.0697,0.0697,0.0697,0.0697,0.0697,0.2296,0.0917,0.0697,0.0697,0.0697,0.0697,0.0697,0.0697,0.1173,0.0697,0.0697,0.0719,0.0719,0.0697,0.0719,0.1193,0.0697,0.0761,0.1038,0.1317,0.0719,0.0719,0.0719,0.1317,0.079,0.0697,0.1193,0.1038,0.0719,0.0988,0.0719,0.0803,0.0697,0.0988,0.1317,0.1038,0.0697,0.0719,0.1038,0.0697,0.1193,0.0697,0.0803,0.0988],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.1127,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,0.9456,0.8968,0.8968,0.8968,0.8968,0.8968,0.9729,0.8968,1,0.9183,0.8968,0.8968,0.8968,0.8968,0.8332,0.7765,0.9183,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.5446,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8065,0.8968,0.8968,0.8968,0.8968,0.8553,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.0028,0.8968,0.6234,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.4927,0.8553,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.2517,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.9183,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8968,0.8818,0.6828,0.8968,0.8968,0.8968,0.8065,0.8968,0.8968,0.4191,0.8818,0.8968,0.6234,0.8968,0.7765,0.6234,0.8553,0.0024,0.4021,0.8968,0.8968,0.0511,0.289,0.3246,0.4436,0.0769,0.0895],[106,96,17,80,19,28.5,28.5,91,93,51,42,60,63,100,88,107,121,84,98,4,79,7,11,1,62,101,20,9,86,8,119,69,13,21.5,18,14,5,95,40,16,10,64,6,112,36,2,3,33,115,12,32,30,21.5,92,61,24,23,260,41,138,97,34,35,45,67,54,74,55,37,57,70,68,38,43,132,153,15,44,56,49,27,90,47,53,52,71,228,75,82,66,83,72,25,81,76,77,87,46,58,50,48,99,26,73,111,110,31,65,39,103,94,59,127,104,78,85,89,116,109,105,316,126,102,118,227,156,244,163,165,238],[4,35,99.5,68,102,102,102,64,62,121,110,98,106,72,99.5,14,41,86,67,174.5,81,174.5,174.5,174.5,126,85,174.5,174.5,119,174.5,57,109,174.5,174.5,174.5,174.5,174.5,104,143,174.5,174.5,122,174.5,77,174.5,174.5,174.5,174.5,91,174.5,174.5,174.5,174.5,117,146,174.5,174.5,1,174.5,93,124,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,174.5,115,107,217.5,174.5,174.5,174.5,217.5,174.5,174.5,174.5,174.5,174.5,61,203,174.5,174.5,174.5,174.5,229.5,174.5,202,174.5,174.5,219,220,229.5,244,215,228,237,212,223,246,216,243,234,257,252,245,274,286,290,242,270,276,284,97,271,291,297,231,307,248,315,313,294],[195,215,235,217,240,240,240,225,230,192,247.5,238,244,212,235,218,178,221,209,257,245,255,252,263,216,175,251,264,246,269,208,224,267,259,266,272,282,227,243,274,280,249,287,206,258,295,296,268,210,290,271,273,283,213,228,293,294,12,281,183,223,291,292,286,265,278,260,284,304,285,275,277,308,307,194,180,262,312,302,310,254,270,314,309,311,303,118,237,300,316,301,313,261,305,247.5,315,306,276,250,256,253,235,299,242,220,200,289,297,288,214,219,279,176,211,231,204,298,222,229,232,1,203,233,226,95,189,153,201,168,116],[1,3,8,3,8,8,8,3,12.5,42,8,12.5,8,42,8,99,121,71.5,98,42,73,42,42,42,77.5,123,42,42,42,42,110,94,42,42,42,42,42,77.5,77.5,42,42,71.5,42,115,42,42,42,42,101.5,42,42,42,42,100,97,42,42,262,42,125,95.5,42,42,42,42,42,42,42,42,42,42,42,42,42,126,128,77.5,42,42,42,77.5,42,42,42,42,42,184,77.5,42,42,42,42,86.5,42,82,42,42,77.5,91,86.5,86.5,86.5,86.5,92.5,101.5,119,86.5,77.5,86.5,108.5,95.5,92.5,139,104,103,120,86.5,108.5,111,105,316,131,106,107,215,152,164,141,182,223],[306,349,359.5,368,369,378.5,378.5,383,397.5,406,407.5,408.5,421,426,430.5,438,461,462.5,472,477.5,478,478.5,479.5,480.5,481.5,484,487.5,489.5,493,493.5,494,496,496.5,497,500.5,502.5,503.5,503.5,503.5,506.5,506.5,506.5,509.5,510,510.5,513.5,515.5,517.5,517.5,518.5,519.5,519.5,521,522,532,533.5,533.5,535,538.5,539,539.5,541.5,543.5,547.5,548.5,548.5,550.5,555.5,557.5,558.5,561.5,561.5,562.5,566.5,567,568,572,572.5,574.5,575.5,576,576.5,577.5,578.5,579.5,590.5,591,592.5,598.5,598.5,600.5,601.5,602,602.5,607.5,608.5,609.5,618.5,619,622,631.5,635.5,639.5,644.5,644.5,652,652.5,655.5,656.5,659.5,665.5,682.5,687,693,698,699,715.5,716.5,725,726,730,731,732,748,768,804,809,820,828,871]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-5-5" class="section level4 hasAnchor" number="5.4.4.5">
<h4><span class="header-section-number">5.4.4.5</span> CV 5<a href="id_05_adversarial_computational_control.html#cv-5-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-8c618d6b9ec37facdbdc" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c618d6b9ec37facdbdc">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 55","GBM grid model 26","GBM grid model 29","GBM grid model 66","GBM grid model 11","GBM grid model 94","GBM grid model 35","GBM grid model 80","GBM grid model 7","GBM grid model 46","GBM grid model 28","GBM grid model 5","GBM model 5","XGBoost grid model 84","GBM grid model 83","GBM grid model 9","GBM grid model 37","GBM grid model 97","GBM grid model 15","GBM grid model 32","XGBoost grid model 61","GBM grid model 93","GBM grid model 82","GBM grid model 51","XGBoost grid model 26","GBM grid model 64","XGBoost grid model 31","XGBoost grid model 65","XGBoost grid model 43","XGBoost grid model 10","XGBoost grid model 57","XGBoost grid model 72","XGBoost grid model 32","XGBoost grid model 29","GBM grid model 100","XGBoost grid model 62","XGBoost grid model 90","GLM model","XGBoost grid model 56","GBM grid model 78","XGBoost grid model 100","GBM grid model 60","XGBoost grid model 96","XGBoost grid model 40","XGBoost grid model 99","XGBoost grid model 83","Super learner final","GBM grid model 63","GBM grid model 96","GBM grid model 74","GBM grid model 21","Super learner neural network","GBM grid model 88","GBM grid model 58","GBM grid model 50","GBM grid model 61","GBM grid model 73","GBM grid model 43","GBM grid model 3","GBM grid model 30","GBM grid model 81","GBM grid model 47","GBM grid model 90","Neural network grid model 43","GBM grid model 13","GBM grid model 76","GBM grid model 72","GBM grid model 1","XGBoost grid model 64","GBM grid model 53","GBM grid model 14","GBM grid model 20","GBM grid model 16","GBM grid model 62","Neural network grid model 13","Neural network grid model 21","Neural network grid model 79","Neural network grid model 24","Neural network grid model 65","Neural network grid model 57"],[0.7603,0.2774,0.3878,0.0924,0.4774,0.6609,0.7603,0.2459,0.3878,0.2185,0.4312,0.6609,0.8093,0.0004,0.0803,0.7091,0.5674,0.0043,0.0292,0.3878,0.8093,0.5206,0.0292,0.8093,0.976,0.5674,0.8093,1,0.976,0.7091,0.976,1,0.7091,0.6609,0.2459,0.6609,0.8638,0.5206,0.7091,0.0576,0.5206,0.035,0.8638,0.6157,0.6609,0.5674,null,0.5206,0.0199,0.0415,0.6157,0.1933,0.035,0.035,0.1082,0.0924,0.0068,0.3497,0.0162,0.0682,0.1463,0.6157,0.2185,0.0004,0.7603,0.0494,0.0133,0.2185,0.2185,0.0035,0.0803,0.0133,0.0924,0.0292,0.0004,0.0004,0.0004,0.0004,0.0004,0.0004],[0.389,0.4176,0.5152,0.4176,0.389,0.2972,0.2512,0.4488,0.3169,0.2972,0.3169,0.2899,0.4791,null,0.389,0.2899,0.219,0.4488,0.3169,0.219,0.2342,0.2512,0.2046,0.219,0.1699,0.2003,0.1699,0.1699,0.1699,0.1699,0.1699,0.1699,0.1699,0.1699,0.219,0.1699,0.1699,0.2715,0.1699,0.2899,0.1699,0.2899,0.1699,0.1699,0.1699,0.1699,0.1763,0.219,0.389,0.2342,0.2145,0.2046,0.1821,0.2167,0.1821,0.1763,0.219,0.1763,0.2715,0.2167,0.2046,0.1699,0.1821,0.2972,0.1699,0.1912,0.2145,0.2145,0.1699,0.2046,0.1821,0.2145,0.2003,0.1763,0.2899,0.2972,0.1763,0.1763,0.1699,0.2512],[null,null,null,null,null,null,null,null,null,null,null,null,null,0.0155,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.6406,0.1826,0.5402,0.1239,0.4315,0.3518,0.7517,0.2494,0.2766,0.2074,0.5213,0.4524,0.87,0.0013,0.1402,0.7785,0.2636,0.0194,0.1502,0.4114,0.8977,0.6657,0.0156,0.5399,1,0.6406,1,1,1,null,1,1,1,1,0.2636,1,1,0.5681,1,0.0439,1,0.0439,1,1,1,1,0.9575,0.6406,0.0283,0.0924,0.3328,0.4983,0.0128,0.0283,0.1402,0.0789,0.0232,0.4731,0.031,0.1315,0.1502,0.4114,0.1574,0.0921,0.4114,0.1239,0.0092,0.1591,0.4315,0.0256,0.1502,0.0921,0.0854,0.0117,0.0008,0.0373,0.1239,0.0439,0.0361,0.0043],[47,64,48,73,77,35,22,78,75,53,44,28,18,194,100,41,43,91,72,31,16,33,95,29,4,25,8,2,7,15,6,3,11,14,37,9,5,19,13,118,21,158,10,20,12,17,1,51,141,86,24,36,137,116,55,66,109,27,144,71,63,23,65,208,32,62,97,87,30,88,76,68,69,102,305,259,180,172,222,229],[64,35,45,78,49,97,96,80,90,82,102,151,123,1,57,138,128,85,93,171,178,183,150,194,218,208,218,218,218,218,218,218,218,218,202,218,218,209,218,140,218,144,218,218,218,218,241,186,116,177,242,233,168,179,243,237,196,270,167,231,244,303,265,165,312,264,250,238,316,261,271,277,284,297,174,199,299,313,305,276],[231,205,242,181,219,230,293,210,214,253,261,238,295,43,207,249,234,202,240,267,296,289,163,282,302,279,304,311,307,300,309,312,305,303,260,310,314,298,308,151,301,95,315,306,316,313,299,286,160,217,277,292,152,191,259,243,194,291,161,265,250,290,239,184,274,276,182,245,297,237,254,272,257,227,1,204,252,228,233,172],[36,81,56,79,69,55,21,73,64,57,39,30,20,219,97,34,59,89,70,35,19,23,121,27,9,25,9,9,9,9,9,9,9,9,47,9,9,22,9,140,9,155,9,9,9,9,18,41.5,150,93,43,31,156,128,60,78,125,41.5,159,66,76,32,84,99,40,58,132,92,28.5,87,75,67,82,108,316,136,88,110,114.5,198],[378,385,391,411,414,417,432,441,443,445,446,447,456,457,461,462,464,467,475,504,509,528,529,532,533,537,539,540,541,542,542,542,543,544,546,546,546,548,548,549,549,552,552,553,555,557,559,564.5,567,573,586,592,613,614,617,624,624,629.5,631,633,633,648,653,656,658,660,661,662,671.5,673,676,684,692,734,796,798,819,823,874.5,875]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-6-5" class="section level4 hasAnchor" number="5.4.4.6">
<h4><span class="header-section-number">5.4.4.6</span> CV 6<a href="id_05_adversarial_computational_control.html#cv-6-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-da60214c2d95d6b69d3a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-da60214c2d95d6b69d3a">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 21","GBM grid model 30","XGBoost grid model 38","GLM model","GBM grid model 76","Super learner XGBoost","GBM grid model 93","GBM grid model 16","GBM model 5","GBM grid model 18","GBM grid model 51","GBM grid model 61","GBM grid model 15","GBM grid model 58","GBM grid model 37","GBM grid model 86","GBM grid model 80","GBM grid model 97","GBM grid model 23","Super learner final","XGBoost grid model 31","XGBoost grid model 26","XGBoost grid model 56","XGBoost grid model 43","XGBoost grid model 100","XGBoost grid model 57","XGBoost grid model 32","XGBoost grid model 65","XGBoost grid model 72","XGBoost grid model 99","XGBoost grid model 10","XGBoost grid model 29","XGBoost grid model 62","XGBoost grid model 40","XGBoost grid model 90","XGBoost grid model 83","XGBoost grid model 96","GBM grid model 81","GBM grid model 100","GBM grid model 57","GBM grid model 53","GBM grid model 63","Super learner neural network","GBM grid model 43","GBM grid model 33","GBM grid model 9","GBM grid model 35","GBM grid model 20","GBM grid model 32","Super learner GBM","GBM grid model 5","XGBoost grid model 61","XGBoost grid model 66","Neural network grid model 47","Neural network grid model 58","Neural network grid model 76","GBM grid model 29","GBM grid model 13","GBM grid model 62","GBM grid model 50","Neural network grid model 57","GBM grid model 44","GBM grid model 28","GBM grid model 11","GBM grid model 7","GBM grid model 1","GBM grid model 47","XGBoost grid model 64","Neural network grid model 43","GBM grid model 54","Neural network grid model 41","Neural network grid model 30","GBM grid model 52","GBM grid model 96","Neural network grid model 22","Neural network grid model 99","XGBoost grid model 76","Neural network grid model 65"],[0.2346,0.0899,0.0326,0.8666,0.1809,0.2346,0.5013,0.0899,0.5013,0.4193,0.1197,0.5013,0.2986,0.0124,0.0083,0.001,0.0151,0.0387,0.0027,null,0.9729,0.9214,1,0.9729,0.5013,0.812,0.6543,0.9214,0.812,0.9729,0.5502,0.6013,0.8666,0.7044,0.7578,0.7044,0.7578,0.2649,0.7044,0.0042,0.0042,0.461,0.1379,0.1592,0.046,0.1809,0.2649,0.1038,0.1809,0.1038,0.461,0.0651,0.1197,0.0004,0.0004,0.0004,0.461,0.1379,0.1038,0.1038,0.0004,0.0034,0.5013,0.0151,0.0549,0.0387,0.2069,0.0006,0.0004,0.0017,0.0004,0.0004,0.0067,0.0006,0.0004,0.0004,0.0183,0.0004],[0.1862,0.1862,0.1552,0.2282,0.3525,0.1396,0.1298,0.1862,0.1708,0.1552,0.114,0.1298,0.1298,0.1708,0.1098,0.1298,0.0954,0.0954,0.1295,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.0954,0.1298,0.0954,0.1298,0.1293,0.1111,0.1396,0.1708,0.1396,0.1862,0.1552,0.0954,0.0954,0.1708,0.0954,0.114,0.1111,null,0.2282,0.2282,0.0954,0.1111,0.1024,0.114,0.1298,0.0954,0.0954,0.0954,0.0954,0.1293,0.1024,0.1098,0.1098,0.0954,0.1111,0.114,0.0954,0.1552,0.1298,0.0954,0.1552,0.0954],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.3508,0.3341,0.1466,0.901,0.48,0.5956,0.8749,0.48,0.9612,0.901,0.3896,0.5723,0.5723,0.0361,0.0329,0.0032,0.0329,0.0963,0.0115,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.2189,0.6698,0.0083,0.0141,0.3896,0.6192,0.5497,0.0963,0.5497,0.5947,0.191,0.2988,0.6698,0.6192,0.3341,0.6698,0.0026,0.0157,0.0026,0.7853,0.3508,0.191,0.1466,0.0549,0.0044,0.5286,0.0706,0.1196,0.1692,0.2988,0.0019,0.5497,0.0067,0.0036,0.0049,0.0075,0.0029,0.001,0.0329,0.047,0.1119],[33,42,58,15,31,29,24,39,19,23,35,22,40,77,70,124,78,65,75,1,2,5,4,6,17,9,14,8,7,3,21,18,11,16,10,12,13,48,20,90,88,26,46,50,71,28,25,41,45,38,32,43,30,282,252,278,52,36,72,57,210,191,27,69,73,61,54,153,203,98,260,256,95,136,309,242,236,219],[3,6,10,43,49,41,59,52,70,74,85,87,89,72,82,46,98,99,90,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,152.5,170,176,123,122,173,164,194,190,197,221,215,222,234,240,252,246,1,48,33,258,261,249,238,120,136,289,266,273,285,293,214,168,275,119,105,306,278,118,262,280,314],[255,264,237,297,263,287,284,271,298,296,265,281,267,195,220,145,186,227,211,299,304,302,308,307,301,309,305,311,312,316,300,303,310,306,314,313,315,229,282,189,208,273,293,246,218,292,288,275,278,294,291,257,295,7,52,31,261,286,221,272,80,120,289,244,226,268,280,169,270,210,56,118,199,158,1,213,222,234],[34.5,33,56,21,36,26,23,32,19,20,31,30,34.5,87,76,139,94,69,85,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,51,25,101,97,44,27.5,45,74,40,29,49,41,22,27.5,42,24,306,250,263,37,38.5,80,61,218,186,38.5,77,86,65,52,148,46,113,264,242,128,164,316,115,118,114],[325.5,345,361,376,379,383,390,394,406,413,416,420,430.5,431,448,454,456,460,461,462,468,469,474,475,480,480,481,481,481,481,483,483,483,484,486,487,490,498,503,503,515,516,530.5,535,553,557,563,580,586,588,590.5,594,595,596,602,605,608,621.5,622,628,628,633,643.5,656,658,679,679,684,687,696,699,721,728,736,744,832,856,881]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-7-5" class="section level4 hasAnchor" number="5.4.4.7">
<h4><span class="header-section-number">5.4.4.7</span> CV 7<a href="id_05_adversarial_computational_control.html#cv-7-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-136e836c47b735742fa8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-136e836c47b735742fa8">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 23","GBM grid model 58","GBM grid model 39","GBM grid model 4","GBM grid model 73","GBM grid model 11","GBM grid model 88","GBM grid model 41","GBM grid model 6","GBM grid model 97","GBM grid model 68","GBM grid model 77","GBM grid model 100","GBM grid model 25","GBM grid model 14","GBM grid model 28","GBM grid model 86","GBM grid model 13","GBM grid model 35","GBM grid model 30","GBM grid model 49","GBM grid model 20","GBM grid model 95","GLM model","GBM grid model 47","XGBoost grid model 38","GBM grid model 15","GBM grid model 18","GBM grid model 61","GBM grid model 5","GBM grid model 36","GBM grid model 32","GBM grid model 46","GBM grid model 43","GBM grid model 12","GBM grid model 21","GBM grid model 29","GBM grid model 51","GBM grid model 71","GBM grid model 54","GBM grid model 1","GBM grid model 80","GBM grid model 26","GBM grid model 79","GBM grid model 91","GBM grid model 37","XGBoost grid model 64","GBM grid model 81","GBM grid model 33","GBM grid model 76","GBM grid model 83","GBM grid model 90","XGBoost grid model 61","GBM grid model 62","GBM grid model 94","GBM grid model 64","GBM grid model 10","GBM grid model 63","GBM grid model 22","GBM grid model 74","GBM grid model 9","GBM grid model 19","GBM grid model 55","GBM grid model 50","GBM grid model 59","GBM grid model 93","GBM grid model 38","GBM grid model 85","GBM grid model 57","GBM grid model 78","GBM grid model 92","GBM grid model 75","Super learner final","GBM grid model 82","GBM model 5","XGBoost grid model 76","GBM grid model 72","GBM grid model 65","GBM grid model 16","XGBoost grid model 51","GBM grid model 52","XGBoost grid model 72","XGBoost grid model 65","Neural network grid model 62","Neural network grid model 2","XGBoost grid model 26","XGBoost grid model 31","XGBoost grid model 56","XGBoost grid model 29","XGBoost grid model 43","XGBoost grid model 57","XGBoost grid model 90","XGBoost grid model 10","XGBoost grid model 32","XGBoost grid model 100","XGBoost grid model 83","GBM grid model 31","XGBoost grid model 62","GBM grid model 7","XGBoost grid model 99","XGBoost grid model 40","GBM grid model 53","XGBoost grid model 96","GBM grid model 17","GBM grid model 89","GBM grid model 27","GBM grid model 96","GBM grid model 48","GBM grid model 56","GBM grid model 98","GBM grid model 99","GBM grid model 2","GBM grid model 3","GBM grid model 84","Neural network grid model 1","GBM grid model 66","GBM grid model 60","Super learner neural network","XGBoost grid model 66","GBM grid model 42","GBM grid model 44","GBM grid model 69","GBM grid model 45","GBM grid model 24","GBM grid model 87","GBM model 1","GBM model 2","XGBoost grid model 81","XGBoost grid model 60","XGBoost grid model 79","Neural network grid model 30"],[0.7728,0.7905,0.686,0.7249,0.7249,0.7905,0.7249,0.7905,0.7905,0.7905,0.7249,0.7249,null,0.5983,1,0.9396,0.7728,0.9887,0.9887,0.9616,0.9887,0.9616,0.7249,0.4547,1,0.2972,0.9396,0.9396,1,0.9616,0.3672,0.9616,0.9887,0.9616,0.9396,0.9396,0.9616,0.9887,0.7249,0.7728,0.7905,1,0.7905,0.505,0.3672,0.7905,0.3672,0.9616,0.8405,0.9887,1,0.9887,0.3672,0.9616,1,0.9396,0.202,0.9887,0.8405,0.9616,0.9887,0.7728,0.9396,0.7905,0.3344,0.9616,0.505,0.7905,0.7905,0.8405,0.9396,0.9887,0.8999,0.7728,0.3672,0.1152,0.686,0.7905,0.9616,0.2293,0.686,0.686,0.7728,0.0011,0.0056,0.686,0.6502,0.6502,0.5983,0.686,0.5584,0.686,0.5584,0.6502,0.6502,0.5983,0.7905,0.5983,0.9887,0.686,0.5983,0.9616,0.5983,0.8999,0.9616,0.686,0.686,0.8405,0.7905,0.4096,0.7905,0.5983,0.5983,0.7249,0.0011,0.8405,0.7249,0.2293,0.4096,0.7905,0.2972,0.4096,0.3672,0.3672,0.4547,0.0999,0.1152,0.1754,0.0862,0.0999,0.0069],[0.0993,0.0043,0.0143,0.0176,0.0061,0.0027,0.0765,0.0027,0.0149,0.0009,0.0599,0.2705,0.0003,0.0765,0.0003,0.0003,0.0765,0.0003,0.0003,0.0003,0.0003,0.0003,0.0034,0.0329,0.0003,0.1918,0.0003,0.0003,0.0003,0.0003,0.2145,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0166,0.0112,0.0003,0.0003,0.0003,0.148,0.1144,0.0003,0.2145,0.0003,0.0003,0.0003,0.0003,0.0003,0.0681,0.0003,0.0003,0.0003,0.2997,0.0003,0.0003,0.0017,0.0003,0.0003,0.0003,0.0003,0.0765,0.0003,0.0061,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0681,0.3681,0.0003,0.0003,0.0004,0.0278,0.0003,0.0003,0.0003,null,0.1918,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0003,0.0167,0.0003,0.0004,0.0003,0.0003,0.0004,0.0003,0.0007,0.0004,0.0329,0.0037,0.0004,0.0121,0.0599,0.0011,0.0197,0.0024,0.0006,0.3681,0.0005,0.0197,0.0599,0.0062,0.0006,0.0009,0.0007,0.0062,0.0022,0.0017,0.0143,0.0062,0.008,0.0121,0.0062,0.0143],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0575,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,1,null,0.9886,0.9886,1,0.9886,1,1,0.9886,0.9886,1,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.8229,0.7928,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.8577,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.7928,0.9886,0.9886,0.9886,0.7928,0.9886,0.9886,0.9886,0.0025,0.0206,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.9886,0.0025,0.9886,0.9199,0.7045,0.8894,0.9886,0.9886,0.9886,0.7928,0.6164,0.9199,0.6755,0.5086,0.593,0.3438,0.3438,0.0242],[53,29,75,70,76,40,98,58,79,44,84,85,1,101,9,5,83,19,7,11,2,21,64,107,10,125,30,28,4,12,120,25,20,23,43,35,32,18,88,62,52,8,41.5,106,112,41.5,119,16,47,22,17,13,110,34,14,33,117,36,61,3,24,67,45,50,118,27,102,38,55,46,39,51,37,48,111,142,65,69,6,127,89,56,59,285,276,73,71,68,77,74,82,80,95,91,97,86,63,92,15,87,100,31,96,54,26,93,78,57,72,103,60,94,99,81,315,49,90,121,108,66,115,105,104,113,109,150,151,133,145,144,256],[32,85,46,73,91,98,51,95,75,116,36,31,158.5,40,158.5,158.5,63,158.5,158.5,158.5,158.5,158.5,113,82,158.5,39,158.5,158.5,158.5,158.5,52,158.5,158.5,158.5,158.5,158.5,158.5,158.5,94,114,158.5,158.5,158.5,99,87,158.5,67,158.5,158.5,158.5,158.5,158.5,66,158.5,158.5,158.5,100,158.5,158.5,200,158.5,158.5,158.5,158.5,93,158.5,105,158.5,158.5,158.5,158.5,158.5,158.5,158.5,119,106,158.5,158.5,222.5,121,158.5,158.5,158.5,1,33,158.5,158.5,158.5,158.5,158.5,158.5,158.5,158.5,158.5,158.5,158.5,213,158.5,225,158.5,158.5,222.5,158.5,232,219.5,212,239,219.5,245,226,252,242,244,274,47,258,256,272,286,282,292,295,305,310,308,293,297,304,311,316,249],[238,214,233,212,203,242,230,240,241,216,235,231,245,221,248,257,220,247,262,259,269,253,208,207,267,211,249,251,277,270,205,260,266,265,246,254,258,272,219,236,244,288,256,178,187,263,217,289,261,286,291,295,237,278,298,280,177,279,255,229,294,252,275,271,202,297,226,292,276,287,296,285,299,290,225,180,284,281,250,196,273,312,311,9,50,302,304,308,303,307,309,314,300,305,301,313,224,310,283,316,306,274,315,243,293,213,215,268,228,199,239,222,234,210,1,282,223,172,201,264,198,227,218,206,232,197,189,209,179,194,97],[6.5,2.5,2.5,2.5,2.5,6.5,9,6.5,6.5,43,77,85,43,88,43,43,100,43,43,43,43,43,90.5,81,43,105,43,43,43,43,108.5,43,43,43,43,43,43,43,90.5,81,43,43,43,116,119,43,103,43,43,43,43,43,97,43,43,43,121,43,43,86.5,43,43,43,43,110,43,95,43,43,43,43,43,43,43,94,122,43,43,81,118,43,43,43,277,217,43,43,43,43,43,43,43,43,43,43,43,101,43,81,43,43,81,43,86.5,81,102,93,81,97,114,99,107,90.5,104,315,90.5,111,125,112.5,97,106,108.5,117,126,112.5,130,140,131,155,148,223],[329.5,330.5,356.5,357.5,372.5,386.5,388,399.5,401.5,419,432,432,447.5,450,458.5,463.5,466,467.5,470.5,471.5,472.5,475.5,475.5,477,478.5,480,480.5,480.5,482.5,483.5,485.5,486.5,487.5,489.5,490.5,490.5,491.5,491.5,491.5,493,497.5,497.5,499,499,505,506,506,506.5,509.5,509.5,509.5,509.5,510,513.5,513.5,514.5,515,516.5,517.5,518.5,519.5,520.5,521.5,522.5,523,525.5,528,531.5,532.5,534.5,536.5,537.5,537.5,539.5,549,550,550.5,551.5,559.5,562,563.5,569.5,571.5,572,576,576.5,576.5,577.5,581.5,582.5,592.5,595.5,596.5,597.5,599.5,600.5,601,603.5,604,604.5,607.5,608.5,612.5,615.5,619.5,620,625,625.5,642,642,650,665,667.5,669,678,679.5,680,690,707.5,709,711,735.5,744,755,761.5,770,777,777,790,802,825]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-8-5" class="section level4 hasAnchor" number="5.4.4.8">
<h4><span class="header-section-number">5.4.4.8</span> CV 8<a href="id_05_adversarial_computational_control.html#cv-8-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-026051378310a60f8996" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-026051378310a60f8996">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 54","GBM grid model 19","GBM grid model 55","GBM grid model 16","GBM grid model 49","GBM grid model 84","GBM grid model 75","GBM grid model 7","GBM grid model 83","GBM grid model 62","GBM grid model 23","GBM grid model 56","GBM grid model 31","GBM grid model 38","GBM grid model 66","GBM grid model 69","GBM grid model 22","XGBoost grid model 64","GBM grid model 39","GBM grid model 79","GBM grid model 26","Neural network grid model 4","GBM grid model 99","GBM grid model 18","GBM grid model 32","GBM grid model 37","GBM grid model 29","GBM grid model 11","GBM grid model 13","GBM grid model 35","GBM grid model 5","GBM grid model 30","GBM grid model 28","GBM grid model 51","GBM grid model 21","GBM grid model 43","GBM grid model 14","GBM grid model 20","GBM grid model 46","GBM grid model 100","GBM grid model 47","GBM grid model 15","GBM grid model 59","GBM grid model 33","GBM grid model 42","GBM grid model 50","GBM grid model 1","GBM grid model 76","GBM grid model 64","GBM grid model 12","GBM grid model 61","GBM grid model 63","GBM grid model 9","GBM grid model 90","GBM grid model 71","GBM grid model 53","GBM grid model 80","GBM grid model 96","GBM grid model 57","GBM grid model 82","GBM grid model 58","GBM grid model 93","GBM grid model 94","GBM grid model 3","GBM grid model 81","GBM grid model 25","GBM grid model 98","GBM grid model 78","GBM grid model 72","GBM grid model 74","GBM grid model 77","GBM grid model 45","GBM grid model 4","GBM grid model 52","GBM grid model 97","GBM grid model 44","GBM grid model 89","GBM grid model 92","Super learner final","GBM grid model 73","XGBoost grid model 31","XGBoost grid model 26","XGBoost grid model 43","XGBoost grid model 99","XGBoost grid model 72","XGBoost grid model 90","XGBoost grid model 62","XGBoost grid model 56","XGBoost grid model 65","GBM grid model 85","XGBoost grid model 37","XGBoost grid model 57","XGBoost grid model 100","XGBoost grid model 29","XGBoost grid model 32","GBM grid model 27","XGBoost grid model 83","XGBoost grid model 96","XGBoost grid model 40","XGBoost grid model 10","GBM grid model 86","XGBoost grid model 61","GBM grid model 60","GBM grid model 17","GBM grid model 88","GBM grid model 41","Neural network grid model 1","GBM grid model 65","GBM grid model 2","GBM grid model 91","XGBoost grid model 66","GBM grid model 48","GBM grid model 68","GBM grid model 36","GBM grid model 34","GBM grid model 24","GBM model 5","XGBoost grid model 52","GBM grid model 87","GBM grid model 6","XGBoost grid model 49","GBM grid model 95","Super learner neural network","XGBoost grid model 80","GBM grid model 67","GLM model","GBM grid model 8","XGBoost grid model 36","GBM grid model 40","Neural network grid model 19","Neural network grid model 21"],[0.8537,0.6784,0.7623,0.976,0.7623,0.7244,0.7623,0.8867,0.8867,0.7623,null,0.6282,0.3921,0.2258,0.7623,0.3207,0.6282,0.1163,0.5793,0.1008,0.8867,0.0005,0.4771,0.976,0.976,0.8867,0.8867,0.8867,0.8867,0.976,0.976,0.976,0.8537,0.8537,0.8053,0.8867,0.7623,0.8537,0.9395,0.8053,0.8867,0.8053,0.1328,0.8867,0.4771,0.7623,0.8053,0.976,0.8537,0.7244,0.7244,0.8053,1,0.976,0.1993,0.6784,0.8053,0.1525,0.8053,0.7623,0.7623,0.9395,0.9395,0.3207,0.7244,0.1328,0.1328,0.7244,0.5793,0.6282,0.3539,0.1993,0.3921,0.3207,0.6282,0.1993,0.7244,0.4771,0.6784,0.3207,0.4771,0.3539,0.3539,0.4343,0.3921,0.2895,0.2258,0.2258,0.2568,1,0.0245,0.1993,0.1525,0.1525,0.1328,0.3921,0.1163,0.176,0.1008,0.1163,0.2895,0.3539,0.3539,0.2568,0.4343,0.3539,0.0005,0.6784,0.1328,0.0621,0.0729,0.5279,0.1993,0.176,0.1163,0.1328,0.2895,0.0517,0.1525,0.4343,0.0729,0.3207,0.0245,0.036,0.014,0.2258,0.014,0.0729,0.0245,0.014,0.0014],[0.1525,0.0239,0.0269,0.0201,0.0201,0.0672,0.0201,0.0201,0.0201,0.0201,0.019,0.1354,0.0903,0.0687,0.0075,0.0429,0.019,0.1735,0.0075,0.3135,0.0054,null,0.0243,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.1735,0.0054,0.019,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0142,0.0054,0.0054,0.0243,0.0054,0.0054,0.0054,0.0054,0.0054,0.0511,0.0054,0.028,0.0687,0.0054,0.0054,0.0054,0.033,0.0383,0.0054,0.0054,0.0054,0.0177,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0054,0.0903,0.0054,0.0054,0.0054,0.0054,0.017,0.0054,0.0054,0.0054,0.0054,0.0177,0.033,0.019,0.0054,0.019,0.0054,0.2838,0.0054,0.0145,0.0243,0.019,0.0054,0.0145,0.009,0.0108,0.009,0.0074,0.0145,0.0054,0.0054,0.0145,0.0054,0.0145,0.028,0.0243,0.0108,0.0218,0.0054,0.0243,0.0074,0.0054],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0005,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.5993,1,0.0019,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.5724,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.046,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.0009,1,1,0.52,0.52,1,1,0.6936,0.469,0.6599,1,0.4436,0.9562,1,0.2808,1,0.3477,0.2961,0.3307,1,0.1982,0.1852,0.1722,0.046,0.006],[44,48,38,7,35,53,41,46,40,42,1,64,71,92,34,82,57,107,52,128,3.5,209,58,9,5,3.5,10,22,20,8,2,14,19,6,24,13,30,28,16,39,17,36,117,29,67,21,49,15,23,55,26,25,12,11,88,37,27,100,45,33,47,31,32,86,43,113,119,51,56,60,96,98,83,74,50,118,62,59,54,81,63,70,66,69,77,75,80,84,85,18,171,89,101,99,97,68,91,93,103,110,87,79,95,73,108,72,315,61,120,126,115,65,94,109,132,106,90,129,102,76,130,78,127,137,155,104,153,125,143,158,259],[32,70,61,77,79,49,79,79,81.5,81.5,114,54,46,58,121.5,65,112,34,121.5,48,173,1,107,173,173,173,173,173,173,173,173,173,173,173,173,173,173,173,173,173,173,173,67,173,127,173,173,173,173,173,173,173,173,173,131,173,173,105,173,173,173,173,173,126,173,137,108,173,173,173,140,138,173,173,173,139,173,173,173,173,173,173,173,173,173,173,173,173,173,223,133,173,173,173,173,278,173,173,173,173,219,230,213,227,248,226,22,224,218,209,222,252,268,254,243,272,282,253,289,293,269,259,284,287,271,301,291,310,308,313,306],[209,192,211,228.5,232.5,245,232.5,232.5,239.5,239.5,239.5,198,210,222,236.5,200,232.5,212,236.5,179,257,83,219,254,261,264,259,248,250,263,271,260,258,273,256,267,251,255,268,247,269,252,206,262,232.5,272,246,285,280,249,278,279,292,293,220,275,287,244,276,289,277,295,296,243,288,214,217,286,282,284,227,226,265,274,298,228.5,291,294,299,283,304,302,307,316,312,314,310,308,311,290,157,309,301,303,305,168,313,315,306,300,232.5,223,218,253,183,266,1,281,221,203,205,270,225,213,195,208,224,207,215,242,186,297,188,177,189,239.5,187,202,193,159,101],[2,2,2,7,7,7,7,7,7,7,45.5,94,88.5,45.5,45.5,91,45.5,94,45.5,114,45.5,186,97,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,117,45.5,84,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,84,45.5,45.5,88.5,45.5,45.5,45.5,45.5,45.5,94,45.5,90,111,45.5,45.5,45.5,100,102,45.5,45.5,45.5,84,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,45.5,84,155,45.5,45.5,45.5,45.5,107,45.5,45.5,45.5,45.5,92,101,110,84,105.5,84,311,84,98.5,122,121,96,103.5,115,124,113,103.5,118.5,112,109,136,98.5,137,138,133,105.5,141,139,149,171,250],[287,312,312,319.5,353.5,354,359.5,364.5,368,370,400,410,415.5,417.5,437.5,438,447,447,455.5,469,479,479,481,481.5,484.5,486,487.5,488.5,488.5,489.5,491.5,492.5,495.5,497.5,498.5,498.5,499.5,501.5,502.5,504.5,504.5,506.5,507,509.5,510.5,511.5,513.5,518.5,521.5,522.5,522.5,522.5,522.5,522.5,523,530.5,532.5,537.5,539.5,540.5,542.5,544.5,546.5,549,549.5,554,555,555.5,556.5,562.5,563,564,566.5,566.5,566.5,569.5,571.5,571.5,571.5,582.5,585.5,590.5,591.5,603.5,607.5,607.5,608.5,610.5,614.5,615,616,616.5,620.5,620.5,620.5,621,622.5,626.5,627.5,628.5,630.5,633,636,637,644.5,648,649,650,657.5,660,663,683,690.5,691,694,699,699.5,707.5,718,720,721,732.5,736,739,748,750,772,776,793,801,916]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-9-5" class="section level4 hasAnchor" number="5.4.4.9">
<h4><span class="header-section-number">5.4.4.9</span> CV 9<a href="id_05_adversarial_computational_control.html#cv-9-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-6cfe97f6b715b3ae67ad" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6cfe97f6b715b3ae67ad">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 3","GBM grid model 71","GBM grid model 7","GBM grid model 89","GBM grid model 41","GBM grid model 95","GBM grid model 12","GBM grid model 39","GBM grid model 58","GBM grid model 75","GBM grid model 69","GBM grid model 31","GBM grid model 92","GBM grid model 57","GBM grid model 99","GBM grid model 42","GBM grid model 44","GBM grid model 56","GBM grid model 62","GBM grid model 86","GBM grid model 45","XGBoost grid model 71","GBM grid model 78","GBM grid model 33","GBM grid model 84","Super learner neural network","GBM grid model 16","GBM model 5","Neural network grid model 65","GBM grid model 14","GBM grid model 17","GBM grid model 1","GBM grid model 18","GBM grid model 11","GBM grid model 13","Neural network grid model 43","GBM grid model 35","GBM grid model 43","GBM grid model 28","GBM grid model 32","GBM grid model 2","GBM grid model 25","GBM grid model 26","GBM grid model 5","GBM grid model 47","GBM grid model 6","GBM grid model 65","GBM grid model 15","GBM grid model 49","GBM grid model 46","GBM grid model 37","GBM grid model 51","GBM grid model 100","GBM grid model 29","GBM grid model 61","GBM grid model 9","GBM grid model 19","GBM grid model 20","GBM grid model 21","GBM grid model 55","GBM grid model 76","GBM grid model 4","GBM grid model 22","GBM grid model 30","Super learner final","Neural network grid model 92","GBM grid model 50","GBM grid model 72","GBM grid model 80","GBM grid model 90","GBM grid model 53","GBM grid model 23","GBM grid model 81","GBM grid model 93","GBM grid model 68","GBM grid model 64","GBM grid model 94","GBM grid model 88","GBM grid model 63","GBM grid model 36","GBM grid model 98","Neural network grid model 30","XGBoost grid model 31","XGBoost grid model 26","GBM grid model 82","XGBoost grid model 46","XGBoost grid model 43","XGBoost grid model 29","XGBoost grid model 72","XGBoost grid model 65","GBM grid model 54","XGBoost grid model 100","XGBoost grid model 99","XGBoost grid model 62","XGBoost grid model 64","XGBoost grid model 83","XGBoost grid model 90","Neural network grid model 81","GBM grid model 83","XGBoost grid model 32","XGBoost grid model 56","XGBoost grid model 40","GBM grid model 97","XGBoost grid model 96","GBM grid model 66","XGBoost grid model 10","XGBoost grid model 57","Neural network grid model 41","GBM grid model 85","GBM grid model 27","GBM grid model 96","Neural network grid model 87","GLM model","GBM grid model 73","XGBoost grid model 66","GBM grid model 60","GBM grid model 74","GBM grid model 52","GBM grid model 48","GBM grid model 87","Neural network grid model 12","XGBoost grid model 61","GBM grid model 24","Neural network grid model 23","Neural network grid model 99","Neural network grid model 34","GBM grid model 59","GBM grid model 38","GBM grid model 79","Neural network grid model 56","Neural network grid model 2","Neural network grid model 21","Neural network grid model 64","Neural network grid model 36","Neural network grid model 86","Neural network grid model 46"],[0.4175,0.384,0.5749,0.5342,0.4562,0.3569,0.7542,0.6759,0.7542,0.7997,0.5342,0.4175,0.4175,0.8809,0.6258,0.6759,0.4175,0.4946,null,0.3569,0.2942,0.0017,0.7542,0.845,0.5342,0.3246,0.7542,0.384,0.1602,0.7997,0.4946,0.7217,0.8809,0.7542,0.9214,0.2064,1,1,0.9214,0.9214,0.2616,0.4562,0.845,0.845,0.9214,0.384,0.4946,0.7542,0.7542,0.8809,0.845,0.7997,0.8809,0.7542,0.7997,0.8809,0.7542,0.8809,0.7217,0.8809,0.8809,0.6258,0.6759,0.7217,0.4562,0.001,0.5749,0.7217,0.9214,0.8809,0.7997,0.9792,0.9214,0.7997,0.2317,0.7217,0.845,0.2942,0.5749,0.3569,0.4175,0.0924,0.5749,0.5749,0.5342,0.001,0.5342,0.4946,0.5342,0.4946,0.6759,0.4175,0.4946,0.5749,0.384,0.4562,0.5342,0.0033,1,0.4562,0.384,0.4175,0.7542,0.4175,0.845,0.3569,0.3569,0.0077,0.9214,0.3246,0.5749,0.0051,0.7217,0.3569,0.2942,0.3246,0.7542,0.6258,0.384,0.3569,0.0042,0.384,0.384,0.001,0.1245,0.001,0.1602,0.384,0.1419,0.0021,0.0673,0.0785,0.0011,0.001,0.0145,0.001],[0.2252,0.2049,0.0591,0.0591,0.0954,0.1056,0.0294,0.0785,0.0294,0.02,0.0543,0.1304,0.0294,0.02,0.0425,0.0274,0.0785,0.0857,0.0186,0.1471,0.2252,null,0.0225,0.0137,0.0425,0.2049,0.0186,0.0954,0.1304,0.0071,0.0425,0.0071,0.0071,0.0071,0.0071,0.1844,0.0071,0.0071,0.0071,0.0071,0.1304,0.0857,0.0071,0.0071,0.0071,0.0186,0.0368,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0167,0.0071,0.0071,0.0425,0.3797,0.0071,0.0071,0.0071,0.0071,0.0071,0.0126,0.0071,0.0071,0.0712,0.0071,0.0071,0.0605,0.0071,0.0857,0.0425,0.0785,0.0071,0.0071,0.0071,0.1844,0.0071,0.0071,0.0071,0.0071,0.0145,0.0071,0.0071,0.0071,0.0605,0.0071,0.0071,0.0857,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0071,0.0857,0.0071,0.0425,0.0227,0.1471,0.0785,0.0076,0.0559,0.0485,0.0071,0.0071,0.0076,0.0425,0.0712,0.0227,0.033,0.1304,0.0485,0.0466,0.0425,0.0071,0.1056,0.0605,0.0132,0.0392,0.0712,0.0425,0.0559,0.0425],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.0918,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,null,0.9125,0.8909,0.8909,0.8864,0.8909,0.8909,0.8909,0.8909,0.8909,0.8864,0.9125,0.8909,0.8864,0.9125,0.8864,0.8864,0.8864,0.8864,0.8864,0.0239,0.8864,0.8864,0.8909,0.8419,0.8864,0.8864,0.3724,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.686,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.1294,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.6344,0.7437,0.7437,0.8864,0.8864,0.8864,0.0054,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.1294,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.8864,0.1642,0.8864,0.8864,0.8864,0.1058,0.8864,0.8864,0.655,0.8419,0.8864,0.8864,0.8864,0.8864,0.3527,0.8864,0.815,0.1128,0.2892,0.0487,0.4223,0.8864,0.5567,0.1642,0.7146,0.6344,0.1551,0.2736,0.3908,0.1058],[90,102,59,42,63,104,48,54,39,13,77,89,87,30,61,70,93,76,1,101,109,245,40,16,79,122,9,96,169,3,69,8,2,10,12,136,7,5,17,14,119,99,25.5,15,18,88,83,35,19,22,25.5,20,45,37,23,11,47,46,49,31,24,62,53,51,67,279,43,34,32,28,44,4,36,33,115,50,38,107,55,108,105,176,52,57,68,309,58,65,60,64,29,80,66,73,103,72,71,243,6,81,78,82,41,75,21,97,92,214,27,100,74,203,94,95,112,135,56,85,91,98,221,86,117,265,161,289,137,114,154,287,179,183,273,281,233,274],[30,24,113,100,99,63,140,127,149,161,136,76,150,165,132,164,101,103,192,78,81,1,179,202,160,93,200,102,84,244.5,167,244.5,244.5,244.5,244.5,109,244.5,244.5,244.5,244.5,139,169,244.5,244.5,244.5,173,182,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,244.5,216,244.5,244.5,213,38,244.5,244.5,244.5,244.5,244.5,280,244.5,244.5,188,244.5,244.5,187,244.5,205,203,198,244.5,244.5,244.5,34,244.5,244.5,244.5,244.5,295,244.5,244.5,244.5,274,244.5,244.5,118,288,244.5,244.5,244.5,293,244.5,291,244.5,244.5,166,289,275,301,191,282,285,277,273,294,287,298,299,176,314,313,171,281,172,311,306,300,175,305,292,207,212,296,284],[208,221,220,249,231,238,225,232,229,243.5,212,223,209,250,193,224,235,211,243.5,226,204,18,242,251.5,202,186,245.5,248,138,259,228,255,261,257,258,190,271,274,267,270,218,214,266,278,276,241,237,260,277,275,272,280,256,268,284,296,262,263,264,283,290,245.5,265,269,234,32,279,288,291,297,282,251.5,292,298,216,286,299,233,285,203,215,120,304,302,293,1,307,303,312,311,247,301,316,310,195,313,314,77,294,305,308,306,254,315,287,300,309,123,295,222,219,114,227,240,210,213,289,281,253,236,135,239,207,88,170,70,206,273,197,47,176,140,87,89,136,54],[2,1,3,6,12,12,6,9,6,12,6,45,6,12,82,12,45,90.5,45,90.5,103,239,45,45,76.5,124,82,90.5,152,45,87.5,45,45,45,45,125,45,45,45,45,100,99,45,45,45,82,82,45,45,45,45,45,45,45,45,45,45,45,45,45,45,82,45,45,96,262,45,45,45,45,45,82,45,45,105,45,45,102,45,119,114,146,45,45,45,308,45,45,45,45,98,45,45,45,101,45,45,237,87.5,45,45,45,90.5,45,82,45,45,188,82,104,107,200,109,93,121,112,94,82,97,106,214,108,116,229,172,254,133,95,138,284,135,196,256,248,207,267],[330,348,395,397,405,417,419,422,423,429.5,431,433,452,457,468,470,474,480.5,481.5,495.5,497,503,506,514.5,517.5,525,536.5,536.5,543,551.5,551.5,552.5,552.5,556.5,559.5,560,567.5,568.5,573.5,573.5,576,581,581,582.5,583.5,584,584,584.5,585.5,586.5,587,589.5,590.5,594.5,596.5,596.5,598.5,598.5,602.5,603.5,603.5,605.5,607.5,609.5,610,611,611.5,611.5,612.5,614.5,615.5,617.5,617.5,620.5,624,625.5,626.5,629,629.5,635,637,640,645.5,648.5,650.5,652,654.5,657.5,661.5,664.5,669,670.5,671.5,672.5,673,674.5,674.5,675,675.5,675.5,675.5,677.5,678.5,679.5,681,686.5,690.5,691,693,701,701,708,712,713,720,733,733,735,739,739,746,747,753,753,784,785,787,788,789,793,795,811,823,830,872,879]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cv-10-5" class="section level4 hasAnchor" number="5.4.4.10">
<h4><span class="header-section-number">5.4.4.10</span> CV 10<a href="id_05_adversarial_computational_control.html#cv-10-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-b490a91ec23471f78365" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b490a91ec23471f78365">{"x":{"filter":"none","vertical":false,"data":[["GBM grid model 68","GBM grid model 11","GBM grid model 58","GBM grid model 95","GBM grid model 55","XGBoost grid model 17","GBM grid model 52","GBM grid model 23","GBM grid model 86","GBM grid model 98","GBM grid model 82","GBM grid model 4","GBM grid model 73","GBM grid model 91","GBM grid model 60","GBM grid model 18","GBM grid model 96","GBM grid model 13","GBM grid model 29","GBM grid model 85","GBM grid model 14","GBM grid model 5","GBM grid model 20","GBM grid model 100","GBM grid model 35","GBM grid model 47","GBM grid model 39","GBM grid model 32","GBM grid model 6","GBM grid model 28","GBM grid model 61","GBM grid model 51","GBM grid model 48","GBM grid model 1","GBM grid model 3","GLM model","GBM grid model 36","GBM grid model 15","GBM grid model 21","GBM grid model 76","XGBoost grid model 81","GBM grid model 97","GBM model 5","GBM grid model 62","GBM grid model 66","GBM grid model 30","GBM grid model 46","XGBoost grid model 61","GBM grid model 80","GBM grid model 93","GBM grid model 24","GBM grid model 9","GBM grid model 43","GBM grid model 7","GBM grid model 63","GBM grid model 90","GBM grid model 16","GBM grid model 64","GBM grid model 50","GBM grid model 31","GBM grid model 94","GBM grid model 49","GBM grid model 81","GBM grid model 87","GBM grid model 12","GBM grid model 83","GBM grid model 54","GBM grid model 2","GBM grid model 84","GBM grid model 22","XGBoost grid model 31","XGBoost grid model 26","XGBoost grid model 43","GBM grid model 19","XGBoost grid model 56","GBM grid model 92","XGBoost grid model 65","GBM grid model 78","XGBoost grid model 72","GBM grid model 26","XGBoost grid model 32","XGBoost grid model 57","XGBoost grid model 29","XGBoost grid model 100","XGBoost grid model 90","XGBoost grid model 96","GBM grid model 37","XGBoost grid model 40","XGBoost grid model 83","GBM grid model 70","XGBoost grid model 99","Neural network grid model 2","GBM grid model 99","XGBoost grid model 62","GBM grid model 42","GBM grid model 33","XGBoost grid model 10","GBM grid model 56","GBM grid model 77","GBM grid model 25","GBM grid model 57","GBM grid model 53","GBM grid model 75","GBM grid model 88","GBM grid model 69","GBM grid model 72","GBM grid model 89","GBM grid model 74","GBM grid model 41","GBM grid model 38","GBM grid model 10","Super learner final","GBM grid model 17","Neural network grid model 76","Neural network grid model 8","GBM grid model 45","GBM grid model 79","GBM grid model 65","Neural network grid model 43","GBM grid model 44","GBM grid model 27","GBM grid model 71","XGBoost grid model 64","Neural network grid model 65","Neural network grid model 21","Neural network grid model 36","Neural network grid model 46"],[0.4555,1,0.6609,0.3754,0.6286,0.0816,0.3754,0.6286,0.3427,0.2471,0.5474,0.6609,0.2741,0.059,0.0816,0.9729,0.2741,0.9729,0.861,0.3754,0.6609,null,0.6609,0.6609,0.7528,0.861,0.219,0.6286,0.1304,0.6286,0.7068,0.7068,0.2741,0.5919,0.1712,0.4113,0.024,0.7068,0.6286,0.9729,0.1119,0.309,0.1304,0.7528,0.7068,0.5919,0.6609,0.1712,0.7528,0.6609,0.059,0.7068,0.5919,0.5919,0.5474,0.6286,0.8093,0.6286,0.5004,0.1712,0.7528,0.4113,0.5919,0.3754,0.5004,0.6609,0.861,0.0499,0.1712,0.219,0.3427,0.3754,0.3427,0.5474,0.2741,0.3754,0.219,0.3427,0.219,0.6609,0.2741,0.2471,0.1497,0.1949,0.2471,0.2741,0.6609,0.219,0.2741,0.0165,0.3427,0.0013,0.1497,0.2471,0.4113,0.7528,0.1497,0.1949,0.309,0.0956,0.6286,0.4113,0.6286,0.0956,0.219,0.3754,0.5004,0.6609,0.4555,0.0956,0.02,0.4113,0.4113,0.0006,0.0006,0.024,0.0499,0.1497,0.009,0.0694,0.1949,0.1949,0.0165,0.0008,0.0028,0.0006,0.0006],[0.8041,0.112,0.1281,0.2373,0.112,null,0.112,0.092,0.1697,0.6998,0.092,0.075,0.1688,0.4626,0.3535,0.0544,0.2664,0.0544,0.0544,0.0676,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.092,0.0544,0.1096,0.0544,0.0544,0.0544,0.0676,0.0544,0.1688,0.1697,0.2664,0.0544,0.0544,0.0544,0.3837,0.0803,0.2664,0.0544,0.0544,0.0544,0.0544,0.1235,0.0544,0.0544,0.2153,0.0544,0.0544,0.0544,0.0544,0.0544,0.059,0.0544,0.0544,0.1235,0.0544,0.0544,0.0544,0.0912,0.0678,0.0544,0.059,0.1017,0.0577,0.0544,0.0544,0.0544,0.0544,0.059,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.1915,0.0544,0.239,0.0544,0.0544,0.0835,0.0544,0.0544,0.075,0.1697,0.1017,0.0544,0.0544,0.0544,0.0835,0.0544,0.0544,0.0544,0.0544,0.0544,0.0544,0.1915,0.0544,0.0544,0.1354,0.1354,0.0544,0.0835,0.0544,0.1235,0.0544,0.0544,0.0544,0.0544,0.0912,0.0544,0.1354,0.1235],[null,null,null,null,null,0.0019,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,0.9153,0.9396,0.8967,0.9153,0.2961,0.9153,0.8967,0.9153,0.8967,0.8967,0.8967,0.8967,0.7242,0.8816,0.8967,0.9396,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.7869,0.8967,0.8967,0.8967,0.8967,0.4199,0.8967,0.7248,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.6006,0.8967,0.8967,0.8967,0.8468,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.6959,0.8967,0.2016,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8468,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.8967,0.5494,0.8967,0.8967,0.0115,0.0048,0.8468,0.5727,0.8967,0.0258,0.7572,0.7869,0.8967,0.5727,0.0156,0.019,0.0011,0.0104],[86,4,25,73,40,105,66,22,64,103,49,48,80,107,111,3,94,11,2,68,14,1,19,26,12,8,72,20,99,24,9,13,91,39,97,85,133,37,34,5,115,58,106,18,15,38,31,93,16,10,119,17,42,30,35,21,6,36,44,98,23,51,33,90,45,41,7,112,89,95,52,57,55,56,62,79,65,59,67,27.5,75,71,78,82,69,70,27.5,81,74,136,76,212,96,84,50,32,100,88,77,102,46,53,43,92,87,60,54,29,61,109,141,47,63,271,294,120,108,104,169,116,83,101,128,196,180,312,288],[13,97,85,57,98.5,1,98.5,118,82,26,117,124,94,40,45,170.5,59,170.5,170.5,126.5,170.5,170.5,170.5,170.5,170.5,170.5,109,170.5,108,170.5,170.5,170.5,126.5,170.5,101,88,47,170.5,170.5,170.5,69,141,77,170.5,170.5,170.5,170.5,91,170.5,170.5,84,170.5,170.5,170.5,170.5,170.5,198,170.5,170.5,129,170.5,170.5,170.5,137,200,170.5,216,106,143,170.5,170.5,170.5,170.5,199,170.5,170.5,170.5,209,170.5,225.5,170.5,170.5,170.5,170.5,170.5,170.5,225.5,170.5,170.5,140,170.5,75,170.5,170.5,222,232,170.5,223,220,208,227.5,230.5,230.5,239,238,229,227.5,291,255.5,245,204,253,280,115,95,266,284,255.5,248,294,312,282,290,274,311,205,303],[205,233,232,222,242,152,242,236,188,198,236,231,203,196,207,256,239,253,262,242,254,273,257,252,266,271,234,264,248,261,278,275,242,251,225,215,213,255,258,288,189,230,209,279,283,263,270,229,289,296,211,293,269,284,280,294,245,281,274,210,297,272,290,194,218,291,219,223,220,259,304,302,307,246,308,295,311,242,312,260,305,309,303,301,314,315,267,306,313,200,316,155,298,310,238,265,300,217,228,214,277,276,287,216,236,286,292,249.5,268,224,199,299,249.5,97,3,221,212,282,140,226,247,285,227,137,143,1,39],[1,4.5,4.5,2,4.5,136,4.5,36.5,88,97.5,36.5,36.5,74,114,102,36.5,74,36.5,36.5,36.5,36.5,36.5,36.5,36.5,36.5,36.5,74,36.5,36.5,36.5,36.5,36.5,36.5,36.5,74,109,105,36.5,36.5,36.5,128,74,111,36.5,36.5,36.5,36.5,95,36.5,36.5,103,36.5,36.5,36.5,36.5,36.5,74,36.5,36.5,90,36.5,36.5,36.5,110,74,36.5,99.5,106.5,99.5,36.5,36.5,36.5,36.5,74,36.5,36.5,36.5,74,36.5,74,36.5,36.5,36.5,36.5,36.5,36.5,74,36.5,36.5,120,36.5,158,36.5,36.5,92.5,74,36.5,92.5,101,104,82.5,74,74,90,87,74,82.5,97.5,85,94,129,85,96,209,311,108,118,85,176,106.5,112,90,113,171,194,316,298],[305,338.5,346.5,354,385,394,411,412.5,422,424.5,438.5,439.5,451,457,465,466,466,471,471,473,475,481,483,485,485,486,489,491,491.5,492,494,495,496,497,497,497,498,499,499,500,501,503,503,504,505,508,508,508,512,513,517,517,518,521,522,522,523,524,525,527,527,530,530,531,537,539,541.5,547.5,551.5,561,563,566,569,575,577,581,583,584,586,587,587,587,588,590,590,592,594,594,594,596,599,600,601,601,602.5,603,607,620.5,626,628,633,633.5,634.5,637,648,649,656,667,669.5,672,673,684,688.5,692,703,715,722,726.5,733,742.5,754,758,758,778,828,834,928]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Log loss adj. <i>p<\/i> value<\/th>\n      <th>MCC adj. <i>p<\/i> value<\/th>\n      <th>F_1 adj. <i>p<\/i> value<\/th>\n      <th>Accuracy adj. <i>p<\/i> value<\/th>\n      <th>Log loss rank<\/th>\n      <th>MCC rank<\/th>\n      <th>F_1 rank<\/th>\n      <th>Accuracy rank<\/th>\n      <th>Rank sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":1,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="final-evaluation-5" class="section level3 hasAnchor" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Final evaluation<a href="id_05_adversarial_computational_control.html#final-evaluation-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb133-1"><a href="id_05_adversarial_computational_control.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb133-2"><a href="id_05_adversarial_computational_control.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/model_training_grid_models_tx_ad.RData&quot;</span>)</span>
<span id="cb133-3"><a href="id_05_adversarial_computational_control.html#cb133-3" aria-hidden="true" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;/Users/renee/Downloads/toxicity_adversarial&quot;</span></span>
<span id="cb133-4"><a href="id_05_adversarial_computational_control.html#cb133-4" aria-hidden="true" tabindex="-1"></a>selected_models <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb133-5"><a href="id_05_adversarial_computational_control.html#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 52&quot;</span>, <span class="st">&quot;GBM grid model 95&quot;</span>, <span class="st">&quot;GBM grid model 48&quot;</span>,</span>
<span id="cb133-6"><a href="id_05_adversarial_computational_control.html#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 98&quot;</span>, <span class="st">&quot;GBM grid model 55&quot;</span>, <span class="st">&quot;GBM grid model 21&quot;</span>,</span>
<span id="cb133-7"><a href="id_05_adversarial_computational_control.html#cb133-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 23&quot;</span>, <span class="st">&quot;GBM grid model 54&quot;</span>, <span class="st">&quot;GBM grid model 3&quot;</span>,</span>
<span id="cb133-8"><a href="id_05_adversarial_computational_control.html#cb133-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GBM grid model 68&quot;</span></span>
<span id="cb133-9"><a href="id_05_adversarial_computational_control.html#cb133-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb133-10"><a href="id_05_adversarial_computational_control.html#cb133-10" aria-hidden="true" tabindex="-1"></a>logloss <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-11"><a href="id_05_adversarial_computational_control.html#cb133-11" aria-hidden="true" tabindex="-1"></a>MCC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-12"><a href="id_05_adversarial_computational_control.html#cb133-12" aria-hidden="true" tabindex="-1"></a>F1 <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-13"><a href="id_05_adversarial_computational_control.html#cb133-13" aria-hidden="true" tabindex="-1"></a>acc <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-14"><a href="id_05_adversarial_computational_control.html#cb133-14" aria-hidden="true" tabindex="-1"></a>EF <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-15"><a href="id_05_adversarial_computational_control.html#cb133-15" aria-hidden="true" tabindex="-1"></a>BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb133-16"><a href="id_05_adversarial_computational_control.html#cb133-16" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb133-17"><a href="id_05_adversarial_computational_control.html#cb133-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb133-18"><a href="id_05_adversarial_computational_control.html#cb133-18" aria-hidden="true" tabindex="-1"></a>  holdout_pred <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./other_data/toxicity_adversarial/outer_&quot;</span>, i, <span class="st">&quot;/cv_holdout_predictions.csv&quot;</span>))</span>
<span id="cb133-19"><a href="id_05_adversarial_computational_control.html#cb133-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;Neural network grid model&quot;</span>)) {</span>
<span id="cb133-20"><a href="id_05_adversarial_computational_control.html#cb133-20" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb133-21"><a href="id_05_adversarial_computational_control.html#cb133-21" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), dl_grid[[grid_num]])</span>
<span id="cb133-22"><a href="id_05_adversarial_computational_control.html#cb133-22" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb133-23"><a href="id_05_adversarial_computational_control.html#cb133-23" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM grid model&quot;</span>)) {</span>
<span id="cb133-24"><a href="id_05_adversarial_computational_control.html#cb133-24" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb133-25"><a href="id_05_adversarial_computational_control.html#cb133-25" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), gbm_grid[[grid_num]])</span>
<span id="cb133-26"><a href="id_05_adversarial_computational_control.html#cb133-26" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb133-27"><a href="id_05_adversarial_computational_control.html#cb133-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;GBM model&quot;</span>)) {</span>
<span id="cb133-28"><a href="id_05_adversarial_computational_control.html#cb133-28" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb133-29"><a href="id_05_adversarial_computational_control.html#cb133-29" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/GBM_&quot;</span>, grid_num))</span>
<span id="cb133-30"><a href="id_05_adversarial_computational_control.html#cb133-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost grid model&quot;</span>)) {</span>
<span id="cb133-31"><a href="id_05_adversarial_computational_control.html#cb133-31" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb133-32"><a href="id_05_adversarial_computational_control.html#cb133-32" aria-hidden="true" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">colnames</span>(holdout_pred), xgboost_grid[[grid_num]])</span>
<span id="cb133-33"><a href="id_05_adversarial_computational_control.html#cb133-33" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, m))</span>
<span id="cb133-34"><a href="id_05_adversarial_computational_control.html#cb133-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">startsWith</span>(selected_models[i], <span class="st">&quot;XGBoost model&quot;</span>)) {</span>
<span id="cb133-35"><a href="id_05_adversarial_computational_control.html#cb133-35" aria-hidden="true" tabindex="-1"></a>    grid_num <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_extract</span>(selected_models[i], <span class="st">&quot;[0-9]+&quot;</span>))</span>
<span id="cb133-36"><a href="id_05_adversarial_computational_control.html#cb133-36" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/XGBoost_&quot;</span>, grid_num))</span>
<span id="cb133-37"><a href="id_05_adversarial_computational_control.html#cb133-37" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner all models&quot;</span>) {</span>
<span id="cb133-38"><a href="id_05_adversarial_computational_control.html#cb133-38" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_iter_0&quot;</span>))</span>
<span id="cb133-39"><a href="id_05_adversarial_computational_control.html#cb133-39" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner final&quot;</span>) {</span>
<span id="cb133-40"><a href="id_05_adversarial_computational_control.html#cb133-40" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i))</span>
<span id="cb133-41"><a href="id_05_adversarial_computational_control.html#cb133-41" aria-hidden="true" tabindex="-1"></a>    files <span class="ot">&lt;-</span> files[<span class="fu">startsWith</span>(files, <span class="st">&quot;superlearner_iter&quot;</span>)]</span>
<span id="cb133-42"><a href="id_05_adversarial_computational_control.html#cb133-42" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, files[<span class="fu">length</span>(files)]))</span>
<span id="cb133-43"><a href="id_05_adversarial_computational_control.html#cb133-43" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner neural network&quot;</span>) {</span>
<span id="cb133-44"><a href="id_05_adversarial_computational_control.html#cb133-44" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_deeplearning&quot;</span>))</span>
<span id="cb133-45"><a href="id_05_adversarial_computational_control.html#cb133-45" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner GBM&quot;</span>) {</span>
<span id="cb133-46"><a href="id_05_adversarial_computational_control.html#cb133-46" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_gbm&quot;</span>))</span>
<span id="cb133-47"><a href="id_05_adversarial_computational_control.html#cb133-47" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (selected_models[i] <span class="sc">==</span> <span class="st">&quot;Super learner XGBoost&quot;</span>) {</span>
<span id="cb133-48"><a href="id_05_adversarial_computational_control.html#cb133-48" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/superlearner_xgboost&quot;</span>))</span>
<span id="cb133-49"><a href="id_05_adversarial_computational_control.html#cb133-49" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb133-50"><a href="id_05_adversarial_computational_control.html#cb133-50" aria-hidden="true" tabindex="-1"></a>    model <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;/outer_&quot;</span>, i, <span class="st">&quot;/&quot;</span>, <span class="fu">unlist</span>(<span class="fu">strsplit</span>(selected_models[i], <span class="st">&quot; &quot;</span>))[<span class="dv">1</span>]))</span>
<span id="cb133-51"><a href="id_05_adversarial_computational_control.html#cb133-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb133-52"><a href="id_05_adversarial_computational_control.html#cb133-52" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(<span class="fu">subset</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]], <span class="at">select =</span> <span class="sc">-</span>category))</span>
<span id="cb133-53"><a href="id_05_adversarial_computational_control.html#cb133-53" aria-hidden="true" tabindex="-1"></a>  y_true <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(outer_splits[[i]][[<span class="st">&quot;test&quot;</span>]]<span class="sc">$</span>category) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb133-54"><a href="id_05_adversarial_computational_control.html#cb133-54" aria-hidden="true" tabindex="-1"></a>  y_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">as.data.frame</span>(<span class="fu">h2o.predict</span>(model, tmp)))[, <span class="dv">3</span>]</span>
<span id="cb133-55"><a href="id_05_adversarial_computational_control.html#cb133-55" aria-hidden="true" tabindex="-1"></a>  y_pred_cls <span class="ot">&lt;-</span> <span class="fu">sapply</span>(y_pred, <span class="cf">function</span>(x) <span class="cf">if</span> (x <span class="sc">&gt;=</span> threshold) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb133-56"><a href="id_05_adversarial_computational_control.html#cb133-56" aria-hidden="true" tabindex="-1"></a>  logloss <span class="ot">&lt;-</span> <span class="fu">c</span>(logloss, <span class="fu">LogLoss</span>(<span class="at">y_pred =</span> y_pred, <span class="at">y_true =</span> y_true))</span>
<span id="cb133-57"><a href="id_05_adversarial_computational_control.html#cb133-57" aria-hidden="true" tabindex="-1"></a>  MCC <span class="ot">&lt;-</span> <span class="fu">c</span>(MCC, <span class="fu">mcc</span>(<span class="at">preds =</span> y_pred_cls, <span class="at">actuals =</span> y_true))</span>
<span id="cb133-58"><a href="id_05_adversarial_computational_control.html#cb133-58" aria-hidden="true" tabindex="-1"></a>  F1 <span class="ot">&lt;-</span> <span class="fu">c</span>(F1, <span class="fu">F1_Score</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb133-59"><a href="id_05_adversarial_computational_control.html#cb133-59" aria-hidden="true" tabindex="-1"></a>  acc <span class="ot">&lt;-</span> <span class="fu">c</span>(acc, <span class="fu">Accuracy</span>(<span class="at">y_pred =</span> y_pred_cls, <span class="at">y_true =</span> y_true))</span>
<span id="cb133-60"><a href="id_05_adversarial_computational_control.html#cb133-60" aria-hidden="true" tabindex="-1"></a>  EF <span class="ot">&lt;-</span> <span class="fu">c</span>(EF, <span class="fu">enrichment_factor</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">top =</span> <span class="fl">0.05</span>))</span>
<span id="cb133-61"><a href="id_05_adversarial_computational_control.html#cb133-61" aria-hidden="true" tabindex="-1"></a>  BEDROC <span class="ot">&lt;-</span> <span class="fu">c</span>(BEDROC, <span class="fu">bedroc</span>(<span class="at">x =</span> y_pred, <span class="at">y =</span> y_true, <span class="at">alpha =</span> <span class="dv">20</span>))</span>
<span id="cb133-62"><a href="id_05_adversarial_computational_control.html#cb133-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb133-63"><a href="id_05_adversarial_computational_control.html#cb133-63" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(logloss, MCC, F1, acc, EF, BEDROC, <span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_tx_ad.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb134-1"><a href="id_05_adversarial_computational_control.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/final_evaluation_tx_ad.RData&quot;</span>)</span>
<span id="cb134-2"><a href="id_05_adversarial_computational_control.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb134-3"><a href="id_05_adversarial_computational_control.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Metric =</span> <span class="fu">c</span>(<span class="st">&quot;Log loss&quot;</span>, <span class="st">&quot;MCC&quot;</span>, <span class="st">&quot;F&lt;sub&gt;1&lt;/sub&gt;&quot;</span>, <span class="st">&quot;Accuracy&quot;</span>, <span class="st">&quot;EF&quot;</span>, <span class="st">&quot;BEDROC&quot;</span>),</span>
<span id="cb134-4"><a href="id_05_adversarial_computational_control.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Mean ± s.e.m.</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb134-5"><a href="id_05_adversarial_computational_control.html#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(logloss), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(logloss), <span class="dv">3</span>)),</span>
<span id="cb134-6"><a href="id_05_adversarial_computational_control.html#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(MCC), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(MCC), <span class="dv">3</span>)),</span>
<span id="cb134-7"><a href="id_05_adversarial_computational_control.html#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(F1), <span class="dv">3</span>)),</span>
<span id="cb134-8"><a href="id_05_adversarial_computational_control.html#cb134-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(acc), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(acc), <span class="dv">3</span>)),</span>
<span id="cb134-9"><a href="id_05_adversarial_computational_control.html#cb134-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(EF), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(EF), <span class="dv">3</span>)),</span>
<span id="cb134-10"><a href="id_05_adversarial_computational_control.html#cb134-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">mean</span>(BEDROC), <span class="dv">3</span>), <span class="st">&quot; ± &quot;</span>, <span class="fu">round</span>(<span class="fu">sem</span>(BEDROC), <span class="dv">3</span>))</span>
<span id="cb134-11"><a href="id_05_adversarial_computational_control.html#cb134-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb134-12"><a href="id_05_adversarial_computational_control.html#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">check.names =</span> <span class="cn">FALSE</span></span>
<span id="cb134-13"><a href="id_05_adversarial_computational_control.html#cb134-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb134-14"><a href="id_05_adversarial_computational_control.html#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="htmlwidget-2b02296d0b0a59f6da92" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2b02296d0b0a59f6da92">{"x":{"filter":"none","vertical":false,"data":[["Log loss","MCC","F<sub>1<\/sub>","Accuracy","EF","BEDROC"],["0.654 ± 0.005","0.001 ± 0.012","0.047 ± 0.023","0.652 ± 0.007","0.956 ± 0.057","0.62 ± 0.023"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Metric<\/th>\n      <th>Mean ± s.e.m.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="overall-model-interpretation-1" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Overall model interpretation<a href="id_05_adversarial_computational_control.html#overall-model-interpretation-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb135"><pre class="sourceCode python fold-hide"><code class="sourceCode python"><span id="cb135-1"><a href="id_05_adversarial_computational_control.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> h2o</span>
<span id="cb135-2"><a href="id_05_adversarial_computational_control.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb135-3"><a href="id_05_adversarial_computational_control.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb135-4"><a href="id_05_adversarial_computational_control.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shap</span>
<span id="cb135-5"><a href="id_05_adversarial_computational_control.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb135-6"><a href="id_05_adversarial_computational_control.html#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> session_info</span></code></pre></div>
<div id="melanin-binding-regression-4" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Melanin binding (regression)<a href="id_05_adversarial_computational_control.html#melanin-binding-regression-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb136"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb136-1"><a href="id_05_adversarial_computational_control.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save train and test sets in csv format</span></span>
<span id="cb136-2"><a href="id_05_adversarial_computational_control.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb136-3"><a href="id_05_adversarial_computational_control.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb136-4"><a href="id_05_adversarial_computational_control.html#cb136-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb136-5"><a href="id_05_adversarial_computational_control.html#cb136-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/melanin_binding_adversarial/&quot;</span>, prefix)</span>
<span id="cb136-6"><a href="id_05_adversarial_computational_control.html#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>train, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/train_set.csv&quot;</span>))</span>
<span id="cb136-7"><a href="id_05_adversarial_computational_control.html#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>test, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/test_set.csv&quot;</span>))</span>
<span id="cb136-8"><a href="id_05_adversarial_computational_control.html#cb136-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb137"><pre class="sourceCode python fold-hide"><code class="sourceCode python"><span id="cb137-1"><a href="id_05_adversarial_computational_control.html#cb137-1" aria-hidden="true" tabindex="-1"></a>h2o.init(nthreads<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb137-2"><a href="id_05_adversarial_computational_control.html#cb137-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-3"><a href="id_05_adversarial_computational_control.html#cb137-3" aria-hidden="true" tabindex="-1"></a>dir_path <span class="op">=</span> <span class="st">&#39;/Users/renee/Downloads/melanin_binding_adversarial&#39;</span></span>
<span id="cb137-4"><a href="id_05_adversarial_computational_control.html#cb137-4" aria-hidden="true" tabindex="-1"></a>model_names <span class="op">=</span> [<span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_5&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, </span>
<span id="cb137-5"><a href="id_05_adversarial_computational_control.html#cb137-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;superlearner_iter_7&#39;</span>, <span class="st">&#39;superlearner_iter_7&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_7&#39;</span>, </span>
<span id="cb137-6"><a href="id_05_adversarial_computational_control.html#cb137-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;superlearner_iter_7&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>]</span>
<span id="cb137-7"><a href="id_05_adversarial_computational_control.html#cb137-7" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> []</span>
<span id="cb137-8"><a href="id_05_adversarial_computational_control.html#cb137-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb137-9"><a href="id_05_adversarial_computational_control.html#cb137-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Iter &#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;:&#39;</span>)</span>
<span id="cb137-10"><a href="id_05_adversarial_computational_control.html#cb137-10" aria-hidden="true" tabindex="-1"></a>    train <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/train_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb137-11"><a href="id_05_adversarial_computational_control.html#cb137-11" aria-hidden="true" tabindex="-1"></a>    X_train <span class="op">=</span> train.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb137-12"><a href="id_05_adversarial_computational_control.html#cb137-12" aria-hidden="true" tabindex="-1"></a>    test <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/test_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb137-13"><a href="id_05_adversarial_computational_control.html#cb137-13" aria-hidden="true" tabindex="-1"></a>    X_test <span class="op">=</span> test.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb137-14"><a href="id_05_adversarial_computational_control.html#cb137-14" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> h2o.load_model(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/&#39;</span> <span class="op">+</span> model_names[i])</span>
<span id="cb137-15"><a href="id_05_adversarial_computational_control.html#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> model_predict_(data):</span>
<span id="cb137-16"><a href="id_05_adversarial_computational_control.html#cb137-16" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> pd.DataFrame(data, columns<span class="op">=</span>X_train.columns)</span>
<span id="cb137-17"><a href="id_05_adversarial_computational_control.html#cb137-17" aria-hidden="true" tabindex="-1"></a>        h2o_data <span class="op">=</span> h2o.H2OFrame(data)</span>
<span id="cb137-18"><a href="id_05_adversarial_computational_control.html#cb137-18" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> model.predict(h2o_data)</span>
<span id="cb137-19"><a href="id_05_adversarial_computational_control.html#cb137-19" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> res.as_data_frame()</span>
<span id="cb137-20"><a href="id_05_adversarial_computational_control.html#cb137-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(res)</span>
<span id="cb137-21"><a href="id_05_adversarial_computational_control.html#cb137-21" aria-hidden="true" tabindex="-1"></a>    np.random.seed(<span class="dv">1</span>)</span>
<span id="cb137-22"><a href="id_05_adversarial_computational_control.html#cb137-22" aria-hidden="true" tabindex="-1"></a>    X_train_ <span class="op">=</span> X_train.iloc[np.random.choice(X_train.shape[<span class="dv">0</span>], <span class="dv">100</span>, replace<span class="op">=</span><span class="va">False</span>), :]</span>
<span id="cb137-23"><a href="id_05_adversarial_computational_control.html#cb137-23" aria-hidden="true" tabindex="-1"></a>    explainer <span class="op">=</span> shap.KernelExplainer(model_predict_, X_train_, link<span class="op">=</span><span class="st">&#39;identity&#39;</span>)</span>
<span id="cb137-24"><a href="id_05_adversarial_computational_control.html#cb137-24" aria-hidden="true" tabindex="-1"></a>    shap_values <span class="op">=</span> explainer.shap_values(X_test, nsamples<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb137-25"><a href="id_05_adversarial_computational_control.html#cb137-25" aria-hidden="true" tabindex="-1"></a>    shap_res.append(shap_values)</span>
<span id="cb137-26"><a href="id_05_adversarial_computational_control.html#cb137-26" aria-hidden="true" tabindex="-1"></a>    h2o.remove_all()</span>
<span id="cb137-27"><a href="id_05_adversarial_computational_control.html#cb137-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-28"><a href="id_05_adversarial_computational_control.html#cb137-28" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> pd.DataFrame(np.vstack(shap_res), columns<span class="op">=</span>X_train.columns)</span>
<span id="cb137-29"><a href="id_05_adversarial_computational_control.html#cb137-29" aria-hidden="true" tabindex="-1"></a>shap_res.to_csv(<span class="st">&#39;./other_data/mb_ad_shap_values_cv_data_sets.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<div class="sourceCode" id="cb138"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb138-1"><a href="id_05_adversarial_computational_control.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_mb_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb138-2"><a href="id_05_adversarial_computational_control.html#cb138-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">lapply</span>(outer_splits, <span class="cf">function</span>(x) x<span class="sc">$</span>test[<span class="sc">-</span><span class="fu">ncol</span>(mb_data)]))</span>
<span id="cb138-3"><a href="id_05_adversarial_computational_control.html#cb138-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rank</span>(x))</span>
<span id="cb138-4"><a href="id_05_adversarial_computational_control.html#cb138-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rescale</span>(x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)))</span>
<span id="cb138-5"><a href="id_05_adversarial_computational_control.html#cb138-5" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">read.csv</span>(<span class="st">&quot;./other_data/mb_ad_shap_values_cv_data_sets.csv&quot;</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>))</span>
<span id="cb138-6"><a href="id_05_adversarial_computational_control.html#cb138-6" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">rescale</span>(shap_values, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">from =</span> <span class="fu">range</span>(mb_data<span class="sc">$</span>log_intensity)))</span>
<span id="cb138-7"><a href="id_05_adversarial_computational_control.html#cb138-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-8"><a href="id_05_adversarial_computational_control.html#cb138-8" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> <span class="fu">apply</span>(shap_values, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">max</span>(x) <span class="sc">-</span> <span class="fu">min</span>(x))</span>
<span id="cb138-9"><a href="id_05_adversarial_computational_control.html#cb138-9" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> var_diff[<span class="fu">order</span>(<span class="sc">-</span>var_diff)]</span>
<span id="cb138-10"><a href="id_05_adversarial_computational_control.html#cb138-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb138-11"><a href="id_05_adversarial_computational_control.html#cb138-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>variable,</span>
<span id="cb138-12"><a href="id_05_adversarial_computational_control.html#cb138-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">shap =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>value,</span>
<span id="cb138-13"><a href="id_05_adversarial_computational_control.html#cb138-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_value =</span> <span class="fu">melt</span>(data)<span class="sc">$</span>value</span>
<span id="cb138-14"><a href="id_05_adversarial_computational_control.html#cb138-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb139"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb139-1"><a href="id_05_adversarial_computational_control.html#cb139-1" aria-hidden="true" tabindex="-1"></a>top_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(var_diff)[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span>
<span id="cb139-2"><a href="id_05_adversarial_computational_control.html#cb139-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>variable <span class="sc">%in%</span> top_vars, ]</span>
<span id="cb139-3"><a href="id_05_adversarial_computational_control.html#cb139-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>variable, <span class="at">levels =</span> <span class="fu">rev</span>(top_vars), <span class="at">labels =</span> <span class="fu">rev</span>(top_vars))</span>
<span id="cb139-4"><a href="id_05_adversarial_computational_control.html#cb139-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-5"><a href="id_05_adversarial_computational_control.html#cb139-5" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> shap, <span class="at">y =</span> variable)) <span class="sc">+</span></span>
<span id="cb139-6"><a href="id_05_adversarial_computational_control.html#cb139-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> top_vars, <span class="at">linetype =</span> <span class="st">&quot;dotted&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>) <span class="sc">+</span></span>
<span id="cb139-7"><a href="id_05_adversarial_computational_control.html#cb139-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb139-8"><a href="id_05_adversarial_computational_control.html#cb139-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> variable_value), <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">position =</span> <span class="st">&quot;auto&quot;</span>, <span class="at">stroke =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb139-9"><a href="id_05_adversarial_computational_control.html#cb139-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;#1f77b4&quot;</span>, <span class="at">mid =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#d62728&quot;</span>, <span class="at">midpoint =</span> <span class="dv">50</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>)) <span class="sc">+</span></span>
<span id="cb139-10"><a href="id_05_adversarial_computational_control.html#cb139-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb139-11"><a href="id_05_adversarial_computational_control.html#cb139-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb139-12"><a href="id_05_adversarial_computational_control.html#cb139-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="fl">1.5</span>, <span class="dv">8</span>, <span class="fl">1.5</span>, <span class="sc">-</span><span class="dv">3</span>),</span>
<span id="cb139-13"><a href="id_05_adversarial_computational_control.html#cb139-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb139-14"><a href="id_05_adversarial_computational_control.html#cb139-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb139-15"><a href="id_05_adversarial_computational_control.html#cb139-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb139-16"><a href="id_05_adversarial_computational_control.html#cb139-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb139-17"><a href="id_05_adversarial_computational_control.html#cb139-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb139-18"><a href="id_05_adversarial_computational_control.html#cb139-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb139-19"><a href="id_05_adversarial_computational_control.html#cb139-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb139-20"><a href="id_05_adversarial_computational_control.html#cb139-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb139-21"><a href="id_05_adversarial_computational_control.html#cb139-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb139-22"><a href="id_05_adversarial_computational_control.html#cb139-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb139-23"><a href="id_05_adversarial_computational_control.html#cb139-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb139-24"><a href="id_05_adversarial_computational_control.html#cb139-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb139-25"><a href="id_05_adversarial_computational_control.html#cb139-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title.align =</span> <span class="fl">0.5</span></span>
<span id="cb139-26"><a href="id_05_adversarial_computational_control.html#cb139-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb139-27"><a href="id_05_adversarial_computational_control.html#cb139-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb139-28"><a href="id_05_adversarial_computational_control.html#cb139-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="fu">guide_colourbar</span>(<span class="st">&quot;Variable</span><span class="sc">\n</span><span class="st">value</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">ticks =</span> <span class="cn">FALSE</span>, <span class="at">barheight =</span> <span class="dv">10</span>, <span class="at">barwidth =</span> <span class="fl">0.5</span>),</span>
<span id="cb139-29"><a href="id_05_adversarial_computational_control.html#cb139-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb139-30"><a href="id_05_adversarial_computational_control.html#cb139-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb139-31"><a href="id_05_adversarial_computational_control.html#cb139-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;SHAP value</span><span class="sc">\n</span><span class="st">(variable contribution to model prediction)&quot;</span>) <span class="sc">+</span></span>
<span id="cb139-32"><a href="id_05_adversarial_computational_control.html#cb139-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb139-33"><a href="id_05_adversarial_computational_control.html#cb139-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Melanin binding&quot;</span>)</span></code></pre></div>
<p><img src="figures/Supplementary%20Fig%207%20mb.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="cell-penetration-classification-4" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Cell-penetration (classification)<a href="id_05_adversarial_computational_control.html#cell-penetration-classification-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb140"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb140-1"><a href="id_05_adversarial_computational_control.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save train and test sets in csv format</span></span>
<span id="cb140-2"><a href="id_05_adversarial_computational_control.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb140-3"><a href="id_05_adversarial_computational_control.html#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb140-4"><a href="id_05_adversarial_computational_control.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb140-5"><a href="id_05_adversarial_computational_control.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/cell_penetration_adversarial/&quot;</span>, prefix)</span>
<span id="cb140-6"><a href="id_05_adversarial_computational_control.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>train, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/train_set.csv&quot;</span>))</span>
<span id="cb140-7"><a href="id_05_adversarial_computational_control.html#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>test, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/test_set.csv&quot;</span>))</span>
<span id="cb140-8"><a href="id_05_adversarial_computational_control.html#cb140-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb141"><pre class="sourceCode python fold-hide"><code class="sourceCode python"><span id="cb141-1"><a href="id_05_adversarial_computational_control.html#cb141-1" aria-hidden="true" tabindex="-1"></a>h2o.init(nthreads<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb141-2"><a href="id_05_adversarial_computational_control.html#cb141-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-3"><a href="id_05_adversarial_computational_control.html#cb141-3" aria-hidden="true" tabindex="-1"></a>dir_path <span class="op">=</span> <span class="st">&#39;/Users/renee/Downloads/cell_penetration_adversarial&#39;</span></span>
<span id="cb141-4"><a href="id_05_adversarial_computational_control.html#cb141-4" aria-hidden="true" tabindex="-1"></a>model_names <span class="op">=</span> [<span class="st">&#39;GBM_model_1671047404901_26693&#39;</span>, <span class="st">&#39;GBM_model_1671047404901_85146&#39;</span>, <span class="st">&#39;GBM_model_1671047404901_143415&#39;</span>, </span>
<span id="cb141-5"><a href="id_05_adversarial_computational_control.html#cb141-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;GBM_model_1671047404901_201211&#39;</span>, <span class="st">&#39;GBM_model_1671047404901_258107&#39;</span>, <span class="st">&#39;GBM_model_1671047404901_315866&#39;</span>,  </span>
<span id="cb141-6"><a href="id_05_adversarial_computational_control.html#cb141-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;GBM_model_1671047404901_373347&#39;</span>, <span class="st">&#39;GBM_model_1671047404901_432044&#39;</span>, <span class="st">&#39;GBM_model_1671122685293_29338&#39;</span>, </span>
<span id="cb141-7"><a href="id_05_adversarial_computational_control.html#cb141-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;GBM_model_1671122685293_86356&#39;</span>]</span>
<span id="cb141-8"><a href="id_05_adversarial_computational_control.html#cb141-8" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> []</span>
<span id="cb141-9"><a href="id_05_adversarial_computational_control.html#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb141-10"><a href="id_05_adversarial_computational_control.html#cb141-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Iter &#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;:&#39;</span>)</span>
<span id="cb141-11"><a href="id_05_adversarial_computational_control.html#cb141-11" aria-hidden="true" tabindex="-1"></a>    train <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/train_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb141-12"><a href="id_05_adversarial_computational_control.html#cb141-12" aria-hidden="true" tabindex="-1"></a>    X_train <span class="op">=</span> train.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb141-13"><a href="id_05_adversarial_computational_control.html#cb141-13" aria-hidden="true" tabindex="-1"></a>    test <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/test_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb141-14"><a href="id_05_adversarial_computational_control.html#cb141-14" aria-hidden="true" tabindex="-1"></a>    X_test <span class="op">=</span> test.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb141-15"><a href="id_05_adversarial_computational_control.html#cb141-15" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> h2o.load_model(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/&#39;</span> <span class="op">+</span> model_names[i])</span>
<span id="cb141-16"><a href="id_05_adversarial_computational_control.html#cb141-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> model_predict_(data):</span>
<span id="cb141-17"><a href="id_05_adversarial_computational_control.html#cb141-17" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> pd.DataFrame(data, columns<span class="op">=</span>X_train.columns)</span>
<span id="cb141-18"><a href="id_05_adversarial_computational_control.html#cb141-18" aria-hidden="true" tabindex="-1"></a>        h2o_data <span class="op">=</span> h2o.H2OFrame(data)</span>
<span id="cb141-19"><a href="id_05_adversarial_computational_control.html#cb141-19" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> model.predict(h2o_data)</span>
<span id="cb141-20"><a href="id_05_adversarial_computational_control.html#cb141-20" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> res.as_data_frame().iloc[:,<span class="dv">2</span>]</span>
<span id="cb141-21"><a href="id_05_adversarial_computational_control.html#cb141-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(res)</span>
<span id="cb141-22"><a href="id_05_adversarial_computational_control.html#cb141-22" aria-hidden="true" tabindex="-1"></a>    np.random.seed(<span class="dv">1</span>)</span>
<span id="cb141-23"><a href="id_05_adversarial_computational_control.html#cb141-23" aria-hidden="true" tabindex="-1"></a>    X_train_ <span class="op">=</span> X_train.iloc[np.random.choice(X_train.shape[<span class="dv">0</span>], <span class="dv">100</span>, replace<span class="op">=</span><span class="va">False</span>), :]</span>
<span id="cb141-24"><a href="id_05_adversarial_computational_control.html#cb141-24" aria-hidden="true" tabindex="-1"></a>    explainer <span class="op">=</span> shap.KernelExplainer(model_predict_, X_train_, link<span class="op">=</span><span class="st">&#39;identity&#39;</span>)</span>
<span id="cb141-25"><a href="id_05_adversarial_computational_control.html#cb141-25" aria-hidden="true" tabindex="-1"></a>    shap_values <span class="op">=</span> explainer.shap_values(X_test, nsamples<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb141-26"><a href="id_05_adversarial_computational_control.html#cb141-26" aria-hidden="true" tabindex="-1"></a>    shap_res.append(shap_values)</span>
<span id="cb141-27"><a href="id_05_adversarial_computational_control.html#cb141-27" aria-hidden="true" tabindex="-1"></a>    h2o.remove_all()</span>
<span id="cb141-28"><a href="id_05_adversarial_computational_control.html#cb141-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-29"><a href="id_05_adversarial_computational_control.html#cb141-29" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> pd.DataFrame(np.vstack(shap_res), columns<span class="op">=</span>X_train.columns)</span>
<span id="cb141-30"><a href="id_05_adversarial_computational_control.html#cb141-30" aria-hidden="true" tabindex="-1"></a>shap_res.to_csv(<span class="st">&#39;./other_data/cpp_ad_shap_values_cv_data_sets.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<div class="sourceCode" id="cb142"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb142-1"><a href="id_05_adversarial_computational_control.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_cpp_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb142-2"><a href="id_05_adversarial_computational_control.html#cb142-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">lapply</span>(outer_splits, <span class="cf">function</span>(x) x<span class="sc">$</span>test[<span class="sc">-</span><span class="fu">ncol</span>(cpp_data)]))</span>
<span id="cb142-3"><a href="id_05_adversarial_computational_control.html#cb142-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rank</span>(x))</span>
<span id="cb142-4"><a href="id_05_adversarial_computational_control.html#cb142-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rescale</span>(x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)))</span>
<span id="cb142-5"><a href="id_05_adversarial_computational_control.html#cb142-5" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/cpp_ad_shap_values_cv_data_sets.csv&quot;</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb142-6"><a href="id_05_adversarial_computational_control.html#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="id_05_adversarial_computational_control.html#cb142-7" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> <span class="fu">apply</span>(shap_values, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">max</span>(x) <span class="sc">-</span> <span class="fu">min</span>(x))</span>
<span id="cb142-8"><a href="id_05_adversarial_computational_control.html#cb142-8" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> var_diff[<span class="fu">order</span>(<span class="sc">-</span>var_diff)]</span>
<span id="cb142-9"><a href="id_05_adversarial_computational_control.html#cb142-9" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb142-10"><a href="id_05_adversarial_computational_control.html#cb142-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>variable,</span>
<span id="cb142-11"><a href="id_05_adversarial_computational_control.html#cb142-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">shap =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>value,</span>
<span id="cb142-12"><a href="id_05_adversarial_computational_control.html#cb142-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_value =</span> <span class="fu">melt</span>(data)<span class="sc">$</span>value</span>
<span id="cb142-13"><a href="id_05_adversarial_computational_control.html#cb142-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb143"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb143-1"><a href="id_05_adversarial_computational_control.html#cb143-1" aria-hidden="true" tabindex="-1"></a>top_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(var_diff)[<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>]</span>
<span id="cb143-2"><a href="id_05_adversarial_computational_control.html#cb143-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>variable <span class="sc">%in%</span> top_vars, ]</span>
<span id="cb143-3"><a href="id_05_adversarial_computational_control.html#cb143-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>variable, <span class="at">levels =</span> <span class="fu">rev</span>(top_vars), <span class="at">labels =</span> <span class="fu">rev</span>(top_vars))</span>
<span id="cb143-4"><a href="id_05_adversarial_computational_control.html#cb143-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-5"><a href="id_05_adversarial_computational_control.html#cb143-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> shap, <span class="at">y =</span> variable)) <span class="sc">+</span></span>
<span id="cb143-6"><a href="id_05_adversarial_computational_control.html#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> top_vars, <span class="at">linetype =</span> <span class="st">&quot;dotted&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-7"><a href="id_05_adversarial_computational_control.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb143-8"><a href="id_05_adversarial_computational_control.html#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> variable_value), <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">position =</span> <span class="st">&quot;auto&quot;</span>, <span class="at">stroke =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb143-9"><a href="id_05_adversarial_computational_control.html#cb143-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;#1f77b4&quot;</span>, <span class="at">mid =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#d62728&quot;</span>, <span class="at">midpoint =</span> <span class="dv">50</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>)) <span class="sc">+</span></span>
<span id="cb143-10"><a href="id_05_adversarial_computational_control.html#cb143-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb143-11"><a href="id_05_adversarial_computational_control.html#cb143-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb143-12"><a href="id_05_adversarial_computational_control.html#cb143-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="fl">1.5</span>, <span class="dv">8</span>, <span class="fl">1.5</span>, <span class="sc">-</span><span class="dv">3</span>),</span>
<span id="cb143-13"><a href="id_05_adversarial_computational_control.html#cb143-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-14"><a href="id_05_adversarial_computational_control.html#cb143-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-15"><a href="id_05_adversarial_computational_control.html#cb143-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-16"><a href="id_05_adversarial_computational_control.html#cb143-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb143-17"><a href="id_05_adversarial_computational_control.html#cb143-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb143-18"><a href="id_05_adversarial_computational_control.html#cb143-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb143-19"><a href="id_05_adversarial_computational_control.html#cb143-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb143-20"><a href="id_05_adversarial_computational_control.html#cb143-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb143-21"><a href="id_05_adversarial_computational_control.html#cb143-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb143-22"><a href="id_05_adversarial_computational_control.html#cb143-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb143-23"><a href="id_05_adversarial_computational_control.html#cb143-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb143-24"><a href="id_05_adversarial_computational_control.html#cb143-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb143-25"><a href="id_05_adversarial_computational_control.html#cb143-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title.align =</span> <span class="fl">0.5</span></span>
<span id="cb143-26"><a href="id_05_adversarial_computational_control.html#cb143-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb143-27"><a href="id_05_adversarial_computational_control.html#cb143-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb143-28"><a href="id_05_adversarial_computational_control.html#cb143-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="fu">guide_colourbar</span>(<span class="st">&quot;Variable</span><span class="sc">\n</span><span class="st">value</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">ticks =</span> <span class="cn">FALSE</span>, <span class="at">barheight =</span> <span class="dv">10</span>, <span class="at">barwidth =</span> <span class="fl">0.5</span>),</span>
<span id="cb143-29"><a href="id_05_adversarial_computational_control.html#cb143-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb143-30"><a href="id_05_adversarial_computational_control.html#cb143-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb143-31"><a href="id_05_adversarial_computational_control.html#cb143-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;SHAP value</span><span class="sc">\n</span><span class="st">(variable contribution to model prediction)&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-32"><a href="id_05_adversarial_computational_control.html#cb143-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-33"><a href="id_05_adversarial_computational_control.html#cb143-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Cell-penetration&quot;</span>)</span></code></pre></div>
<p><img src="figures/Supplementary%20Fig%207%20cpp.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="toxicity-classification-4" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Toxicity (classification)<a href="id_05_adversarial_computational_control.html#toxicity-classification-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb144"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb144-1"><a href="id_05_adversarial_computational_control.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save train and test sets in csv format</span></span>
<span id="cb144-2"><a href="id_05_adversarial_computational_control.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb144-3"><a href="id_05_adversarial_computational_control.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb144-4"><a href="id_05_adversarial_computational_control.html#cb144-4" aria-hidden="true" tabindex="-1"></a>  prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;outer_&quot;</span>, i)</span>
<span id="cb144-5"><a href="id_05_adversarial_computational_control.html#cb144-5" aria-hidden="true" tabindex="-1"></a>  exp_dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;/Users/renee/Downloads/toxicity_adversarial/&quot;</span>, prefix)</span>
<span id="cb144-6"><a href="id_05_adversarial_computational_control.html#cb144-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>train, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/train_set.csv&quot;</span>))</span>
<span id="cb144-7"><a href="id_05_adversarial_computational_control.html#cb144-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(outer_splits[[i]]<span class="sc">$</span>test, <span class="at">file =</span> <span class="fu">paste0</span>(exp_dir, <span class="st">&quot;/test_set.csv&quot;</span>))</span>
<span id="cb144-8"><a href="id_05_adversarial_computational_control.html#cb144-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb145"><pre class="sourceCode python fold-hide"><code class="sourceCode python"><span id="cb145-1"><a href="id_05_adversarial_computational_control.html#cb145-1" aria-hidden="true" tabindex="-1"></a>h2o.init(nthreads<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb145-2"><a href="id_05_adversarial_computational_control.html#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="id_05_adversarial_computational_control.html#cb145-3" aria-hidden="true" tabindex="-1"></a>dir_path <span class="op">=</span> <span class="st">&#39;/Users/renee/Downloads/toxicity_adversarial&#39;</span></span>
<span id="cb145-4"><a href="id_05_adversarial_computational_control.html#cb145-4" aria-hidden="true" tabindex="-1"></a>model_names <span class="op">=</span> [<span class="st">&#39;superlearner_iter_5&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_5&#39;</span>, <span class="st">&#39;superlearner_iter_7&#39;</span>,</span>
<span id="cb145-5"><a href="id_05_adversarial_computational_control.html#cb145-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;superlearner_iter_4&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_6&#39;</span>, <span class="st">&#39;superlearner_iter_5&#39;</span>,</span>
<span id="cb145-6"><a href="id_05_adversarial_computational_control.html#cb145-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&#39;superlearner_iter_4&#39;</span>, <span class="st">&#39;superlearner_iter_5&#39;</span>]</span>
<span id="cb145-7"><a href="id_05_adversarial_computational_control.html#cb145-7" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> []</span>
<span id="cb145-8"><a href="id_05_adversarial_computational_control.html#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb145-9"><a href="id_05_adversarial_computational_control.html#cb145-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Iter &#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;:&#39;</span>)</span>
<span id="cb145-10"><a href="id_05_adversarial_computational_control.html#cb145-10" aria-hidden="true" tabindex="-1"></a>    train <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/train_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb145-11"><a href="id_05_adversarial_computational_control.html#cb145-11" aria-hidden="true" tabindex="-1"></a>    X_train <span class="op">=</span> train.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb145-12"><a href="id_05_adversarial_computational_control.html#cb145-12" aria-hidden="true" tabindex="-1"></a>    test <span class="op">=</span> pd.read_csv(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/test_set.csv&#39;</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb145-13"><a href="id_05_adversarial_computational_control.html#cb145-13" aria-hidden="true" tabindex="-1"></a>    X_test <span class="op">=</span> test.iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb145-14"><a href="id_05_adversarial_computational_control.html#cb145-14" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> h2o.load_model(dir_path <span class="op">+</span> <span class="st">&#39;/outer_&#39;</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="st">&#39;/&#39;</span> <span class="op">+</span> model_names[i])</span>
<span id="cb145-15"><a href="id_05_adversarial_computational_control.html#cb145-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> model_predict_(data):</span>
<span id="cb145-16"><a href="id_05_adversarial_computational_control.html#cb145-16" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> pd.DataFrame(data, columns<span class="op">=</span>X_train.columns)</span>
<span id="cb145-17"><a href="id_05_adversarial_computational_control.html#cb145-17" aria-hidden="true" tabindex="-1"></a>        h2o_data <span class="op">=</span> h2o.H2OFrame(data)</span>
<span id="cb145-18"><a href="id_05_adversarial_computational_control.html#cb145-18" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> model.predict(h2o_data)</span>
<span id="cb145-19"><a href="id_05_adversarial_computational_control.html#cb145-19" aria-hidden="true" tabindex="-1"></a>        res <span class="op">=</span> res.as_data_frame().iloc[:,<span class="dv">2</span>] <span class="co"># 0:toxic; 1:non-toxic </span></span>
<span id="cb145-20"><a href="id_05_adversarial_computational_control.html#cb145-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(res)</span>
<span id="cb145-21"><a href="id_05_adversarial_computational_control.html#cb145-21" aria-hidden="true" tabindex="-1"></a>    np.random.seed(<span class="dv">1</span>)</span>
<span id="cb145-22"><a href="id_05_adversarial_computational_control.html#cb145-22" aria-hidden="true" tabindex="-1"></a>    X_train_ <span class="op">=</span> X_train.iloc[np.random.choice(X_train.shape[<span class="dv">0</span>], <span class="dv">100</span>, replace<span class="op">=</span><span class="va">False</span>), :]</span>
<span id="cb145-23"><a href="id_05_adversarial_computational_control.html#cb145-23" aria-hidden="true" tabindex="-1"></a>    explainer <span class="op">=</span> shap.KernelExplainer(model_predict_, X_train_, link<span class="op">=</span><span class="st">&#39;identity&#39;</span>)</span>
<span id="cb145-24"><a href="id_05_adversarial_computational_control.html#cb145-24" aria-hidden="true" tabindex="-1"></a>    shap_values <span class="op">=</span> explainer.shap_values(X_test, nsamples<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb145-25"><a href="id_05_adversarial_computational_control.html#cb145-25" aria-hidden="true" tabindex="-1"></a>    shap_res.append(shap_values)</span>
<span id="cb145-26"><a href="id_05_adversarial_computational_control.html#cb145-26" aria-hidden="true" tabindex="-1"></a>    h2o.remove_all()</span>
<span id="cb145-27"><a href="id_05_adversarial_computational_control.html#cb145-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-28"><a href="id_05_adversarial_computational_control.html#cb145-28" aria-hidden="true" tabindex="-1"></a>shap_res <span class="op">=</span> pd.DataFrame(np.vstack(shap_res), columns<span class="op">=</span>X_train.columns)</span>
<span id="cb145-29"><a href="id_05_adversarial_computational_control.html#cb145-29" aria-hidden="true" tabindex="-1"></a>shap_res.to_csv(<span class="st">&#39;./other_data/tx_ad_shap_values_cv_data_sets.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb146-1"><a href="id_05_adversarial_computational_control.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;./rdata/var_reduct_tx_train_test_splits_y_shuffled.RData&quot;</span>)</span>
<span id="cb146-2"><a href="id_05_adversarial_computational_control.html#cb146-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">lapply</span>(outer_splits, <span class="cf">function</span>(x) x<span class="sc">$</span>test[<span class="sc">-</span><span class="fu">ncol</span>(tx_data)]))</span>
<span id="cb146-3"><a href="id_05_adversarial_computational_control.html#cb146-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rank</span>(x))</span>
<span id="cb146-4"><a href="id_05_adversarial_computational_control.html#cb146-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">apply</span>(data, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">rescale</span>(x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)))</span>
<span id="cb146-5"><a href="id_05_adversarial_computational_control.html#cb146-5" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./other_data/tx_ad_shap_values_cv_data_sets.csv&quot;</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb146-6"><a href="id_05_adversarial_computational_control.html#cb146-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-7"><a href="id_05_adversarial_computational_control.html#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb146-8"><a href="id_05_adversarial_computational_control.html#cb146-8" aria-hidden="true" tabindex="-1"></a>ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data), <span class="dv">2500</span>)</span>
<span id="cb146-9"><a href="id_05_adversarial_computational_control.html#cb146-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data[ind, ]</span>
<span id="cb146-10"><a href="id_05_adversarial_computational_control.html#cb146-10" aria-hidden="true" tabindex="-1"></a>shap_values <span class="ot">&lt;-</span> shap_values[ind, ]</span>
<span id="cb146-11"><a href="id_05_adversarial_computational_control.html#cb146-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-12"><a href="id_05_adversarial_computational_control.html#cb146-12" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> <span class="fu">apply</span>(shap_values, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">max</span>(x) <span class="sc">-</span> <span class="fu">min</span>(x))</span>
<span id="cb146-13"><a href="id_05_adversarial_computational_control.html#cb146-13" aria-hidden="true" tabindex="-1"></a>var_diff <span class="ot">&lt;-</span> var_diff[<span class="fu">order</span>(<span class="sc">-</span>var_diff)]</span>
<span id="cb146-14"><a href="id_05_adversarial_computational_control.html#cb146-14" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb146-15"><a href="id_05_adversarial_computational_control.html#cb146-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>variable,</span>
<span id="cb146-16"><a href="id_05_adversarial_computational_control.html#cb146-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">shap =</span> <span class="fu">melt</span>(shap_values)<span class="sc">$</span>value,</span>
<span id="cb146-17"><a href="id_05_adversarial_computational_control.html#cb146-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_value =</span> <span class="fu">melt</span>(data)<span class="sc">$</span>value</span>
<span id="cb146-18"><a href="id_05_adversarial_computational_control.html#cb146-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb147-1"><a href="id_05_adversarial_computational_control.html#cb147-1" aria-hidden="true" tabindex="-1"></a>top_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(var_diff)[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span>
<span id="cb147-2"><a href="id_05_adversarial_computational_control.html#cb147-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>variable <span class="sc">%in%</span> top_vars, ]</span>
<span id="cb147-3"><a href="id_05_adversarial_computational_control.html#cb147-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>variable, <span class="at">levels =</span> <span class="fu">rev</span>(top_vars), <span class="at">labels =</span> <span class="fu">rev</span>(top_vars))</span>
<span id="cb147-4"><a href="id_05_adversarial_computational_control.html#cb147-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-5"><a href="id_05_adversarial_computational_control.html#cb147-5" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> shap, <span class="at">y =</span> variable)) <span class="sc">+</span></span>
<span id="cb147-6"><a href="id_05_adversarial_computational_control.html#cb147-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> top_vars, <span class="at">linetype =</span> <span class="st">&quot;dotted&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-7"><a href="id_05_adversarial_computational_control.html#cb147-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb147-8"><a href="id_05_adversarial_computational_control.html#cb147-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> variable_value), <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">position =</span> <span class="st">&quot;auto&quot;</span>, <span class="at">stroke =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb147-9"><a href="id_05_adversarial_computational_control.html#cb147-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;#1f77b4&quot;</span>, <span class="at">mid =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#d62728&quot;</span>, <span class="at">midpoint =</span> <span class="dv">50</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>)) <span class="sc">+</span></span>
<span id="cb147-10"><a href="id_05_adversarial_computational_control.html#cb147-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb147-11"><a href="id_05_adversarial_computational_control.html#cb147-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb147-12"><a href="id_05_adversarial_computational_control.html#cb147-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="fl">1.5</span>, <span class="dv">8</span>, <span class="fl">1.5</span>, <span class="sc">-</span><span class="dv">3</span>),</span>
<span id="cb147-13"><a href="id_05_adversarial_computational_control.html#cb147-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb147-14"><a href="id_05_adversarial_computational_control.html#cb147-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb147-15"><a href="id_05_adversarial_computational_control.html#cb147-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb147-16"><a href="id_05_adversarial_computational_control.html#cb147-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb147-17"><a href="id_05_adversarial_computational_control.html#cb147-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb147-18"><a href="id_05_adversarial_computational_control.html#cb147-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb147-19"><a href="id_05_adversarial_computational_control.html#cb147-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb147-20"><a href="id_05_adversarial_computational_control.html#cb147-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb147-21"><a href="id_05_adversarial_computational_control.html#cb147-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb147-22"><a href="id_05_adversarial_computational_control.html#cb147-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb147-23"><a href="id_05_adversarial_computational_control.html#cb147-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>),</span>
<span id="cb147-24"><a href="id_05_adversarial_computational_control.html#cb147-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">16</span>),</span>
<span id="cb147-25"><a href="id_05_adversarial_computational_control.html#cb147-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title.align =</span> <span class="fl">0.5</span></span>
<span id="cb147-26"><a href="id_05_adversarial_computational_control.html#cb147-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-27"><a href="id_05_adversarial_computational_control.html#cb147-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb147-28"><a href="id_05_adversarial_computational_control.html#cb147-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="fu">guide_colourbar</span>(<span class="st">&quot;Variable</span><span class="sc">\n</span><span class="st">value</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">ticks =</span> <span class="cn">FALSE</span>, <span class="at">barheight =</span> <span class="dv">10</span>, <span class="at">barwidth =</span> <span class="fl">0.5</span>),</span>
<span id="cb147-29"><a href="id_05_adversarial_computational_control.html#cb147-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb147-30"><a href="id_05_adversarial_computational_control.html#cb147-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-31"><a href="id_05_adversarial_computational_control.html#cb147-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;SHAP value</span><span class="sc">\n</span><span class="st">(variable contribution to model prediction)&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-32"><a href="id_05_adversarial_computational_control.html#cb147-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-33"><a href="id_05_adversarial_computational_control.html#cb147-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Non-toxic&quot;</span>)</span></code></pre></div>
<p><img src="figures/Supplementary%20Fig%207%20tx.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb148-1"><a href="id_05_adversarial_computational_control.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.2.2 (2022-10-31)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur ... 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] reticulate_1.25 ggforce_0.3.4   ggplot2_3.3.6   reshape2_1.4.4 
##  [5] DT_0.24         digest_0.6.29   stringr_1.4.1   rlist_0.4.6.2  
##  [9] enrichvs_0.0.5  scales_1.2.1    mltools_0.3.5   MLmetrics_1.1.1
## [13] h2o_3.38.0.2   
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.9        here_1.0.1        lattice_0.20-45   png_0.1-7        
##  [5] rprojroot_2.0.3   assertthat_0.2.1  utf8_1.2.2        R6_2.5.1         
##  [9] plyr_1.8.7        evaluate_0.16     highr_0.9         pillar_1.8.1     
## [13] rlang_1.0.4       rstudioapi_0.14   data.table_1.14.2 jquerylib_0.1.4  
## [17] R.utils_2.12.0    R.oo_1.25.0       Matrix_1.5-1      rmarkdown_2.16   
## [21] styler_1.8.0      htmlwidgets_1.5.4 RCurl_1.98-1.8    polyclip_1.10-0  
## [25] munsell_0.5.0     compiler_4.2.2    xfun_0.32         pkgconfig_2.0.3  
## [29] htmltools_0.5.3   tidyselect_1.1.2  tibble_3.1.8      bookdown_0.28    
## [33] codetools_0.2-18  fansi_1.0.3       dplyr_1.0.9       withr_2.5.0      
## [37] MASS_7.3-58.1     bitops_1.0-7      R.methodsS3_1.8.2 grid_4.2.2       
## [41] jsonlite_1.8.0    gtable_0.3.0      lifecycle_1.0.1   DBI_1.1.3        
## [45] magrittr_2.0.3    cli_3.3.0         stringi_1.7.8     cachem_1.0.6     
## [49] farver_2.1.1      bslib_0.4.0       vctrs_0.4.1       generics_0.1.3   
## [53] tools_4.2.2       R.cache_0.16.0    glue_1.6.2        tweenr_2.0.1     
## [57] purrr_0.3.4       crosstalk_1.2.0   fastmap_1.1.0     yaml_2.3.5       
## [61] colorspace_2.0-3  knitr_1.40        sass_0.4.2</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode python fold-hide"><code class="sourceCode python"><span id="cb150-1"><a href="id_05_adversarial_computational_control.html#cb150-1" aria-hidden="true" tabindex="-1"></a>session_info.show()</span></code></pre></div>
<pre><code>## -----
## h2o                 3.38.0.2
## matplotlib          3.6.2
## numpy               1.23.5
## pandas              1.5.2
## session_info        1.0.0
## shap                0.41.0
## -----
## Python 3.8.15 | packaged by conda-forge | (default, Nov 22 2022, 09:04:40) [Clang 14.0.6 ]
## macOS-10.16-x86_64-i386-64bit
## -----
## Session information updated at 2023-01-20 23:43</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="id_04_model_validation_and_interpretation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="id_06_small_data_set_demo.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["main_notebook.pdf", "PDF"]],
"search": false,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
